<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>GeekIBLi</title>
  
  <subtitle>For Coder</subtitle>
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2021-08-25T04:10:01.516Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>gaolei</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Redis-Keyè¿‡æœŸç›‘å¬å™¨</title>
    <link href="http://example.com/wiki/Redis-Key%E8%BF%87%E6%9C%9F%E7%9B%91%E5%90%AC%E5%99%A8/"/>
    <id>http://example.com/wiki/Redis-Key%E8%BF%87%E6%9C%9F%E7%9B%91%E5%90%AC%E5%99%A8/</id>
    <published>2021-08-25T03:40:30.000Z</published>
    <updated>2021-08-25T04:10:01.516Z</updated>
    
    <content type="html"><![CDATA[<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œæˆ‘åœ¨æŸå¹³å°å‘å¸ƒäº†ä¸€ç‰‡æ–‡ç« ï¼Œéœ€è¦åˆ¤æ–­è¿™ç‰‡æ–‡ç« åœ¨å‘å¸ƒä¹‹åï¼Œ10minï¼Œ30minï¼Œ1hï¼Œ3hï¼Œ1dï¼Œ3dæ—¶é—´ç‚¹çš„ç‚¹èµæ•°é‡å’Œå…³æ³¨æ•°é‡ï¼Œä½†æ˜¯å‘¢ï¼Œå¹³å°æ²¡æœ‰æä¾›ä¿¡æ¯ç»Ÿè®¡çš„åŠŸèƒ½ï¼Œé‚£ä¹ˆåªèƒ½æˆ‘å®šæœŸå»æŸ¥çœ‹ã€‚</p><p>é‚£ä¹ˆå¦‚ä½•å®ç°è¿™ä¸ªåŠŸèƒ½æˆ–è€…éœ€æ±‚å‘¢ï¼Ÿ</p><p>å½“æ—¶é¦–å…ˆæƒ³åˆ°çš„æ˜¯å®šæ—¶ä»»åŠ¡è½®è®­ï¼Œè¿™ç§æ–¹å¼å…¶å®æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯æ‚æ•°æ®åº“ï¼Œåˆ¤æ–­æ—¶é—´å°±å®Œäº‹äº†ï¼ŒåŒæ—¶è®°å½•è¿™ç‰‡æ–‡ç« å®šæ—¶ä»»åŠ¡æ‰§è¡Œäº†å¤šå°‘æ¬¡ï¼Œè¶…è¿‡ä¸€å®šæ¬¡æ•°ä¹‹åï¼Œè®¾ç½®æ ‡å¿—ä½ï¼Œé‚£ä¹ˆä¸‹æ¬¡å°±ä¸éœ€è¦ç­›é€‰è¿™äº›æ–‡ç« äº†ã€‚</p><p>ä½†æ˜¯è¿™ç§æ–¹å¼çš„ç¼ºç‚¹å¾ˆæ˜æ˜¾ï¼Œé¦–å…ˆå®šæ—¶ä»»åŠ¡æ‰§è¡Œçš„é¢‘ç‡æ”¹å¦‚ä½•è®¾ç½®å‘¢ï¼Œåº”è¯¥æ˜¯æœ€å°æ—¶é—´10minã€‚ä¹Ÿå°±æ˜¯æ¯10minæ‚ä¸€æ¬¡åº“ï¼ŒæŸ¥å‡ºæ¥çš„æ•°æ®ï¼Œå†å»æ‰§è¡Œä¸šåŠ¡é€»è¾‘ã€‚å½“æ•°æ®é‡å¾ˆå¤§çš„æ—¶å€™ï¼Œè¿™ä¸ªå®šæ—¶ä»»åŠ¡å°±ä¼šæ˜¾å¾—æ¯”è¾ƒé‡äº†ã€‚</p><p>äºæ˜¯æˆ‘æƒ³åˆ°äº†åŸºäºäº‹ä»¶è§¦å‘çš„æ–¹å¼å»è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ¯”å¦‚å»¶æ—¶é˜Ÿåˆ—ï¼Œredisè¿‡æœŸç­–ç•¥å•Šç­‰ç­‰ï¼Œåº”è¯¥æœ‰å¾ˆå¤šã€‚</p><p>è¿™é‡Œè¯´åˆ°å»¶æ—¶é˜Ÿåˆ—ï¼Œä¸ºä»€ä¹ˆæˆ‘æ²¡æœ‰ç”¨JDKè‡ªå¸¦çš„DelayQueueå‘¢ï¼Œæ¯•ç«Ÿè¿™äº›æ•°æ®éƒ½æ˜¯æ”¾åœ¨å†…å­˜ä¸­ï¼Œè¿˜æ˜¯è§£å†³ä¸äº†å†…å­˜çš„é—®é¢˜ã€‚</p><p>è¿˜æœ‰é€šè¿‡redisçš„sort setæ•°æ®ç»“æœæ¥åšçš„æ–¹å¼ï¼Œscoreå­˜çš„æ˜¯æ—¶é—´æˆ³ï¼Œè¿™ç§æ–¹å¼å…¶å®è¦æ¯”ç›´æ¥æ‚æ•°æ®åº“è¦å¥½çš„å¤šã€‚</p><p>æœ€åæˆ‘é€‰æ‹©ä½¿ç”¨redisè¿‡æœŸç›‘å¬ç­–ç•¥æ¥å®ç°è¿™ä¸ªéœ€æ±‚ï¼Œå„ä½å¤§ä½¬ä»¬æœ‰ä»€ä¹ˆåˆ«çš„æ–¹æ¡ˆå‘¢ï¼Ÿ</p><h2 id="redisè¿‡æœŸç›‘å¬"><a href="#redisè¿‡æœŸç›‘å¬" class="headerlink" title="redisè¿‡æœŸç›‘å¬"></a>redisè¿‡æœŸç›‘å¬</h2><h3 id="é¦–å…ˆè®¾ç½®ä¸€ä¸‹redisçš„é€šçŸ¥äº‹ä»¶"><a href="#é¦–å…ˆè®¾ç½®ä¸€ä¸‹redisçš„é€šçŸ¥äº‹ä»¶" class="headerlink" title="é¦–å…ˆè®¾ç½®ä¸€ä¸‹redisçš„é€šçŸ¥äº‹ä»¶"></a>é¦–å…ˆè®¾ç½®ä¸€ä¸‹redisçš„é€šçŸ¥äº‹ä»¶</h3><p>éœ€è¦è®¾ç½®redisé…ç½®æ–‡ä»¶ <code>notify-keyspace-events Ex</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> For instance <span class="keyword">if</span> keyspace events notification is enabled, and a client</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> performs a DEL operation on key <span class="string">&quot;foo&quot;</span> stored <span class="keyword">in</span> the Database 0, two</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> messages will be published via Pub/Sub:</span></span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br><span class="line"><span class="bash"><span class="comment"># PUBLISH __keyspace@0__:foo del</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> PUBLISH __keyevent@0__:del foo</span></span><br><span class="line"><span class="meta">#</span><span class="bash">  K     Keyspace events, published with __keyspace@&lt;db&gt;__ prefix.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">  E     Keyevent events, published with __keyevent@&lt;db&gt;__ prefix.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">  g     Generic commands (non-type specific) like DEL, EXPIRE, RENAME, ...</span></span><br><span class="line"><span class="meta">#</span><span class="bash">  $     String commands</span></span><br><span class="line"><span class="meta">#</span><span class="bash">  l     List commands</span></span><br><span class="line"><span class="meta">#</span><span class="bash">  s     Set commands</span></span><br><span class="line"><span class="meta">#</span><span class="bash">  h     Hash commands</span></span><br><span class="line"><span class="meta">#</span><span class="bash">  z     Sorted <span class="built_in">set</span> commands</span></span><br><span class="line"><span class="meta">#</span><span class="bash">  x     Expired events (events generated every time a key expires)</span></span><br><span class="line"><span class="meta">#</span><span class="bash">  e     Evicted events (events generated when a key is evicted <span class="keyword">for</span> maxmemory)</span></span><br><span class="line"><span class="meta">#</span><span class="bash">  t     Stream commands</span></span><br><span class="line"><span class="meta">#</span><span class="bash">  d     Module key <span class="built_in">type</span> events</span></span><br><span class="line"><span class="meta">#</span><span class="bash">  m     Key-miss events (Note: It is not included <span class="keyword">in</span> the <span class="string">&#x27;A&#x27;</span> class)</span></span><br><span class="line"><span class="meta">#</span><span class="bash">  A     Alias <span class="keyword">for</span> g<span class="variable">$lshzxetd</span>, so that the <span class="string">&quot;AKE&quot;</span> string means all the events</span></span><br><span class="line"><span class="meta">#</span><span class="bash">        (Except key-miss events <span class="built_in">which</span> are excluded from <span class="string">&#x27;A&#x27;</span> due to their</span></span><br><span class="line"><span class="meta">#</span><span class="bash">         unique nature).</span></span><br></pre></td></tr></table></figure><p>æˆ–è€…ä½¿ç”¨å‘½ä»¤ <code>CONFIG set notify-keyspace-events Ex</code></p><h3 id="Springboot-é›†æˆredis"><a href="#Springboot-é›†æˆredis" class="headerlink" title="Springboot é›†æˆredis"></a>Springboot é›†æˆredis</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Primary</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; <span class="function">RedisTemplate&lt;String, T&gt; <span class="title">getRedisTemplate</span><span class="params">(RedisConnectionFactory redisConnectionFactory)</span> </span>&#123;</span><br><span class="line">        RedisTemplate&lt;String, T&gt; redisTemplate = <span class="keyword">new</span> RedisTemplate&lt;&gt;();</span><br><span class="line">        redisTemplate.setConnectionFactory(redisConnectionFactory);</span><br><span class="line">        redisTemplate.setKeySerializer(<span class="keyword">new</span> StringRedisSerializer());</span><br><span class="line">        redisTemplate.setValueSerializer(<span class="keyword">new</span> GenericFastJsonRedisSerializer());</span><br><span class="line">        redisTemplate.setHashKeySerializer(<span class="keyword">new</span> StringRedisSerializer());</span><br><span class="line">        redisTemplate.setHashValueSerializer(<span class="keyword">new</span> GenericFastJsonRedisSerializer());</span><br><span class="line">        <span class="keyword">return</span> redisTemplate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RedisTemplate&lt;Object, Object&gt; <span class="title">redisTemplate</span><span class="params">(RedisConnectionFactory redisConnectionFactory)</span> </span>&#123;</span><br><span class="line">        RedisTemplate&lt;Object, Object&gt; redisTemplate = <span class="keyword">new</span> RedisTemplate&lt;&gt;();</span><br><span class="line">        redisTemplate.setConnectionFactory(redisConnectionFactory);</span><br><span class="line">        redisTemplate.setKeySerializer(<span class="keyword">new</span> StringRedisSerializer());</span><br><span class="line">        redisTemplate.setValueSerializer(<span class="keyword">new</span> GenericFastJsonRedisSerializer());</span><br><span class="line">        redisTemplate.setHashKeySerializer(<span class="keyword">new</span> StringRedisSerializer());</span><br><span class="line">        redisTemplate.setHashValueSerializer(<span class="keyword">new</span> GenericFastJsonRedisSerializer());</span><br><span class="line">        <span class="keyword">return</span> redisTemplate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> StringRedisTemplate <span class="title">stringRedisTemplate</span><span class="params">(RedisConnectionFactory redisConnectionFactory)</span> </span>&#123;</span><br><span class="line">        StringRedisTemplate stringRedisTemplate = <span class="keyword">new</span> StringRedisTemplate();</span><br><span class="line">        stringRedisTemplate.setConnectionFactory(redisConnectionFactory);</span><br><span class="line">        <span class="keyword">return</span> stringRedisTemplate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RedisScript&lt;Boolean&gt; <span class="title">hitMaxScript</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        DefaultRedisScript&lt;Boolean&gt; redisScript = <span class="keyword">new</span> DefaultRedisScript&lt;&gt;();</span><br><span class="line">        redisScript.setScriptSource(<span class="keyword">new</span> ResourceScriptSource(<span class="keyword">new</span> ClassPathResource(<span class="string">&quot;scripts/hitmax.lua&quot;</span>)));</span><br><span class="line">        redisScript.setResultType(Boolean.class);</span><br><span class="line">        <span class="keyword">return</span> redisScript;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function">RedisMessageListenerContainer <span class="title">container</span><span class="params">(RedisConnectionFactory redisConnectionFactory)</span> </span>&#123;</span><br><span class="line">        RedisMessageListenerContainer container = <span class="keyword">new</span> RedisMessageListenerContainer();</span><br><span class="line">        container.setConnectionFactory(redisConnectionFactory);</span><br><span class="line">        container.setTaskExecutor(executor());</span><br><span class="line">        Topic topic = <span class="keyword">new</span> PatternTopic(RedisKeyExpirationListener.LISTENER_PATTERN);</span><br><span class="line">        container.addMessageListener(<span class="keyword">new</span> RedisKeyExpirationListener(), topic);</span><br><span class="line">        <span class="keyword">return</span> container;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Executor <span class="title">executor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        ThreadPoolTaskExecutor executor = <span class="keyword">new</span> ThreadPoolTaskExecutor();</span><br><span class="line">        executor.setCorePoolSize(<span class="number">10</span>);</span><br><span class="line">        executor.setMaxPoolSize(<span class="number">20</span>);</span><br><span class="line">        executor.setQueueCapacity(<span class="number">100</span>);</span><br><span class="line">        executor.setKeepAliveSeconds(<span class="number">60</span>);</span><br><span class="line">        executor.setThreadNamePrefix(<span class="string">&quot;V-Thread&quot;</span>);</span><br><span class="line">        executor.setRejectedExecutionHandler(<span class="keyword">new</span> ThreadPoolExecutor.CallerRunsPolicy());</span><br><span class="line">        executor.initialize();</span><br><span class="line">        <span class="keyword">return</span> executor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰ç›‘å¬å™¨é‡å†™onMessageæ–¹æ³•"><a href="#è‡ªå®šä¹‰ç›‘å¬å™¨é‡å†™onMessageæ–¹æ³•" class="headerlink" title="è‡ªå®šä¹‰ç›‘å¬å™¨é‡å†™onMessageæ–¹æ³•"></a>è‡ªå®šä¹‰ç›‘å¬å™¨é‡å†™onMessageæ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisKeyExpirationListener</span> <span class="keyword">implements</span> <span class="title">MessageListener</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String LISTENER_PATTERN = <span class="string">&quot;__key*@*__:*&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onMessage</span><span class="params">(Message message, <span class="keyword">byte</span>[] pattern)</span> </span>&#123;</span><br><span class="line">        System.err.println(<span class="string">&quot;è§¦å‘ç›‘å¬å™¨ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">        String body = <span class="keyword">new</span> String(message.getBody());</span><br><span class="line">        String channel = <span class="keyword">new</span> String(message.getChannel());</span><br><span class="line">        System.out.println(<span class="string">&quot;onMessageÂ &gt;&gt;Â &quot;</span>+String.format(<span class="string">&quot;channel:Â %s,Â body:Â %s,Â bytes:Â %s&quot;</span>,channel,body,<span class="keyword">new</span> String(pattern)));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><p><img src="https://cdn.jsdelivr.net/gh/zabernism/image@main/gao/image-20210825120806260.png" alt="image-20210825120806260"></p><p><strong>é¡¹ç›®æ§åˆ¶å°ï¼š</strong></p><p><img src="https://cdn.jsdelivr.net/gh/zabernism/image@main/gao/image-20210825120841859.png" alt="image-20210825120841859"></p><p>âš ï¸ ç›‘å¬keyè¿‡æœŸæ—¶é—´æ˜¯ä¸èƒ½è·å–keyçš„valueçš„ï¼Œå› ä¸ºè¿™ä¸ªæ—¶é—´æ˜¯keyè¿‡æœŸæ‰è§¦å‘çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠå…³é”®ä¿¡æ¯æ”¾åˆ°keyä¸Šå°±è¡Œäº†</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h2&gt;&lt;p&gt;æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œæˆ‘åœ¨æŸå¹³å°å‘å¸ƒäº†ä¸€ç‰‡æ–‡ç« ï¼Œéœ€è¦åˆ¤æ–­è¿™ç‰‡æ–‡ç« åœ¨å‘å¸ƒä¹‹åï¼Œ10minï¼Œ30minï¼Œ1hï¼Œ3hï¼Œ1dï¼Œ3dæ—¶é—´ç‚¹çš„ç‚¹èµæ•°é‡å’Œå…³æ³¨æ•°é‡ï¼Œ</summary>
      
    
    
    
    
    <category term="Redis" scheme="http://example.com/tags/Redis/"/>
    
  </entry>
  
  <entry>
    <title>Webå¼€å‘åŸºç¡€-Servlet</title>
    <link href="http://example.com/wiki/Web%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80-Servlet/"/>
    <id>http://example.com/wiki/Web%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80-Servlet/</id>
    <published>2021-08-24T08:00:44.000Z</published>
    <updated>2021-08-24T10:00:32.561Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1ã€ä»€ä¹ˆæ˜¯servlet"><a href="#1ã€ä»€ä¹ˆæ˜¯servlet" class="headerlink" title="1ã€ä»€ä¹ˆæ˜¯servlet"></a>1ã€ä»€ä¹ˆæ˜¯servlet</h2><p><strong>ä»€ä¹ˆæ˜¯Serlvetï¼Ÿ</strong></p><p>Servletå…¶å®å°±æ˜¯ä¸€ä¸ª<strong>éµå¾ªServletå¼€å‘çš„javaç±»</strong>ã€‚Serlvetæ˜¯<strong>ç”±æœåŠ¡å™¨è°ƒç”¨çš„</strong>ï¼Œ<strong>è¿è¡Œåœ¨æœåŠ¡å™¨ç«¯</strong>ã€‚</p><p>æˆ‘ä»¬ç¼–å†™javaç¨‹åºæƒ³è¦åœ¨ç½‘ä¸Šå®ç° èŠå¤©ã€å‘å¸–ã€è¿™æ ·ä¸€äº›çš„äº¤äº’åŠŸèƒ½ï¼Œ<strong>æ™®é€šçš„javaæŠ€æœ¯æ˜¯éå¸¸éš¾å®Œæˆçš„</strong>ã€‚sunå…¬å¸å°±æä¾›äº†Serlvetè¿™ç§æŠ€æœ¯ä¾›æˆ‘ä»¬ä½¿ç”¨ã€‚</p><h2 id="2ã€servletç”Ÿå‘½å‘¨æœŸ"><a href="#2ã€servletç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="2ã€servletç”Ÿå‘½å‘¨æœŸ"></a>2ã€servletç”Ÿå‘½å‘¨æœŸ</h2><p><strong>Servletç”Ÿå‘½å‘¨æœŸå¯åˆ†ä¸º5ä¸ªæ­¥éª¤</strong></p><ol><li><strong>åŠ è½½Servlet</strong>ã€‚å½“Tomcatç¬¬ä¸€æ¬¡è®¿é—®Servletçš„æ—¶å€™ï¼Œ<strong>Tomcatä¼šè´Ÿè´£åˆ›å»ºServletçš„å®ä¾‹</strong></li><li><strong>åˆå§‹åŒ–</strong>ã€‚å½“Servletè¢«å®ä¾‹åŒ–åï¼ŒTomcatä¼š<strong>è°ƒç”¨init()æ–¹æ³•åˆå§‹åŒ–è¿™ä¸ªå¯¹è±¡</strong></li><li><strong>å¤„ç†æœåŠ¡</strong>ã€‚å½“æµè§ˆå™¨<strong>è®¿é—®Servlet</strong>çš„æ—¶å€™ï¼ŒServlet <strong>ä¼šè°ƒç”¨service()æ–¹æ³•å¤„ç†è¯·æ±‚</strong></li><li><strong>é”€æ¯</strong>ã€‚å½“Tomcatå…³é—­æ—¶æˆ–è€…æ£€æµ‹åˆ°Servletè¦ä»Tomcatåˆ é™¤çš„æ—¶å€™ä¼šè‡ªåŠ¨è°ƒç”¨destroy()æ–¹æ³•ï¼Œ<strong>è®©è¯¥å®ä¾‹é‡Šæ”¾æ‰æ‰€å çš„èµ„æº</strong>ã€‚ä¸€ä¸ªServletå¦‚æœé•¿æ—¶é—´ä¸è¢«ä½¿ç”¨çš„è¯ï¼Œä¹Ÿä¼šè¢«Tomcatè‡ªåŠ¨é”€æ¯</li><li><strong>å¸è½½</strong>ã€‚å½“Servletè°ƒç”¨å®Œdestroy()æ–¹æ³•åï¼Œç­‰å¾…åƒåœ¾å›æ”¶ã€‚å¦‚æœ<strong>æœ‰éœ€è¦å†æ¬¡ä½¿ç”¨è¿™ä¸ªServletï¼Œä¼šé‡æ–°è°ƒç”¨init()æ–¹æ³•è¿›è¡Œåˆå§‹åŒ–æ“ä½œ</strong>ã€‚</li></ol><ul><li>ç®€å•æ€»ç»“ï¼š<strong>åªè¦è®¿é—®Servletï¼Œservice()å°±ä¼šè¢«è°ƒç”¨ã€‚init()åªæœ‰ç¬¬ä¸€æ¬¡è®¿é—®Servletçš„æ—¶å€™æ‰ä¼šè¢«è°ƒç”¨ã€‚ destroy()åªæœ‰åœ¨Tomcatå…³é—­çš„æ—¶å€™æ‰ä¼šè¢«è°ƒç”¨ã€‚</strong></li></ul><h2 id="3ã€servletè°ƒç”¨æµç¨‹"><a href="#3ã€servletè°ƒç”¨æµç¨‹" class="headerlink" title="3ã€servletè°ƒç”¨æµç¨‹"></a>3ã€servletè°ƒç”¨æµç¨‹</h2><p><img src="https://cdn.jsdelivr.net/gh/zabernism/image@main/gao/image-20210824161820602.png" alt="image-20210824161820602"></p><h2 id="4ã€Servletæ˜¯å•ä¾‹çš„"><a href="#4ã€Servletæ˜¯å•ä¾‹çš„" class="headerlink" title="4ã€Servletæ˜¯å•ä¾‹çš„"></a>4ã€Servletæ˜¯å•ä¾‹çš„</h2><h3 id="4-1-ä¸ºä»€ä¹ˆServletæ˜¯å•ä¾‹çš„"><a href="#4-1-ä¸ºä»€ä¹ˆServletæ˜¯å•ä¾‹çš„" class="headerlink" title="4.1 ä¸ºä»€ä¹ˆServletæ˜¯å•ä¾‹çš„"></a>4.1 ä¸ºä»€ä¹ˆServletæ˜¯å•ä¾‹çš„</h3><p><strong>æµè§ˆå™¨å¤šæ¬¡å¯¹Servletçš„è¯·æ±‚</strong>ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œ<strong>æœåŠ¡å™¨åªåˆ›å»ºä¸€ä¸ªServletå¯¹è±¡</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒServletå¯¹è±¡<strong>ä¸€æ—¦åˆ›å»ºäº†</strong>ï¼Œå°±ä¼š<strong>é©»ç•™åœ¨å†…å­˜ä¸­ï¼Œä¸ºåç»­çš„è¯·æ±‚åšæœåŠ¡ï¼Œç›´åˆ°æœåŠ¡å™¨å…³é—­</strong>ã€‚</p><h3 id="4-2-æ¯æ¬¡è®¿é—®è¯·æ±‚å¯¹è±¡å’Œå“åº”å¯¹è±¡éƒ½æ˜¯æ–°çš„"><a href="#4-2-æ¯æ¬¡è®¿é—®è¯·æ±‚å¯¹è±¡å’Œå“åº”å¯¹è±¡éƒ½æ˜¯æ–°çš„" class="headerlink" title="4.2 æ¯æ¬¡è®¿é—®è¯·æ±‚å¯¹è±¡å’Œå“åº”å¯¹è±¡éƒ½æ˜¯æ–°çš„"></a>4.2 æ¯æ¬¡è®¿é—®è¯·æ±‚å¯¹è±¡å’Œå“åº”å¯¹è±¡éƒ½æ˜¯æ–°çš„</h3><p>å¯¹äº<strong>æ¯æ¬¡è®¿é—®è¯·æ±‚</strong>ï¼ŒServletå¼•æ“éƒ½ä¼š<strong>åˆ›å»ºä¸€ä¸ªæ–°çš„HttpServletRequestè¯·æ±‚å¯¹è±¡å’Œä¸€ä¸ªæ–°çš„HttpServletResponseå“åº”å¯¹è±¡</strong>ï¼Œç„¶åå°†è¿™ä¸¤<strong>ä¸ªå¯¹è±¡ä½œä¸ºå‚æ•°ä¼ é€’ç»™å®ƒè°ƒç”¨çš„Servletçš„service()æ–¹æ³•</strong>ï¼Œ<strong>serviceæ–¹æ³•å†æ ¹æ®è¯·æ±‚æ–¹å¼åˆ†åˆ«è°ƒç”¨doXXXæ–¹æ³•</strong>ã€‚</p><h3 id="4-3-çº¿ç¨‹å®‰å…¨é—®é¢˜"><a href="#4-3-çº¿ç¨‹å®‰å…¨é—®é¢˜" class="headerlink" title="4.3 çº¿ç¨‹å®‰å…¨é—®é¢˜"></a>4.3 çº¿ç¨‹å®‰å…¨é—®é¢˜</h3><p>å½“å¤šä¸ªç”¨æˆ·è®¿é—®Servletçš„æ—¶å€™ï¼Œ<strong>æœåŠ¡å™¨ä¼šä¸ºæ¯ä¸ªç”¨æˆ·åˆ›å»ºä¸€ä¸ªçº¿ç¨‹</strong>ã€‚<strong>å½“å¤šä¸ªç”¨æˆ·å¹¶å‘è®¿é—®Servletå…±äº«èµ„æºçš„æ—¶å€™å°±ä¼šå‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜</strong>ã€‚</p><p>åŸåˆ™ï¼š</p><ol><li>å¦‚æœä¸€ä¸ª<strong>å˜é‡éœ€è¦å¤šä¸ªç”¨æˆ·å…±äº«</strong>ï¼Œåˆ™åº”å½“åœ¨è®¿é—®è¯¥å˜é‡çš„æ—¶å€™ï¼Œ<strong>åŠ åŒæ­¥æœºåˆ¶synchronized (å¯¹è±¡){}</strong></li><li>å¦‚æœä¸€ä¸ªå˜é‡<strong>ä¸éœ€è¦å…±äº«</strong>ï¼Œåˆ™<strong>ç›´æ¥åœ¨ doGet() æˆ–è€… doPost()å®šä¹‰</strong>.è¿™æ ·ä¸ä¼šå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜</li></ol><h2 id="5ã€ServletConfigå¯¹è±¡"><a href="#5ã€ServletConfigå¯¹è±¡" class="headerlink" title="5ã€ServletConfigå¯¹è±¡"></a>5ã€ServletConfigå¯¹è±¡</h2><h3 id="5-1-ServletConfigå¯¹è±¡æœ‰ä»€ä¹ˆç”¨ï¼Ÿ"><a href="#5-1-ServletConfigå¯¹è±¡æœ‰ä»€ä¹ˆç”¨ï¼Ÿ" class="headerlink" title="5.1 ServletConfigå¯¹è±¡æœ‰ä»€ä¹ˆç”¨ï¼Ÿ"></a>5.1 ServletConfigå¯¹è±¡æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h3><blockquote><p>é€šè¿‡æ­¤å¯¹è±¡å¯ä»¥è¯»å–web.xmlä¸­é…ç½®çš„åˆå§‹åŒ–å‚æ•°ã€‚</p></blockquote><p>ç°åœ¨é—®é¢˜æ¥äº†ï¼Œ<strong>ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦æŠŠå‚æ•°ä¿¡æ¯æ”¾åˆ°web.xmlæ–‡ä»¶ä¸­å‘¢</strong>ï¼Ÿæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ç¨‹åºä¸­éƒ½å¯ä»¥å®šä¹‰å‚æ•°ä¿¡æ¯ï¼Œ<strong>æåˆ°web.xmlæ–‡ä»¶ä¸­åˆæœ‰ä»€ä¹ˆå¥½å¤„å‘¢</strong>ï¼Ÿ</p><p>å¥½å¤„å°±æ˜¯ï¼š<strong>èƒ½å¤Ÿè®©ä½ çš„ç¨‹åºæ›´åŠ çµæ´»</strong>ã€æ›´æ¢éœ€æ±‚ï¼Œæ›´æ”¹é…ç½®æ–‡ä»¶web.xmlå³å¯ï¼Œç¨‹åºä»£ç ä¸ç”¨æ”¹ã€‘</p><h3 id="5-2-è·å–web-xmlæ–‡ä»¶é…ç½®çš„å‚æ•°ä¿¡æ¯"><a href="#5-2-è·å–web-xmlæ–‡ä»¶é…ç½®çš„å‚æ•°ä¿¡æ¯" class="headerlink" title="5.2 è·å–web.xmlæ–‡ä»¶é…ç½®çš„å‚æ•°ä¿¡æ¯"></a>5.2 è·å–web.xmlæ–‡ä»¶é…ç½®çš„å‚æ•°ä¿¡æ¯</h3><p>ä¸ºDemo1è¿™ä¸ªServleté…ç½®ä¸€ä¸ªå‚æ•°ï¼Œå‚æ•°åæ˜¯nameï¼Œå€¼æ˜¯zhongfucheng</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>Demo1<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>zhongfucheng.web.Demo1<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">init-param</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>name<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>zhongfucheng<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>Demo1<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/Demo1<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨Servletä¸­è·å–ServletConfigå¯¹è±¡ï¼Œé€šè¿‡ServletConfigå¯¹è±¡è·å–åœ¨web.xmlæ–‡ä»¶é…ç½®çš„å‚æ•°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ServletConfig config = <span class="keyword">this</span>.getServletConfig();</span><br><span class="line">String name = config.getInitParameter(<span class="string">&quot;name&quot;</span>);</span><br></pre></td></tr></table></figure><h2 id="6ã€ServletContextå¯¹è±¡"><a href="#6ã€ServletContextå¯¹è±¡" class="headerlink" title="6ã€ServletContextå¯¹è±¡"></a>6ã€ServletContextå¯¹è±¡</h2><h3 id="6-1-ä»€ä¹ˆæ˜¯ServletContextå¯¹è±¡ï¼Ÿ"><a href="#6-1-ä»€ä¹ˆæ˜¯ServletContextå¯¹è±¡ï¼Ÿ" class="headerlink" title="6.1 ä»€ä¹ˆæ˜¯ServletContextå¯¹è±¡ï¼Ÿ"></a>6.1 ä»€ä¹ˆæ˜¯ServletContextå¯¹è±¡ï¼Ÿ</h3><p>å½“Tomcatå¯åŠ¨çš„æ—¶å€™ï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ªServletContextå¯¹è±¡ã€‚å®ƒ<strong>ä»£è¡¨ç€å½“å‰webç«™ç‚¹</strong></p><h3 id="6-2-ServletContextæœ‰ä»€ä¹ˆç”¨ï¼Ÿ"><a href="#6-2-ServletContextæœ‰ä»€ä¹ˆç”¨ï¼Ÿ" class="headerlink" title="6.2 ServletContextæœ‰ä»€ä¹ˆç”¨ï¼Ÿ"></a>6.2 ServletContextæœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h3><ol><li>ServletContextæ—¢ç„¶ä»£è¡¨ç€å½“å‰webç«™ç‚¹ï¼Œé‚£ä¹ˆ<strong>æ‰€æœ‰Servletéƒ½å…±äº«ç€ä¸€ä¸ªServletContextå¯¹è±¡</strong>ï¼Œæ‰€ä»¥<strong>Servletä¹‹é—´å¯ä»¥é€šè¿‡ServletContextå®ç°é€šè®¯</strong>ã€‚</li><li>ServletConfigè·å–çš„æ˜¯é…ç½®çš„æ˜¯å•ä¸ªServletçš„å‚æ•°ä¿¡æ¯ï¼Œ<strong>ServletContextå¯ä»¥è·å–çš„æ˜¯é…ç½®æ•´ä¸ªwebç«™ç‚¹çš„å‚æ•°ä¿¡æ¯</strong></li><li><strong>åˆ©ç”¨ServletContextè¯»å–webç«™ç‚¹çš„èµ„æºæ–‡ä»¶</strong></li><li>å®ç°Servletçš„è½¬å‘ã€ç”¨ServletContextè½¬å‘ä¸å¤šï¼Œä¸»è¦ç”¨requestè½¬å‘ã€‘</li></ol><h2 id="7ã€ä»€ä¹ˆæ˜¯ä¼šè¯æŠ€æœ¯"><a href="#7ã€ä»€ä¹ˆæ˜¯ä¼šè¯æŠ€æœ¯" class="headerlink" title="7ã€ä»€ä¹ˆæ˜¯ä¼šè¯æŠ€æœ¯"></a>7ã€ä»€ä¹ˆæ˜¯ä¼šè¯æŠ€æœ¯</h2><blockquote><p>åŸºæœ¬æ¦‚å¿µ: æŒ‡ç”¨æˆ·å¼€ä¸€ä¸ªæµè§ˆå™¨ï¼Œ<strong>è®¿é—®ä¸€ä¸ªç½‘ç«™,åªè¦ä¸å…³é—­è¯¥æµè§ˆå™¨ï¼Œä¸ç®¡è¯¥ç”¨æˆ·ç‚¹å‡»å¤šå°‘ä¸ªè¶…é“¾æ¥ï¼Œè®¿é—®å¤šå°‘èµ„æºï¼Œç›´åˆ°ç”¨æˆ·å…³é—­æµè§ˆå™¨ï¼Œæ•´ä¸ªè¿™ä¸ªè¿‡ç¨‹æˆ‘ä»¬ç§°ä¸ºä¸€æ¬¡ä¼šè¯</strong>.</p></blockquote><h3 id="7-1-ä»€ä¹ˆæ˜¯Cookie"><a href="#7-1-ä»€ä¹ˆæ˜¯Cookie" class="headerlink" title="7.1 ä»€ä¹ˆæ˜¯Cookie"></a>7.1 ä»€ä¹ˆæ˜¯Cookie</h3><blockquote><p>Cookieæ˜¯ç”±W3Cç»„ç»‡æå‡ºï¼Œæœ€æ—©ç”±netscapeç¤¾åŒºå‘å±•çš„ä¸€ç§æœºåˆ¶</p></blockquote><ul><li>ç½‘é¡µä¹‹é—´çš„<strong>äº¤äº’æ˜¯é€šè¿‡HTTPåè®®ä¼ è¾“æ•°æ®çš„ï¼Œ</strong>è€ŒHttpåè®®æ˜¯<strong>æ— çŠ¶æ€çš„åè®®</strong>ã€‚æ— çŠ¶æ€çš„åè®®æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ<strong>ä¸€æ—¦æ•°æ®æäº¤å®Œåï¼Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨çš„è¿æ¥å°±ä¼šå…³é—­ï¼Œå†æ¬¡äº¤äº’çš„æ—¶å€™éœ€è¦é‡æ–°å»ºç«‹æ–°çš„è¿æ¥</strong>ã€‚</li><li>æœåŠ¡å™¨æ— æ³•ç¡®è®¤ç”¨æˆ·çš„ä¿¡æ¯ï¼Œäºæ˜¯ä¹ï¼ŒW3Cå°±æå‡ºäº†ï¼š<strong>ç»™æ¯ä¸€ä¸ªç”¨æˆ·éƒ½å‘ä¸€ä¸ªé€šè¡Œè¯ï¼Œæ— è®ºè°è®¿é—®çš„æ—¶å€™éƒ½éœ€è¦æºå¸¦é€šè¡Œè¯ï¼Œè¿™æ ·æœåŠ¡å™¨å°±å¯ä»¥ä»é€šè¡Œè¯ä¸Šç¡®è®¤ç”¨æˆ·çš„ä¿¡æ¯</strong>ã€‚é€šè¡Œè¯å°±æ˜¯Cookie</li></ul><h4 id="7-11-Cookieçš„æµç¨‹"><a href="#7-11-Cookieçš„æµç¨‹" class="headerlink" title="7.11 Cookieçš„æµç¨‹"></a>7.11 Cookieçš„æµç¨‹</h4><p>æµè§ˆå™¨è®¿é—®æœåŠ¡å™¨ï¼Œ<strong>å¦‚æœæœåŠ¡å™¨éœ€è¦è®°å½•è¯¥ç”¨æˆ·çš„çŠ¶æ€ï¼Œå°±ä½¿ç”¨responseå‘æµè§ˆå™¨å‘é€ä¸€ä¸ªCookieï¼Œæµè§ˆå™¨ä¼šæŠŠCookieä¿å­˜èµ·æ¥ã€‚å½“æµè§ˆå™¨å†æ¬¡è®¿é—®æœåŠ¡å™¨çš„æ—¶å€™ï¼Œæµè§ˆå™¨ä¼šæŠŠè¯·æ±‚çš„ç½‘å€è¿åŒCookieä¸€åŒäº¤ç»™æœåŠ¡å™¨</strong>ã€‚</p><h4 id="7-1-2-Cookie-API"><a href="#7-1-2-Cookie-API" class="headerlink" title="7.1.2 Cookie API"></a>7.1.2 Cookie API</h4><ul><li>Cookieç±»ç”¨äºåˆ›å»ºä¸€ä¸ªCookieå¯¹è±¡</li><li>responseæ¥å£ä¸­å®šä¹‰äº†ä¸€ä¸ªaddCookieæ–¹æ³•ï¼Œå®ƒç”¨äºåœ¨å…¶å“åº”å¤´ä¸­å¢åŠ ä¸€ä¸ªç›¸åº”çš„Set-Cookieå¤´å­—æ®µ</li><li>requestæ¥å£ä¸­å®šä¹‰äº†ä¸€ä¸ªgetCookiesæ–¹æ³•ï¼Œå®ƒç”¨äºè·å–å®¢æˆ·ç«¯æäº¤çš„Cookie</li></ul><p><strong>å¸¸ç”¨çš„Cookieæ–¹æ³•ï¼š</strong></p><ul><li>public Cookie(String name,String value)</li><li>setValueä¸getValueæ–¹æ³•</li><li>setMaxAgeä¸getMaxAgeæ–¹æ³•</li><li>setPathä¸getPathæ–¹æ³•</li><li>setDomainä¸getDomainæ–¹æ³•</li><li>getNameæ–¹æ³•</li></ul><h4 id="7-1-3-cookieä½¿ç”¨æ–¹å¼"><a href="#7-1-3-cookieä½¿ç”¨æ–¹å¼" class="headerlink" title="7.1.3 cookieä½¿ç”¨æ–¹å¼"></a>7.1.3 cookieä½¿ç”¨æ–¹å¼</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">Cookie cookie = <span class="keyword">new</span> Cookie(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;zhongfucheng&quot;</span>);</span><br><span class="line">cookie.setMaxAge(<span class="number">1000</span>);</span><br><span class="line">response.addCookie(cookie);</span><br><span class="line">response.getWriter().write(<span class="string">&quot;æˆ‘å·²ç»å‘æµè§ˆå™¨å‘é€äº†ä¸€ä¸ªCookie&quot;</span>);</span><br></pre></td></tr></table></figure><h4 id="7-1-4-Cookieä¸å¯è·¨åŸŸåæ€§"><a href="#7-1-4-Cookieä¸å¯è·¨åŸŸåæ€§" class="headerlink" title="7.1.4 Cookieä¸å¯è·¨åŸŸåæ€§"></a>7.1.4 Cookieä¸å¯è·¨åŸŸåæ€§</h4><ul><li>å¾ˆå¤šäººåœ¨åˆå­¦çš„æ—¶å€™å¯èƒ½æœ‰ä¸€ä¸ªç–‘é—®ï¼šåœ¨è®¿é—®Servletçš„æ—¶å€™æµè§ˆå™¨<strong>æ˜¯ä¸æ˜¯æŠŠæ‰€æœ‰çš„Cookieéƒ½å¸¦è¿‡å»ç»™æœåŠ¡å™¨</strong>ï¼Œ<strong>ä¼šä¸ä¼šä¿®æ”¹äº†åˆ«çš„ç½‘ç«™çš„Cookie</strong></li><li>ç­”æ¡ˆæ˜¯å¦å®šçš„ã€‚Cookieå…·æœ‰ä¸å¯è·¨åŸŸåæ€§ã€‚æµè§ˆå™¨åˆ¤æ–­<strong>ä¸€ä¸ªç½‘ç«™æ˜¯å¦èƒ½æ“ä½œå¦ä¸€ä¸ªç½‘ç«™çš„Cookieçš„ä¾æ®æ˜¯åŸŸå</strong>ã€‚æ‰€ä»¥ä¸€èˆ¬æ¥è¯´ï¼Œ<strong>å½“æˆ‘è®¿é—®baiduçš„æ—¶å€™ï¼Œæµè§ˆå™¨åªä¼šæŠŠbaidué¢å‘çš„Cookieå¸¦è¿‡å»ï¼Œè€Œä¸ä¼šå¸¦ä¸Šgoogleçš„Cookieã€‚</strong></li></ul><h4 id="7-1-5-Cookieçš„æœ‰æ•ˆæœŸ"><a href="#7-1-5-Cookieçš„æœ‰æ•ˆæœŸ" class="headerlink" title="7.1.5 Cookieçš„æœ‰æ•ˆæœŸ"></a>7.1.5 Cookieçš„æœ‰æ•ˆæœŸ</h4><p><strong>Cookieçš„æœ‰æ•ˆæœŸæ˜¯é€šè¿‡setMaxAge()æ¥è®¾ç½®çš„</strong>ã€‚</p><ul><li>å¦‚æœMaxAgeä¸º<strong>æ­£æ•°</strong>ï¼Œ<strong>æµè§ˆå™¨ä¼šæŠŠCookieå†™åˆ°ç¡¬ç›˜ä¸­ï¼Œåªè¦è¿˜åœ¨MaxAgeç§’ä¹‹å‰ï¼Œç™»é™†ç½‘ç«™æ—¶è¯¥Cookieå°±æœ‰æ•ˆ</strong>ã€ä¸è®ºå…³é—­äº†æµè§ˆå™¨è¿˜æ˜¯ç”µè„‘ã€‘</li><li>å¦‚æœMaxAgeä¸º<strong>è´Ÿæ•°</strong>ï¼Œ<strong>Cookieæ˜¯ä¸´æ—¶æ€§çš„ï¼Œä»…åœ¨æœ¬æµè§ˆå™¨å†…æœ‰æ•ˆ</strong>ï¼Œå…³é—­æµè§ˆå™¨Cookieå°±å¤±æ•ˆäº†ï¼ŒCookieä¸ä¼šå†™åˆ°ç¡¬ç›˜ä¸­ã€‚Cookieé»˜è®¤å€¼å°±æ˜¯-1ã€‚è¿™ä¹Ÿå°±ä¸ºä»€ä¹ˆåœ¨æˆ‘ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œå¦‚æœæˆ‘æ²¡è®¾ç½®Cookieçš„æœ‰æ•ˆæœŸï¼Œåœ¨ç¡¬ç›˜ä¸­å°±æ‰¾ä¸åˆ°å¯¹åº”çš„æ–‡ä»¶ã€‚</li><li>å¦‚æœMaxAgeä¸º<strong>0</strong>ï¼Œåˆ™è¡¨ç¤º<strong>åˆ é™¤è¯¥Cookie</strong>ã€‚Cookieæœºåˆ¶æ²¡æœ‰æä¾›åˆ é™¤Cookieå¯¹åº”çš„æ–¹æ³•ï¼ŒæŠŠMaxAgeè®¾ç½®ä¸º0ç­‰åŒäºåˆ é™¤Cookie</li></ul><h4 id="7-1-6-Cookieçš„åŸŸå"><a href="#7-1-6-Cookieçš„åŸŸå" class="headerlink" title="7.1.6 Cookieçš„åŸŸå"></a>7.1.6 Cookieçš„åŸŸå</h4><p>Cookieçš„<strong>domainå±æ€§å†³å®šè¿è¡Œè®¿é—®Cookieçš„åŸŸåã€‚domainçš„å€¼è§„å®šä¸ºâ€œ.åŸŸåâ€</strong></p><p>Cookieçš„éšç§å®‰å…¨æœºåˆ¶å†³å®šCookieæ˜¯ä¸å¯è·¨åŸŸåçš„ã€‚ä¹Ÿå°±æ˜¯è¯´<a href="http://www.baidu.comå’Œwww.google.comä¹‹é—´çš„cookieæ˜¯äº’ä¸äº¤æ¥çš„.**å³ä½¿æ˜¯åŒä¸€çº§åŸŸå,ä¸åŒäºŒçº§åŸŸåä¹Ÿä¸èƒ½äº¤æ¥**./">www.baidu.comå’Œwww.google.comä¹‹é—´çš„Cookieæ˜¯äº’ä¸äº¤æ¥çš„ã€‚**å³ä½¿æ˜¯åŒä¸€çº§åŸŸåï¼Œä¸åŒäºŒçº§åŸŸåä¹Ÿä¸èƒ½äº¤æ¥**ã€‚</a></p><h3 id="7-2-ä»€ä¹ˆæ˜¯Session"><a href="#7-2-ä»€ä¹ˆæ˜¯Session" class="headerlink" title="7.2 ä»€ä¹ˆæ˜¯Session"></a>7.2 ä»€ä¹ˆæ˜¯Session</h3><p>Session æ˜¯å¦ä¸€ç§è®°å½•æµè§ˆå™¨çŠ¶æ€çš„æœºåˆ¶ã€‚ä¸åŒçš„æ˜¯Cookieä¿å­˜åœ¨æµè§ˆå™¨ä¸­ï¼ŒSessionä¿å­˜åœ¨æœåŠ¡å™¨ä¸­ã€‚ç”¨æˆ·ä½¿ç”¨æµè§ˆå™¨è®¿é—®æœåŠ¡å™¨çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨æŠŠç”¨æˆ·çš„ä¿¡æ¯ä»¥æŸç§çš„å½¢å¼è®°å½•åœ¨æœåŠ¡å™¨ï¼Œè¿™å°±æ˜¯Sessionã€‚</p><h4 id="7-2-1-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨SessionæŠ€æœ¯ï¼Ÿ"><a href="#7-2-1-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨SessionæŠ€æœ¯ï¼Ÿ" class="headerlink" title="7.2.1 ä¸ºä»€ä¹ˆè¦ä½¿ç”¨SessionæŠ€æœ¯ï¼Ÿ"></a>7.2.1 ä¸ºä»€ä¹ˆè¦ä½¿ç”¨SessionæŠ€æœ¯ï¼Ÿ</h4><p><strong>Sessionæ¯”Cookieä½¿ç”¨æ–¹ä¾¿ï¼ŒSessionå¯ä»¥è§£å†³Cookieè§£å†³ä¸äº†çš„äº‹æƒ…ã€Sessionå¯ä»¥å­˜å‚¨å¯¹è±¡ï¼ŒCookieåªèƒ½å­˜å‚¨å­—ç¬¦ä¸²ã€‚ã€‘ã€‚</strong></p><h4 id="7-2-2-Session-API"><a href="#7-2-2-Session-API" class="headerlink" title="7.2.2 Session API"></a>7.2.2 Session API</h4><ul><li>long getCreationTime();ã€è·å–Sessionè¢«åˆ›å»ºæ—¶é—´ã€‘</li><li><strong>String getId();ã€è·å–Sessionçš„idã€‘</strong></li><li>long getLastAccessedTime();ã€è¿”å›Sessionæœ€åæ´»è·ƒçš„æ—¶é—´ã€‘</li><li>ServletContext getServletContext();ã€è·å–ServletContextå¯¹è±¡ã€‘</li><li><strong>void setMaxInactiveInterval(int var1);ã€è®¾ç½®Sessionè¶…æ—¶æ—¶é—´ã€‘</strong></li><li><strong>int getMaxInactiveInterval();ã€è·å–Sessionè¶…æ—¶æ—¶é—´ã€‘</strong></li><li><strong>Object getAttribute(String var1);ã€è·å–Sessionå±æ€§</strong>ã€‘</li><li>Enumeration getAttributeNames();ã€è·å–Sessionæ‰€æœ‰çš„å±æ€§åã€‘</li><li><strong>void setAttribute(String var1, Object var2);ã€è®¾ç½®Sessionå±æ€§ã€‘</strong></li><li><strong>void removeAttribute(String var1);ã€ç§»é™¤Sessionå±æ€§ã€‘</strong></li><li><strong>void invalidate();ã€é”€æ¯è¯¥Sessionã€‘</strong></li><li>boolean isNew();ã€è¯¥Sessionæ˜¯å¦ä¸ºæ–°çš„ã€‘</li></ul><h4 id="7-2-3-sessionä½œä¸ºåŸŸå¯¹è±¡"><a href="#7-2-3-sessionä½œä¸ºåŸŸå¯¹è±¡" class="headerlink" title="7.2.3 sessionä½œä¸ºåŸŸå¯¹è±¡"></a>7.2.3 sessionä½œä¸ºåŸŸå¯¹è±¡</h4><p>Sessionæœ‰ç€requestå’ŒServletContextç±»ä¼¼çš„æ–¹æ³•ã€‚å…¶å®<strong>Sessionä¹Ÿæ˜¯ä¸€ä¸ªåŸŸå¯¹è±¡</strong>ã€‚Sessionä½œä¸ºä¸€ç§è®°å½•æµè§ˆå™¨çŠ¶æ€çš„æœºåˆ¶ï¼Œ<strong>åªè¦Sessionå¯¹è±¡æ²¡æœ‰è¢«é”€æ¯ï¼ŒServletä¹‹é—´å°±å¯ä»¥é€šè¿‡Sessionå¯¹è±¡å®ç°é€šè®¯</strong></p><p>ä¸€èˆ¬æ¥è®²ï¼Œå½“æˆ‘ä»¬è¦å­˜è¿›çš„æ˜¯<strong>ç”¨æˆ·çº§åˆ«çš„æ•°æ®å°±ç”¨Session</strong>ï¼Œé‚£ä»€ä¹ˆæ˜¯ç”¨æˆ·çº§åˆ«å‘¢ï¼Ÿ<strong>åªè¦æµè§ˆå™¨ä¸å…³é—­ï¼Œå¸Œæœ›æ•°æ®è¿˜åœ¨ï¼Œå°±ä½¿ç”¨Sessionæ¥ä¿å­˜</strong>ã€‚</p><h4 id="7-2-4-sessionç”Ÿå‘½å‘¨æœŸ"><a href="#7-2-4-sessionç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="7.2.4 sessionç”Ÿå‘½å‘¨æœŸ"></a>7.2.4 sessionç”Ÿå‘½å‘¨æœŸ</h4><p><strong>Sessionçš„ç”Ÿå‘½å‘¨æœŸå’Œæœ‰æ•ˆæœŸ</strong></p><ul><li><p>Sessionåœ¨ç”¨æˆ·<strong>ç¬¬ä¸€æ¬¡è®¿é—®æœåŠ¡å™¨Servletï¼Œjspç­‰åŠ¨æ€èµ„æºå°±ä¼šè¢«è‡ªåŠ¨åˆ›å»ºï¼ŒSessionå¯¹è±¡ä¿å­˜åœ¨å†…å­˜é‡Œ</strong>ï¼Œè¿™ä¹Ÿå°±ä¸ºä»€ä¹ˆä¸Šé¢çš„ä¾‹å­å¯ä»¥<strong>ç›´æ¥ä½¿ç”¨requestå¯¹è±¡è·å–å¾—åˆ°Sessionå¯¹è±¡</strong>ã€‚</p></li><li><p>å¦‚æœè®¿é—®HTML,IMAGEç­‰é™æ€èµ„æºSessionä¸ä¼šè¢«åˆ›å»ºã€‚</p></li><li><p>Sessionç”Ÿæˆåï¼Œåªè¦ç”¨æˆ·ç»§ç»­è®¿é—®ï¼ŒæœåŠ¡å™¨å°±ä¼šæ›´æ–°Sessionçš„æœ€åè®¿é—®æ—¶é—´ï¼Œæ— è®º<strong>æ˜¯å¦å¯¹Sessionè¿›è¡Œè¯»å†™ï¼ŒæœåŠ¡å™¨éƒ½ä¼šè®¤ä¸ºSessionæ´»è·ƒäº†ä¸€æ¬¡</strong>ã€‚</p></li><li><p>ç”±äºä¼šæœ‰è¶Šæ¥è¶Šå¤šçš„ç”¨æˆ·è®¿é—®æœåŠ¡å™¨ï¼Œå› æ­¤Sessionä¹Ÿä¼šè¶Šæ¥è¶Šå¤šã€‚<strong>ä¸ºäº†é˜²æ­¢å†…å­˜æº¢å‡ºï¼ŒæœåŠ¡å™¨ä¼šæŠŠé•¿æ—¶é—´æ²¡æœ‰æ´»è·ƒçš„Sessionä»å†…å­˜ä¸­åˆ é™¤ï¼Œè¿™ä¸ªæ—¶é—´ä¹Ÿå°±æ˜¯Sessionçš„è¶…æ—¶æ—¶é—´</strong>ã€‚</p></li><li><p>Sessionçš„è¶…æ—¶æ—¶é—´é»˜è®¤æ˜¯30åˆ†é’Ÿï¼Œæœ‰ä¸‰ç§æ–¹å¼å¯ä»¥å¯¹Sessionçš„è¶…æ—¶æ—¶é—´è¿›è¡Œä¿®æ”¹</p><p>1ã€ä¿®æ”¹tomcatçš„web.xml</p><p>2ã€ä¿®æ”¹é¡¹ç›®çš„web.xml</p><p>3ã€<code>httpSession.setMaxInactiveInterval(60);</code></p></li></ul><h3 id="7-3-Sessionå’ŒCookieçš„åŒºåˆ«"><a href="#7-3-Sessionå’ŒCookieçš„åŒºåˆ«" class="headerlink" title="7.3 Sessionå’ŒCookieçš„åŒºåˆ«"></a>7.3 Sessionå’ŒCookieçš„åŒºåˆ«</h3><ul><li><p><strong>ä»å­˜å‚¨æ–¹å¼ä¸Šæ¯”è¾ƒ</strong></p></li><li><ul><li>Cookieåªèƒ½å­˜å‚¨å­—ç¬¦ä¸²ï¼Œå¦‚æœè¦å­˜å‚¨éASCIIå­—ç¬¦ä¸²è¿˜è¦å¯¹å…¶ç¼–ç ã€‚</li><li>Sessionå¯ä»¥å­˜å‚¨ä»»ä½•ç±»å‹çš„æ•°æ®ï¼Œå¯ä»¥æŠŠSessionçœ‹æˆæ˜¯ä¸€ä¸ªå®¹å™¨</li></ul></li><li><p><strong>ä»éšç§å®‰å…¨ä¸Šæ¯”è¾ƒ</strong></p></li><li><ul><li><strong>Cookieå­˜å‚¨åœ¨æµè§ˆå™¨ä¸­ï¼Œå¯¹å®¢æˆ·ç«¯æ˜¯å¯è§çš„</strong>ã€‚ä¿¡æ¯å®¹æ˜“æ³„éœ²å‡ºå»ã€‚å¦‚æœä½¿ç”¨Cookieï¼Œæœ€å¥½å°†CookieåŠ å¯†</li><li><strong>Sessionå­˜å‚¨åœ¨æœåŠ¡å™¨ä¸Šï¼Œå¯¹å®¢æˆ·ç«¯æ˜¯é€æ˜çš„</strong>ã€‚ä¸å­˜åœ¨æ•æ„Ÿä¿¡æ¯æ³„éœ²é—®é¢˜ã€‚</li></ul></li><li><p><strong>ä»æœ‰æ•ˆæœŸä¸Šæ¯”è¾ƒ</strong></p></li><li><ul><li>Cookieä¿å­˜åœ¨ç¡¬ç›˜ä¸­ï¼Œåªéœ€è¦è®¾ç½®maxAgeå±æ€§ä¸ºæ¯”è¾ƒå¤§çš„æ­£æ•´æ•°ï¼Œå³ä½¿å…³é—­æµè§ˆå™¨ï¼ŒCookieè¿˜æ˜¯å­˜åœ¨çš„</li><li><strong>Sessionçš„ä¿å­˜åœ¨æœåŠ¡å™¨ä¸­ï¼Œè®¾ç½®maxInactiveIntervalå±æ€§å€¼æ¥ç¡®å®šSessionçš„æœ‰æ•ˆæœŸã€‚å¹¶ä¸”Sessionä¾èµ–äºåä¸ºJSESSIONIDçš„Cookieï¼Œè¯¥Cookieé»˜è®¤çš„maxAgeå±æ€§ä¸º-1ã€‚å¦‚æœå…³é—­äº†æµè§ˆå™¨ï¼Œè¯¥Sessionè™½ç„¶æ²¡æœ‰ä»æœåŠ¡å™¨ä¸­æ¶ˆäº¡ï¼Œä½†ä¹Ÿå°±å¤±æ•ˆäº†ã€‚</strong></li></ul></li><li><p><strong>ä»å¯¹æœåŠ¡å™¨çš„è´Ÿæ‹…æ¯”è¾ƒ</strong></p></li><li><ul><li>Sessionæ˜¯ä¿å­˜åœ¨æœåŠ¡å™¨çš„ï¼Œæ¯ä¸ªç”¨æˆ·éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªSessionï¼Œå¦‚æœæ˜¯å¹¶å‘è®¿é—®çš„ç”¨æˆ·éå¸¸å¤šï¼Œæ˜¯ä¸èƒ½ä½¿ç”¨Sessionçš„ï¼ŒSessionä¼šæ¶ˆè€—å¤§é‡çš„å†…å­˜ã€‚</li><li>Cookieæ˜¯ä¿å­˜åœ¨å®¢æˆ·ç«¯çš„ã€‚ä¸å ç”¨æœåŠ¡å™¨çš„èµ„æºã€‚åƒbaiduã€Sinaè¿™æ ·çš„å¤§å‹ç½‘ç«™ï¼Œä¸€èˆ¬éƒ½æ˜¯ä½¿ç”¨Cookieæ¥è¿›è¡Œä¼šè¯è·Ÿè¸ªã€‚</li></ul></li><li><p><strong>ä»æµè§ˆå™¨çš„æ”¯æŒä¸Šæ¯”è¾ƒ</strong></p></li><li><ul><li>å¦‚æœæµè§ˆå™¨ç¦ç”¨äº†Cookieï¼Œé‚£ä¹ˆCookieæ˜¯æ— ç”¨çš„äº†ï¼</li><li>å¦‚æœæµè§ˆå™¨ç¦ç”¨äº†Cookieï¼ŒSessionå¯ä»¥é€šè¿‡URLåœ°å€é‡å†™æ¥è¿›è¡Œä¼šè¯è·Ÿè¸ªã€‚</li></ul></li><li><p><strong>ä»è·¨åŸŸåä¸Šæ¯”è¾ƒ</strong></p></li><li><ul><li>Cookieå¯ä»¥è®¾ç½®domainå±æ€§æ¥å®ç°è·¨åŸŸå</li><li>Sessionåªåœ¨å½“å‰çš„åŸŸåå†…æœ‰æ•ˆï¼Œä¸å¯è·¨åŸŸå</li></ul></li></ul><h2 id="8ã€forwardå’Œredirectçš„åŒºåˆ«"><a href="#8ã€forwardå’Œredirectçš„åŒºåˆ«" class="headerlink" title="8ã€forwardå’Œredirectçš„åŒºåˆ«"></a>8ã€forwardå’Œredirectçš„åŒºåˆ«</h2><h3 id="8-1-å®é™…å‘ç”Ÿä½ç½®ä¸åŒï¼Œåœ°å€æ ä¸åŒ"><a href="#8-1-å®é™…å‘ç”Ÿä½ç½®ä¸åŒï¼Œåœ°å€æ ä¸åŒ" class="headerlink" title="8.1 å®é™…å‘ç”Ÿä½ç½®ä¸åŒï¼Œåœ°å€æ ä¸åŒ"></a>8.1 <strong>å®é™…å‘ç”Ÿä½ç½®ä¸åŒï¼Œåœ°å€æ ä¸åŒ</strong></h3><p>1ã€è½¬å‘æ˜¯å‘ç”Ÿåœ¨æœåŠ¡å™¨çš„<br>2ã€è½¬å‘æ˜¯ç”±æœåŠ¡å™¨è¿›è¡Œè·³è½¬çš„ï¼Œç»†å¿ƒçš„æœ‹å‹ä¼šå‘ç°ï¼Œåœ¨è½¬å‘çš„æ—¶å€™ï¼Œæµè§ˆå™¨çš„åœ°å€æ æ˜¯æ²¡æœ‰å‘ç”Ÿå˜åŒ–çš„ï¼Œåœ¨æˆ‘è®¿é—®Servlet111çš„æ—¶å€™ï¼Œå³ä½¿è·³è½¬åˆ°äº†Servlet222çš„é¡µé¢ï¼Œæµè§ˆå™¨çš„åœ°å€è¿˜æ˜¯Servlet111çš„ã€‚ä¹Ÿå°±æ˜¯è¯´æµè§ˆå™¨æ˜¯ä¸çŸ¥é“è¯¥è·³è½¬çš„åŠ¨ä½œï¼Œè½¬å‘æ˜¯å¯¹æµè§ˆå™¨é€æ˜çš„ã€‚é€šè¿‡ä¸Šé¢çš„è½¬å‘æ—¶åºå›¾æˆ‘ä»¬ä¹Ÿå¯ä»¥å‘ç°ï¼Œå®ç°è½¬å‘åªæ˜¯ä¸€æ¬¡çš„httpè¯·æ±‚ï¼Œä¸€æ¬¡è½¬å‘ä¸­requestå’Œresponseå¯¹è±¡éƒ½æ˜¯åŒä¸€ä¸ªã€‚è¿™ä¹Ÿè§£é‡Šäº†ï¼Œä¸ºä»€ä¹ˆå¯ä»¥ä½¿ç”¨requestä½œä¸ºåŸŸå¯¹è±¡è¿›è¡ŒServletä¹‹é—´çš„é€šè®¯ã€‚<br>3ã€é‡å®šå‘æ˜¯å‘ç”Ÿåœ¨æµè§ˆå™¨çš„ - é‡å®šå‘æ˜¯ç”±æµè§ˆå™¨è¿›è¡Œè·³è½¬çš„ï¼Œè¿›è¡Œé‡å®šå‘è·³è½¬çš„æ—¶å€™ï¼Œæµè§ˆå™¨çš„åœ°å€ä¼šå‘ç”Ÿå˜åŒ–çš„ã€‚æ›¾ç»ä»‹ç»è¿‡ï¼šå®ç°é‡å®šå‘çš„åŸç†æ˜¯ç”±responseçš„çŠ¶æ€ç å’ŒLocationå¤´ç»„åˆè€Œå®ç°çš„ã€‚è¿™æ˜¯ç”±æµè§ˆå™¨è¿›è¡Œçš„é¡µé¢è·³è½¬å®ç°é‡å®šå‘ä¼šå‘å‡ºä¸¤ä¸ªhttpè¯·æ±‚ï¼ŒrequeståŸŸå¯¹è±¡æ˜¯æ— æ•ˆçš„ï¼Œå› ä¸ºå®ƒä¸æ˜¯åŒä¸€ä¸ªrequestå¯¹è±¡</p><h3 id="8-2-ç”¨æ³•ä¸åŒ"><a href="#8-2-ç”¨æ³•ä¸åŒ" class="headerlink" title="8.2 ç”¨æ³•ä¸åŒ"></a>8.2 ç”¨æ³•ä¸åŒ</h3><p>å¾ˆå¤šäººéƒ½æä¸æ¸…æ¥šè½¬å‘å’Œé‡å®šå‘çš„æ—¶å€™ï¼Œèµ„æºåœ°å€ç©¶ç«Ÿæ€ä¹ˆå†™ã€‚æœ‰çš„æ—¶å€™è¦æŠŠåº”ç”¨åå†™ä¸Šï¼Œæœ‰çš„æ—¶å€™ä¸ç”¨æŠŠåº”ç”¨åå†™ä¸Šã€‚å¾ˆå®¹æ˜“æŠŠäººææ™•ã€‚è®°ä½ä¸€ä¸ªåŸåˆ™ï¼š <strong>ç»™æœåŠ¡å™¨ç”¨çš„ç›´æ¥ä»èµ„æºåå¼€å§‹å†™ï¼Œç»™æµè§ˆå™¨ç”¨çš„è¦æŠŠåº”ç”¨åå†™ä¸Š</strong></p><p><code>request.getRequestDispatcher(&quot;/èµ„æºå URI&quot;).forward(request,response)</code><br>è½¬å‘æ—¶â€/â€œä»£è¡¨çš„æ˜¯æœ¬åº”ç”¨ç¨‹åºçš„æ ¹ç›®å½•ã€zhongfuchengã€‘<br><code>response.send(&quot;/webåº”ç”¨/èµ„æºå URI&quot;); </code><br>é‡å®šå‘æ—¶â€/â€œä»£è¡¨çš„æ˜¯webappsç›®å½•  </p><h3 id="8-3-èƒ½å¤Ÿå»å¾€çš„URLçš„èŒƒå›´ä¸ä¸€æ ·"><a href="#8-3-èƒ½å¤Ÿå»å¾€çš„URLçš„èŒƒå›´ä¸ä¸€æ ·" class="headerlink" title="8.3 èƒ½å¤Ÿå»å¾€çš„URLçš„èŒƒå›´ä¸ä¸€æ ·"></a>8.3 èƒ½å¤Ÿå»å¾€çš„URLçš„èŒƒå›´ä¸ä¸€æ ·</h3><p>è½¬å‘æ˜¯æœåŠ¡å™¨è·³è½¬åªèƒ½å»å¾€å½“å‰webåº”ç”¨çš„èµ„æº<br>é‡å®šå‘æ˜¯æœåŠ¡å™¨è·³è½¬ï¼Œå¯ä»¥å»å¾€ä»»ä½•çš„èµ„æº</p><h3 id="8-4-ä¼ é€’æ•°æ®çš„ç±»å‹ä¸åŒ"><a href="#8-4-ä¼ é€’æ•°æ®çš„ç±»å‹ä¸åŒ" class="headerlink" title="8.4 ä¼ é€’æ•°æ®çš„ç±»å‹ä¸åŒ"></a>8.4 ä¼ é€’æ•°æ®çš„ç±»å‹ä¸åŒ</h3><p>è½¬å‘çš„requestå¯¹è±¡å¯ä»¥ä¼ é€’å„ç§ç±»å‹çš„æ•°æ®ï¼ŒåŒ…æ‹¬å¯¹è±¡<br>é‡å®šå‘åªèƒ½ä¼ é€’å­—ç¬¦ä¸²</p><h3 id="8-5-è·³è½¬çš„æ—¶é—´ä¸åŒ"><a href="#8-5-è·³è½¬çš„æ—¶é—´ä¸åŒ" class="headerlink" title="8.5 è·³è½¬çš„æ—¶é—´ä¸åŒ"></a>8.5 è·³è½¬çš„æ—¶é—´ä¸åŒ</h3><p>è½¬å‘æ—¶ï¼šæ‰§è¡Œåˆ°è·³è½¬è¯­å¥æ—¶å°±ä¼šç«‹åˆ»è·³è½¬<br>é‡å®šå‘ï¼šæ•´ä¸ªé¡µé¢æ‰§è¡Œå®Œä¹‹åæ‰æ‰§è¡Œè·³è½¬</p><p><strong>é‚£ä¹ˆè½¬å‘(forward)å’Œé‡å®šå‘(redirect)ä½¿ç”¨å“ªä¸€ä¸ªï¼Ÿ</strong></p><p>æ ¹æ®ä¸Šé¢è¯´æ˜äº†è½¬å‘å’Œé‡å®šå‘çš„åŒºåˆ«ä¹Ÿå¯ä»¥å¾ˆå®¹æ˜“æ¦‚æ‹¬å‡ºæ¥<strong>ã€‚è½¬å‘æ˜¯å¸¦ç€è½¬å‘å‰çš„è¯·æ±‚çš„å‚æ•°çš„ã€‚é‡å®šå‘æ˜¯æ–°çš„è¯·æ±‚</strong>ã€‚</p><h3 id="8-6-å…¸å‹çš„åº”ç”¨åœºæ™¯ï¼š"><a href="#8-6-å…¸å‹çš„åº”ç”¨åœºæ™¯ï¼š" class="headerlink" title="8.6 å…¸å‹çš„åº”ç”¨åœºæ™¯ï¼š"></a>8.6 å…¸å‹çš„åº”ç”¨åœºæ™¯ï¼š</h3><ol><li>è½¬å‘: è®¿é—® Servlet å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œç„¶å forward åˆ° jsp æ˜¾ç¤ºå¤„ç†ç»“æœï¼Œæµè§ˆå™¨é‡Œ URL ä¸å˜</li><li>é‡å®šå‘: æäº¤è¡¨å•ï¼Œå¤„ç†æˆåŠŸå redirect åˆ°å¦ä¸€ä¸ª jspï¼Œé˜²æ­¢è¡¨å•é‡å¤æäº¤ï¼Œæµè§ˆå™¨é‡Œ URL å˜äº†</li></ol><p><a href="https://mp.weixin.qq.com/s?__biz=MzI4Njg5MDA5NA==&mid=2247484755&idx=7&sn=fb35232f3c15e2b4336498ac9f8804f1&chksm=ebd74452dca0cd44942721a159088a2f286d4e5c5f2bcdc7e264f0dccc8f9928d66858e475d4###rd">Servletç¬¬å…­ç¯‡ã€Sessionä»‹ç»ã€APIã€ç”Ÿå‘½å‘¨æœŸã€åº”ç”¨ã€ä¸CookieåŒºåˆ«ã€‘(ä¿®è®¢ç‰ˆ)</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1ã€ä»€ä¹ˆæ˜¯servlet&quot;&gt;&lt;a href=&quot;#1ã€ä»€ä¹ˆæ˜¯servlet&quot; class=&quot;headerlink&quot; title=&quot;1ã€ä»€ä¹ˆæ˜¯servlet&quot;&gt;&lt;/a&gt;1ã€ä»€ä¹ˆæ˜¯servlet&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;ä»€ä¹ˆæ˜¯Serlvetï¼Ÿ&lt;/strong&gt;&lt;/</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>æœåŠ¡å‘ç°çš„åŸºæœ¬åŸç†</title>
    <link href="http://example.com/wiki/%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/"/>
    <id>http://example.com/wiki/%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/</id>
    <published>2021-08-24T06:30:25.000Z</published>
    <updated>2021-08-24T06:33:06.315Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a href="https://juejin.cn/post/6844903580999090183">https://juejin.cn/post/6844903580999090183</a></p><p><a href="https://blog.didispace.com/consul-service-discovery-exp/">ä½¿ç”¨ConsulåšæœåŠ¡å‘ç°çš„è‹¥å¹²å§¿åŠ¿</a></p><p><a href="https://laravelacademy.org/post/21214">æ³¨å†Œä¸­å¿ƒç¯‡ï¼ˆä¸‰ï¼‰ï¼šConsul æœåŠ¡å‘ç°çš„åº•å±‚å®ç°</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;å‚è€ƒèµ„æ–™&quot;&gt;&lt;a href=&quot;#å‚è€ƒèµ„æ–™&quot; class=&quot;headerlink&quot; title=&quot;å‚è€ƒèµ„æ–™&quot;&gt;&lt;/a&gt;å‚è€ƒèµ„æ–™&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://juejin.cn/post/6844903580999090183&quot;&gt;https://j</summary>
      
    
    
    
    
    <category term="æœåŠ¡å‘ç°" scheme="http://example.com/tags/%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0/"/>
    
  </entry>
  
  <entry>
    <title>JVM-æ€§èƒ½è°ƒä¼˜</title>
    <link href="http://example.com/wiki/JVM-%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98/"/>
    <id>http://example.com/wiki/JVM-%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98/</id>
    <published>2021-08-23T02:13:43.000Z</published>
    <updated>2021-08-23T02:16:21.575Z</updated>
    
    <content type="html"><![CDATA[<p>1ã€</p><p><a href="https://mikechen.cc/3321.html">JVMæ€§èƒ½è°ƒä¼˜çš„6å¤§æ­¥éª¤ï¼ŒåŠå…³é”®è°ƒä¼˜å‚æ•°è¯¦è§£</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;1ã€&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://mikechen.cc/3321.html&quot;&gt;JVMæ€§èƒ½è°ƒä¼˜çš„6å¤§æ­¥éª¤ï¼ŒåŠå…³é”®è°ƒä¼˜å‚æ•°è¯¦è§£&lt;/a&gt;&lt;/p&gt;
</summary>
      
    
    
    
    
    <category term="JVM" scheme="http://example.com/tags/JVM/"/>
    
  </entry>
  
  <entry>
    <title>Arthas-Javaè¯Šæ–­ç¥å™¨</title>
    <link href="http://example.com/wiki/Arthas-Java%E8%AF%8A%E6%96%AD%E7%A5%9E%E5%99%A8/"/>
    <id>http://example.com/wiki/Arthas-Java%E8%AF%8A%E6%96%AD%E7%A5%9E%E5%99%A8/</id>
    <published>2021-08-20T08:28:32.000Z</published>
    <updated>2021-08-20T10:02:17.096Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Arthas-Javaè¯Šæ–­ç¥å™¨"><a href="#Arthas-Javaè¯Šæ–­ç¥å™¨" class="headerlink" title="Arthas-Javaè¯Šæ–­ç¥å™¨"></a>Arthas-Javaè¯Šæ–­ç¥å™¨</h2><img src="https://cdn.jsdelivr.net/gh/zabernism/image@main/gao/image-20210820172620815.png" alt="image-20210820172620815" style="zoom:50%;"/><p>å®˜æ–¹æ–‡æ¡£åœ°å€ ğŸ‘‰    <a href="https://arthas.aliyun.com/doc/index.html#">https://arthas.aliyun.com/doc/index.html#</a></p><h3 id="1-å®‰è£…arthas"><a href="#1-å®‰è£…arthas" class="headerlink" title="1. å®‰è£…arthas"></a>1. å®‰è£…arthas</h3><p><code>wget https://arthas.aliyun.com/arthas-boot.jar </code></p><p><code>java -jar arthas-boot.jar --target-ip 0.0.0.0</code></p><p>å¦‚æœä½ çš„æœºå™¨æ²¡æœ‰ä»»ä½•javaè¿›ç¨‹åœ¨è¿è¡Œï¼Œä¼šæç¤ºå¦‚ä¸‹é”™è¯¯ ğŸ‘‡</p><p><img src="https://cdn.jsdelivr.net/gh/zabernism/image@main/gao/image-20210820165717792.png" alt="image-20210820165717792"></p><p><strong>æ­£å¸¸å¯åŠ¨å¦‚ä¸‹ï¼š</strong></p><p>âš ï¸ ç”±äºæˆ‘ä»¬ä»…ä»…å¯åŠ¨äº†ä¸€ä¸ªjavaè¿›ç¨‹ï¼Œæ‰€æœ‰è¿™é‡Œå°±åªæœ‰ä¸€ä¸ªã€‚è¾“å…¥1å›è½¦å³å¯ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zabernism/image@main/gao/image-20210820165953801.png" alt="image-20210820165953801"></p><p><strong>42423å°±æ˜¯æˆ‘ä»¬çš„javaè¿›ç¨‹å·</strong></p><p><img src="https://cdn.jsdelivr.net/gh/zabernism/image@main/gao/image-20210820170112574.png" alt="image-20210820170112574"></p><h3 id="2-æŸ¥çœ‹JVMä¿¡æ¯"><a href="#2-æŸ¥çœ‹JVMä¿¡æ¯" class="headerlink" title="2. æŸ¥çœ‹JVMä¿¡æ¯"></a>2. æŸ¥çœ‹JVMä¿¡æ¯</h3><h4 id="2-1-sysprop"><a href="#2-1-sysprop" class="headerlink" title="2.1 sysprop"></a>2.1 sysprop</h4><p><code>sysprop</code> å¯ä»¥æ‰“å°æ‰€æœ‰çš„System Propertiesä¿¡æ¯ã€‚</p><p>ä¹Ÿå¯ä»¥æŒ‡å®šå•ä¸ªkeyï¼š <code>sysprop java.version</code></p><p>ä¹Ÿå¯ä»¥é€šè¿‡<code>grep</code>æ¥è¿‡æ»¤ï¼š <code>sysprop | grep user</code></p><p>å¯ä»¥è®¾ç½®æ–°çš„valueï¼š <code>sysprop testKey testValue</code></p><h4 id="2-2-sysenv"><a href="#2-2-sysenv" class="headerlink" title="2.2 sysenv"></a>2.2 sysenv</h4><p><code>sysenv</code> å‘½ä»¤å¯ä»¥è·å–åˆ°ç¯å¢ƒå˜é‡ã€‚å’Œ<code>sysprop</code>å‘½ä»¤ç±»ä¼¼ã€‚</p><h4 id="2-3-jvm"><a href="#2-3-jvm" class="headerlink" title="2.3 jvm"></a>2.3 jvm</h4><p><code>jvm</code> å‘½ä»¤ä¼šæ‰“å°å‡º<code>JVM</code>çš„å„ç§è¯¦ç»†ä¿¡æ¯ã€‚</p><h4 id="2-4-dashboard"><a href="#2-4-dashboard" class="headerlink" title="2.4 dashboard"></a>2.4 dashboard</h4><p><code>dashboard</code> å‘½ä»¤å¯ä»¥æŸ¥çœ‹å½“å‰ç³»ç»Ÿçš„å®æ—¶æ•°æ®é¢æ¿ã€‚</p><p>è¾“å…¥ <code>Q</code> æˆ–è€… <code>Ctrl+C</code> å¯ä»¥é€€å‡ºdashboardå‘½ä»¤ã€‚</p><h3 id="3-æŸ¥çœ‹çº¿ç¨‹ç›¸å…³"><a href="#3-æŸ¥çœ‹çº¿ç¨‹ç›¸å…³" class="headerlink" title="3. æŸ¥çœ‹çº¿ç¨‹ç›¸å…³"></a>3. æŸ¥çœ‹çº¿ç¨‹ç›¸å…³</h3><h4 id="3-1-æŸ¥çœ‹çº¿ç¨‹åˆ—è¡¨"><a href="#3-1-æŸ¥çœ‹çº¿ç¨‹åˆ—è¡¨" class="headerlink" title="3.1 æŸ¥çœ‹çº¿ç¨‹åˆ—è¡¨"></a>3.1 æŸ¥çœ‹çº¿ç¨‹åˆ—è¡¨</h4><p><code>thread</code> </p><p><img src="https://cdn.jsdelivr.net/gh/zabernism/image@main/gao/image-20210820163125277.png" alt="image-20210820163125277"></p><h4 id="3-2-æŸ¥çœ‹çº¿ç¨‹æ ˆä¿¡æ¯"><a href="#3-2-æŸ¥çœ‹çº¿ç¨‹æ ˆä¿¡æ¯" class="headerlink" title="3.2 æŸ¥çœ‹çº¿ç¨‹æ ˆä¿¡æ¯"></a>3.2 <strong>æŸ¥çœ‹çº¿ç¨‹æ ˆä¿¡æ¯</strong></h4><p><code>thread 18</code> </p><p><img src="https://cdn.jsdelivr.net/gh/zabernism/image@main/gao/image-20210820163518891.png" alt="image-20210820163518891"></p><h4 id="3-3-æŸ¥çœ‹5ç§’å†…çš„CPUä½¿ç”¨ç‡top-nçº¿ç¨‹æ ˆ"><a href="#3-3-æŸ¥çœ‹5ç§’å†…çš„CPUä½¿ç”¨ç‡top-nçº¿ç¨‹æ ˆ" class="headerlink" title="3.3 æŸ¥çœ‹5ç§’å†…çš„CPUä½¿ç”¨ç‡top nçº¿ç¨‹æ ˆ"></a>3.3 æŸ¥çœ‹5ç§’å†…çš„CPUä½¿ç”¨ç‡top nçº¿ç¨‹æ ˆ</h4><p><code>thread -n 3 -i 5000 </code></p><h4 id="3-4-æŸ¥æ‰¾çº¿ç¨‹æ˜¯å¦æœ‰é˜»å¡"><a href="#3-4-æŸ¥æ‰¾çº¿ç¨‹æ˜¯å¦æœ‰é˜»å¡" class="headerlink" title="3.4 æŸ¥æ‰¾çº¿ç¨‹æ˜¯å¦æœ‰é˜»å¡"></a>3.4 æŸ¥æ‰¾çº¿ç¨‹æ˜¯å¦æœ‰é˜»å¡</h4><p><code>thread -b</code></p><h3 id="4-sc-sm-æŸ¥çœ‹å·²åŠ è½½çš„ç±»"><a href="#4-sc-sm-æŸ¥çœ‹å·²åŠ è½½çš„ç±»" class="headerlink" title="4. sc/sm æŸ¥çœ‹å·²åŠ è½½çš„ç±»"></a>4. sc/sm æŸ¥çœ‹å·²åŠ è½½çš„ç±»</h3><p>ä¸‹é¢ä»‹ç»Arthasé‡ŒæŸ¥æ‰¾å·²åŠ è½½ç±»çš„å‘½ä»¤ã€‚</p><h3 id="4-1-sc-æŸ¥æ‰¾åˆ°æ‰€æœ‰JVMå·²ç»åŠ è½½åˆ°çš„ç±»"><a href="#4-1-sc-æŸ¥æ‰¾åˆ°æ‰€æœ‰JVMå·²ç»åŠ è½½åˆ°çš„ç±»" class="headerlink" title="4.1 sc æŸ¥æ‰¾åˆ°æ‰€æœ‰JVMå·²ç»åŠ è½½åˆ°çš„ç±»"></a>4.1 sc æŸ¥æ‰¾åˆ°<strong>æ‰€æœ‰JVMå·²ç»åŠ è½½åˆ°çš„ç±»</strong></h3><p>å¦‚æœæœç´¢çš„æ˜¯æ¥å£ï¼Œè¿˜ä¼šæœç´¢æ‰€æœ‰çš„å®ç°ç±»ã€‚æ¯”å¦‚æŸ¥çœ‹æ‰€æœ‰çš„<code>Filter</code>å®ç°ç±»ï¼š</p><p><code>sc javax.servlet.Filter</code></p><p>é€šè¿‡<code>-d</code>å‚æ•°ï¼Œå¯ä»¥æ‰“å°å‡ºç±»åŠ è½½çš„å…·ä½“ä¿¡æ¯ï¼Œå¾ˆæ–¹ä¾¿æŸ¥æ‰¾ç±»åŠ è½½é—®é¢˜ã€‚</p><p><code>sc -d javax.servlet.Filter</code></p><p><code>sc</code>æ”¯æŒé€šé…ï¼Œæ¯”å¦‚æœç´¢æ‰€æœ‰çš„<code>StringUtils</code>ï¼š</p><p><code>sc *StringUtils</code></p><h3 id="4-2-sm-æŸ¥æ‰¾ç±»çš„å…·ä½“å‡½æ•°"><a href="#4-2-sm-æŸ¥æ‰¾ç±»çš„å…·ä½“å‡½æ•°" class="headerlink" title="4.2 sm æŸ¥æ‰¾ç±»çš„å…·ä½“å‡½æ•°"></a>4.2 sm æŸ¥æ‰¾ç±»çš„<strong>å…·ä½“å‡½æ•°</strong></h3><p><code>sm java.math.RoundingMode</code></p><p>é€šè¿‡<code>-d</code>å‚æ•°å¯ä»¥æ‰“å°å‡½æ•°çš„å…·ä½“å±æ€§ï¼š</p><p><code>sm -d java.math.RoundingMode</code></p><p>ä¹Ÿå¯ä»¥æŸ¥æ‰¾ç‰¹å®šçš„å‡½æ•°ï¼Œæ¯”å¦‚æŸ¥æ‰¾æ„é€ å‡½æ•°ï¼š</p><p><code>sm java.math.RoundingMode &lt;init&gt;</code></p><h3 id="5-Jadåç¼–è¯‘"><a href="#5-Jadåç¼–è¯‘" class="headerlink" title="5. Jadåç¼–è¯‘"></a>5. Jadåç¼–è¯‘</h3><p>å¯ä»¥é€šè¿‡ <code>jad</code> å‘½ä»¤æ¥åç¼–è¯‘ä»£ç ï¼š</p><p><code>jad com.example.demo.arthas.user.UserController</code></p><p>é€šè¿‡<code>--source-only</code>å‚æ•°å¯ä»¥åªæ‰“å°å‡ºåœ¨åç¼–è¯‘çš„æºä»£ç ï¼š</p><p><code>jad --source-only com.example.demo.arthas.user.UserController</code></p><h3 id="6-OgnlåŠ¨æ€ä»£ç "><a href="#6-OgnlåŠ¨æ€ä»£ç " class="headerlink" title="6. OgnlåŠ¨æ€ä»£ç "></a>6. OgnlåŠ¨æ€ä»£ç </h3><p>åœ¨Arthasé‡Œï¼Œæœ‰ä¸€ä¸ªå•ç‹¬çš„<code>ognl</code>å‘½ä»¤ï¼Œå¯ä»¥åŠ¨æ€æ‰§è¡Œä»£ç ã€‚</p><h4 id="6-1-è°ƒç”¨staticå‡½æ•°"><a href="#6-1-è°ƒç”¨staticå‡½æ•°" class="headerlink" title="6.1 è°ƒç”¨staticå‡½æ•°"></a>6.1 è°ƒç”¨staticå‡½æ•°</h4><p><code>ognl &#39;@java.lang.System@out.println(&quot;hello ognl&quot;)&#39;</code></p><p>å¯ä»¥æ£€æŸ¥<code>Terminal</code>é‡Œçš„è¿›ç¨‹è¾“å‡ºï¼Œå¯ä»¥å‘ç°æ‰“å°å‡ºäº†<code>hello ognl</code>ã€‚</p><h4 id="6-2-æŸ¥æ‰¾UserControllerçš„ClassLoader"><a href="#6-2-æŸ¥æ‰¾UserControllerçš„ClassLoader" class="headerlink" title="6.2 æŸ¥æ‰¾UserControllerçš„ClassLoader"></a>6.2 æŸ¥æ‰¾UserControllerçš„ClassLoader</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sc -d com.example.demo.arthas.user.UserController | grep classLoaderHash</span><br><span class="line"><span class="meta">$</span><span class="bash"> sc -d com.example.demo.arthas.user.UserController | grep classLoaderHash</span></span><br><span class="line"> classLoaderHash   1be6f5c3</span><br></pre></td></tr></table></figure><p>æ³¨æ„hashcodeæ˜¯å˜åŒ–çš„ï¼Œéœ€è¦å…ˆæŸ¥çœ‹å½“å‰çš„ClassLoaderä¿¡æ¯ï¼Œæå–å¯¹åº”ClassLoaderçš„hashcodeã€‚</p><p>å¦‚æœä½ ä½¿ç”¨<code>-c</code>ï¼Œä½ éœ€è¦æ‰‹åŠ¨è¾“å…¥hashcodeï¼š<code>-c &lt;hashcode&gt;</code></p><p><code>$ ognl -c 1be6f5c3 @com.example.demo.arthas.user.UserController@logger</code></p><p>å¯¹äºåªæœ‰å”¯ä¸€å®ä¾‹çš„ClassLoaderå¯ä»¥é€šè¿‡<code>--classLoaderClass</code>æŒ‡å®šclass nameï¼Œä½¿ç”¨èµ·æ¥æ›´åŠ æ–¹ä¾¿ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ ognl --classLoaderClass org.springframework.boot.loader.LaunchedURLClassLoader  @org.springframework.boot.SpringApplication@logger</span><br><span class="line">@Slf4jLocationAwareLog[</span><br><span class="line">    FQCN=@String[org.apache.commons.logging.LogAdapter<span class="variable">$Slf4jLocationAwareLog</span>],</span><br><span class="line">    name=@String[org.springframework.boot.SpringApplication],</span><br><span class="line">    logger=@Logger[Logger[org.springframework.boot.SpringApplication]],</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p><code>--classLoaderClass</code> çš„å€¼æ˜¯ClassLoaderçš„ç±»åï¼Œåªæœ‰åŒ¹é…åˆ°å”¯ä¸€çš„ClassLoaderå®ä¾‹æ—¶æ‰èƒ½å·¥ä½œï¼Œç›®çš„æ˜¯æ–¹ä¾¿è¾“å…¥é€šç”¨å‘½ä»¤ï¼Œè€Œ<code>-c &lt;hashcode&gt;</code>æ˜¯åŠ¨æ€å˜åŒ–çš„ã€‚</p><h4 id="6-3-è·å–é™æ€ç±»çš„é™æ€å­—æ®µ"><a href="#6-3-è·å–é™æ€ç±»çš„é™æ€å­—æ®µ" class="headerlink" title="6.3 è·å–é™æ€ç±»çš„é™æ€å­—æ®µ"></a>6.3 è·å–é™æ€ç±»çš„é™æ€å­—æ®µ</h4><p>è·å–<code>UserController</code>ç±»é‡Œçš„<code>logger</code>å­—æ®µï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ognl --classLoaderClass org.springframework.boot.loader.LaunchedURLClassLoader @com.example.demo.arthas.user.UserController@logger</span><br></pre></td></tr></table></figure><p>è¿˜å¯ä»¥é€šè¿‡<code>-x</code>å‚æ•°æ§åˆ¶è¿”å›å€¼çš„å±•å¼€å±‚æ•°ã€‚æ¯”å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ognl --classLoaderClass org.springframework.boot.loader.LaunchedURLClassLoader -x 2 @com.example.demo.arthas.user.UserController@logger</span><br></pre></td></tr></table></figure><h4 id="6-4-æ‰§è¡Œå¤šè¡Œè¡¨è¾¾å¼ï¼Œèµ‹å€¼ç»™ä¸´æ—¶å˜é‡ï¼Œè¿”å›ä¸€ä¸ªList"><a href="#6-4-æ‰§è¡Œå¤šè¡Œè¡¨è¾¾å¼ï¼Œèµ‹å€¼ç»™ä¸´æ—¶å˜é‡ï¼Œè¿”å›ä¸€ä¸ªList" class="headerlink" title="6.4 æ‰§è¡Œå¤šè¡Œè¡¨è¾¾å¼ï¼Œèµ‹å€¼ç»™ä¸´æ—¶å˜é‡ï¼Œè¿”å›ä¸€ä¸ªList"></a>6.4 æ‰§è¡Œå¤šè¡Œè¡¨è¾¾å¼ï¼Œèµ‹å€¼ç»™ä¸´æ—¶å˜é‡ï¼Œè¿”å›ä¸€ä¸ªList</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ognl &#x27;#value1=@System@getProperty(&quot;java.home&quot;), #value2=@System@getProperty(&quot;java.runtime.name&quot;), &#123;#value1, #value2&#125;&#x27;</span><br><span class="line">$ ognl &#x27;#value1=@System@getProperty(&quot;java.home&quot;), #value2=@System@getProperty(&quot;java.runtime.name&quot;), &#123;#value1, #value2&#125;&#x27;</span><br><span class="line">@ArrayList[</span><br><span class="line">    @String[/Library/Java/JavaVirtualMachines/jdk1.8.0_162.jdk/Contents/Home/jre],</span><br><span class="line">    @String[Java(TM) SE Runtime Environment],</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h4 id="6-5-æ›´å¤š"><a href="#6-5-æ›´å¤š" class="headerlink" title="6.5 æ›´å¤š"></a>6.5 æ›´å¤š</h4><p>åœ¨Arthasé‡Œ<code>ognl</code>è¡¨è¾¾å¼æ˜¯å¾ˆé‡è¦çš„åŠŸèƒ½ï¼Œåœ¨å¾ˆå¤šå‘½ä»¤é‡Œéƒ½å¯ä»¥ä½¿ç”¨<code>ognl</code>è¡¨è¾¾å¼ã€‚</p><p>ä¸€äº›æ›´å¤æ‚çš„ç”¨æ³•ï¼Œå¯ä»¥å‚è€ƒï¼š</p><ul><li>OGNLç‰¹æ®Šç”¨æ³•è¯·å‚è€ƒï¼š<a href="https://github.com/alibaba/arthas/issues/71">https://github.com/alibaba/arthas/issues/71</a></li><li>OGNLè¡¨è¾¾å¼å®˜æ–¹æŒ‡å—ï¼š<a href="https://commons.apache.org/proper/commons-ognl/language-guide.html">https://commons.apache.org/proper/commons-ognl/language-guide.html</a></li></ul><h3 id="7-WatchæŸ¥çœ‹å‘½ä»¤"><a href="#7-WatchæŸ¥çœ‹å‘½ä»¤" class="headerlink" title="7. WatchæŸ¥çœ‹å‘½ä»¤"></a>7. WatchæŸ¥çœ‹å‘½ä»¤</h3><h4 id="7-1-å¦‚ä½•ä½¿ç”¨"><a href="#7-1-å¦‚ä½•ä½¿ç”¨" class="headerlink" title="7.1 å¦‚ä½•ä½¿ç”¨"></a>7.1 å¦‚ä½•ä½¿ç”¨</h4><p><code>watch com.example.demo.arthas.user.UserController * &#39;&#123;params, throwExp&#125;&#39;</code></p><p>æ‰§è¡Œå®Œä¹‹åï¼Œä¼šé˜»å¡ï¼Œæ­¤æ—¶å¦‚æœæœ‰è¯·æ±‚è¿›æ¥ï¼Œå‘ç”Ÿä¸€åœºçš„è¯ï¼Œå°±ä¼šçœ‹åˆ°å¼‚å¸¸ä¿¡æ¯ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zabernism/image@main/gao/image-20210820171343673.png" alt="image-20210820171343673"></p><p>å¦‚æœæƒ³æŠŠè·å–åˆ°çš„ç»“æœå±•å¼€ï¼Œå¯ä»¥ç”¨<code>-x</code>å‚æ•°ï¼š</p><p><code>watch com.example.demo.arthas.user.UserController * &#39;&#123;params, throwExp&#125;&#39; -x 2</code></p><h4 id="7-2-è¿”å›å€¼è¡¨è¾¾å¼"><a href="#7-2-è¿”å›å€¼è¡¨è¾¾å¼" class="headerlink" title="7.2 è¿”å›å€¼è¡¨è¾¾å¼"></a>7.2 è¿”å›å€¼è¡¨è¾¾å¼</h4><p>åœ¨ä¸Šé¢çš„ä¾‹å­é‡Œï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯<code>è¿”å›å€¼è¡¨è¾¾å¼</code>ï¼Œå®ƒå®é™…ä¸Šæ˜¯ä¸€ä¸ª<code>ognl</code>è¡¨è¾¾å¼ï¼Œå®ƒæ”¯æŒä¸€äº›å†…ç½®å¯¹è±¡ï¼š</p><ul><li>loader</li><li>clazz</li><li>method</li><li>target</li><li>params</li><li>returnObj</li><li>throwExp</li><li>isBefore</li><li>isThrow</li><li>isReturn</li></ul><p>ä½ å¯ä»¥åˆ©ç”¨è¿™äº›å†…ç½®å¯¹è±¡æ¥ç»„æˆä¸åŒçš„è¡¨è¾¾å¼ã€‚æ¯”å¦‚è¿”å›ä¸€ä¸ªæ•°ç»„ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">watch com.example.demo.arthas.user.UserController * &#x27;&#123;params[0], target, returnObj&#125;&#x27;</span><br></pre></td></tr></table></figure><p>æ›´å¤šå‚è€ƒï¼š <a href="https://arthas.aliyun.com/doc/advice-class.html">https://arthas.aliyun.com/doc/advice-class.html</a></p><h4 id="7-3-æ¡ä»¶è¡¨è¾¾å¼"><a href="#7-3-æ¡ä»¶è¡¨è¾¾å¼" class="headerlink" title="7.3 æ¡ä»¶è¡¨è¾¾å¼"></a>7.3 æ¡ä»¶è¡¨è¾¾å¼</h4><p><code>watch</code>å‘½ä»¤æ”¯æŒåœ¨ç¬¬4ä¸ªå‚æ•°é‡Œå†™æ¡ä»¶è¡¨è¾¾å¼ï¼Œæ¯”å¦‚ï¼š</p><p><code>watch com.example.demo.arthas.user.UserController * returnObj &#39;params[0] &gt; 100&#39;</code></p><p>å½“è®¿é—® <code>localhost:80/user/1</code>æ—¶ï¼Œ<code>watch</code>å‘½ä»¤æ²¡æœ‰è¾“å‡º</p><p>å½“è®¿é—®<code>localhost:80/user/101</code>æ—¶ï¼Œ<code>watch</code>ä¼šæ‰“å°å‡ºç»“æœã€‚</p><h4 id="7-4-å½“å¼‚å¸¸æ—¶æ•è·"><a href="#7-4-å½“å¼‚å¸¸æ—¶æ•è·" class="headerlink" title="7.4 å½“å¼‚å¸¸æ—¶æ•è·"></a>7.4 å½“å¼‚å¸¸æ—¶æ•è·</h4><p><code>watch</code>å‘½ä»¤æ”¯æŒ<code>-e</code>é€‰é¡¹ï¼Œè¡¨ç¤ºåªæ•è·æŠ›å‡ºå¼‚å¸¸æ—¶çš„è¯·æ±‚ï¼š</p><p><code>watch com.example.demo.arthas.user.UserController * &quot;&#123;params[0],throwExp&#125;&quot; -e</code></p><h4 id="7-5-æŒ‰ç…§è€—æ—¶è¿›è¡Œè¿‡æ»¤"><a href="#7-5-æŒ‰ç…§è€—æ—¶è¿›è¡Œè¿‡æ»¤" class="headerlink" title="7.5 æŒ‰ç…§è€—æ—¶è¿›è¡Œè¿‡æ»¤"></a>7.5 æŒ‰ç…§è€—æ—¶è¿›è¡Œè¿‡æ»¤</h4><p>watchå‘½ä»¤æ”¯æŒæŒ‰è¯·æ±‚è€—æ—¶è¿›è¡Œè¿‡æ»¤ï¼Œæ¯”å¦‚ï¼š</p><p><code>watch com.example.demo.arthas.user.UserController * &#39;&#123;params, returnObj&#125;&#39; &#39;#cost&gt;200&#39;</code></p><h3 id="8-çƒ­æ›´æ–°ä»£ç "><a href="#8-çƒ­æ›´æ–°ä»£ç " class="headerlink" title="8. çƒ­æ›´æ–°ä»£ç "></a>8. çƒ­æ›´æ–°ä»£ç </h3><p>ä¸‹é¢ä»‹ç»é€šè¿‡<code>jad</code>/<code>mc</code>/<code>redefine</code> å‘½ä»¤å®ç°åŠ¨æ€æ›´æ–°ä»£ç çš„åŠŸèƒ½ã€‚</p><p>ç›®å‰ï¼Œè®¿é—® <a href="http://localhost/user/0">http://localhost/user/0</a> ï¼Œä¼šè¿”å›500å¼‚å¸¸ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl http:<span class="comment">//localhost/user/0</span></span><br><span class="line">&#123;<span class="string">&quot;timestamp&quot;</span>:<span class="number">1550223186170</span>,<span class="string">&quot;status&quot;</span>:<span class="number">500</span>,<span class="string">&quot;error&quot;</span>:<span class="string">&quot;Internal Server Error&quot;</span>,<span class="string">&quot;exception&quot;</span>:<span class="string">&quot;java.lang.IllegalArgumentException&quot;</span>,<span class="string">&quot;message&quot;</span>:<span class="string">&quot;id &lt; 1&quot;</span>,<span class="string">&quot;path&quot;</span>:<span class="string">&quot;/user/0&quot;</span>&#125;</span><br></pre></td></tr></table></figure><p>ä¸‹é¢é€šè¿‡çƒ­æ›´æ–°ä»£ç ï¼Œä¿®æ”¹è¿™ä¸ªé€»è¾‘ã€‚</p><h4 id="8-1-jadåç¼–è¯‘UserController"><a href="#8-1-jadåç¼–è¯‘UserController" class="headerlink" title="8.1 jadåç¼–è¯‘UserController"></a>8.1 jadåç¼–è¯‘UserController</h4><p><strong>åœ¨arthasä¸­æ‰§è¡Œjadå‘½ä»¤ ğŸ‘‡</strong></p><p><code>jad --source-only com.example.demo.arthas.user.UserController &gt; /tmp/UserController.java</code></p><p>jadåç¼–è¯‘çš„ç»“æœä¿å­˜åœ¨ <code>/tmp/UserController.java</code>æ–‡ä»¶é‡Œäº†ã€‚</p><p>åœ¨ã€ æœºå™¨ ã€‘ä¸Šç„¶åç”¨vimæ¥ç¼–è¾‘<code>/tmp/UserController.java</code>ï¼š</p><p><code>vim /tmp/UserController.java</code></p><p>æ¯”å¦‚å½“ user id å°äº1æ—¶ï¼Œä¹Ÿæ­£å¸¸è¿”å›ï¼Œä¸æŠ›å‡ºå¼‚å¸¸ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(value=&#123;&quot;/user/&#123;id&#125;&quot;&#125;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> User <span class="title">findUserById</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span> </span>&#123;</span><br><span class="line">    logger.info(<span class="string">&quot;id: &#123;&#125;&quot;</span>, (Object)id);</span><br><span class="line">    <span class="keyword">if</span> (id != <span class="keyword">null</span> &amp;&amp; id &lt; <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> User(id, <span class="string">&quot;name&quot;</span> + id);</span><br><span class="line">        <span class="comment">// throw new IllegalArgumentException(&quot;id &lt; 1&quot;);</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> User(id.intValue(), <span class="string">&quot;name&quot;</span> + id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="8-2-scæŸ¥æ‰¾åŠ è½½UserControllerçš„ClassLoader"><a href="#8-2-scæŸ¥æ‰¾åŠ è½½UserControllerçš„ClassLoader" class="headerlink" title="8.2 scæŸ¥æ‰¾åŠ è½½UserControllerçš„ClassLoader"></a>8.2 scæŸ¥æ‰¾åŠ è½½UserControllerçš„ClassLoader</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sc -d *UserController | grep classLoaderHash</span><br><span class="line">$ sc -d *UserController | grep classLoaderHash</span><br><span class="line"> classLoaderHash   1be6f5c3</span><br></pre></td></tr></table></figure><p>å¯ä»¥å‘ç°æ˜¯ <code>springbootLaunchedURLClassLoader@1be6f5c3</code> åŠ è½½çš„ã€‚</p><p>è®°ä¸‹classLoaderHashï¼Œåé¢éœ€è¦ä½¿ç”¨å®ƒã€‚åœ¨è¿™é‡Œï¼Œå®ƒæ˜¯ <code>1be6f5c3</code>ã€‚</p><h4 id="8-3-mcç¼–è¯‘javaæ–‡ä»¶"><a href="#8-3-mcç¼–è¯‘javaæ–‡ä»¶" class="headerlink" title="8.3 mcç¼–è¯‘javaæ–‡ä»¶"></a>8.3 mcç¼–è¯‘javaæ–‡ä»¶</h4><p>ç¼–è¯‘javaæ–‡ä»¶ï¼Œç±»ä¼¼äºjavacã€‚</p><p>ä¿å­˜å¥½<code>/tmp/UserController.java</code>ä¹‹åï¼Œä½¿ç”¨<code>mc</code>(Memory Compiler)å‘½ä»¤æ¥ç¼–è¯‘ï¼Œå¹¶ä¸”é€šè¿‡<code>-c</code>æˆ–è€…<code>--classLoaderClass</code>å‚æ•°æŒ‡å®šClassLoaderï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mc --classLoaderClass org.springframework.boot.loader.LaunchedURLClassLoader /tmp/UserController.java -d /tmp</span><br><span class="line">$ mc --classLoaderClass org.springframework.boot.loader.LaunchedURLClassLoader /tmp/UserController.java -d /tmp</span><br><span class="line">Memory compiler output:</span><br><span class="line">/tmp/com/example/demo/arthas/user/UserController.class</span><br><span class="line">Affect(row-cnt:1) cost in 346 ms</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥é€šè¿‡<code>mc -c &lt;classLoaderHash&gt; /tmp/UserController.java -d /tmp</code>ï¼Œä½¿ç”¨<code>-c</code>å‚æ•°æŒ‡å®šClassLoaderHash:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mc -c 1be6f5c3 /tmp/UserController.java -d /tmp</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/zabernism/image@main/gao/image-20210820172201737.png" alt="image-20210820172201737"></p><h4 id="8-4-redefineåŠ è½½classæ–‡ä»¶"><a href="#8-4-redefineåŠ è½½classæ–‡ä»¶" class="headerlink" title="8.4 redefineåŠ è½½classæ–‡ä»¶"></a>8.4 redefineåŠ è½½classæ–‡ä»¶</h4><p>å†ä½¿ç”¨<code>redefine</code>å‘½ä»¤é‡æ–°åŠ è½½æ–°ç¼–è¯‘å¥½çš„<code>UserController.class</code>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">redefine /tmp/com/example/demo/arthas/user/UserController.class</span><br><span class="line">$ redefine /tmp/com/example/demo/arthas/user/UserController.class</span><br><span class="line">redefine success, size: 1</span><br></pre></td></tr></table></figure><h4 id="8-5-çƒ­ä¿®æ”¹ä»£ç ç»“æœ"><a href="#8-5-çƒ­ä¿®æ”¹ä»£ç ç»“æœ" class="headerlink" title="8.5 çƒ­ä¿®æ”¹ä»£ç ç»“æœ"></a>8.5 çƒ­ä¿®æ”¹ä»£ç ç»“æœ</h4><p><code>redefine</code>æˆåŠŸä¹‹åï¼Œå†æ¬¡è®¿é—® <code>localhost:80/user/0</code> ï¼Œç»“æœæ˜¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;id&quot;: 0,</span><br><span class="line">  &quot;name&quot;: &quot;name0&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="9-Exit-Stop"><a href="#9-Exit-Stop" class="headerlink" title="9. Exit/Stop"></a>9. Exit/Stop</h3><h4 id="9-1-reset"><a href="#9-1-reset" class="headerlink" title="9.1 reset"></a>9.1 reset</h4><p>Arthasåœ¨ watch/trace ç­‰å‘½ä»¤æ—¶ï¼Œå®é™…ä¸Šæ˜¯ä¿®æ”¹äº†åº”ç”¨çš„å­—èŠ‚ç ï¼Œæ’å…¥å¢å¼ºçš„ä»£ç ã€‚æ˜¾å¼æ‰§è¡Œ <code>reset</code> å‘½ä»¤ï¼Œå¯ä»¥æ¸…é™¤æ‰è¿™äº›å¢å¼ºä»£ç ã€‚</p><h4 id="9-2-é€€å‡ºArthas"><a href="#9-2-é€€å‡ºArthas" class="headerlink" title="9.2 é€€å‡ºArthas"></a>9.2 é€€å‡ºArthas</h4><p>ç”¨ <code>exit</code> æˆ–è€… <code>quit</code> å‘½ä»¤å¯ä»¥é€€å‡ºArthasã€‚</p><p>é€€å‡ºArthasä¹‹åï¼Œè¿˜å¯ä»¥å†æ¬¡ç”¨ <code>java -jar arthas-boot.jar</code> æ¥è¿æ¥ã€‚</p><h4 id="9-3-å½»åº•é€€å‡ºArthas"><a href="#9-3-å½»åº•é€€å‡ºArthas" class="headerlink" title="9.3 å½»åº•é€€å‡ºArthas"></a>9.3 å½»åº•é€€å‡ºArthas</h4><p><code>exit/quit</code>å‘½ä»¤åªæ˜¯é€€å‡ºå½“å‰sessionï¼Œarthas serverè¿˜åœ¨ç›®æ ‡è¿›ç¨‹ä¸­è¿è¡Œã€‚</p><p>æƒ³å®Œå…¨é€€å‡ºArthasï¼Œå¯ä»¥æ‰§è¡Œ <code>stop</code> å‘½ä»¤ã€‚</p><h3 id="10-arthas-bootæ”¯æŒçš„å‚æ•°"><a href="#10-arthas-bootæ”¯æŒçš„å‚æ•°" class="headerlink" title="10. arthas-bootæ”¯æŒçš„å‚æ•°"></a>10. arthas-bootæ”¯æŒçš„å‚æ•°</h3><p><code>arthas-boot.jar</code> æ”¯æŒå¾ˆå¤šå‚æ•°ï¼Œå¯ä»¥æ‰§è¡Œ <code>java -jar arthas-boot.jar -h</code> æ¥æŸ¥çœ‹ã€‚</p><h4 id="10-1-å…è®¸å¤–éƒ¨è®¿é—®"><a href="#10-1-å…è®¸å¤–éƒ¨è®¿é—®" class="headerlink" title="10.1 å…è®¸å¤–éƒ¨è®¿é—®"></a>10.1 å…è®¸å¤–éƒ¨è®¿é—®</h4><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ arthas serverä¾¦å¬çš„æ˜¯ <code>127.0.0.1</code> è¿™ä¸ªIPï¼Œå¦‚æœå¸Œæœ›è¿œç¨‹å¯ä»¥è®¿é—®ï¼Œå¯ä»¥ä½¿ç”¨<code>--target-ip</code>çš„å‚æ•°ã€‚</p><p><code>java -jar arthas-boot.jar --target-ip</code></p><h4 id="10-2-åˆ—å‡ºæ‰€æœ‰çš„ç‰ˆæœ¬"><a href="#10-2-åˆ—å‡ºæ‰€æœ‰çš„ç‰ˆæœ¬" class="headerlink" title="10.2 åˆ—å‡ºæ‰€æœ‰çš„ç‰ˆæœ¬"></a>10.2 åˆ—å‡ºæ‰€æœ‰çš„ç‰ˆæœ¬</h4><p><code>java -jar arthas-boot.jar --versions</code></p><p>ä½¿ç”¨æŒ‡å®šç‰ˆæœ¬ï¼š</p><p><code>java -jar arthas-boot.jar --use-version 3.1.0</code></p><h4 id="10-3-åªä¾¦å¬Telnetç«¯å£ï¼Œä¸ä¾¦å¬HTTPç«¯å£"><a href="#10-3-åªä¾¦å¬Telnetç«¯å£ï¼Œä¸ä¾¦å¬HTTPç«¯å£" class="headerlink" title="10.3 åªä¾¦å¬Telnetç«¯å£ï¼Œä¸ä¾¦å¬HTTPç«¯å£"></a>10.3 åªä¾¦å¬Telnetç«¯å£ï¼Œä¸ä¾¦å¬HTTPç«¯å£</h4><p><code>java -jar arthas-boot.jar --telnet-port 9999 --http-port -1</code></p><h4 id="10-4-æ‰“å°è¿è¡Œçš„è¯¦æƒ…"><a href="#10-4-æ‰“å°è¿è¡Œçš„è¯¦æƒ…" class="headerlink" title="10.4 æ‰“å°è¿è¡Œçš„è¯¦æƒ…"></a>10.4 æ‰“å°è¿è¡Œçš„è¯¦æƒ…</h4><p><code>java -jar arthas-boot.jar -v</code></p><p><img src="https://cdn.jsdelivr.net/gh/zabernism/image@main/gao/image-20210820164916567.png" alt="image-20210820164916567"></p><h3 id="11-Web-Console"><a href="#11-Web-Console" class="headerlink" title="11. Web Console"></a>11. Web Console</h3><p><img src="https://cdn.jsdelivr.net/gh/zabernism/image@main/gao/image-20210820173816512.png" alt="image-20210820173816512"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Arthas-Javaè¯Šæ–­ç¥å™¨&quot;&gt;&lt;a href=&quot;#Arthas-Javaè¯Šæ–­ç¥å™¨&quot; class=&quot;headerlink&quot; title=&quot;Arthas-Javaè¯Šæ–­ç¥å™¨&quot;&gt;&lt;/a&gt;Arthas-Javaè¯Šæ–­ç¥å™¨&lt;/h2&gt;&lt;img src=&quot;https://cdn</summary>
      
    
    
    
    
    <category term="Linux" scheme="http://example.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>LeetCode-åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—</title>
    <link href="http://example.com/wiki/LeetCode-%E5%8F%AA%E5%87%BA%E7%8E%B0%E4%B8%80%E6%AC%A1%E7%9A%84%E6%95%B0%E5%AD%97/"/>
    <id>http://example.com/wiki/LeetCode-%E5%8F%AA%E5%87%BA%E7%8E%B0%E4%B8%80%E6%AC%A1%E7%9A%84%E6%95%B0%E5%AD%97/</id>
    <published>2021-08-19T13:12:54.000Z</published>
    <updated>2021-08-19T13:17:19.158Z</updated>
    
    <content type="html"><![CDATA[<h1 id="åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—"><a href="#åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—" class="headerlink" title="åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—"></a>åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—</h1><p><a href="https://leetcode-cn.com/leetbook/read/top-interview-questions-easy/x21ib6/">https://leetcode-cn.com/leetbook/read/top-interview-questions-easy/x21ib6/</a></p><p>ç»™å®šä¸€ä¸ªéç©ºæ•´æ•°æ•°ç»„ï¼Œé™¤äº†æŸä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ä»¥å¤–ï¼Œå…¶ä½™æ¯ä¸ªå…ƒç´ å‡å‡ºç°ä¸¤æ¬¡ã€‚æ‰¾å‡ºé‚£ä¸ªåªå‡ºç°äº†ä¸€æ¬¡çš„å…ƒç´ ã€‚</p><p>è¯´æ˜ï¼š</p><p>ä½ çš„ç®—æ³•åº”è¯¥å…·æœ‰çº¿æ€§æ—¶é—´å¤æ‚åº¦ã€‚ ä½ å¯ä»¥ä¸ä½¿ç”¨é¢å¤–ç©ºé—´æ¥å®ç°å—ï¼Ÿ</p><p>ç¤ºä¾‹ 1:</p><p>è¾“å…¥: [2,2,1]<br>è¾“å‡º: 1<br>ç¤ºä¾‹ 2:</p><p>è¾“å…¥: [4,1,2,1,2]<br>è¾“å‡º: 4<br>ç›¸å…³æ ‡ç­¾<br>ä½è¿ç®—</p><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>ä»…ä»…å‡ºç°ä¸€ä¸ªï¼Œå¾ˆæ˜¾ç„¶ï¼Œè¿™ä¸ªæ•°å’Œå‰åéƒ½ä¸ä¸€æ ·ï¼Œç„¶åç‰¹æ®Šåˆ¤æ–­ä¸€ä¸‹å¤´éƒ¨å’Œå°¾éƒ¨å°±å¯ä»¥äº†ã€‚</p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">singleNumber</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(nums == <span class="keyword">null</span> || nums.length == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(nums.length == <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> nums[<span class="number">0</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        Arrays.sort(nums);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt; nums.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i - <span class="number">2</span>] != nums[i - <span class="number">1</span>] &amp;&amp; nums[i - <span class="number">1</span>] != nums[i])&#123;</span><br><span class="line">                <span class="keyword">return</span> nums[i - <span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(i == nums.length - <span class="number">1</span> &amp;&amp; nums[i] != nums[i - <span class="number">1</span>])&#123;</span><br><span class="line">                <span class="keyword">return</span> nums[i];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(i == <span class="number">2</span> &amp;&amp; nums[i - <span class="number">2</span>] != nums[i - <span class="number">1</span>])&#123;</span><br><span class="line">                <span class="keyword">return</span> nums[i - <span class="number">2</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ†æäºŒ"><a href="#åˆ†æäºŒ" class="headerlink" title="åˆ†æäºŒ"></a>åˆ†æäºŒ</h2><p>ä½¿ç”¨å¼‚æˆ–è¿ç®—ï¼Œå°†æ‰€æœ‰å€¼è¿›è¡Œå¼‚æˆ–<br>å¼‚æˆ–è¿ç®—ï¼Œç›¸å¼‚ä¸ºçœŸï¼Œç›¸åŒä¸ºå‡ï¼Œæ‰€ä»¥<code> a^a = 0 ;0^a = a</code><br>å› ä¸ºå¼‚æˆ–è¿ç®— æ»¡è¶³äº¤æ¢å¾‹ <code>a^b^a = a^a^b = b </code>æ‰€ä»¥æ•°ç»„ç»è¿‡å¼‚æˆ–è¿ç®—ï¼Œå•ç‹¬çš„å€¼å°±å‰©ä¸‹äº†</p><p><a href="https://leetcode-cn.com/leetbook/read/top-interview-questions-easy/x21ib6/?discussion=Mo9fKT">https://leetcode-cn.com/leetbook/read/top-interview-questions-easy/x21ib6/?discussion=Mo9fKT</a></p><h2 id="ä»£ç äºŒ"><a href="#ä»£ç äºŒ" class="headerlink" title="ä»£ç äºŒ"></a>ä»£ç äºŒ</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">singleNumber</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> reduce = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> num : nums) &#123;</span><br><span class="line">            reduce =  reduce ^ num;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> reduce;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—&quot;&gt;&lt;a href=&quot;#åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—&quot; class=&quot;headerlink&quot; title=&quot;åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—&quot;&gt;&lt;/a&gt;åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://leetcode-cn.com/leetbook/read</summary>
      
    
    
    
    
    <category term="ç®€å•" scheme="http://example.com/tags/%E7%AE%80%E5%8D%95/"/>
    
    <category term="æ•°ç»„" scheme="http://example.com/tags/%E6%95%B0%E7%BB%84/"/>
    
    <category term="ä½è¿ç®—" scheme="http://example.com/tags/%E4%BD%8D%E8%BF%90%E7%AE%97/"/>
    
  </entry>
  
  <entry>
    <title>LeetCode-å­˜åœ¨é‡å¤å…ƒç´ </title>
    <link href="http://example.com/wiki/LeetCode-%E5%AD%98%E5%9C%A8%E9%87%8D%E5%A4%8D%E5%85%83%E7%B4%A0/"/>
    <id>http://example.com/wiki/LeetCode-%E5%AD%98%E5%9C%A8%E9%87%8D%E5%A4%8D%E5%85%83%E7%B4%A0/</id>
    <published>2021-08-19T12:57:35.000Z</published>
    <updated>2021-08-19T13:04:26.139Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å­˜åœ¨é‡å¤å…ƒç´ "><a href="#å­˜åœ¨é‡å¤å…ƒç´ " class="headerlink" title="å­˜åœ¨é‡å¤å…ƒç´ "></a>å­˜åœ¨é‡å¤å…ƒç´ </h1><p><a href="https://leetcode-cn.com/leetbook/read/top-interview-questions-easy/x248f5/">https://leetcode-cn.com/leetbook/read/top-interview-questions-easy/x248f5/</a></p><p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨é‡å¤å…ƒç´ ã€‚</p><p>å¦‚æœå­˜åœ¨ä¸€å€¼åœ¨æ•°ç»„ä¸­å‡ºç°è‡³å°‘ä¸¤æ¬¡ï¼Œå‡½æ•°è¿”å› true ã€‚å¦‚æœæ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ éƒ½ä¸ç›¸åŒï¼Œåˆ™è¿”å› false ã€‚</p><p>ç¤ºä¾‹ 1:</p><p>è¾“å…¥: [1,2,3,1]<br>è¾“å‡º: true<br>ç¤ºä¾‹ 2:</p><p>è¾“å…¥: [1,2,3,4]<br>è¾“å‡º: false<br>ç¤ºä¾‹ 3:</p><p>è¾“å…¥: [1,1,1,3,3,4,3,2,4,2]<br>è¾“å‡º: true</p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p><strong>1ã€åŒé‡å¾ªç¯æ˜¯å¾ˆå®¹æ˜“æƒ³åˆ°ï¼Œä½†æ˜¯ä¼šè¶…å‡ºæ—¶é—´é™åˆ¶</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">containsDuplicate</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(nums == <span class="keyword">null</span> || nums.length == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; nums.length ; j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(nums[i] == nums[j])&#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>2ã€å…ˆæ’åºï¼Œç„¶ååˆ¤æ–­ç›¸é‚»ä¸¤ä¸ªå…ƒç´ æ˜¯å¦ç›¸ç­‰</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">containsDuplicate</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">    Arrays.sort(nums);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nums[i] == nums[i - <span class="number">1</span>]) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å­˜åœ¨é‡å¤å…ƒç´ &quot;&gt;&lt;a href=&quot;#å­˜åœ¨é‡å¤å…ƒç´ &quot; class=&quot;headerlink&quot; title=&quot;å­˜åœ¨é‡å¤å…ƒç´ &quot;&gt;&lt;/a&gt;å­˜åœ¨é‡å¤å…ƒç´ &lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://leetcode-cn.com/leetbook/read/top-int</summary>
      
    
    
    
    
    <category term="ç®€å•" scheme="http://example.com/tags/%E7%AE%80%E5%8D%95/"/>
    
    <category term="æ•°ç»„" scheme="http://example.com/tags/%E6%95%B0%E7%BB%84/"/>
    
    <category term="å“ˆå¸Œè¡¨" scheme="http://example.com/tags/%E5%93%88%E5%B8%8C%E8%A1%A8/"/>
    
    <category term="æ’åº" scheme="http://example.com/tags/%E6%8E%92%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>LeetCode-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºII</title>
    <link href="http://example.com/wiki/LeetCode-%E4%B9%B0%E5%8D%96%E8%82%A1%E7%A5%A8%E7%9A%84%E6%9C%80%E4%BD%B3%E6%97%B6%E6%9C%BAII/"/>
    <id>http://example.com/wiki/LeetCode-%E4%B9%B0%E5%8D%96%E8%82%A1%E7%A5%A8%E7%9A%84%E6%9C%80%E4%BD%B3%E6%97%B6%E6%9C%BAII/</id>
    <published>2021-08-19T12:35:49.000Z</published>
    <updated>2021-08-19T12:41:01.474Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºII"><a href="#ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºII" class="headerlink" title="ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºII"></a>ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºII</h1><p><a href="https://leetcode-cn.com/leetbook/read/top-interview-questions-easy/x2zsx1/">https://leetcode-cn.com/leetbook/read/top-interview-questions-easy/x2zsx1/</a></p><p>ç»™å®šä¸€ä¸ªæ•°ç»„ prices ï¼Œå…¶ä¸­ prices[i] æ˜¯ä¸€æ”¯ç»™å®šè‚¡ç¥¨ç¬¬ i å¤©çš„ä»·æ ¼ã€‚</p><p>è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ä½ æ‰€èƒ½è·å–çš„æœ€å¤§åˆ©æ¶¦ã€‚ä½ å¯ä»¥å°½å¯èƒ½åœ°å®Œæˆæ›´å¤šçš„äº¤æ˜“ï¼ˆå¤šæ¬¡ä¹°å–ä¸€æ”¯è‚¡ç¥¨ï¼‰ã€‚</p><p>æ³¨æ„ï¼šä½ ä¸èƒ½åŒæ—¶å‚ä¸å¤šç¬”äº¤æ˜“ï¼ˆä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ï¼‰ã€‚</p><p>ç¤ºä¾‹ 1:</p><p>è¾“å…¥: <code>prices = [7,1,5,3,6,4]</code><br>è¾“å‡º: 7<br>è§£é‡Š: åœ¨ç¬¬ 2 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 1ï¼‰çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 3 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 5ï¼‰çš„æ—¶å€™å–å‡º, è¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = 5-1 = 4 ã€‚<br>     éšåï¼Œåœ¨ç¬¬ 4 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 3ï¼‰çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 5 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 6ï¼‰çš„æ—¶å€™å–å‡º, è¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = 6-3 = 3 ã€‚<br>ç¤ºä¾‹ 2:</p><p>è¾“å…¥: <code>prices = [1,2,3,4,5]</code><br>è¾“å‡º: 4<br>è§£é‡Š: åœ¨ç¬¬ 1 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 1ï¼‰çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 5 å¤© ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 5ï¼‰çš„æ—¶å€™å–å‡º, è¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = 5-1 = 4 ã€‚<br>     æ³¨æ„ä½ ä¸èƒ½åœ¨ç¬¬ 1 å¤©å’Œç¬¬ 2 å¤©æ¥è¿è´­ä¹°è‚¡ç¥¨ï¼Œä¹‹åå†å°†å®ƒä»¬å–å‡ºã€‚å› ä¸ºè¿™æ ·å±äºåŒæ—¶å‚ä¸äº†å¤šç¬”äº¤æ˜“ï¼Œä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ã€‚<br>ç¤ºä¾‹ 3:</p><p>è¾“å…¥: <code>prices = [7,6,4,3,1]</code><br>è¾“å‡º: 0<br>è§£é‡Š: åœ¨è¿™ç§æƒ…å†µä¸‹, æ²¡æœ‰äº¤æ˜“å®Œæˆ, æ‰€ä»¥æœ€å¤§åˆ©æ¶¦ä¸º 0ã€‚</p><p>â°æç¤ºï¼š</p><p><code>1 &lt;= prices.length &lt;= 3 * 104</code><br><code>0 &lt;= prices[i] &lt;= 104</code></p><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p><code>[7,1,5,3,6,4]</code><br><code>[1,2,3,4,5]</code></p><p>å…¶å®è§„å¾‹å¾ˆç®€å•ï¼Œå°±æ¯”è¾ƒå½“å¤©å’Œå‰ä¸€å¤©çš„å¤§å°å…³ç³»å°±å¥½äº†ï¼Œä¸€æ¬¡å¾ªç¯å°±ä¸‹æ¥äº†ã€‚</p><p>ä¸€å¼€å§‹æƒ³çš„æ¯”è¾ƒå¤æ‚ï¼Œç”¨çš„æŒ‡é’ˆæ»‘åŠ¨ï¼Œæ¯”å¦‚1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5è¿™ç§ï¼Œä¸€å¼€å§‹æƒ³çš„æ˜¯ <code>5 - 1</code> ï¼Œå…¶å® 1 + 1 + 1 + 1å°±è¡Œäº†ã€‚</p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="keyword">int</span>[] prices)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(prices == <span class="keyword">null</span> || prices.length == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>(prices.length == <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// [7,1,5,3,6,4]</span></span><br><span class="line">        <span class="comment">// [1,2,3,4,5]</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; prices.length ; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(prices[i] &gt; prices[i - <span class="number">1</span>])&#123;</span><br><span class="line">                count += prices[i] - prices[i - <span class="number">1</span>];</span><br><span class="line">            &#125;        </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºII&quot;&gt;&lt;a href=&quot;#ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºII&quot; class=&quot;headerlink&quot; title=&quot;ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºII&quot;&gt;&lt;/a&gt;ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºII&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://leetcode-cn.com/l</summary>
      
    
    
    
    
    <category term="ç®€å•" scheme="http://example.com/tags/%E7%AE%80%E5%8D%95/"/>
    
    <category term="æ•°ç»„" scheme="http://example.com/tags/%E6%95%B0%E7%BB%84/"/>
    
    <category term="è´ªå¿ƒ" scheme="http://example.com/tags/%E8%B4%AA%E5%BF%83/"/>
    
    <category term="åŠ¨æ€è§„åˆ’" scheme="http://example.com/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
  </entry>
  
  <entry>
    <title>LeetCode-åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹</title>
    <link href="http://example.com/wiki/LeetCode-%E5%88%A0%E9%99%A4%E6%8E%92%E5%BA%8F%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E9%87%8D%E5%A4%8D%E9%A1%B9/"/>
    <id>http://example.com/wiki/LeetCode-%E5%88%A0%E9%99%A4%E6%8E%92%E5%BA%8F%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E9%87%8D%E5%A4%8D%E9%A1%B9/</id>
    <published>2021-08-19T11:28:03.000Z</published>
    <updated>2021-08-19T11:52:25.170Z</updated>
    
    <content type="html"><![CDATA[<h1 id="åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹"><a href="#åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹" class="headerlink" title="åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹"></a>åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹</h1><p><a href="https://leetcode-cn.com/leetbook/read/top-interview-questions-easy/x2gy9m/">https://leetcode-cn.com/leetbook/read/top-interview-questions-easy/x2gy9m/</a></p><p>ç»™ä½ ä¸€ä¸ªæœ‰åºæ•°ç»„ nums ï¼Œè¯·ä½  åŸåœ° åˆ é™¤é‡å¤å‡ºç°çš„å…ƒç´ ï¼Œä½¿æ¯ä¸ªå…ƒç´  åªå‡ºç°ä¸€æ¬¡ ï¼Œè¿”å›åˆ é™¤åæ•°ç»„çš„æ–°é•¿åº¦ã€‚</p><p>ä¸è¦ä½¿ç”¨é¢å¤–çš„æ•°ç»„ç©ºé—´ï¼Œä½ å¿…é¡»åœ¨ åŸåœ° ä¿®æ”¹è¾“å…¥æ•°ç»„ å¹¶åœ¨ä½¿ç”¨ O(1) é¢å¤–ç©ºé—´çš„æ¡ä»¶ä¸‹å®Œæˆã€‚ </p><p>è¯´æ˜:</p><p>ä¸ºä»€ä¹ˆè¿”å›æ•°å€¼æ˜¯æ•´æ•°ï¼Œä½†è¾“å‡ºçš„ç­”æ¡ˆæ˜¯æ•°ç»„å‘¢?</p><p>è¯·æ³¨æ„ï¼Œè¾“å…¥æ•°ç»„æ˜¯ä»¥ã€Œå¼•ç”¨ã€æ–¹å¼ä¼ é€’çš„ï¼Œè¿™æ„å‘³ç€åœ¨å‡½æ•°é‡Œä¿®æ”¹è¾“å…¥æ•°ç»„å¯¹äºè°ƒç”¨è€…æ˜¯å¯è§çš„ã€‚</p><p>ä½ å¯ä»¥æƒ³è±¡å†…éƒ¨æ“ä½œå¦‚ä¸‹:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// nums æ˜¯ä»¥â€œå¼•ç”¨â€æ–¹å¼ä¼ é€’çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸å¯¹å®å‚åšä»»ä½•æ‹·è´</span></span><br><span class="line"><span class="keyword">int</span> len = removeDuplicates(nums);</span><br><span class="line"><span class="comment">// åœ¨å‡½æ•°é‡Œä¿®æ”¹è¾“å…¥æ•°ç»„å¯¹äºè°ƒç”¨è€…æ˜¯å¯è§çš„ã€‚</span></span><br><span class="line"><span class="comment">// æ ¹æ®ä½ çš„å‡½æ•°è¿”å›çš„é•¿åº¦, å®ƒä¼šæ‰“å°å‡ºæ•°ç»„ä¸­ è¯¥é•¿åº¦èŒƒå›´å†… çš„æ‰€æœ‰å…ƒç´ ã€‚</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">    print(nums[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ 1ï¼š</p><p>è¾“å…¥ï¼šnums = [1,1,2]<br>è¾“å‡ºï¼š2, nums = [1,2]<br>è§£é‡Šï¼šå‡½æ•°åº”è¯¥è¿”å›æ–°çš„é•¿åº¦ 2 ï¼Œå¹¶ä¸”åŸæ•°ç»„ nums çš„å‰ä¸¤ä¸ªå…ƒç´ è¢«ä¿®æ”¹ä¸º 1, 2 ã€‚ä¸éœ€è¦è€ƒè™‘æ•°ç»„ä¸­è¶…å‡ºæ–°é•¿åº¦åé¢çš„å…ƒç´ ã€‚<br>ç¤ºä¾‹ 2ï¼š</p><p>è¾“å…¥ï¼šnums = [0,0,1,1,1,2,2,3,3,4]<br>è¾“å‡ºï¼š5, nums = [0,1,2,3,4]<br>è§£é‡Šï¼šå‡½æ•°åº”è¯¥è¿”å›æ–°çš„é•¿åº¦ 5 ï¼Œ å¹¶ä¸”åŸæ•°ç»„ nums çš„å‰äº”ä¸ªå…ƒç´ è¢«ä¿®æ”¹ä¸º 0, 1, 2, 3, 4 ã€‚ä¸éœ€è¦è€ƒè™‘æ•°ç»„ä¸­è¶…å‡ºæ–°é•¿åº¦åé¢çš„å…ƒç´ ã€‚</p><p>æç¤ºï¼š</p><p>0 &lt;= nums.length &lt;= 3 * 104<br>-104 &lt;= nums[i] &lt;= 104<br>nums å·²æŒ‰å‡åºæ’åˆ—</p><h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>å‡å¦‚è¾“å…¥ <code>[0,0,1,1,1,2,2,3,3,4]</code></p><p>æœ€ç»ˆçš„ç»“æœåº”è¯¥æ˜¯<code>[0,1,2,3,4,2,2,3,3,4]</code></p><p><strong>count</strong> å˜é‡ç”¨æ¥å­˜å‚¨ä¸é‡å¤æ•°ç»„çš„ä¸ªæ•°</p><p><strong>offset</strong> ä½œä¸ºå½“å‰æ¸¸æ ‡è®°å½•åˆ¤æ–­ä¹‹åä¸é‡å¤çš„æ•°æ®çš„ä½ç½®</p><img src="https://cdn.jsdelivr.net/gh/zabernism/image@main/gao/image-20210819194952616.png" style="zoom:33%;" /><h2 id="è§£æ³•"><a href="#è§£æ³•" class="headerlink" title="è§£æ³•"></a>è§£æ³•</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">removeDuplicates</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (nums == <span class="keyword">null</span> || nums.length == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> result = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> offset = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>;i&lt;nums.length;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (nums[i] == nums[i - <span class="number">1</span>])&#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            nums[offset] = nums[i];</span><br><span class="line">            offset++;</span><br><span class="line">            result++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹&quot;&gt;&lt;a href=&quot;#åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹&quot; class=&quot;headerlink&quot; title=&quot;åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹&quot;&gt;&lt;/a&gt;åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://leetcode-cn.com/l</summary>
      
    
    
    
    
    <category term="ç®€å•" scheme="http://example.com/tags/%E7%AE%80%E5%8D%95/"/>
    
    <category term="æ•°ç»„" scheme="http://example.com/tags/%E6%95%B0%E7%BB%84/"/>
    
    <category term="åŒæŒ‡é’ˆ" scheme="http://example.com/tags/%E5%8F%8C%E6%8C%87%E9%92%88/"/>
    
  </entry>
  
  <entry>
    <title>MySQLä¸­çš„é”ğŸ”’</title>
    <link href="http://example.com/wiki/MySQL%E4%B8%AD%E7%9A%84%E9%94%81%F0%9F%94%92/"/>
    <id>http://example.com/wiki/MySQL%E4%B8%AD%E7%9A%84%E9%94%81%F0%9F%94%92/</id>
    <published>2021-08-19T07:17:31.000Z</published>
    <updated>2021-08-19T07:32:53.269Z</updated>
    
    <content type="html"><![CDATA[<p>ä¹è§‚é”å’Œæ‚²è§‚é”</p><h3 id="è¡¨é”å’Œè¡Œé”"><a href="#è¡¨é”å’Œè¡Œé”" class="headerlink" title="è¡¨é”å’Œè¡Œé”"></a>è¡¨é”å’Œè¡Œé”</h3><blockquote><p><strong>è¡¨é”</strong>ï¼š å¼€é”€å°ï¼ŒåŠ é”å¿«ï¼›ä¸ä¼šå‡ºç°æ­»é”ï¼›é”å®šåŠ›åº¦å¤§ï¼Œå‘ç”Ÿé”å†²çªæ¦‚ç‡é«˜ï¼Œå¹¶å‘åº¦æœ€ä½</p></blockquote><p>è¡¨é”æŒ‰ç…§æ•°æ®æ“ä½œå¯ä»¥åˆ†æˆä¸¤ç§ï¼š</p><ul><li>è¡¨è¯»é”ï¼ˆTable Read Lockï¼‰</li><li>è¡¨å†™é”ï¼ˆTable Write Lock</li></ul><p>è¯»è¯»ä¸é˜»å¡ï¼šå½“å‰ç”¨æˆ·åœ¨è¯»æ•°æ®ï¼Œå…¶ä»–çš„ç”¨æˆ·ä¹Ÿåœ¨è¯»æ•°æ®ï¼Œä¸ä¼šåŠ é”</p><p>è¯»å†™é˜»å¡ï¼šå½“å‰ç”¨æˆ·åœ¨è¯»æ•°æ®ï¼Œå…¶ä»–çš„ç”¨æˆ·<strong>ä¸èƒ½ä¿®æ”¹å½“å‰ç”¨æˆ·è¯»çš„æ•°æ®</strong>ï¼Œä¼šåŠ é”ï¼</p><p>å†™å†™é˜»å¡ï¼šå½“å‰ç”¨æˆ·åœ¨ä¿®æ”¹æ•°æ®ï¼Œå…¶ä»–çš„ç”¨æˆ·<strong>ä¸èƒ½ä¿®æ”¹å½“å‰ç”¨æˆ·æ­£åœ¨ä¿®æ”¹çš„æ•°æ®</strong>ï¼Œä¼šåŠ é”ï¼</p><blockquote><p><strong>è¡Œé”</strong>ï¼š å¼€é”€å¤§ï¼ŒåŠ é”æ…¢ï¼›ä¼šå‡ºç°æ­»é”ï¼›é”å®šç²’åº¦å°ï¼Œå‘ç”Ÿé”å†²çªçš„æ¦‚ç‡ä½ï¼Œå¹¶å‘åº¦é«˜</p></blockquote><p>InnoDBå®ç°äº†ä»¥ä¸‹<strong>ä¸¤ç§</strong>ç±»å‹çš„è¡Œé”ã€‚</p><ul><li><p>å…±äº«é”ï¼ˆSé”ï¼‰ï¼šå…è®¸ä¸€ä¸ªäº‹åŠ¡å»è¯»ä¸€è¡Œï¼Œé˜»æ­¢å…¶ä»–äº‹åŠ¡è·å¾—ç›¸åŒæ•°æ®é›†çš„æ’ä»–é”ã€‚</p></li><li><p>ä¹Ÿå«åš<strong>è¯»é”</strong>ï¼šè¯»é”æ˜¯<strong>å…±äº«</strong>çš„ï¼Œå¤šä¸ªå®¢æˆ·å¯ä»¥<strong>åŒæ—¶è¯»å–åŒä¸€ä¸ª</strong>èµ„æºï¼Œä½†<strong>ä¸å…è®¸å…¶ä»–å®¢æˆ·ä¿®æ”¹</strong>ã€‚</p></li><li><p>æ’ä»–é”ï¼ˆXé”)ï¼šå…è®¸è·å¾—æ’ä»–é”çš„äº‹åŠ¡æ›´æ–°æ•°æ®ï¼Œé˜»æ­¢å…¶ä»–äº‹åŠ¡å–å¾—ç›¸åŒæ•°æ®é›†çš„å…±äº«è¯»é”å’Œæ’ä»–å†™é”ã€‚</p></li><li><p>ä¹Ÿå«åš<strong>å†™é”</strong>ï¼šå†™é”æ˜¯æ’ä»–çš„ï¼Œ<strong>å†™é”ä¼šé˜»å¡å…¶ä»–çš„å†™é”å’Œè¯»é”</strong>ã€‚</p></li></ul><p>å¦å¤–ï¼Œ<strong>ä¸ºäº†å…è®¸è¡Œé”å’Œè¡¨é”å…±å­˜ï¼Œå®ç°å¤šç²’åº¦é”æœºåˆ¶</strong>ï¼ŒInnoDBè¿˜æœ‰ä¸¤ç§å†…éƒ¨ä½¿ç”¨çš„æ„å‘é”ï¼ˆIntention Locksï¼‰ï¼Œè¿™ä¸¤ç§æ„å‘é”éƒ½æ˜¯<strong>è¡¨é”</strong>ï¼š</p><ul><li>æ„å‘å…±äº«é”ï¼ˆISï¼‰ï¼šäº‹åŠ¡æ‰“ç®—ç»™æ•°æ®è¡ŒåŠ è¡Œå…±äº«é”ï¼Œäº‹åŠ¡åœ¨ç»™ä¸€ä¸ªæ•°æ®è¡ŒåŠ å…±äº«é”å‰å¿…é¡»å…ˆå–å¾—è¯¥è¡¨çš„ISé”ã€‚</li><li>æ„å‘æ’ä»–é”ï¼ˆIXï¼‰ï¼šäº‹åŠ¡æ‰“ç®—ç»™æ•°æ®è¡ŒåŠ è¡Œæ’ä»–é”ï¼Œäº‹åŠ¡åœ¨ç»™ä¸€ä¸ªæ•°æ®è¡ŒåŠ æ’ä»–é”å‰å¿…é¡»å…ˆå–å¾—è¯¥è¡¨çš„IXé”ã€‚</li><li>æ„å‘é”ä¹Ÿæ˜¯æ•°æ®åº“éšå¼å¸®æˆ‘ä»¬åšäº†ï¼Œ<strong>ä¸éœ€è¦ç¨‹åºå‘˜æ“å¿ƒ</strong>ï¼</li></ul><p>âš ï¸ <strong>InnoDBè¡Œé”å’Œè¡¨é”éƒ½æ”¯æŒ</strong>ï¼<font color=red><strong>MyISAMåªæ”¯æŒè¡¨é”</strong>ï¼</font></p><h3 id="innoDBä»€ä¹ˆæ—¶å€™ä¼šä½¿ç”¨åˆ°è¡Œé”ï¼Ÿ"><a href="#innoDBä»€ä¹ˆæ—¶å€™ä¼šä½¿ç”¨åˆ°è¡Œé”ï¼Ÿ" class="headerlink" title="innoDBä»€ä¹ˆæ—¶å€™ä¼šä½¿ç”¨åˆ°è¡Œé”ï¼Ÿ"></a>innoDBä»€ä¹ˆæ—¶å€™ä¼šä½¿ç”¨åˆ°è¡Œé”ï¼Ÿ</h3><p>InnoDBåªæœ‰é€šè¿‡<strong>ç´¢å¼•æ¡ä»¶</strong>æ£€ç´¢æ•°æ®<strong>æ‰ä½¿ç”¨è¡Œçº§é”</strong>ï¼Œå¦åˆ™ï¼ŒInnoDBå°†ä½¿ç”¨<strong>è¡¨é”</strong></p><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://mp.weixin.qq.com/s?__biz=MzI4Njg5MDA5NA==&mid=2247484721&idx=1&sn=410dea1863ba823bec802769e1e6fe8a&chksm=ebd74430dca0cd265a9a91dcb2059e368f43a25f3de578c9dbb105e1fba0947e1fd0b9c2f4ef&token=1676899695&lang=zh_CN###rd">æ•°æ®åº“ä¸¤å¤§ç¥å™¨ã€ç´¢å¼•å’Œé”ã€‘</a></p><p><a href="https://geekibli.github.io/wiki/mysql%E4%B9%90%E8%A7%82%E9%94%81%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/">åŸºäºæ•°æ®è¡¨ä¹è§‚é”å®ç°åˆ†å¸ƒå¼é”</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä¹è§‚é”å’Œæ‚²è§‚é”&lt;/p&gt;
&lt;h3 id=&quot;è¡¨é”å’Œè¡Œé”&quot;&gt;&lt;a href=&quot;#è¡¨é”å’Œè¡Œé”&quot; class=&quot;headerlink&quot; title=&quot;è¡¨é”å’Œè¡Œé”&quot;&gt;&lt;/a&gt;è¡¨é”å’Œè¡Œé”&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;è¡¨é”&lt;/strong&gt;ï¼š å¼€é”€å°ï¼ŒåŠ é”å¿«ï¼›ä¸</summary>
      
    
    
    
    
    <category term="MySQL" scheme="http://example.com/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>MySQLæ€§èƒ½è°ƒä¼˜</title>
    <link href="http://example.com/wiki/MySQL%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98/"/>
    <id>http://example.com/wiki/MySQL%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98/</id>
    <published>2021-08-19T06:06:45.000Z</published>
    <updated>2021-08-19T08:25:08.529Z</updated>
    
    <content type="html"><![CDATA[<h5 id="1ã€ä½¿ç”¨ã€-è¦†ç›–ç´¢å¼•-ã€‘é¿å…å›è¡¨é”é€ æˆçš„æ—¶é—´æ¶ˆè€—"><a href="#1ã€ä½¿ç”¨ã€-è¦†ç›–ç´¢å¼•-ã€‘é¿å…å›è¡¨é”é€ æˆçš„æ—¶é—´æ¶ˆè€—" class="headerlink" title="1ã€ä½¿ç”¨ã€ è¦†ç›–ç´¢å¼• ã€‘é¿å…å›è¡¨é”é€ æˆçš„æ—¶é—´æ¶ˆè€—"></a>1ã€ä½¿ç”¨ã€ è¦†ç›–ç´¢å¼• ã€‘é¿å…å›è¡¨é”é€ æˆçš„æ—¶é—´æ¶ˆè€—</h5><p>1ã€æŸ¥è¯¢è¯­å¥çš„æ—¶å€™é¿å…ä½¿ç”¨select * </p><p>2ã€åˆ›å»ºç´¢å¼•æ·»åŠ é€‚å½“çš„åˆ—é¿å…å›è¡¨</p><h5 id="2ã€ä½¿ç”¨ã€-è”åˆç´¢å¼•-ã€‘åŒºåˆ†åº¦æ¯”è¾ƒé«˜çš„åˆ—æ”¾åˆ°å‰é¢"><a href="#2ã€ä½¿ç”¨ã€-è”åˆç´¢å¼•-ã€‘åŒºåˆ†åº¦æ¯”è¾ƒé«˜çš„åˆ—æ”¾åˆ°å‰é¢" class="headerlink" title="2ã€ä½¿ç”¨ã€ è”åˆç´¢å¼• ã€‘åŒºåˆ†åº¦æ¯”è¾ƒé«˜çš„åˆ—æ”¾åˆ°å‰é¢"></a>2ã€ä½¿ç”¨ã€ è”åˆç´¢å¼• ã€‘åŒºåˆ†åº¦æ¯”è¾ƒé«˜çš„åˆ—æ”¾åˆ°å‰é¢</h5><p>æ³¨æ„è”åˆç´¢å¼•çš„æœ€å·¦åŒ¹é…åŸåˆ™</p><h5 id="3ã€å¯¹ç´¢å¼•è¿›è¡Œå‡½æ•°è®¡ç®—æˆ–è€…è¡¨è¾¾å¼è®¡ç®—ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆ-ğŸ”’"><a href="#3ã€å¯¹ç´¢å¼•è¿›è¡Œå‡½æ•°è®¡ç®—æˆ–è€…è¡¨è¾¾å¼è®¡ç®—ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆ-ğŸ”’" class="headerlink" title="3ã€å¯¹ç´¢å¼•è¿›è¡Œå‡½æ•°è®¡ç®—æˆ–è€…è¡¨è¾¾å¼è®¡ç®—ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆ ğŸ”’"></a>3ã€å¯¹ç´¢å¼•è¿›è¡Œå‡½æ•°è®¡ç®—æˆ–è€…è¡¨è¾¾å¼è®¡ç®—ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆ ğŸ”’</h5><h5 id="4ã€åˆ©ç”¨å­æŸ¥è¯¢ä¼˜åŒ–è¶…å¤šåˆ†é¡µåœºæ™¯"><a href="#4ã€åˆ©ç”¨å­æŸ¥è¯¢ä¼˜åŒ–è¶…å¤šåˆ†é¡µåœºæ™¯" class="headerlink" title="4ã€åˆ©ç”¨å­æŸ¥è¯¢ä¼˜åŒ–è¶…å¤šåˆ†é¡µåœºæ™¯"></a>4ã€åˆ©ç”¨å­æŸ¥è¯¢ä¼˜åŒ–è¶…å¤šåˆ†é¡µåœºæ™¯</h5><h5 id="5ã€explainå‘½ä»¤æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’-show-profileæŸ¥è¯¢æ‰§è¡Œçš„æ€§èƒ½æ¶ˆè€—"><a href="#5ã€explainå‘½ä»¤æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’-show-profileæŸ¥è¯¢æ‰§è¡Œçš„æ€§èƒ½æ¶ˆè€—" class="headerlink" title="5ã€explainå‘½ä»¤æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’ show profileæŸ¥è¯¢æ‰§è¡Œçš„æ€§èƒ½æ¶ˆè€—"></a>5ã€explainå‘½ä»¤æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’ show profileæŸ¥è¯¢æ‰§è¡Œçš„æ€§èƒ½æ¶ˆè€—</h5><p><a href="https://mp.weixin.qq.com/s?__biz=MzI4Njg5MDA5NA==&mid=2247484461&idx=2&sn=5469534e2f370aba86c3a24a2ff52b70&chksm=ebd7452cdca0cc3ad456d695a78f48e72c245f85b4afb210fb7b62218e89785d964d72ec4891&token=620000779&lang=zh_CN&scene=21###wechat_redirect">é¢è¯•å‰å¿…é¡»çŸ¥é“çš„MySQLå‘½ä»¤ã€expalinã€‘ -3y</a></p><h5 id="6ã€åœ¨äº‹åŠ¡å¼€å§‹åï¼Œäº‹åŠ¡å†…å°½å¯èƒ½åªæ“ä½œæ•°æ®åº“ï¼Œå‡å°‘é”æŒæœ‰æ—¶é—´"><a href="#6ã€åœ¨äº‹åŠ¡å¼€å§‹åï¼Œäº‹åŠ¡å†…å°½å¯èƒ½åªæ“ä½œæ•°æ®åº“ï¼Œå‡å°‘é”æŒæœ‰æ—¶é—´" class="headerlink" title="6ã€åœ¨äº‹åŠ¡å¼€å§‹åï¼Œäº‹åŠ¡å†…å°½å¯èƒ½åªæ“ä½œæ•°æ®åº“ï¼Œå‡å°‘é”æŒæœ‰æ—¶é—´"></a>6ã€åœ¨äº‹åŠ¡å¼€å§‹åï¼Œäº‹åŠ¡å†…å°½å¯èƒ½åªæ“ä½œæ•°æ®åº“ï¼Œå‡å°‘é”æŒæœ‰æ—¶é—´</h5><h5 id="7ã€å°½é‡é¿å…å­—ç¬¦ä¸²æŸ¥è¯¢ï¼Œå¦‚æœå…è®¸çš„è¯å¯ä»¥ä½¿ç”¨Elasticsearch"><a href="#7ã€å°½é‡é¿å…å­—ç¬¦ä¸²æŸ¥è¯¢ï¼Œå¦‚æœå…è®¸çš„è¯å¯ä»¥ä½¿ç”¨Elasticsearch" class="headerlink" title="7ã€å°½é‡é¿å…å­—ç¬¦ä¸²æŸ¥è¯¢ï¼Œå¦‚æœå…è®¸çš„è¯å¯ä»¥ä½¿ç”¨Elasticsearch"></a>7ã€å°½é‡é¿å…å­—ç¬¦ä¸²æŸ¥è¯¢ï¼Œå¦‚æœå…è®¸çš„è¯å¯ä»¥ä½¿ç”¨Elasticsearch</h5><h5 id="8ã€å¦‚æœä¼˜åŒ–éƒ½åšäº†è¿˜æ˜¯æŸ¥è¯¢çš„å¾ˆæ…¢ï¼Œå¯ä»¥åšä¸€äº›èšåˆè¡¨ï¼Œçº¿ä¸Šçš„ä¸šåŠ¡ç›´æ¥æŸ¥èšåˆä¹‹åçš„æ•°æ®"><a href="#8ã€å¦‚æœä¼˜åŒ–éƒ½åšäº†è¿˜æ˜¯æŸ¥è¯¢çš„å¾ˆæ…¢ï¼Œå¯ä»¥åšä¸€äº›èšåˆè¡¨ï¼Œçº¿ä¸Šçš„ä¸šåŠ¡ç›´æ¥æŸ¥èšåˆä¹‹åçš„æ•°æ®" class="headerlink" title="8ã€å¦‚æœä¼˜åŒ–éƒ½åšäº†è¿˜æ˜¯æŸ¥è¯¢çš„å¾ˆæ…¢ï¼Œå¯ä»¥åšä¸€äº›èšåˆè¡¨ï¼Œçº¿ä¸Šçš„ä¸šåŠ¡ç›´æ¥æŸ¥èšåˆä¹‹åçš„æ•°æ®"></a>8ã€å¦‚æœä¼˜åŒ–éƒ½åšäº†è¿˜æ˜¯æŸ¥è¯¢çš„å¾ˆæ…¢ï¼Œå¯ä»¥åšä¸€äº›èšåˆè¡¨ï¼Œçº¿ä¸Šçš„ä¸šåŠ¡ç›´æ¥æŸ¥èšåˆä¹‹åçš„æ•°æ®</h5><h5 id="9ã€è¯»å†™ç“¶é¢ˆé—®é¢˜"><a href="#9ã€è¯»å†™ç“¶é¢ˆé—®é¢˜" class="headerlink" title="9ã€è¯»å†™ç“¶é¢ˆé—®é¢˜"></a>9ã€è¯»å†™ç“¶é¢ˆé—®é¢˜</h5><p>9.1 å¦‚æœæ˜¯å•åº“çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥è€ƒè™‘è¯»å†™åˆ†ç¦»ï¼Œæå‡è¯»/å†™çš„æ€§èƒ½</p><p>9.2 ä¸»ä»ç»“æ„ä¸‹è¿˜æ˜¯å­˜åœ¨ç“¶é¢ˆçš„è¯ï¼Œå¯ä»¥è€ƒè™‘åˆ†åº“åˆ†è¡¨</p><p>æ³¨æ„ åˆ†åº“åˆ†è¡¨ä¸‹çš„idå°½é‡ä¿è¯é€’å¢</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h5 id=&quot;1ã€ä½¿ç”¨ã€-è¦†ç›–ç´¢å¼•-ã€‘é¿å…å›è¡¨é”é€ æˆçš„æ—¶é—´æ¶ˆè€—&quot;&gt;&lt;a href=&quot;#1ã€ä½¿ç”¨ã€-è¦†ç›–ç´¢å¼•-ã€‘é¿å…å›è¡¨é”é€ æˆçš„æ—¶é—´æ¶ˆè€—&quot; class=&quot;headerlink&quot; title=&quot;1ã€ä½¿ç”¨ã€ è¦†ç›–ç´¢å¼• ã€‘é¿å…å›è¡¨é”é€ æˆçš„æ—¶é—´æ¶ˆè€—&quot;&gt;&lt;/a&gt;1ã€ä½¿ç”¨ã€ è¦†ç›–ç´¢å¼• ã€‘é¿å…</summary>
      
    
    
    
    
    <category term="MySQL" scheme="http://example.com/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>kafka-åŸºç¡€çŸ¥è¯†</title>
    <link href="http://example.com/wiki/kafka-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"/>
    <id>http://example.com/wiki/kafka-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/</id>
    <published>2021-08-18T12:05:29.000Z</published>
    <updated>2021-08-18T12:14:58.230Z</updated>
    
    <content type="html"><![CDATA[<h2 id="kafkaæ˜¯ä»€ä¹ˆ"><a href="#kafkaæ˜¯ä»€ä¹ˆ" class="headerlink" title="kafkaæ˜¯ä»€ä¹ˆ"></a>kafkaæ˜¯ä»€ä¹ˆ</h2><h2 id="kafkaè¿è¡Œæ—¶æ¶æ„"><a href="#kafkaè¿è¡Œæ—¶æ¶æ„" class="headerlink" title="kafkaè¿è¡Œæ—¶æ¶æ„"></a>kafkaè¿è¡Œæ—¶æ¶æ„</h2><h2 id="kafkaä¸ºä»€ä¹ˆèƒ½æ‰¿è½½é«˜å¹¶å‘"><a href="#kafkaä¸ºä»€ä¹ˆèƒ½æ‰¿è½½é«˜å¹¶å‘" class="headerlink" title="kafkaä¸ºä»€ä¹ˆèƒ½æ‰¿è½½é«˜å¹¶å‘"></a>kafkaä¸ºä»€ä¹ˆèƒ½æ‰¿è½½é«˜å¹¶å‘</h2><h2 id="kafkaçš„ç¡®è®¤æœºåˆ¶æ˜¯ä»€ä¹ˆ"><a href="#kafkaçš„ç¡®è®¤æœºåˆ¶æ˜¯ä»€ä¹ˆ" class="headerlink" title="kafkaçš„ç¡®è®¤æœºåˆ¶æ˜¯ä»€ä¹ˆ"></a>kafkaçš„ç¡®è®¤æœºåˆ¶æ˜¯ä»€ä¹ˆ</h2><h2 id="kafkaå¦‚ä½•ä¿è¯æ¶ˆæ¯å‡†ç¡®"><a href="#kafkaå¦‚ä½•ä¿è¯æ¶ˆæ¯å‡†ç¡®" class="headerlink" title="kafkaå¦‚ä½•ä¿è¯æ¶ˆæ¯å‡†ç¡®"></a>kafkaå¦‚ä½•ä¿è¯æ¶ˆæ¯å‡†ç¡®</h2><p>kafkaä¼šä¸¢æ¶ˆæ¯å—ï¼Ÿ</p><p>kafkaä¼šé‡å¤æ¶ˆè´¹æ¶ˆæ¯å—</p><p>å¹‚ç­‰æ€§</p><h2 id="æ¶ˆæ¯é¡ºåºæ¶ˆè´¹é—®é¢˜"><a href="#æ¶ˆæ¯é¡ºåºæ¶ˆè´¹é—®é¢˜" class="headerlink" title="æ¶ˆæ¯é¡ºåºæ¶ˆè´¹é—®é¢˜"></a>æ¶ˆæ¯é¡ºåºæ¶ˆè´¹é—®é¢˜</h2><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://mp.weixin.qq.com/s?__biz=MzU4NzA3MTc5Mg==&mid=2247484387&idx=1&sn=5bb2ba58776e65f53b091a4bcdb73755&chksm=fdf0ebbcca8762aadc359066ecd70274fa23ee846f9ba9114017402dcbed415f25f97d3020a6&token=1131755397&lang=zh_CN&scene=21#wechat_redirect">kafkaåŸºç¡€çŸ¥è¯† - yyy</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;kafkaæ˜¯ä»€ä¹ˆ&quot;&gt;&lt;a href=&quot;#kafkaæ˜¯ä»€ä¹ˆ&quot; class=&quot;headerlink&quot; title=&quot;kafkaæ˜¯ä»€ä¹ˆ&quot;&gt;&lt;/a&gt;kafkaæ˜¯ä»€ä¹ˆ&lt;/h2&gt;&lt;h2 id=&quot;kafkaè¿è¡Œæ—¶æ¶æ„&quot;&gt;&lt;a href=&quot;#kafkaè¿è¡Œæ—¶æ¶æ„&quot; class=&quot;</summary>
      
    
    
    
    
    <category term="kafka" scheme="http://example.com/tags/kafka/"/>
    
  </entry>
  
  <entry>
    <title>Spring-äº‹åŠ¡éš”ç¦»</title>
    <link href="http://example.com/wiki/Spring-%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB/"/>
    <id>http://example.com/wiki/Spring-%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB/</id>
    <published>2021-08-18T03:10:21.000Z</published>
    <updated>2021-08-18T03:11:08.793Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a href="https://juejin.cn/post/6854573219916021767">https://juejin.cn/post/6854573219916021767</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;å‚è€ƒèµ„æ–™&quot;&gt;&lt;a href=&quot;#å‚è€ƒèµ„æ–™&quot; class=&quot;headerlink&quot; title=&quot;å‚è€ƒèµ„æ–™&quot;&gt;&lt;/a&gt;å‚è€ƒèµ„æ–™&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://juejin.cn/post/6854573219916021767&quot;&gt;https://j</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Flink-ç‰©ç†åˆ†åŒºå‡½æ•°</title>
    <link href="http://example.com/wiki/Flink-%E7%89%A9%E7%90%86%E5%88%86%E5%8C%BA%E5%87%BD%E6%95%B0/"/>
    <id>http://example.com/wiki/Flink-%E7%89%A9%E7%90%86%E5%88%86%E5%8C%BA%E5%87%BD%E6%95%B0/</id>
    <published>2021-08-12T08:38:31.000Z</published>
    <updated>2021-08-12T08:55:41.849Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Flinkæä¾›çš„8ç§åˆ†åŒºå‡½æ•°"><a href="#Flinkæä¾›çš„8ç§åˆ†åŒºå‡½æ•°" class="headerlink" title="Flinkæä¾›çš„8ç§åˆ†åŒºå‡½æ•°"></a>Flinkæä¾›çš„8ç§åˆ†åŒºå‡½æ•°</h1><h2 id="GlobalPartitioner"><a href="#GlobalPartitioner" class="headerlink" title="GlobalPartitioner"></a>GlobalPartitioner</h2><p>è¯¥åˆ†åŒºå™¨ä¼šå°†æ‰€æœ‰çš„æ•°æ®éƒ½å‘é€åˆ°ä¸‹æ¸¸çš„æŸä¸ªç®—å­å®ä¾‹(subtask id = 0)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  æ•°æ®ä¼šè¢«åˆ†å‘åˆ°ä¸‹æ¸¸ç®—å­çš„ç¬¬ä¸€ä¸ªå®ä¾‹ä¸­è¿›è¡Œå¤„ç†</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">global</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        StreamExecutionEnvironment env = getEnv().setMaxParallelism(<span class="number">8</span>);</span><br><span class="line">        DataStreamSource&lt;String&gt; dataStream = env.fromElements(<span class="string">&quot;hhh&quot;</span>, <span class="string">&quot;ggg&quot;</span>, <span class="string">&quot;fff&quot;</span>, <span class="string">&quot;ddd&quot;</span>, <span class="string">&quot;sss&quot;</span>, <span class="string">&quot;aaa&quot;</span>, <span class="string">&quot;qqq&quot;</span>, <span class="string">&quot;www&quot;</span>);</span><br><span class="line">        dataStream.flatMap(<span class="keyword">new</span> RichFlatMapFunction&lt;String, String&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">flatMap</span><span class="params">(String s, Collector&lt;String&gt; collector)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                collector.collect(s + <span class="string">&quot;_**&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).setParallelism(<span class="number">2</span>).global().print(<span class="string">&quot;global : &quot;</span>);</span><br><span class="line"></span><br><span class="line">        env.execute();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="ShufflePartitioner"><a href="#ShufflePartitioner" class="headerlink" title="ShufflePartitioner"></a>ShufflePartitioner</h2><p>éšæœºé€‰æ‹©ä¸€ä¸ªä¸‹æ¸¸ç®—å­å®ä¾‹è¿›è¡Œå‘é€</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ•°æ®ä¼šè¢«éšæœºåˆ†å‘åˆ°ä¸‹æ¸¸ç®—å­çš„æ¯ä¸€ä¸ªå®ä¾‹ä¸­è¿›è¡Œ</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">shuffle</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        StreamExecutionEnvironment env = getEnv();</span><br><span class="line">        DataStreamSource&lt;String&gt; dataStream = env.fromElements(<span class="string">&quot;hhh&quot;</span>, <span class="string">&quot;ggg&quot;</span>, <span class="string">&quot;fff&quot;</span>, <span class="string">&quot;ddd&quot;</span>, <span class="string">&quot;sss&quot;</span>, <span class="string">&quot;aaa&quot;</span>, <span class="string">&quot;qqq&quot;</span>, <span class="string">&quot;www&quot;</span>);</span><br><span class="line">        DataStream&lt;String&gt; broadcast = dataStream.shuffle();</span><br><span class="line">        broadcast.print(<span class="string">&quot;shuffle : &quot;</span>);</span><br><span class="line">        env.execute();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="BroadcastPartitioner"><a href="#BroadcastPartitioner" class="headerlink" title="BroadcastPartitioner"></a>BroadcastPartitioner</h2><p>å‘é€åˆ°ä¸‹æ¸¸æ‰€æœ‰çš„ç®—å­å®ä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¹¿æ’­åˆ†åŒºä¼šå°†ä¸Šæ¸¸æ•°æ®è¾“å‡ºåˆ°ä¸‹æ¸¸ç®—å­çš„æ¯ä¸ªå®ä¾‹ä¸­ã€‚é€‚åˆäºå¤§æ•°æ®é›†å’Œå°æ•°æ®é›†åšJionçš„åœºæ™¯</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">broadcast</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        StreamExecutionEnvironment env = getEnv();</span><br><span class="line">        DataStreamSource&lt;String&gt; dataStream = env.fromElements(<span class="string">&quot;hhh&quot;</span>, <span class="string">&quot;ggg&quot;</span>, <span class="string">&quot;fff&quot;</span>, <span class="string">&quot;ddd&quot;</span>, <span class="string">&quot;sss&quot;</span>, <span class="string">&quot;aaa&quot;</span>, <span class="string">&quot;qqq&quot;</span>, <span class="string">&quot;www&quot;</span>);</span><br><span class="line">        DataStream&lt;String&gt; broadcast = dataStream.broadcast();</span><br><span class="line">        broadcast.print(<span class="string">&quot;broadcast : &quot;</span>);</span><br><span class="line">        env.execute();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="RebalancePartitioner"><a href="#RebalancePartitioner" class="headerlink" title="RebalancePartitioner"></a>RebalancePartitioner</h2><p>é€šè¿‡å¾ªç¯çš„æ–¹å¼ä¾æ¬¡å‘é€åˆ°ä¸‹æ¸¸çš„task</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">rebalance</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        StreamExecutionEnvironment env = getEnv().setParallelism(<span class="number">4</span>);</span><br><span class="line">        DataStreamSource&lt;String&gt; dataStream = env.fromElements(<span class="string">&quot;hhh&quot;</span>, <span class="string">&quot;ggg&quot;</span>, <span class="string">&quot;fff&quot;</span>, <span class="string">&quot;ddd&quot;</span>, <span class="string">&quot;sss&quot;</span>, <span class="string">&quot;aaa&quot;</span>, <span class="string">&quot;qqq&quot;</span>, <span class="string">&quot;www&quot;</span>);</span><br><span class="line">        dataStream.map(<span class="keyword">new</span> RichMapFunction&lt;String, String&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> String <span class="title">map</span><span class="params">(String s)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> s + <span class="string">&quot;_**&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).setParallelism(<span class="number">1</span>).rebalance().print(<span class="string">&quot;rebalance : &quot;</span>);</span><br><span class="line"></span><br><span class="line">        env.execute();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="RescalePartitioner"><a href="#RescalePartitioner" class="headerlink" title="RescalePartitioner"></a>RescalePartitioner</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿™ç§åˆ†åŒºå™¨ä¼šæ ¹æ®ä¸Šä¸‹æ¸¸ç®—å­çš„å¹¶è¡Œåº¦ï¼Œå¾ªç¯çš„æ–¹å¼è¾“å‡ºåˆ°ä¸‹æ¸¸ç®—å­çš„æ¯ä¸ªå®ä¾‹ã€‚è¿™é‡Œæœ‰ç‚¹éš¾ä»¥ç†è§£ï¼Œå‡è®¾ä¸Šæ¸¸å¹¶è¡Œåº¦ä¸º 2ï¼Œç¼–å·ä¸º A å’Œ Bã€‚ä¸‹æ¸¸å¹¶è¡Œåº¦ä¸º 4ï¼Œç¼–å·ä¸º 1ï¼Œ2ï¼Œ3ï¼Œ4ã€‚é‚£ä¹ˆ A åˆ™æŠŠæ•°æ®å¾ªç¯å‘é€ç»™ 1 å’Œ 2ï¼ŒB åˆ™æŠŠæ•°æ®å¾ªç¯å‘é€ç»™ 3 å’Œ 4ã€‚å‡è®¾ä¸Šæ¸¸å¹¶è¡Œåº¦ä¸º 4ï¼Œç¼–å·ä¸º Aï¼ŒBï¼ŒCï¼ŒDã€‚ä¸‹æ¸¸å¹¶è¡Œåº¦ä¸º 2ï¼Œç¼–å·ä¸º 1ï¼Œ2ã€‚é‚£ä¹ˆ A å’Œ B åˆ™æŠŠæ•°æ®å‘é€ç»™ 1ï¼ŒC å’Œ D åˆ™æŠŠæ•°æ®å‘é€ç»™ 2ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">rescale</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        StreamExecutionEnvironment env = getEnv().setParallelism(<span class="number">4</span>);</span><br><span class="line">        DataStreamSource&lt;String&gt; dataStream = env.fromElements(<span class="string">&quot;hhh&quot;</span>, <span class="string">&quot;ggg&quot;</span>, <span class="string">&quot;fff&quot;</span>, <span class="string">&quot;ddd&quot;</span>, <span class="string">&quot;sss&quot;</span>, <span class="string">&quot;aaa&quot;</span>, <span class="string">&quot;qqq&quot;</span>, <span class="string">&quot;www&quot;</span>);</span><br><span class="line">        dataStream.map(<span class="keyword">new</span> RichMapFunction&lt;String, String&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> String <span class="title">map</span><span class="params">(String s)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> s + <span class="string">&quot;_**&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).setParallelism(<span class="number">1</span>).rescale().print(<span class="string">&quot;rescale : &quot;</span>);</span><br><span class="line"></span><br><span class="line">        env.execute();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="ForwardPartitioner"><a href="#ForwardPartitioner" class="headerlink" title="ForwardPartitioner"></a>ForwardPartitioner</h2><p>å‘é€åˆ°ä¸‹æ¸¸å¯¹åº”çš„ç¬¬ä¸€ä¸ªtaskï¼Œä¿è¯ä¸Šä¸‹æ¸¸ç®—å­å¹¶è¡Œåº¦ä¸€è‡´ï¼Œå³ä¸Šæœ‰ç®—å­ä¸ä¸‹æ¸¸ç®—å­æ˜¯1:1çš„å…³ç³»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç”¨äºå°†è®°å½•è¾“å‡ºåˆ°ä¸‹æ¸¸æœ¬åœ°çš„ç®—å­å®ä¾‹ã€‚å®ƒè¦æ±‚ä¸Šä¸‹æ¸¸ç®—å­å¹¶è¡Œåº¦ä¸€æ ·ã€‚ç®€å•çš„è¯´ï¼ŒForwardPartitionerç”¨æ¥åšæ•°æ®çš„æ§åˆ¶å°æ‰“å°ã€‚</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">forward</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        StreamExecutionEnvironment env = getEnv().setParallelism(<span class="number">1</span>);</span><br><span class="line">        DataStreamSource&lt;String&gt; dataStream = env.fromElements(<span class="string">&quot;hhh&quot;</span>, <span class="string">&quot;ggg&quot;</span>, <span class="string">&quot;fff&quot;</span>, <span class="string">&quot;ddd&quot;</span>, <span class="string">&quot;sss&quot;</span>, <span class="string">&quot;aaa&quot;</span>, <span class="string">&quot;qqq&quot;</span>, <span class="string">&quot;www&quot;</span>);</span><br><span class="line">        DataStream&lt;String&gt; broadcast = dataStream.shuffle();</span><br><span class="line">        broadcast.print(<span class="string">&quot;shuffle : &quot;</span>);</span><br><span class="line">        env.execute();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>âš ï¸ åœ¨ä¸Šä¸‹æ¸¸çš„ç®—å­æ²¡æœ‰æŒ‡å®šåˆ†åŒºå™¨çš„æƒ…å†µä¸‹ï¼Œå¦‚æœä¸Šä¸‹æ¸¸çš„ç®—å­å¹¶è¡Œåº¦ä¸€è‡´ï¼Œåˆ™ä½¿ç”¨ForwardPartitionerï¼Œå¦åˆ™ä½¿ç”¨RebalancePartitionerï¼Œå¯¹äºForwardPartitionerï¼Œå¿…é¡»ä¿è¯ä¸Šä¸‹æ¸¸ç®—å­å¹¶è¡Œåº¦ä¸€è‡´ï¼Œå¦åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p><h2 id="KeyByPartitioner"><a href="#KeyByPartitioner" class="headerlink" title="KeyByPartitioner"></a>KeyByPartitioner</h2><p>æ ¹æ®keyçš„åˆ†ç»„ç´¢å¼•é€‰æ‹©å‘é€åˆ°ç›¸å¯¹åº”çš„ä¸‹æ¸¸subtask</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">keyBy</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        StreamExecutionEnvironment env = getEnv().setMaxParallelism(<span class="number">8</span>);</span><br><span class="line">        DataStreamSource&lt;String&gt; dataStream = env.fromElements(<span class="string">&quot;hhh&quot;</span>, <span class="string">&quot;hhh&quot;</span>, <span class="string">&quot;hhh&quot;</span>, <span class="string">&quot;hhh&quot;</span>, <span class="string">&quot;sss&quot;</span>, <span class="string">&quot;sss&quot;</span>, <span class="string">&quot;sss&quot;</span>, <span class="string">&quot;www&quot;</span>);</span><br><span class="line">        dataStream.flatMap(<span class="keyword">new</span> RichFlatMapFunction&lt;String, String&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">flatMap</span><span class="params">(String s, Collector&lt;String&gt; collector)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                collector.collect(s + <span class="string">&quot;_**&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).keyBy(String::toString).print(<span class="string">&quot;keyBy : &quot;</span>);</span><br><span class="line"></span><br><span class="line">        env.execute();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="CustomPartitionerWrapper"><a href="#CustomPartitionerWrapper" class="headerlink" title="CustomPartitionerWrapper"></a>CustomPartitionerWrapper</h2><p>é€šè¿‡Partitionerå®ä¾‹çš„partitionæ–¹æ³•(è‡ªå®šä¹‰çš„)å°†è®°å½•è¾“å‡ºåˆ°ä¸‹æ¸¸ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">custom</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        StreamExecutionEnvironment env = getEnv().setMaxParallelism(<span class="number">8</span>);</span><br><span class="line">        DataStreamSource&lt;String&gt; dataStream = env.fromElements(<span class="string">&quot;hhhh&quot;</span>, <span class="string">&quot;hhhss&quot;</span>, <span class="string">&quot;hhh&quot;</span>, <span class="string">&quot;hhh&quot;</span>, <span class="string">&quot;sss&quot;</span>, <span class="string">&quot;sss&quot;</span>, <span class="string">&quot;sss&quot;</span>, <span class="string">&quot;www&quot;</span>);</span><br><span class="line">        dataStream.flatMap(<span class="keyword">new</span> RichFlatMapFunction&lt;String, String&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">flatMap</span><span class="params">(String s, Collector&lt;String&gt; collector)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                collector.collect(s + <span class="string">&quot;_**&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).partitionCustom(<span class="keyword">new</span> CustomPartitioner(),String::toString)</span><br><span class="line">        .print(<span class="string">&quot;custom :&quot;</span>);</span><br><span class="line"></span><br><span class="line">        env.execute();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomPartitioner</span> <span class="keyword">implements</span> <span class="title">Partitioner</span>&lt;<span class="title">String</span>&gt; </span>&#123;</span><br><span class="line">        <span class="comment">// key: æ ¹æ®keyçš„å€¼æ¥åˆ†åŒº</span></span><br><span class="line">        <span class="comment">// numPartitions: ä¸‹æ¸¸ç®—å­å¹¶è¡Œåº¦</span></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">partition</span><span class="params">(String key, <span class="keyword">int</span> numPartitions)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> key.length() % numPartitions;<span class="comment">//åœ¨æ­¤å¤„å®šä¹‰åˆ†åŒºç­–ç•¥</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><a href="https://blog.csdn.net/qq_36039236/article/details/112576091?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-0.control&spm=1001.2101.3001.4242">Flinkçš„å…«ç§åˆ†åŒºç­–ç•¥æºç è§£è¯»</a></p><p><a href="https://ci.apache.org/projects/flink/flink-docs-release-1.13/zh/docs/dev/datastream/operators/overview/#custom-partitioning">Apache Flink ä¸­æ–‡æ–‡æ¡£</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Flinkæä¾›çš„8ç§åˆ†åŒºå‡½æ•°&quot;&gt;&lt;a href=&quot;#Flinkæä¾›çš„8ç§åˆ†åŒºå‡½æ•°&quot; class=&quot;headerlink&quot; title=&quot;Flinkæä¾›çš„8ç§åˆ†åŒºå‡½æ•°&quot;&gt;&lt;/a&gt;Flinkæä¾›çš„8ç§åˆ†åŒºå‡½æ•°&lt;/h1&gt;&lt;h2 id=&quot;GlobalPartitioner</summary>
      
    
    
    
    
    <category term="Apache Flink" scheme="http://example.com/tags/Apache-Flink/"/>
    
  </entry>
  
  <entry>
    <title>Flink-UDFå‡½æ•°ç±»</title>
    <link href="http://example.com/wiki/Flink-UDF%E5%87%BD%E6%95%B0%E7%B1%BB/"/>
    <id>http://example.com/wiki/Flink-UDF%E5%87%BD%E6%95%B0%E7%B1%BB/</id>
    <published>2021-08-12T06:36:09.000Z</published>
    <updated>2021-08-12T07:18:26.151Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‡½æ•°ç±»"><a href="#å‡½æ•°ç±»" class="headerlink" title="å‡½æ•°ç±»"></a>å‡½æ•°ç±»</h2><p>æ¯”å¦‚è¯´æˆ‘ä»¬å¸¸ç”¨çš„MapFunctionï¼ŒFilterFunctionï¼ŒProcessFunctionç­‰ï¼Œæ¯ä¸€æ­¥æ“ä½œéƒ½åŸºæœ¬ä¸Šéƒ½å¯¹åº”ä¸€ä¸ªFunctionã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyFlatMapper</span> <span class="keyword">implements</span> <span class="title">FlatMapFunction</span>&lt;<span class="title">String</span>, <span class="title">Tuple2</span>&lt;<span class="title">String</span>, <span class="title">Integer</span>&gt;&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">flatMap</span><span class="params">(String s, Collector&lt;Tuple2&lt;String, Integer&gt;&gt; collector)</span> </span>&#123;</span><br><span class="line">      <span class="comment">// é¦–å…ˆæŒ‰ç…§ç©ºæ ¼åˆ†è¯</span></span><br><span class="line">      String[] words = s.split(<span class="string">&quot; &quot;</span>);</span><br><span class="line">      <span class="comment">// éå†æ‰€æœ‰çš„word åŒ…è£…æˆäºŒå…ƒç»„è¾“å‡º</span></span><br><span class="line">      <span class="keyword">for</span> (String word : words) &#123;</span><br><span class="line">        collector.collect(<span class="keyword">new</span> Tuple2&lt;String, Integer&gt;(word, <span class="number">1</span>));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>âš ï¸ ç®€å•æ»šåŠ¨èšåˆå‡½æ•°ï¼Œæ¯”å¦‚sumï¼Œmaxæ˜¯ä¸éœ€è¦Functionã€‚</p><p><strong>å¥½å¤„ï¼š</strong></p><p>1ã€é€šç”¨å‹å¼ºï¼Œå¯å¤ç”¨</p><p>2ã€å¯æŠ½è±¡æ–¹æ³•ï¼Œä»£ç ç®€æ´</p><h2 id="åŒ¿åå‡½æ•°"><a href="#åŒ¿åå‡½æ•°" class="headerlink" title="åŒ¿åå‡½æ•°"></a>åŒ¿åå‡½æ•°</h2><p>ä¸éœ€è¦å•ç‹¬å®šä¹‰Functionï¼Œç›´æ¥åœ¨Streamçš„æ“ä½œä¸­ç›´æ¥å®ç°ï¼Œæ•ˆæœå’Œä¸Šé¢ğŸ‘†çš„å®Œå…¨ä¸€æ ·ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">DataStream&lt;SensorReading&gt; dataStream = unionStream.map(<span class="keyword">new</span> MapFunction&lt;String, SensorReading&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SensorReading <span class="title">map</span><span class="params">(String s)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">      String[] strings = s.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> SensorReading(strings[<span class="number">0</span>], <span class="keyword">new</span> Double(strings[<span class="number">1</span>]), <span class="keyword">new</span> Double(strings[<span class="number">2</span>]));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="å¯Œå‡½æ•°"><a href="#å¯Œå‡½æ•°" class="headerlink" title="å¯Œå‡½æ•°"></a>å¯Œå‡½æ•°</h2><p>â€˜â€˜å¯Œå‡½æ•°â€™â€™æ˜¯DataStream API æä¾›çš„ä¸€ä¸ªå‡½æ•°ç±»çš„æ¥å£ï¼Œæ‰€æœ‰Flinkå‡½æ•°ç±»éƒ½æœ‰å…¶Richç‰ˆæœ¬ï¼Œå®ƒä¸å¸¸è§„å‡½æ•°çš„ä¸åŒåœ¨äºï¼Œå¯ä»¥è·å–è¿è¡Œç¯å¢ƒçš„ä¸Šä¸‹æ–‡ï¼Œå¹¶åŒ…å«ä¸€äº›å£°æ˜å‘¨æœŸæ–¹æ³•ï¼Œæ‰€ä»¥å¯ä»¥å®ç°æ›´åŠ å¤æ‚çš„åŠŸèƒ½ã€‚</p><p><code>RichMapFunction</code>ï¼Œ<code>RichFlatMapFunction</code>ç­‰ç­‰</p><p>Rich Functionæœ‰ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸçš„æ¦‚å¿µï¼Œå…¸å‹çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æœ‰ ğŸ‘‡</p><p><code>open()</code> æ–¹æ³•æ˜¯rich functionçš„åˆå§‹åŒ–æ–¹æ³•ï¼Œå½“ä¸€ä¸ªç®—å­æ¯”å¦‚mapè¢«è°ƒç”¨ä¹‹å‰è¢«è°ƒç”¨ã€‚</p><p><code>close()</code>æ–¹æ³•æ˜¯ç”Ÿå‘½å‘¨æœŸä¸­æœ€åä¸€ä¸ªè¢«è°ƒç”¨çš„æ–¹æ³•ï¼Œåšä¸€äº›æ¸…ç†å·¥ä½œã€‚</p><blockquote><p>å¦‚æœæœ‰å¤šä¸ªåˆ†åŒºçš„è¯ï¼Œæ¯ä¸ªåˆ†åŒºçš„openæ–¹æ³•å’Œcloseæ–¹æ³•éƒ½ä¼šæ‰§è¡Œä¸€æ¬¡</p></blockquote><p><code>getRuntimeContext()</code>è·å–è¿è¡Œæ—¶ä¸Šä¸‹æ–‡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RichFunctionDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();</span><br><span class="line">        DataStreamSource&lt;String&gt; dataSource = env.socketTextStream(<span class="string">&quot;localhost&quot;</span>, <span class="number">9999</span>);</span><br><span class="line"></span><br><span class="line">        DataStream&lt;SensorReading&gt; dataStream = dataSource.map(<span class="keyword">new</span> MapFunction&lt;String, SensorReading&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> SensorReading <span class="title">map</span><span class="params">(String s)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                String[] strings = s.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> SensorReading(strings[<span class="number">0</span>], <span class="keyword">new</span> Long(strings[<span class="number">1</span>]), <span class="keyword">new</span> Double(strings[<span class="number">2</span>]));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        DataStream&lt;Tuple2&lt;String, Integer&gt;&gt; stream = dataStream.map(<span class="keyword">new</span> MyMapFunction());</span><br><span class="line">        stream.print();</span><br><span class="line">        env.execute();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¯Œå‡½æ•°æ˜¯æŠ½è±¡ç±»ï¼Œè¿™é‡Œè¦ç”¨ç»§æ‰¿</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMapFunction</span> <span class="keyword">extends</span> <span class="title">RichMapFunction</span>&lt;<span class="title">SensorReading</span>, <span class="title">Tuple2</span>&lt;<span class="title">String</span>, <span class="title">Integer</span>&gt;&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">open</span><span class="params">(Configuration parameters)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">            System.err.println(<span class="string">&quot;invoke open&quot;</span>);</span><br><span class="line">            <span class="comment">// ä¸€èˆ¬å®šä¹‰çŠ¶æ€ï¼Œæˆ–è€…é“¾æ¥æ•°æ®åº“æ“ä½œ</span></span><br><span class="line">            <span class="keyword">super</span>.open(parameters);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Tuple2&lt;String, Integer&gt; <span class="title">map</span><span class="params">(SensorReading sensorReading)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">            RuntimeContext runtimeContext = <span class="keyword">this</span>.getRuntimeContext();</span><br><span class="line">            System.err.println(<span class="string">&quot;runtimeContext.getTaskName() : &quot;</span> + runtimeContext.getTaskName());</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Tuple2&lt;&gt;(sensorReading.getSersorId(), runtimeContext.getIndexOfThisSubtask());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">            <span class="keyword">super</span>.close();</span><br><span class="line">            System.err.println(<span class="string">&quot;invoke close method&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;å‡½æ•°ç±»&quot;&gt;&lt;a href=&quot;#å‡½æ•°ç±»&quot; class=&quot;headerlink&quot; title=&quot;å‡½æ•°ç±»&quot;&gt;&lt;/a&gt;å‡½æ•°ç±»&lt;/h2&gt;&lt;p&gt;æ¯”å¦‚è¯´æˆ‘ä»¬å¸¸ç”¨çš„MapFunctionï¼ŒFilterFunctionï¼ŒProcessFunctionç­‰ï¼Œæ¯ä¸€æ­¥æ“ä½œéƒ½åŸºæœ¬ä¸Šéƒ½å¯¹åº”ä¸€ä¸ª</summary>
      
    
    
    
    
    <category term="Apache Flink" scheme="http://example.com/tags/Apache-Flink/"/>
    
  </entry>
  
  <entry>
    <title>Flink-åˆ°åº•æ”¯æŒå¤šå°‘ç§æ•°æ®ç±»å‹</title>
    <link href="http://example.com/wiki/Flink-%E5%88%B0%E5%BA%95%E6%94%AF%E6%8C%81%E5%A4%9A%E5%B0%91%E4%B8%AD%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"/>
    <id>http://example.com/wiki/Flink-%E5%88%B0%E5%BA%95%E6%94%AF%E6%8C%81%E5%A4%9A%E5%B0%91%E4%B8%AD%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/</id>
    <published>2021-08-11T11:50:41.000Z</published>
    <updated>2021-08-12T06:35:36.160Z</updated>
    
    <content type="html"><![CDATA[<p>Flinkæ”¯æŒæ‰€æœ‰çš„Javaå’ŒScalaåŸºç¡€æ•°æ®ç±»å‹ä»¥åŠå…¶åŒ…è£…ç±»å‹</p><p>æ”¯æŒTupleå…ƒç»„ç±»å‹ï¼ŒFlinkåœ¨Java APIä¸­å®šä¹‰äº†å¾ˆå¤šTupleçš„å®ç°ç±»ï¼Œä»Tuple0 ~ Tuple25ç±»å‹</p><p>Scalaæ ·ä¾‹ç±» case classï¼Œå¯¹åº”Javaä¸­çš„POJOç±»å¯¹è±¡(å¿…é¡»æä¾›æ— å‚æ„é€ æ–¹æ³• get/set)</p><p>å…¶ä»–ï¼Œæ¯”å¦‚ Arrays , Lists, Maps, Enumsç­‰éƒ½æ˜¯æ”¯æŒçš„</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Flinkæ”¯æŒæ‰€æœ‰çš„Javaå’ŒScalaåŸºç¡€æ•°æ®ç±»å‹ä»¥åŠå…¶åŒ…è£…ç±»å‹&lt;/p&gt;
&lt;p&gt;æ”¯æŒTupleå…ƒç»„ç±»å‹ï¼ŒFlinkåœ¨Java APIä¸­å®šä¹‰äº†å¾ˆå¤šTupleçš„å®ç°ç±»ï¼Œä»Tuple0 ~ Tuple25ç±»å‹&lt;/p&gt;
&lt;p&gt;Scalaæ ·ä¾‹ç±» case classï¼Œå¯¹åº”Javaä¸­</summary>
      
    
    
    
    
    <category term="Apache Flink" scheme="http://example.com/tags/Apache-Flink/"/>
    
  </entry>
  
  <entry>
    <title>Flink-å¦‚ä½•è¯»å–æ•°æ®æºï¼ˆé›†åˆï½œæ–‡ä»¶ï½œè‡ªå®šä¹‰ï½œKafkaç­‰ï¼‰</title>
    <link href="http://example.com/wiki/Flink-%E5%A6%82%E4%BD%95%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE%E6%BA%90%EF%BC%88%E9%9B%86%E5%90%88%EF%BD%9C%E6%96%87%E4%BB%B6%EF%BD%9C%E8%87%AA%E5%AE%9A%E4%B9%89%EF%BD%9CKafka%E7%AD%89%EF%BC%89/"/>
    <id>http://example.com/wiki/Flink-%E5%A6%82%E4%BD%95%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE%E6%BA%90%EF%BC%88%E9%9B%86%E5%90%88%EF%BD%9C%E6%96%87%E4%BB%B6%EF%BD%9C%E8%87%AA%E5%AE%9A%E4%B9%89%EF%BD%9CKafka%E7%AD%89%EF%BC%89/</id>
    <published>2021-08-11T11:50:11.000Z</published>
    <updated>2021-08-11T12:08:35.086Z</updated>
    
    <content type="html"><![CDATA[<h2 id="è¯»å–æ–‡ä»¶"><a href="#è¯»å–æ–‡ä»¶" class="headerlink" title="è¯»å–æ–‡ä»¶"></a>è¯»å–æ–‡ä»¶</h2><p>è¿™é‡Œæ˜¯ä»¥txtæ–‡ä»¶ä¸ºä¾‹ï¼Œå®ç°WordCountï¼Œå…¶ä»–æ–‡ä»¶ç±»å‹åŒç†ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// 1ã€åˆ›å»ºæ‰§è¡Œç¯å¢ƒ</span></span><br><span class="line">        ExecutionEnvironment env = ExecutionEnvironment.getExecutionEnvironment();</span><br><span class="line">        <span class="comment">// 2ã€è¯»å–æ–‡ä»¶æ•°æ®</span></span><br><span class="line">        String inputPath = <span class="string">&quot;/Users/gaolei/Documents/DemoProjects/flink-start/src/main/resources/hello.txt&quot;</span>;</span><br><span class="line">        DataSource&lt;String&gt; dataSource = env.readTextFile(inputPath);</span><br><span class="line">        <span class="comment">// å¯¹æ•°æ®é›†è¿›è¡Œå¤„ç† æŒ‰ç…§ç©ºæ ¼åˆ†è¯å±•å¼€ è½¬æ¢æˆï¼ˆwordï¼Œ1ï¼‰äºŒå…ƒç»„</span></span><br><span class="line">        AggregateOperator&lt;Tuple2&lt;String, Integer&gt;&gt; result = dataSource.flatMap(<span class="keyword">new</span> MyFlatMapper())</span><br><span class="line">                <span class="comment">// æŒ‰ç…§ç¬¬ä¸€ä¸ªä½ç½® -&gt; word åˆ†ç»„</span></span><br><span class="line">                .groupBy(<span class="number">0</span>)</span><br><span class="line">                .sum(<span class="number">1</span>);</span><br><span class="line">        result.print();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyFlatMapper</span> <span class="keyword">implements</span> <span class="title">FlatMapFunction</span>&lt;<span class="title">String</span>, <span class="title">Tuple2</span>&lt;<span class="title">String</span>, <span class="title">Integer</span>&gt;&gt; </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">flatMap</span><span class="params">(String s, Collector&lt;Tuple2&lt;String, Integer&gt;&gt; collector)</span> </span>&#123;</span><br><span class="line">            <span class="comment">// é¦–å…ˆæŒ‰ç…§ç©ºæ ¼åˆ†è¯</span></span><br><span class="line">            String[] words = s.split(<span class="string">&quot; &quot;</span>);</span><br><span class="line">            <span class="comment">// éå†æ‰€æœ‰çš„word åŒ…è£…æˆäºŒå…ƒç»„è¾“å‡º</span></span><br><span class="line">            <span class="keyword">for</span> (String word : words) &#123;</span><br><span class="line">                collector.collect(<span class="keyword">new</span> Tuple2&lt;String, Integer&gt;(word, <span class="number">1</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å®ç°è‡ªå®šä¹‰æ•°æ®æº"><a href="#å®ç°è‡ªå®šä¹‰æ•°æ®æº" class="headerlink" title="å®ç°è‡ªå®šä¹‰æ•°æ®æº"></a>å®ç°è‡ªå®šä¹‰æ•°æ®æº</h2><p>éœ€è¦è‡ªå·±å†™ä¸€ä¸ªç±»ï¼Œå®ç°SourceFunctionæ¥å£çš„runæ–¹æ³•å’Œcancleæ–¹æ³•ï¼Œæ³¨æ„âš ï¸ï¼ŒSourceFunction<SensorReading>çš„æ³›å‹ç±»å‹å¿…é¡»è¦å†™ä¸Šï¼Œä¸ç„¶ä¼šæŠ¥é”™çš„ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment().setParallelism(<span class="number">1</span>);</span><br><span class="line">        DataStreamSource dataStreamSource = env.addSource(<span class="keyword">new</span> MySourceFunction());</span><br><span class="line">        dataStreamSource.print();</span><br><span class="line">        env.execute();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®ç°è‡ªå®šä¹‰çš„source</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MySourceFunction</span> <span class="keyword">implements</span> <span class="title">SourceFunction</span>&lt;<span class="title">SensorReading</span>&gt; </span>&#123;</span><br><span class="line">        <span class="comment">// å®šä¹‰æ ‡è¯†ä½ æ§åˆ¶æ•°æ®äº§ç”Ÿ</span></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">boolean</span> running = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(SourceContext ctx)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">            <span class="comment">// å®šä¹‰å„ä¸ªéšæœºæ•°ç”Ÿæˆå™¨</span></span><br><span class="line">            HashMap&lt;String, Double&gt; sensorMap = <span class="keyword">new</span> HashMap&lt;String, Double&gt;(<span class="number">10</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">                sensorMap.put(<span class="string">&quot;sensor_&quot;</span> + (i + <span class="number">1</span>), <span class="number">60</span> + <span class="keyword">new</span> Random().nextGaussian() * <span class="number">20</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span> (running) &#123;</span><br><span class="line">                <span class="keyword">for</span> (String sensor : sensorMap.keySet()) &#123;</span><br><span class="line">                    <span class="keyword">double</span> newtemp = sensorMap.get(sensor) + <span class="keyword">new</span> Random().nextGaussian();</span><br><span class="line">                    sensorMap.put(sensor, newtemp);</span><br><span class="line">                    ctx.collect(<span class="keyword">new</span> SensorReading(sensor, System.currentTimeMillis(), newtemp));</span><br><span class="line">                &#125;</span><br><span class="line">                Thread.sleep(<span class="number">10000</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">cancel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            running = <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;è¯»å–æ–‡ä»¶&quot;&gt;&lt;a href=&quot;#è¯»å–æ–‡ä»¶&quot; class=&quot;headerlink&quot; title=&quot;è¯»å–æ–‡ä»¶&quot;&gt;&lt;/a&gt;è¯»å–æ–‡ä»¶&lt;/h2&gt;&lt;p&gt;è¿™é‡Œæ˜¯ä»¥txtæ–‡ä»¶ä¸ºä¾‹ï¼Œå®ç°WordCountï¼Œå…¶ä»–æ–‡ä»¶ç±»å‹åŒç†ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight</summary>
      
    
    
    
    
    <category term="Apache Flink" scheme="http://example.com/tags/Apache-Flink/"/>
    
  </entry>
  
  <entry>
    <title>Flink-ä½ æ‰€çŸ¥é“çš„ç®—å­éƒ½åœ¨è¿™</title>
    <link href="http://example.com/wiki/Flink-%E4%BD%A0%E6%89%80%E7%9F%A5%E9%81%93%E7%9A%84%E7%AE%97%E5%AD%90%E9%83%BD%E5%9C%A8%E8%BF%99/"/>
    <id>http://example.com/wiki/Flink-%E4%BD%A0%E6%89%80%E7%9F%A5%E9%81%93%E7%9A%84%E7%AE%97%E5%AD%90%E9%83%BD%E5%9C%A8%E8%BF%99/</id>
    <published>2021-08-11T11:49:20.000Z</published>
    <updated>2021-08-11T12:04:38.123Z</updated>
    
    <content type="html"><![CDATA[<p>å¥½äº†ï¼Œçœ‹åˆ°è¿™çš„è¯ï¼ŒApache FlinkåŸºç¡€æ¦‚å¿µå•¥çš„éƒ½åº”è¯¥äº†è§£å·®ä¸å¤šäº†å§ï¼Œæˆ‘ä»¬å‡ å¤©å°±Seeä¸€ä¸‹ï¼Œå¹³æ—¶ç”¨åˆ°çš„StreamApiä¸­å„å¼å„æ ·çš„ç®—å­éƒ½æœ‰ä»€ä¹ˆï¼Œç„¶åï¼Œæˆ‘ä»¬æç‚¹Demoè¯•ä¸€ä¸‹ã€‚</p><p>ğŸ“’ æˆ‘ä¹Ÿæ˜¯è¾¹å­¦è¾¹å®ç°ä¸€äº›Demo,è¿™æ ·å‘¢å¯ä»¥æ–¹ä¾¿è‡ªå·±ç†è§£ï¼Œå½¢æˆä½“ç³»ä»¥åä¹Ÿåº”è¯¥èƒ½å¸®åˆ°åˆ«äººå¿«é€Ÿå­¦ä¹ å§ã€‚</p><p>è¿™å°±æ˜¯åœ°å€äº†ğŸ‘‰ <a href="https://github.com/geekibli/flink-study">https://github.com/geekibli/flink-study</a>  æ¬¢è¿starï¼</p><p><strong>ä¸‹é¢çš„Demoéƒ½æ˜¯å¯ä»¥ç›´æ¥è¿è¡Œçš„</strong>  å¦‚æœæ˜¯é€šè¿‡socketè·å–æ•°æ®çš„è¯ï¼Œç¡®è®¤ç°å¼€å¯ç«¯å£å•Šï¼Œæˆ‘ç”¨çš„Macç³»ç»Ÿï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ <code>nc -lk 9999</code></p><h2 id="æä¾›ä¸€ä¸ªå…¨å±€è·å–ç¯å¢ƒçš„æ–¹æ³•"><a href="#æä¾›ä¸€ä¸ªå…¨å±€è·å–ç¯å¢ƒçš„æ–¹æ³•" class="headerlink" title="æä¾›ä¸€ä¸ªå…¨å±€è·å–ç¯å¢ƒçš„æ–¹æ³•"></a>æä¾›ä¸€ä¸ªå…¨å±€è·å–ç¯å¢ƒçš„æ–¹æ³•</h2><p>æˆ‘ä»¬ä¸€ä¸ªé™æ€æ–¹æ³•getEnv(), ä¸ç„¶æ¯æ¬¡è¿˜è¦newï¼ŒæŒºéº»çƒ¦çš„ï¼›</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> StreamExecutionEnvironment <span class="title">getEnv</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> StreamExecutionEnvironment.getExecutionEnvironment();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="POJOç±»"><a href="#POJOç±»" class="headerlink" title="POJOç±»"></a>POJOç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SensorReading</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> String sersorId;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> timestamp;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> newtemp;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><h2 id="map"><a href="#map" class="headerlink" title="map"></a>map</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">mapTest</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    StreamExecutionEnvironment env = getEnv();</span><br><span class="line">    ArrayList&lt;Integer&gt; nums = Lists.newArrayList();</span><br><span class="line">    nums.add(<span class="number">1</span>);</span><br><span class="line">    nums.add(<span class="number">2</span>);</span><br><span class="line">    nums.add(<span class="number">3</span>);</span><br><span class="line">    DataStreamSource&lt;Integer&gt; source = env.fromCollection(nums);</span><br><span class="line">    SingleOutputStreamOperator&lt;Integer&gt; map = source.map(<span class="keyword">new</span> MapFunction&lt;Integer, Integer&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Integer <span class="title">map</span><span class="params">(Integer integer)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> integer * integer;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    map.print();</span><br><span class="line">    env.execute();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="keyBy"><a href="#keyBy" class="headerlink" title="keyBy"></a>keyBy</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">keyByTest</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        StreamExecutionEnvironment env = getEnv();</span><br><span class="line">        DataStreamSource&lt;Tuple2&lt;String, Integer&gt;&gt; source = env.fromElements(</span><br><span class="line">                <span class="keyword">new</span> Tuple2&lt;String, Integer&gt;(<span class="string">&quot;age&quot;</span>, <span class="number">1</span>),</span><br><span class="line">                <span class="keyword">new</span> Tuple2&lt;String, Integer&gt;(<span class="string">&quot;name&quot;</span>, <span class="number">2</span>),</span><br><span class="line">                <span class="keyword">new</span> Tuple2&lt;String, Integer&gt;(<span class="string">&quot;name&quot;</span>, <span class="number">3</span>),</span><br><span class="line">                <span class="keyword">new</span> Tuple2&lt;String, Integer&gt;(<span class="string">&quot;name&quot;</span>, <span class="number">3</span>));</span><br><span class="line"></span><br><span class="line">        source.map(</span><br><span class="line">                <span class="keyword">new</span> MapFunction&lt;Tuple2&lt;String, Integer&gt;, Tuple2&lt;String, Integer&gt;&gt;() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="function"><span class="keyword">public</span> Tuple2&lt;String, Integer&gt; <span class="title">map</span><span class="params">(Tuple2&lt;String, Integer&gt; stringIntegerTuple2)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                        Integer f1 = stringIntegerTuple2.f1;</span><br><span class="line">                        stringIntegerTuple2.setField(f1 + <span class="number">10</span>, <span class="number">1</span>);</span><br><span class="line">                        <span class="keyword">return</span> stringIntegerTuple2;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">                .keyBy(<span class="number">1</span>)</span><br><span class="line">                .print();</span><br><span class="line">        env.execute();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="reduce"><a href="#reduce" class="headerlink" title="reduce"></a>reduce</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">reduceTest</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        StreamExecutionEnvironment env = getEnv();</span><br><span class="line">        env.fromElements(</span><br><span class="line">                Tuple2.of(<span class="number">2L</span>, <span class="number">3L</span>),</span><br><span class="line">                Tuple2.of(<span class="number">1L</span>, <span class="number">5L</span>),</span><br><span class="line">                Tuple2.of(<span class="number">1L</span>, <span class="number">5L</span>),</span><br><span class="line">                Tuple2.of(<span class="number">1L</span>, <span class="number">7L</span>),</span><br><span class="line">                Tuple2.of(<span class="number">2L</span>, <span class="number">4L</span>),</span><br><span class="line">                Tuple2.of(<span class="number">1L</span>, <span class="number">5L</span>))</span><br><span class="line">                .keyBy(<span class="number">1</span>)</span><br><span class="line">                .reduce(<span class="keyword">new</span> ReduceFunction&lt;Tuple2&lt;Long, Long&gt;&gt;() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="function"><span class="keyword">public</span> Tuple2&lt;Long, Long&gt; <span class="title">reduce</span><span class="params">(Tuple2&lt;Long, Long&gt; longLongTuple2, Tuple2&lt;Long, Long&gt; t1)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="keyword">new</span> Tuple2&lt;Long, Long&gt;(t1.f0, longLongTuple2.f1 + t1.f1);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">                .print();</span><br><span class="line">        env.execute();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿˜æœ‰ä¸€ä¸ªæ —å­ğŸŒ°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">reduce</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        StreamExecutionEnvironment env = getEnv();</span><br><span class="line">        DataStreamSource&lt;String&gt; dataSource = env.socketTextStream(<span class="string">&quot;localhost&quot;</span>, <span class="number">9999</span>);</span><br><span class="line"></span><br><span class="line">        DataStream&lt;SensorReading&gt; dataStream = dataSource.map(<span class="keyword">new</span> MapFunction&lt;String, SensorReading&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> SensorReading <span class="title">map</span><span class="params">(String s)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                String[] strings = s.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> SensorReading(strings[<span class="number">0</span>], <span class="keyword">new</span> Long(strings[<span class="number">1</span>]), <span class="keyword">new</span> Double(strings[<span class="number">2</span>]));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        DataStream&lt;SensorReading&gt; sersorId = dataStream.keyBy(<span class="string">&quot;sersorId&quot;</span>)</span><br><span class="line">                .reduce(<span class="keyword">new</span> ReduceFunction&lt;SensorReading&gt;() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="function"><span class="keyword">public</span> SensorReading <span class="title">reduce</span><span class="params">(SensorReading sensorReading, SensorReading t1)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                        String id = t1.getSersorId();</span><br><span class="line">                        Double time = t1.getTimestamp();</span><br><span class="line">                        <span class="keyword">return</span> <span class="keyword">new</span> SensorReading(id, time, Math.max(sensorReading.getNewtemp(), t1.getNewtemp()));</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">        sersorId.print();</span><br><span class="line">        env.execute();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="split-select"><a href="#split-select" class="headerlink" title="split|select"></a>split|select</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">splitTest</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        StreamExecutionEnvironment env = getEnv();</span><br><span class="line">        DataStreamSource&lt;String&gt; dataSource = env.socketTextStream(<span class="string">&quot;localhost&quot;</span>, <span class="number">9999</span>);</span><br><span class="line"></span><br><span class="line">        DataStream&lt;SensorReading&gt; dataStream = dataSource.map(<span class="keyword">new</span> MapFunction&lt;String, SensorReading&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> SensorReading <span class="title">map</span><span class="params">(String s)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                String[] strings = s.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> SensorReading(strings[<span class="number">0</span>], <span class="keyword">new</span> Double(strings[<span class="number">1</span>]), <span class="keyword">new</span> Double(strings[<span class="number">2</span>]));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        SplitStream&lt;SensorReading&gt; split = dataStream.split(<span class="keyword">new</span> OutputSelector&lt;SensorReading&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Iterable&lt;String&gt; <span class="title">select</span><span class="params">(SensorReading value)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> (value.getNewtemp() &gt; <span class="number">30</span>) ? Collections.singleton(<span class="string">&quot;high&quot;</span>) : Collections.singleton(<span class="string">&quot;low&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        DataStream&lt;SensorReading&gt; low = split.select(<span class="string">&quot;low&quot;</span>);</span><br><span class="line">        DataStream&lt;SensorReading&gt; high = split.select(<span class="string">&quot;high&quot;</span>);</span><br><span class="line">        DataStream&lt;SensorReading&gt; all = split.select(<span class="string">&quot;high&quot;</span>, <span class="string">&quot;low&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// connect</span></span><br><span class="line">        DataStream&lt;Tuple2&lt;String, Double&gt;&gt; highStream = high.map(<span class="keyword">new</span> MapFunction&lt;SensorReading, Tuple2&lt;String, Double&gt;&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Tuple2&lt;String, Double&gt; <span class="title">map</span><span class="params">(SensorReading sensorReading)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Tuple2&lt;&gt;(sensorReading.getSersorId(), sensorReading.getNewtemp());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// é“¾æ¥ä¹‹åçš„stream</span></span><br><span class="line">        ConnectedStreams&lt;Tuple2&lt;String, Double&gt;, SensorReading&gt; connect = highStream.connect(low);</span><br><span class="line"></span><br><span class="line">        SingleOutputStreamOperator&lt;Object&gt; resultStream = connect.map(<span class="keyword">new</span> CoMapFunction&lt;Tuple2&lt;String, Double&gt;, SensorReading, Object&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Object <span class="title">map1</span><span class="params">(Tuple2&lt;String, Double&gt; stringDoubleTuple2)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Tuple3&lt;&gt;(stringDoubleTuple2.f0, stringDoubleTuple2.f0, <span class="string">&quot;high temp warning&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Object <span class="title">map2</span><span class="params">(SensorReading sensorReading)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Tuple2&lt;&gt;(sensorReading.getSersorId(), <span class="string">&quot;normal temp&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        resultStream.print();</span><br><span class="line">        env.execute();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="connect-coMap"><a href="#connect-coMap" class="headerlink" title="connect | coMap"></a>connect | coMap</h2><p>å¦‚ä¸Šsplitæ–¹æ³•ä¸‹é¢æˆ‘ä»¬æ˜¯æœ‰æ“ä½œconnectçš„apiçš„</p><h2 id="union"><a href="#union" class="headerlink" title="union"></a>union</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">unionTest</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// å¿…é¡»æ˜¯æ•°æ®ç±»å‹ç›¸åŒ</span></span><br><span class="line">        StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();</span><br><span class="line"></span><br><span class="line">        DataStreamSource&lt;String&gt; firstStream = env.socketTextStream(<span class="string">&quot;localhost&quot;</span>, <span class="number">9999</span>);</span><br><span class="line">        DataStreamSource&lt;String&gt; secondStream = env.socketTextStream(<span class="string">&quot;localhost&quot;</span>, <span class="number">7777</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        DataStream&lt;String&gt; unionStream = firstStream.union(secondStream);</span><br><span class="line">        DataStream&lt;SensorReading&gt; dataStream = unionStream.map(<span class="keyword">new</span> MapFunction&lt;String, SensorReading&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> SensorReading <span class="title">map</span><span class="params">(String s)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                String[] strings = s.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> SensorReading(strings[<span class="number">0</span>], <span class="keyword">new</span> Double(strings[<span class="number">1</span>]), <span class="keyword">new</span> Double(strings[<span class="number">2</span>]));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        dataStream.print();</span><br><span class="line">        env.execute();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>// TODO ä¸æ–­å­¦ä¹  ä¸æ–­è¡¥å……</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å¥½äº†ï¼Œçœ‹åˆ°è¿™çš„è¯ï¼ŒApache FlinkåŸºç¡€æ¦‚å¿µå•¥çš„éƒ½åº”è¯¥äº†è§£å·®ä¸å¤šäº†å§ï¼Œæˆ‘ä»¬å‡ å¤©å°±Seeä¸€ä¸‹ï¼Œå¹³æ—¶ç”¨åˆ°çš„StreamApiä¸­å„å¼å„æ ·çš„ç®—å­éƒ½æœ‰ä»€ä¹ˆï¼Œç„¶åï¼Œæˆ‘ä»¬æç‚¹Demoè¯•ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;ğŸ“’ æˆ‘ä¹Ÿæ˜¯è¾¹å­¦è¾¹å®ç°ä¸€äº›Demo,è¿™æ ·å‘¢å¯ä»¥æ–¹ä¾¿è‡ªå·±ç†è§£ï¼Œå½¢æˆä½“ç³»ä»¥åä¹Ÿåº”</summary>
      
    
    
    
    
    <category term="Apache Flink" scheme="http://example.com/tags/Apache-Flink/"/>
    
  </entry>
  
  <entry>
    <title>Flink-æ ¸å¿ƒä¹‹Windowsçª—å£</title>
    <link href="http://example.com/wiki/Flink-%E6%A0%B8%E5%BF%83%E4%B9%8BWindows%E7%AA%97%E5%8F%A3/"/>
    <id>http://example.com/wiki/Flink-%E6%A0%B8%E5%BF%83%E4%B9%8BWindows%E7%AA%97%E5%8F%A3/</id>
    <published>2021-08-10T08:55:40.000Z</published>
    <updated>2021-08-10T11:40:39.547Z</updated>
    
    <content type="html"><![CDATA[<p>ä»€ä¹ˆæ˜¯çª—å£</p><p>çª—å£åˆ†é…å™¨æœ‰å‡ ç§</p><p>çª—å£å¦‚ä½•å®ç°å¢é‡è®¡ç®—å’Œå…¨é‡è®¡ç®—</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä»€ä¹ˆæ˜¯çª—å£&lt;/p&gt;
&lt;p&gt;çª—å£åˆ†é…å™¨æœ‰å‡ ç§&lt;/p&gt;
&lt;p&gt;çª—å£å¦‚ä½•å®ç°å¢é‡è®¡ç®—å’Œå…¨é‡è®¡ç®—&lt;/p&gt;
</summary>
      
    
    
    
    
    <category term="Apache Flink" scheme="http://example.com/tags/Apache-Flink/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹ç¾-é—¨é¢æ¨¡å¼</title>
    <link href="http://example.com/wiki/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%BE%8E-%E9%97%A8%E9%9D%A2%E6%A8%A1%E5%BC%8F/"/>
    <id>http://example.com/wiki/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%BE%8E-%E9%97%A8%E9%9D%A2%E6%A8%A1%E5%BC%8F/</id>
    <published>2021-08-07T12:27:47.000Z</published>
    <updated>2021-08-07T12:36:22.057Z</updated>
    
    <content type="html"><![CDATA[<h1 id="é—¨é¢æ¨¡å¼"><a href="#é—¨é¢æ¨¡å¼" class="headerlink" title="é—¨é¢æ¨¡å¼"></a>é—¨é¢æ¨¡å¼</h1><p>é—¨é¢æ¨¡å¼åˆå«åšå¤–è§‚æ¨¡å¼ï¼Œæä¾›ç»Ÿä¸€çš„ä¸€ä¸ªæ¥å£ï¼Œç”¨æ¥è®¿é—®å­ç³»ç»Ÿä¸­çš„ä¸€ç¾¤æ¥å£ï¼›<br>é—¨é¢æ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªé«˜å±‚æ¥å£ï¼Œè®©å­ç³»ç»Ÿæ›´å®¹æ˜“ä½¿ç”¨ï¼›é—¨é¢æ¨¡å¼å±äºç»“æ„å‹æ¨¡å¼ï¼›  </p><h2 id="ç±»å›¾"><a href="#ç±»å›¾" class="headerlink" title="ç±»å›¾"></a>ç±»å›¾</h2><p><img src="https://oscimg.oschina.net/oscnet/up-937cef58fcd4540a37854b0eeb31cda5c06.png">  </p><h3 id="Facade-é—¨é¢ç±»"><a href="#Facade-é—¨é¢ç±»" class="headerlink" title="Facade é—¨é¢ç±»"></a>Facade é—¨é¢ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Facade</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ç»§æ‰¿å„ä¸ªå­ç³»ç»ŸåŠŸèƒ½ï¼Œè¿›è¡Œå°è£…ï¼Œä¸€å®šç¨‹åº¦ä¸Šä¸éµå¾ªå•ä¸€èŒè´£åŸåˆ™</span></span><br><span class="line">    SubSystemA subSystemA = <span class="keyword">new</span> SubSystemA();</span><br><span class="line">    SubSystemB subSystemB = <span class="keyword">new</span> SubSystemB();</span><br><span class="line">    SubSystemC subSystemC = <span class="keyword">new</span> SubSystemC();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doA</span><span class="params">()</span></span>&#123;</span><br><span class="line">        subSystemA.doA();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doB</span><span class="params">()</span></span>&#123;</span><br><span class="line">        subSystemB.doB();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doC</span><span class="params">()</span></span>&#123;</span><br><span class="line">        subSystemC.doC();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å­ç³»ç»ŸA"><a href="#å­ç³»ç»ŸA" class="headerlink" title="å­ç³»ç»ŸA"></a>å­ç³»ç»ŸA</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SubSystemA</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doA</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å­ç³»ç»ŸB"><a href="#å­ç³»ç»ŸB" class="headerlink" title="å­ç³»ç»ŸB"></a>å­ç³»ç»ŸB</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SubSystemB</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doB</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å­ç³»ç»ŸC"><a href="#å­ç³»ç»ŸC" class="headerlink" title="å­ç³»ç»ŸC"></a>å­ç³»ç»ŸC</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SubSystemC</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doC</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸ŠFacadeç±»é›†æˆäº†ä¸‰ä¸ªå­ç³»ç»Ÿçš„ç±»ï¼Œåœ¨è‡ªå·±å®šä¹‰çš„æ–¹æ³•ä¸­ï¼Œå¹¶ä¸æ˜¯Facadeè‡ªå·±å®ç°çš„é€»è¾‘ï¼Œè€Œæ˜¯<br>è°ƒç”¨äº†å¯¹åº”å­ç³»ç»Ÿçš„æ–¹æ³•ï¼Œè¿™ç§å®ç°æ–¹å¼å«åšé—¨é¢æ¨¡å¼ï¼›æ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼›  </p><p>çœ‹åˆ°è¿™æ˜¯ä¸æ˜¯æœ‰ç‚¹ä¼¼æ›¾ç›¸è¯†å‘¢ï¼Œæ²¡é”™ï¼Œæˆ‘ä»¬å¤©å¤©éƒ½åœ¨å†™çš„Controller,Service,Daoä¸å°±æ˜¯é—¨é¢æ¨¡å¼å—ï¼Œ<br>æ²¡é”™ï¼Œåªä¸è¿‡æŠŠè¿™ç§æ–¹å¼å½¢æˆæ–¹æ³•è®ºï¼Œä¹Ÿå°±æœ‰äº†æ‰€è°“çš„é—¨é¢æ¨¡å¼ï¼  </p><h2 id="ä¸¾ä¸ªæ —å­"><a href="#ä¸¾ä¸ªæ —å­" class="headerlink" title="ä¸¾ä¸ªæ —å­"></a>ä¸¾ä¸ªæ —å­</h2><p>ä¸€äº›å•†ä¸šåšå®¢ä¼šæœ‰ä¸€ä¸ªåŠŸèƒ½ï¼Œå°±æ˜¯å‘è¡¨æ–‡ç« æˆ–è€…è¯„è®ºç‚¹èµä¼šè·å¾—ä¸€äº›ç§¯åˆ†å•Šï¼Œè™šæ‹Ÿå¸å•Š,ç„¶åä¼šæœ‰ç§¯åˆ†å•†åŸï¼Œåœ¨é‡Œé¢å¯ä»¥å…è´¹çš„å…‘æ¢å•†å“ï¼Œå…¶å®å¾ˆéš¾å‡‘çš„å¤Ÿç§¯åˆ†ï¼Œä¸å¤Ÿè´¹åŠ²çš„â€¦ å¥½äº†ï¼Œç»“åˆä¼ªä»£ç æ¥ä½“éªŒé—¨é¢æ¨¡å¼ğŸ‘‡ğŸ‘‡ğŸ‘‡ï¼š  </p><p><strong>ä¸‹é¢æ˜¯ä¸€äº›æ¼”ç¤ºæ‰€éœ€è¦çš„ç±»ï¼š</strong>  </p><h3 id="å…³ç³»å›¾å¦‚ä¸‹"><a href="#å…³ç³»å›¾å¦‚ä¸‹" class="headerlink" title="å…³ç³»å›¾å¦‚ä¸‹"></a>å…³ç³»å›¾å¦‚ä¸‹</h3><p><img src="https://oscimg.oschina.net/oscnet/up-e117a07cbd9489e5a037d1e64961c1062c7.png">  </p><h3 id="PaymentService-æ”¯ä»˜æœåŠ¡"><a href="#PaymentService-æ”¯ä»˜æœåŠ¡" class="headerlink" title="PaymentService æ”¯ä»˜æœåŠ¡"></a>PaymentService æ”¯ä»˜æœåŠ¡</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PaymentService</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">pay</span><span class="params">(GiftInfo giftInfo)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ‰£å‡&quot;</span> + giftInfo.getName() + <span class="string">&quot;ç§¯åˆ†æˆåŠŸï¼&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="QualityService-åº“å­˜æœåŠ¡"><a href="#QualityService-åº“å­˜æœåŠ¡" class="headerlink" title="QualityService åº“å­˜æœåŠ¡"></a>QualityService åº“å­˜æœåŠ¡</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QualityService</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isAvailable</span><span class="params">(GiftInfo giftInfo)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ ¡éªŒ&quot;</span> + giftInfo.getName() + <span class="string">&quot;ç§¯åˆ†é€šè¿‡ï¼Œåº“å­˜å……è¶³ï¼&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ShipService-ç‰©æµæœåŠ¡"><a href="#ShipService-ç‰©æµæœåŠ¡" class="headerlink" title="ShipService ç‰©æµæœåŠ¡"></a>ShipService ç‰©æµæœåŠ¡</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShipService</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">doShip</span><span class="params">(GiftInfo giftInfo)</span></span>&#123;</span><br><span class="line">        System.out.println(giftInfo.getName() + <span class="string">&quot;ç”Ÿæˆç‰©æµè®¢å•&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> String.valueOf(System.currentTimeMillis());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å®¢æˆ·ç«¯-éé—¨é¢æ¨¡å¼å†™æ³•"><a href="#å®¢æˆ·ç«¯-éé—¨é¢æ¨¡å¼å†™æ³•" class="headerlink" title="å®¢æˆ·ç«¯ éé—¨é¢æ¨¡å¼å†™æ³•"></a>å®¢æˆ·ç«¯ éé—¨é¢æ¨¡å¼å†™æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    QualityService qualityService = <span class="keyword">new</span> QualityService();</span><br><span class="line">    PaymentService paymentService = <span class="keyword">new</span> PaymentService();</span><br><span class="line">    ShipService shipService = <span class="keyword">new</span> ShipService();</span><br><span class="line"></span><br><span class="line">    GiftInfo giftInfo = <span class="keyword">new</span> GiftInfo(<span class="string">&quot; ã€ŠJavaç¼–ç¨‹æ€æƒ³ã€‹ &quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!qualityService.isAvailable(giftInfo))&#123;</span><br><span class="line">        System.err.println(<span class="string">&quot;Quality not enough!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!paymentService.pay(giftInfo))&#123;</span><br><span class="line">        System.err.println(<span class="string">&quot;Pay error!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    String shipNo = shipService.doShip(giftInfo);</span><br><span class="line">    System.err.println(<span class="string">&quot;Order shipNo:&quot;</span> + shipNo);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ç§å†™æ³•ä¼šå°†åº“å­˜ï¼Œæ”¯ä»˜å’Œç‰©æµç­‰æœåŠ¡éƒ½æš´éœ²ç»™è°ƒç”¨æ–¹ï¼Œæ˜¯å¾ˆä¸å®‰å…¨çš„ï¼Œè€Œä¸”é€ æˆå®¢æˆ·ç«¯ä¾èµ–ä¸¥é‡ï¼Œä»£ç è‡ƒè‚¿ï¼›  </p><h3 id="é—¨é¢æ¨¡å¼å†™æ³•"><a href="#é—¨é¢æ¨¡å¼å†™æ³•" class="headerlink" title="é—¨é¢æ¨¡å¼å†™æ³•"></a>é—¨é¢æ¨¡å¼å†™æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">       FacadeService facadeService = <span class="keyword">new</span> FacadeService();</span><br><span class="line">       GiftInfo giftInfo = <span class="keyword">new</span> GiftInfo(<span class="string">&quot; ã€ŠJavaç¼–ç¨‹æ€æƒ³ã€‹ &quot;</span>);</span><br><span class="line">       String shipNo = facadeService.doOrder(giftInfo);</span><br><span class="line">       System.err.println(<span class="string">&quot;Order shipNo:&quot;</span> + shipNo);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™ç§å°±æ˜¯é—¨é¢æ¨¡å¼çš„å†™æ³•ğŸ‘† ï¼Œ ç›¸ä¿¡å¤§å®¶åº”è¯¥å¾ˆç†Ÿæ‚‰å§ï¼Œè¿™æ ·çš„è¯ï¼Œæš´éœ²ç»™å®¢æˆ·ç«¯å°±ä¸€ä¸ªè®¢å•æœåŠ¡å°±å¯ä»¥äº†ï¼</p><h2 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h2><ul><li><strong>å­ç³»ç»Ÿè¶Šæ¥è¶Šå¤æ‚ï¼Œå¢åŠ é—¨é¢æ¨¡å¼æä¾›ç®€å•çš„æ¥å£ï¼Œç»™ç”¨æˆ·ä½¿ç”¨ï¼›</strong></li><li><strong>æ„å»ºå¤šå±‚çš„ç³»ç»Ÿæ¥å£ï¼Œåˆ©ç”¨é—¨é¢å¯¹è±¡ä½œä¸ºæ¯å±‚çš„å…¥å£ï¼Œç®€åŒ–å±‚ä¹‹é—´çš„è°ƒç”¨</strong></li></ul><h2 id="åº”ç”¨"><a href="#åº”ç”¨" class="headerlink" title="åº”ç”¨"></a>åº”ç”¨</h2><p><code>Spring JdbcUtils</code><br><code>Mybatis configuration</code><br><code>Tomcat requestFacade responseFacade </code></p><h2 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h2><ul><li><strong>ç®€åŒ–äº†è°ƒç”¨è¿‡ç¨‹ï¼Œæ— éœ€æ·±å…¥äº†è§£å­ç³»ç»Ÿï¼Œä»¥é˜²æ­¢ç»™å­ç³»ç»Ÿå¸¦æ¥é£é™©</strong></li></ul><p>æ ¹æ®ä¸Šé¢ç¤¼å“å…‘æ¢çš„é€»è¾‘ï¼Œç”¨æˆ·æ ¹æœ¬ä¸careä½ åº•å±‚çš„å…‘æ¢é€»è¾‘ï¼Œä»€ä¹ˆåº“å­˜å•Šï¼Œæ”¯ä»˜çŠ¶æ€å•Šï¼Œç”Ÿæˆè®¢å•é€»è¾‘ç­‰ç­‰ï¼Œå¯¹äºç”¨æˆ·æ¥è¯´ï¼Œæˆ‘åªéœ€è¦ä¸€æ­¥ä¸‹å•å³å¯ï¼›  </p><ul><li><strong>å‡å°‘ç³»ç»Ÿä¾èµ–ï¼Œæ¾è€¦åˆ</strong></li></ul><p>è¿™ä¸€ç‚¹ä¹Ÿæ˜¯ç›¸å¯¹å®¢æˆ·ç«¯æ¥è¯´ï¼Œå®¢æˆ·ç«¯åªå…³å¿ƒçš„çš„è®¢å•æœåŠ¡å°±å¥½äº†ï¼Œå…¶ä»–çš„åº“å­˜ï¼Œä¾›åº”é“¾ç­‰éƒ½ä¸å…³ç³»ï¼›</p><ul><li><strong>æ›´å¥½çš„åˆ’åˆ†è®¿é—®å±‚æ¬¡ï¼Œæé«˜äº†å®‰å…¨æ€§</strong></li></ul><p>åˆç†çš„åˆ’åˆ†å±‚æ¬¡ï¼Œå‡å°‘åº•å±‚ç³»ç»Ÿçš„æš´éœ²ï¼Œä»…ä»…æš´éœ²ä¸€äº›å¿…è¦çš„çŠ¶æ€å’Œæ¥å£ï¼Œè¿™ä¸€ç‚¹å¤§å®¶åº”è¯¥éƒ½çŸ¥é“çš„ï¼Œåƒserviceå±‚è°ƒç”¨Daoå±‚ï¼Œè€Œä¸èƒ½åœ¨serviceå±‚ç›´æ¥è®¿é—®æ•°æ®åº“ï¼›</p><ul><li><strong>éµå¾ªè¿ªç±³ç‰¹æ³•åˆ™</strong></li></ul><h2 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h2><ul><li><strong>å½“å­ç³»ç»Ÿçš„åŠŸèƒ½éœ€è¦æ‰©å±•æˆ–è€…ä¿®æ”¹çš„æ—¶å€™ï¼Œä¸Šå±‚å°è£…å¯èƒ½è¦é¢ä¸´ä¿®æ”¹çš„é£é™©ï¼Œè¿™æ ·å¢åŠ äº†åæœŸçš„ç»´æŠ¤æˆæœ¬ï¼Œä¹Ÿä¸éµå¾ªå¼€é—­åŸåˆ™</strong></li><li><strong>å¯èƒ½ä¼šè¿èƒŒå•ä¸€èŒè´£åŸåˆ™</strong></li></ul><h2 id="é—¨é¢æ¨¡å¼å’Œä»£ç†æ¨¡å¼çš„åŒºåˆ«"><a href="#é—¨é¢æ¨¡å¼å’Œä»£ç†æ¨¡å¼çš„åŒºåˆ«" class="headerlink" title="é—¨é¢æ¨¡å¼å’Œä»£ç†æ¨¡å¼çš„åŒºåˆ«"></a>é—¨é¢æ¨¡å¼å’Œä»£ç†æ¨¡å¼çš„åŒºåˆ«</h2><p>ç®€å•æ¥è¯´ï¼Œé—¨é¢æ¨¡å¼å°±æ˜¯ä¸€ç§ä»£ç†æ¨¡å¼ï¼Œæ˜¯å±äºé™æ€ä»£ç†çš„æ¨¡å¼ï¼›ä½†æ˜¯å’Œé™æ€ä»£ç†åˆæœ‰ä¸€äº›åŒºåˆ«ï¼Œé—¨é¢æ¨¡å¼çš„ä¾§é‡ç‚¹åœ¨äºå¯¹åº•å±‚çš„å°è£…ï¼Œè€Œé™æ€ä»£ç†åˆ™ç»ˆäºå¯¹ä»£ç†å¯¹è±¡çš„å¢å¼ºï¼Œé™¤äº†è°ƒç”¨å—å§”æ‰˜å¯¹è±¡çš„æ–¹æ³•ä¹‹å¤–ï¼Œå¯ä»¥æ‰©å±•é¢å¤–çš„åŠŸèƒ½ï¼›<br>å¾ˆå¤šæ—¶å€™ä¼šæŠŠé—¨é¢æ¨¡å¼æ³¨å…¥æˆå•ä¾‹ï¼Œæ¯”å¦‚ä¸€äº›å…¨å±€çš„Util,è¿˜æœ‰æˆ‘ä»¬å¸¸è§çš„ä¸€äº›Controllerç­‰ç­‰ï¼›  </p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;é—¨é¢æ¨¡å¼&quot;&gt;&lt;a href=&quot;#é—¨é¢æ¨¡å¼&quot; class=&quot;headerlink&quot; title=&quot;é—¨é¢æ¨¡å¼&quot;&gt;&lt;/a&gt;é—¨é¢æ¨¡å¼&lt;/h1&gt;&lt;p&gt;é—¨é¢æ¨¡å¼åˆå«åšå¤–è§‚æ¨¡å¼ï¼Œæä¾›ç»Ÿä¸€çš„ä¸€ä¸ªæ¥å£ï¼Œç”¨æ¥è®¿é—®å­ç³»ç»Ÿä¸­çš„ä¸€ç¾¤æ¥å£ï¼›&lt;br&gt;é—¨é¢æ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªé«˜å±‚æ¥å£ï¼Œè®©å­ç³»ç»Ÿæ›´å®¹æ˜“ä½¿</summary>
      
    
    
    
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="http://example.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
</feed>
