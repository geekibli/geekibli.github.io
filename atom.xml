<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>GeekIBLi</title>
  
  <subtitle>For Coder</subtitle>
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2021-08-19T07:32:53.269Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>gaolei</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>MySQLä¸­çš„é”ğŸ”’</title>
    <link href="http://example.com/wiki/MySQL%E4%B8%AD%E7%9A%84%E9%94%81%F0%9F%94%92/"/>
    <id>http://example.com/wiki/MySQL%E4%B8%AD%E7%9A%84%E9%94%81%F0%9F%94%92/</id>
    <published>2021-08-19T07:17:31.000Z</published>
    <updated>2021-08-19T07:32:53.269Z</updated>
    
    <content type="html"><![CDATA[<p>ä¹è§‚é”å’Œæ‚²è§‚é”</p><h3 id="è¡¨é”å’Œè¡Œé”"><a href="#è¡¨é”å’Œè¡Œé”" class="headerlink" title="è¡¨é”å’Œè¡Œé”"></a>è¡¨é”å’Œè¡Œé”</h3><blockquote><p><strong>è¡¨é”</strong>ï¼š å¼€é”€å°ï¼ŒåŠ é”å¿«ï¼›ä¸ä¼šå‡ºç°æ­»é”ï¼›é”å®šåŠ›åº¦å¤§ï¼Œå‘ç”Ÿé”å†²çªæ¦‚ç‡é«˜ï¼Œå¹¶å‘åº¦æœ€ä½</p></blockquote><p>è¡¨é”æŒ‰ç…§æ•°æ®æ“ä½œå¯ä»¥åˆ†æˆä¸¤ç§ï¼š</p><ul><li>è¡¨è¯»é”ï¼ˆTable Read Lockï¼‰</li><li>è¡¨å†™é”ï¼ˆTable Write Lock</li></ul><p>è¯»è¯»ä¸é˜»å¡ï¼šå½“å‰ç”¨æˆ·åœ¨è¯»æ•°æ®ï¼Œå…¶ä»–çš„ç”¨æˆ·ä¹Ÿåœ¨è¯»æ•°æ®ï¼Œä¸ä¼šåŠ é”</p><p>è¯»å†™é˜»å¡ï¼šå½“å‰ç”¨æˆ·åœ¨è¯»æ•°æ®ï¼Œå…¶ä»–çš„ç”¨æˆ·<strong>ä¸èƒ½ä¿®æ”¹å½“å‰ç”¨æˆ·è¯»çš„æ•°æ®</strong>ï¼Œä¼šåŠ é”ï¼</p><p>å†™å†™é˜»å¡ï¼šå½“å‰ç”¨æˆ·åœ¨ä¿®æ”¹æ•°æ®ï¼Œå…¶ä»–çš„ç”¨æˆ·<strong>ä¸èƒ½ä¿®æ”¹å½“å‰ç”¨æˆ·æ­£åœ¨ä¿®æ”¹çš„æ•°æ®</strong>ï¼Œä¼šåŠ é”ï¼</p><blockquote><p><strong>è¡Œé”</strong>ï¼š å¼€é”€å¤§ï¼ŒåŠ é”æ…¢ï¼›ä¼šå‡ºç°æ­»é”ï¼›é”å®šç²’åº¦å°ï¼Œå‘ç”Ÿé”å†²çªçš„æ¦‚ç‡ä½ï¼Œå¹¶å‘åº¦é«˜</p></blockquote><p>InnoDBå®ç°äº†ä»¥ä¸‹<strong>ä¸¤ç§</strong>ç±»å‹çš„è¡Œé”ã€‚</p><ul><li><p>å…±äº«é”ï¼ˆSé”ï¼‰ï¼šå…è®¸ä¸€ä¸ªäº‹åŠ¡å»è¯»ä¸€è¡Œï¼Œé˜»æ­¢å…¶ä»–äº‹åŠ¡è·å¾—ç›¸åŒæ•°æ®é›†çš„æ’ä»–é”ã€‚</p></li><li><p>ä¹Ÿå«åš<strong>è¯»é”</strong>ï¼šè¯»é”æ˜¯<strong>å…±äº«</strong>çš„ï¼Œå¤šä¸ªå®¢æˆ·å¯ä»¥<strong>åŒæ—¶è¯»å–åŒä¸€ä¸ª</strong>èµ„æºï¼Œä½†<strong>ä¸å…è®¸å…¶ä»–å®¢æˆ·ä¿®æ”¹</strong>ã€‚</p></li><li><p>æ’ä»–é”ï¼ˆXé”)ï¼šå…è®¸è·å¾—æ’ä»–é”çš„äº‹åŠ¡æ›´æ–°æ•°æ®ï¼Œé˜»æ­¢å…¶ä»–äº‹åŠ¡å–å¾—ç›¸åŒæ•°æ®é›†çš„å…±äº«è¯»é”å’Œæ’ä»–å†™é”ã€‚</p></li><li><p>ä¹Ÿå«åš<strong>å†™é”</strong>ï¼šå†™é”æ˜¯æ’ä»–çš„ï¼Œ<strong>å†™é”ä¼šé˜»å¡å…¶ä»–çš„å†™é”å’Œè¯»é”</strong>ã€‚</p></li></ul><p>å¦å¤–ï¼Œ<strong>ä¸ºäº†å…è®¸è¡Œé”å’Œè¡¨é”å…±å­˜ï¼Œå®ç°å¤šç²’åº¦é”æœºåˆ¶</strong>ï¼ŒInnoDBè¿˜æœ‰ä¸¤ç§å†…éƒ¨ä½¿ç”¨çš„æ„å‘é”ï¼ˆIntention Locksï¼‰ï¼Œè¿™ä¸¤ç§æ„å‘é”éƒ½æ˜¯<strong>è¡¨é”</strong>ï¼š</p><ul><li>æ„å‘å…±äº«é”ï¼ˆISï¼‰ï¼šäº‹åŠ¡æ‰“ç®—ç»™æ•°æ®è¡ŒåŠ è¡Œå…±äº«é”ï¼Œäº‹åŠ¡åœ¨ç»™ä¸€ä¸ªæ•°æ®è¡ŒåŠ å…±äº«é”å‰å¿…é¡»å…ˆå–å¾—è¯¥è¡¨çš„ISé”ã€‚</li><li>æ„å‘æ’ä»–é”ï¼ˆIXï¼‰ï¼šäº‹åŠ¡æ‰“ç®—ç»™æ•°æ®è¡ŒåŠ è¡Œæ’ä»–é”ï¼Œäº‹åŠ¡åœ¨ç»™ä¸€ä¸ªæ•°æ®è¡ŒåŠ æ’ä»–é”å‰å¿…é¡»å…ˆå–å¾—è¯¥è¡¨çš„IXé”ã€‚</li><li>æ„å‘é”ä¹Ÿæ˜¯æ•°æ®åº“éšå¼å¸®æˆ‘ä»¬åšäº†ï¼Œ<strong>ä¸éœ€è¦ç¨‹åºå‘˜æ“å¿ƒ</strong>ï¼</li></ul><p>âš ï¸ <strong>InnoDBè¡Œé”å’Œè¡¨é”éƒ½æ”¯æŒ</strong>ï¼<font color=red><strong>MyISAMåªæ”¯æŒè¡¨é”</strong>ï¼</font></p><h3 id="innoDBä»€ä¹ˆæ—¶å€™ä¼šä½¿ç”¨åˆ°è¡Œé”ï¼Ÿ"><a href="#innoDBä»€ä¹ˆæ—¶å€™ä¼šä½¿ç”¨åˆ°è¡Œé”ï¼Ÿ" class="headerlink" title="innoDBä»€ä¹ˆæ—¶å€™ä¼šä½¿ç”¨åˆ°è¡Œé”ï¼Ÿ"></a>innoDBä»€ä¹ˆæ—¶å€™ä¼šä½¿ç”¨åˆ°è¡Œé”ï¼Ÿ</h3><p>InnoDBåªæœ‰é€šè¿‡<strong>ç´¢å¼•æ¡ä»¶</strong>æ£€ç´¢æ•°æ®<strong>æ‰ä½¿ç”¨è¡Œçº§é”</strong>ï¼Œå¦åˆ™ï¼ŒInnoDBå°†ä½¿ç”¨<strong>è¡¨é”</strong></p><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://mp.weixin.qq.com/s?__biz=MzI4Njg5MDA5NA==&mid=2247484721&idx=1&sn=410dea1863ba823bec802769e1e6fe8a&chksm=ebd74430dca0cd265a9a91dcb2059e368f43a25f3de578c9dbb105e1fba0947e1fd0b9c2f4ef&token=1676899695&lang=zh_CN###rd">æ•°æ®åº“ä¸¤å¤§ç¥å™¨ã€ç´¢å¼•å’Œé”ã€‘</a></p><p><a href="https://geekibli.github.io/wiki/mysql%E4%B9%90%E8%A7%82%E9%94%81%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/">åŸºäºæ•°æ®è¡¨ä¹è§‚é”å®ç°åˆ†å¸ƒå¼é”</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä¹è§‚é”å’Œæ‚²è§‚é”&lt;/p&gt;
&lt;h3 id=&quot;è¡¨é”å’Œè¡Œé”&quot;&gt;&lt;a href=&quot;#è¡¨é”å’Œè¡Œé”&quot; class=&quot;headerlink&quot; title=&quot;è¡¨é”å’Œè¡Œé”&quot;&gt;&lt;/a&gt;è¡¨é”å’Œè¡Œé”&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;è¡¨é”&lt;/strong&gt;ï¼š å¼€é”€å°ï¼ŒåŠ é”å¿«ï¼›ä¸</summary>
      
    
    
    
    
    <category term="MySQL" scheme="http://example.com/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>MySQLæ€§èƒ½è°ƒä¼˜</title>
    <link href="http://example.com/wiki/MySQL%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98/"/>
    <id>http://example.com/wiki/MySQL%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98/</id>
    <published>2021-08-19T06:06:45.000Z</published>
    <updated>2021-08-19T08:25:08.529Z</updated>
    
    <content type="html"><![CDATA[<h5 id="1ã€ä½¿ç”¨ã€-è¦†ç›–ç´¢å¼•-ã€‘é¿å…å›è¡¨é”é€ æˆçš„æ—¶é—´æ¶ˆè€—"><a href="#1ã€ä½¿ç”¨ã€-è¦†ç›–ç´¢å¼•-ã€‘é¿å…å›è¡¨é”é€ æˆçš„æ—¶é—´æ¶ˆè€—" class="headerlink" title="1ã€ä½¿ç”¨ã€ è¦†ç›–ç´¢å¼• ã€‘é¿å…å›è¡¨é”é€ æˆçš„æ—¶é—´æ¶ˆè€—"></a>1ã€ä½¿ç”¨ã€ è¦†ç›–ç´¢å¼• ã€‘é¿å…å›è¡¨é”é€ æˆçš„æ—¶é—´æ¶ˆè€—</h5><p>1ã€æŸ¥è¯¢è¯­å¥çš„æ—¶å€™é¿å…ä½¿ç”¨select * </p><p>2ã€åˆ›å»ºç´¢å¼•æ·»åŠ é€‚å½“çš„åˆ—é¿å…å›è¡¨</p><h5 id="2ã€ä½¿ç”¨ã€-è”åˆç´¢å¼•-ã€‘åŒºåˆ†åº¦æ¯”è¾ƒé«˜çš„åˆ—æ”¾åˆ°å‰é¢"><a href="#2ã€ä½¿ç”¨ã€-è”åˆç´¢å¼•-ã€‘åŒºåˆ†åº¦æ¯”è¾ƒé«˜çš„åˆ—æ”¾åˆ°å‰é¢" class="headerlink" title="2ã€ä½¿ç”¨ã€ è”åˆç´¢å¼• ã€‘åŒºåˆ†åº¦æ¯”è¾ƒé«˜çš„åˆ—æ”¾åˆ°å‰é¢"></a>2ã€ä½¿ç”¨ã€ è”åˆç´¢å¼• ã€‘åŒºåˆ†åº¦æ¯”è¾ƒé«˜çš„åˆ—æ”¾åˆ°å‰é¢</h5><p>æ³¨æ„è”åˆç´¢å¼•çš„æœ€å·¦åŒ¹é…åŸåˆ™</p><h5 id="3ã€å¯¹ç´¢å¼•è¿›è¡Œå‡½æ•°è®¡ç®—æˆ–è€…è¡¨è¾¾å¼è®¡ç®—ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆ-ğŸ”’"><a href="#3ã€å¯¹ç´¢å¼•è¿›è¡Œå‡½æ•°è®¡ç®—æˆ–è€…è¡¨è¾¾å¼è®¡ç®—ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆ-ğŸ”’" class="headerlink" title="3ã€å¯¹ç´¢å¼•è¿›è¡Œå‡½æ•°è®¡ç®—æˆ–è€…è¡¨è¾¾å¼è®¡ç®—ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆ ğŸ”’"></a>3ã€å¯¹ç´¢å¼•è¿›è¡Œå‡½æ•°è®¡ç®—æˆ–è€…è¡¨è¾¾å¼è®¡ç®—ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆ ğŸ”’</h5><h5 id="4ã€åˆ©ç”¨å­æŸ¥è¯¢ä¼˜åŒ–è¶…å¤šåˆ†é¡µåœºæ™¯"><a href="#4ã€åˆ©ç”¨å­æŸ¥è¯¢ä¼˜åŒ–è¶…å¤šåˆ†é¡µåœºæ™¯" class="headerlink" title="4ã€åˆ©ç”¨å­æŸ¥è¯¢ä¼˜åŒ–è¶…å¤šåˆ†é¡µåœºæ™¯"></a>4ã€åˆ©ç”¨å­æŸ¥è¯¢ä¼˜åŒ–è¶…å¤šåˆ†é¡µåœºæ™¯</h5><h5 id="5ã€explainå‘½ä»¤æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’-show-profileæŸ¥è¯¢æ‰§è¡Œçš„æ€§èƒ½æ¶ˆè€—"><a href="#5ã€explainå‘½ä»¤æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’-show-profileæŸ¥è¯¢æ‰§è¡Œçš„æ€§èƒ½æ¶ˆè€—" class="headerlink" title="5ã€explainå‘½ä»¤æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’ show profileæŸ¥è¯¢æ‰§è¡Œçš„æ€§èƒ½æ¶ˆè€—"></a>5ã€explainå‘½ä»¤æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’ show profileæŸ¥è¯¢æ‰§è¡Œçš„æ€§èƒ½æ¶ˆè€—</h5><p><a href="https://mp.weixin.qq.com/s?__biz=MzI4Njg5MDA5NA==&mid=2247484461&idx=2&sn=5469534e2f370aba86c3a24a2ff52b70&chksm=ebd7452cdca0cc3ad456d695a78f48e72c245f85b4afb210fb7b62218e89785d964d72ec4891&token=620000779&lang=zh_CN&scene=21###wechat_redirect">é¢è¯•å‰å¿…é¡»çŸ¥é“çš„MySQLå‘½ä»¤ã€expalinã€‘ -3y</a></p><h5 id="6ã€åœ¨äº‹åŠ¡å¼€å§‹åï¼Œäº‹åŠ¡å†…å°½å¯èƒ½åªæ“ä½œæ•°æ®åº“ï¼Œå‡å°‘é”æŒæœ‰æ—¶é—´"><a href="#6ã€åœ¨äº‹åŠ¡å¼€å§‹åï¼Œäº‹åŠ¡å†…å°½å¯èƒ½åªæ“ä½œæ•°æ®åº“ï¼Œå‡å°‘é”æŒæœ‰æ—¶é—´" class="headerlink" title="6ã€åœ¨äº‹åŠ¡å¼€å§‹åï¼Œäº‹åŠ¡å†…å°½å¯èƒ½åªæ“ä½œæ•°æ®åº“ï¼Œå‡å°‘é”æŒæœ‰æ—¶é—´"></a>6ã€åœ¨äº‹åŠ¡å¼€å§‹åï¼Œäº‹åŠ¡å†…å°½å¯èƒ½åªæ“ä½œæ•°æ®åº“ï¼Œå‡å°‘é”æŒæœ‰æ—¶é—´</h5><h5 id="7ã€å°½é‡é¿å…å­—ç¬¦ä¸²æŸ¥è¯¢ï¼Œå¦‚æœå…è®¸çš„è¯å¯ä»¥ä½¿ç”¨Elasticsearch"><a href="#7ã€å°½é‡é¿å…å­—ç¬¦ä¸²æŸ¥è¯¢ï¼Œå¦‚æœå…è®¸çš„è¯å¯ä»¥ä½¿ç”¨Elasticsearch" class="headerlink" title="7ã€å°½é‡é¿å…å­—ç¬¦ä¸²æŸ¥è¯¢ï¼Œå¦‚æœå…è®¸çš„è¯å¯ä»¥ä½¿ç”¨Elasticsearch"></a>7ã€å°½é‡é¿å…å­—ç¬¦ä¸²æŸ¥è¯¢ï¼Œå¦‚æœå…è®¸çš„è¯å¯ä»¥ä½¿ç”¨Elasticsearch</h5><h5 id="8ã€å¦‚æœä¼˜åŒ–éƒ½åšäº†è¿˜æ˜¯æŸ¥è¯¢çš„å¾ˆæ…¢ï¼Œå¯ä»¥åšä¸€äº›èšåˆè¡¨ï¼Œçº¿ä¸Šçš„ä¸šåŠ¡ç›´æ¥æŸ¥èšåˆä¹‹åçš„æ•°æ®"><a href="#8ã€å¦‚æœä¼˜åŒ–éƒ½åšäº†è¿˜æ˜¯æŸ¥è¯¢çš„å¾ˆæ…¢ï¼Œå¯ä»¥åšä¸€äº›èšåˆè¡¨ï¼Œçº¿ä¸Šçš„ä¸šåŠ¡ç›´æ¥æŸ¥èšåˆä¹‹åçš„æ•°æ®" class="headerlink" title="8ã€å¦‚æœä¼˜åŒ–éƒ½åšäº†è¿˜æ˜¯æŸ¥è¯¢çš„å¾ˆæ…¢ï¼Œå¯ä»¥åšä¸€äº›èšåˆè¡¨ï¼Œçº¿ä¸Šçš„ä¸šåŠ¡ç›´æ¥æŸ¥èšåˆä¹‹åçš„æ•°æ®"></a>8ã€å¦‚æœä¼˜åŒ–éƒ½åšäº†è¿˜æ˜¯æŸ¥è¯¢çš„å¾ˆæ…¢ï¼Œå¯ä»¥åšä¸€äº›èšåˆè¡¨ï¼Œçº¿ä¸Šçš„ä¸šåŠ¡ç›´æ¥æŸ¥èšåˆä¹‹åçš„æ•°æ®</h5><h5 id="9ã€è¯»å†™ç“¶é¢ˆé—®é¢˜"><a href="#9ã€è¯»å†™ç“¶é¢ˆé—®é¢˜" class="headerlink" title="9ã€è¯»å†™ç“¶é¢ˆé—®é¢˜"></a>9ã€è¯»å†™ç“¶é¢ˆé—®é¢˜</h5><p>9.1 å¦‚æœæ˜¯å•åº“çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥è€ƒè™‘è¯»å†™åˆ†ç¦»ï¼Œæå‡è¯»/å†™çš„æ€§èƒ½</p><p>9.2 ä¸»ä»ç»“æ„ä¸‹è¿˜æ˜¯å­˜åœ¨ç“¶é¢ˆçš„è¯ï¼Œå¯ä»¥è€ƒè™‘åˆ†åº“åˆ†è¡¨</p><p>æ³¨æ„ åˆ†åº“åˆ†è¡¨ä¸‹çš„idå°½é‡ä¿è¯é€’å¢</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h5 id=&quot;1ã€ä½¿ç”¨ã€-è¦†ç›–ç´¢å¼•-ã€‘é¿å…å›è¡¨é”é€ æˆçš„æ—¶é—´æ¶ˆè€—&quot;&gt;&lt;a href=&quot;#1ã€ä½¿ç”¨ã€-è¦†ç›–ç´¢å¼•-ã€‘é¿å…å›è¡¨é”é€ æˆçš„æ—¶é—´æ¶ˆè€—&quot; class=&quot;headerlink&quot; title=&quot;1ã€ä½¿ç”¨ã€ è¦†ç›–ç´¢å¼• ã€‘é¿å…å›è¡¨é”é€ æˆçš„æ—¶é—´æ¶ˆè€—&quot;&gt;&lt;/a&gt;1ã€ä½¿ç”¨ã€ è¦†ç›–ç´¢å¼• ã€‘é¿å…</summary>
      
    
    
    
    
    <category term="MySQL" scheme="http://example.com/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>kafka-åŸºç¡€çŸ¥è¯†</title>
    <link href="http://example.com/wiki/kafka-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"/>
    <id>http://example.com/wiki/kafka-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/</id>
    <published>2021-08-18T12:05:29.000Z</published>
    <updated>2021-08-18T12:14:58.230Z</updated>
    
    <content type="html"><![CDATA[<h2 id="kafkaæ˜¯ä»€ä¹ˆ"><a href="#kafkaæ˜¯ä»€ä¹ˆ" class="headerlink" title="kafkaæ˜¯ä»€ä¹ˆ"></a>kafkaæ˜¯ä»€ä¹ˆ</h2><h2 id="kafkaè¿è¡Œæ—¶æ¶æ„"><a href="#kafkaè¿è¡Œæ—¶æ¶æ„" class="headerlink" title="kafkaè¿è¡Œæ—¶æ¶æ„"></a>kafkaè¿è¡Œæ—¶æ¶æ„</h2><h2 id="kafkaä¸ºä»€ä¹ˆèƒ½æ‰¿è½½é«˜å¹¶å‘"><a href="#kafkaä¸ºä»€ä¹ˆèƒ½æ‰¿è½½é«˜å¹¶å‘" class="headerlink" title="kafkaä¸ºä»€ä¹ˆèƒ½æ‰¿è½½é«˜å¹¶å‘"></a>kafkaä¸ºä»€ä¹ˆèƒ½æ‰¿è½½é«˜å¹¶å‘</h2><h2 id="kafkaçš„ç¡®è®¤æœºåˆ¶æ˜¯ä»€ä¹ˆ"><a href="#kafkaçš„ç¡®è®¤æœºåˆ¶æ˜¯ä»€ä¹ˆ" class="headerlink" title="kafkaçš„ç¡®è®¤æœºåˆ¶æ˜¯ä»€ä¹ˆ"></a>kafkaçš„ç¡®è®¤æœºåˆ¶æ˜¯ä»€ä¹ˆ</h2><h2 id="kafkaå¦‚ä½•ä¿è¯æ¶ˆæ¯å‡†ç¡®"><a href="#kafkaå¦‚ä½•ä¿è¯æ¶ˆæ¯å‡†ç¡®" class="headerlink" title="kafkaå¦‚ä½•ä¿è¯æ¶ˆæ¯å‡†ç¡®"></a>kafkaå¦‚ä½•ä¿è¯æ¶ˆæ¯å‡†ç¡®</h2><p>kafkaä¼šä¸¢æ¶ˆæ¯å—ï¼Ÿ</p><p>kafkaä¼šé‡å¤æ¶ˆè´¹æ¶ˆæ¯å—</p><p>å¹‚ç­‰æ€§</p><h2 id="æ¶ˆæ¯é¡ºåºæ¶ˆè´¹é—®é¢˜"><a href="#æ¶ˆæ¯é¡ºåºæ¶ˆè´¹é—®é¢˜" class="headerlink" title="æ¶ˆæ¯é¡ºåºæ¶ˆè´¹é—®é¢˜"></a>æ¶ˆæ¯é¡ºåºæ¶ˆè´¹é—®é¢˜</h2><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://mp.weixin.qq.com/s?__biz=MzU4NzA3MTc5Mg==&mid=2247484387&idx=1&sn=5bb2ba58776e65f53b091a4bcdb73755&chksm=fdf0ebbcca8762aadc359066ecd70274fa23ee846f9ba9114017402dcbed415f25f97d3020a6&token=1131755397&lang=zh_CN&scene=21#wechat_redirect">kafkaåŸºç¡€çŸ¥è¯† - yyy</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;kafkaæ˜¯ä»€ä¹ˆ&quot;&gt;&lt;a href=&quot;#kafkaæ˜¯ä»€ä¹ˆ&quot; class=&quot;headerlink&quot; title=&quot;kafkaæ˜¯ä»€ä¹ˆ&quot;&gt;&lt;/a&gt;kafkaæ˜¯ä»€ä¹ˆ&lt;/h2&gt;&lt;h2 id=&quot;kafkaè¿è¡Œæ—¶æ¶æ„&quot;&gt;&lt;a href=&quot;#kafkaè¿è¡Œæ—¶æ¶æ„&quot; class=&quot;</summary>
      
    
    
    
    
    <category term="kafka" scheme="http://example.com/tags/kafka/"/>
    
  </entry>
  
  <entry>
    <title>Spring-äº‹åŠ¡éš”ç¦»</title>
    <link href="http://example.com/wiki/Spring-%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB/"/>
    <id>http://example.com/wiki/Spring-%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB/</id>
    <published>2021-08-18T03:10:21.000Z</published>
    <updated>2021-08-18T03:11:08.793Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a href="https://juejin.cn/post/6854573219916021767">https://juejin.cn/post/6854573219916021767</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;å‚è€ƒèµ„æ–™&quot;&gt;&lt;a href=&quot;#å‚è€ƒèµ„æ–™&quot; class=&quot;headerlink&quot; title=&quot;å‚è€ƒèµ„æ–™&quot;&gt;&lt;/a&gt;å‚è€ƒèµ„æ–™&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://juejin.cn/post/6854573219916021767&quot;&gt;https://j</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Flink-ç‰©ç†åˆ†åŒºå‡½æ•°</title>
    <link href="http://example.com/wiki/Flink-%E7%89%A9%E7%90%86%E5%88%86%E5%8C%BA%E5%87%BD%E6%95%B0/"/>
    <id>http://example.com/wiki/Flink-%E7%89%A9%E7%90%86%E5%88%86%E5%8C%BA%E5%87%BD%E6%95%B0/</id>
    <published>2021-08-12T08:38:31.000Z</published>
    <updated>2021-08-12T08:55:41.849Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Flinkæä¾›çš„8ç§åˆ†åŒºå‡½æ•°"><a href="#Flinkæä¾›çš„8ç§åˆ†åŒºå‡½æ•°" class="headerlink" title="Flinkæä¾›çš„8ç§åˆ†åŒºå‡½æ•°"></a>Flinkæä¾›çš„8ç§åˆ†åŒºå‡½æ•°</h1><h2 id="GlobalPartitioner"><a href="#GlobalPartitioner" class="headerlink" title="GlobalPartitioner"></a>GlobalPartitioner</h2><p>è¯¥åˆ†åŒºå™¨ä¼šå°†æ‰€æœ‰çš„æ•°æ®éƒ½å‘é€åˆ°ä¸‹æ¸¸çš„æŸä¸ªç®—å­å®ä¾‹(subtask id = 0)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  æ•°æ®ä¼šè¢«åˆ†å‘åˆ°ä¸‹æ¸¸ç®—å­çš„ç¬¬ä¸€ä¸ªå®ä¾‹ä¸­è¿›è¡Œå¤„ç†</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">global</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        StreamExecutionEnvironment env = getEnv().setMaxParallelism(<span class="number">8</span>);</span><br><span class="line">        DataStreamSource&lt;String&gt; dataStream = env.fromElements(<span class="string">&quot;hhh&quot;</span>, <span class="string">&quot;ggg&quot;</span>, <span class="string">&quot;fff&quot;</span>, <span class="string">&quot;ddd&quot;</span>, <span class="string">&quot;sss&quot;</span>, <span class="string">&quot;aaa&quot;</span>, <span class="string">&quot;qqq&quot;</span>, <span class="string">&quot;www&quot;</span>);</span><br><span class="line">        dataStream.flatMap(<span class="keyword">new</span> RichFlatMapFunction&lt;String, String&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">flatMap</span><span class="params">(String s, Collector&lt;String&gt; collector)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                collector.collect(s + <span class="string">&quot;_**&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).setParallelism(<span class="number">2</span>).global().print(<span class="string">&quot;global : &quot;</span>);</span><br><span class="line"></span><br><span class="line">        env.execute();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="ShufflePartitioner"><a href="#ShufflePartitioner" class="headerlink" title="ShufflePartitioner"></a>ShufflePartitioner</h2><p>éšæœºé€‰æ‹©ä¸€ä¸ªä¸‹æ¸¸ç®—å­å®ä¾‹è¿›è¡Œå‘é€</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ•°æ®ä¼šè¢«éšæœºåˆ†å‘åˆ°ä¸‹æ¸¸ç®—å­çš„æ¯ä¸€ä¸ªå®ä¾‹ä¸­è¿›è¡Œ</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">shuffle</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        StreamExecutionEnvironment env = getEnv();</span><br><span class="line">        DataStreamSource&lt;String&gt; dataStream = env.fromElements(<span class="string">&quot;hhh&quot;</span>, <span class="string">&quot;ggg&quot;</span>, <span class="string">&quot;fff&quot;</span>, <span class="string">&quot;ddd&quot;</span>, <span class="string">&quot;sss&quot;</span>, <span class="string">&quot;aaa&quot;</span>, <span class="string">&quot;qqq&quot;</span>, <span class="string">&quot;www&quot;</span>);</span><br><span class="line">        DataStream&lt;String&gt; broadcast = dataStream.shuffle();</span><br><span class="line">        broadcast.print(<span class="string">&quot;shuffle : &quot;</span>);</span><br><span class="line">        env.execute();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="BroadcastPartitioner"><a href="#BroadcastPartitioner" class="headerlink" title="BroadcastPartitioner"></a>BroadcastPartitioner</h2><p>å‘é€åˆ°ä¸‹æ¸¸æ‰€æœ‰çš„ç®—å­å®ä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¹¿æ’­åˆ†åŒºä¼šå°†ä¸Šæ¸¸æ•°æ®è¾“å‡ºåˆ°ä¸‹æ¸¸ç®—å­çš„æ¯ä¸ªå®ä¾‹ä¸­ã€‚é€‚åˆäºå¤§æ•°æ®é›†å’Œå°æ•°æ®é›†åšJionçš„åœºæ™¯</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">broadcast</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        StreamExecutionEnvironment env = getEnv();</span><br><span class="line">        DataStreamSource&lt;String&gt; dataStream = env.fromElements(<span class="string">&quot;hhh&quot;</span>, <span class="string">&quot;ggg&quot;</span>, <span class="string">&quot;fff&quot;</span>, <span class="string">&quot;ddd&quot;</span>, <span class="string">&quot;sss&quot;</span>, <span class="string">&quot;aaa&quot;</span>, <span class="string">&quot;qqq&quot;</span>, <span class="string">&quot;www&quot;</span>);</span><br><span class="line">        DataStream&lt;String&gt; broadcast = dataStream.broadcast();</span><br><span class="line">        broadcast.print(<span class="string">&quot;broadcast : &quot;</span>);</span><br><span class="line">        env.execute();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="RebalancePartitioner"><a href="#RebalancePartitioner" class="headerlink" title="RebalancePartitioner"></a>RebalancePartitioner</h2><p>é€šè¿‡å¾ªç¯çš„æ–¹å¼ä¾æ¬¡å‘é€åˆ°ä¸‹æ¸¸çš„task</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">rebalance</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        StreamExecutionEnvironment env = getEnv().setParallelism(<span class="number">4</span>);</span><br><span class="line">        DataStreamSource&lt;String&gt; dataStream = env.fromElements(<span class="string">&quot;hhh&quot;</span>, <span class="string">&quot;ggg&quot;</span>, <span class="string">&quot;fff&quot;</span>, <span class="string">&quot;ddd&quot;</span>, <span class="string">&quot;sss&quot;</span>, <span class="string">&quot;aaa&quot;</span>, <span class="string">&quot;qqq&quot;</span>, <span class="string">&quot;www&quot;</span>);</span><br><span class="line">        dataStream.map(<span class="keyword">new</span> RichMapFunction&lt;String, String&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> String <span class="title">map</span><span class="params">(String s)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> s + <span class="string">&quot;_**&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).setParallelism(<span class="number">1</span>).rebalance().print(<span class="string">&quot;rebalance : &quot;</span>);</span><br><span class="line"></span><br><span class="line">        env.execute();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="RescalePartitioner"><a href="#RescalePartitioner" class="headerlink" title="RescalePartitioner"></a>RescalePartitioner</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿™ç§åˆ†åŒºå™¨ä¼šæ ¹æ®ä¸Šä¸‹æ¸¸ç®—å­çš„å¹¶è¡Œåº¦ï¼Œå¾ªç¯çš„æ–¹å¼è¾“å‡ºåˆ°ä¸‹æ¸¸ç®—å­çš„æ¯ä¸ªå®ä¾‹ã€‚è¿™é‡Œæœ‰ç‚¹éš¾ä»¥ç†è§£ï¼Œå‡è®¾ä¸Šæ¸¸å¹¶è¡Œåº¦ä¸º 2ï¼Œç¼–å·ä¸º A å’Œ Bã€‚ä¸‹æ¸¸å¹¶è¡Œåº¦ä¸º 4ï¼Œç¼–å·ä¸º 1ï¼Œ2ï¼Œ3ï¼Œ4ã€‚é‚£ä¹ˆ A åˆ™æŠŠæ•°æ®å¾ªç¯å‘é€ç»™ 1 å’Œ 2ï¼ŒB åˆ™æŠŠæ•°æ®å¾ªç¯å‘é€ç»™ 3 å’Œ 4ã€‚å‡è®¾ä¸Šæ¸¸å¹¶è¡Œåº¦ä¸º 4ï¼Œç¼–å·ä¸º Aï¼ŒBï¼ŒCï¼ŒDã€‚ä¸‹æ¸¸å¹¶è¡Œåº¦ä¸º 2ï¼Œç¼–å·ä¸º 1ï¼Œ2ã€‚é‚£ä¹ˆ A å’Œ B åˆ™æŠŠæ•°æ®å‘é€ç»™ 1ï¼ŒC å’Œ D åˆ™æŠŠæ•°æ®å‘é€ç»™ 2ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">rescale</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        StreamExecutionEnvironment env = getEnv().setParallelism(<span class="number">4</span>);</span><br><span class="line">        DataStreamSource&lt;String&gt; dataStream = env.fromElements(<span class="string">&quot;hhh&quot;</span>, <span class="string">&quot;ggg&quot;</span>, <span class="string">&quot;fff&quot;</span>, <span class="string">&quot;ddd&quot;</span>, <span class="string">&quot;sss&quot;</span>, <span class="string">&quot;aaa&quot;</span>, <span class="string">&quot;qqq&quot;</span>, <span class="string">&quot;www&quot;</span>);</span><br><span class="line">        dataStream.map(<span class="keyword">new</span> RichMapFunction&lt;String, String&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> String <span class="title">map</span><span class="params">(String s)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> s + <span class="string">&quot;_**&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).setParallelism(<span class="number">1</span>).rescale().print(<span class="string">&quot;rescale : &quot;</span>);</span><br><span class="line"></span><br><span class="line">        env.execute();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="ForwardPartitioner"><a href="#ForwardPartitioner" class="headerlink" title="ForwardPartitioner"></a>ForwardPartitioner</h2><p>å‘é€åˆ°ä¸‹æ¸¸å¯¹åº”çš„ç¬¬ä¸€ä¸ªtaskï¼Œä¿è¯ä¸Šä¸‹æ¸¸ç®—å­å¹¶è¡Œåº¦ä¸€è‡´ï¼Œå³ä¸Šæœ‰ç®—å­ä¸ä¸‹æ¸¸ç®—å­æ˜¯1:1çš„å…³ç³»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç”¨äºå°†è®°å½•è¾“å‡ºåˆ°ä¸‹æ¸¸æœ¬åœ°çš„ç®—å­å®ä¾‹ã€‚å®ƒè¦æ±‚ä¸Šä¸‹æ¸¸ç®—å­å¹¶è¡Œåº¦ä¸€æ ·ã€‚ç®€å•çš„è¯´ï¼ŒForwardPartitionerç”¨æ¥åšæ•°æ®çš„æ§åˆ¶å°æ‰“å°ã€‚</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">forward</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        StreamExecutionEnvironment env = getEnv().setParallelism(<span class="number">1</span>);</span><br><span class="line">        DataStreamSource&lt;String&gt; dataStream = env.fromElements(<span class="string">&quot;hhh&quot;</span>, <span class="string">&quot;ggg&quot;</span>, <span class="string">&quot;fff&quot;</span>, <span class="string">&quot;ddd&quot;</span>, <span class="string">&quot;sss&quot;</span>, <span class="string">&quot;aaa&quot;</span>, <span class="string">&quot;qqq&quot;</span>, <span class="string">&quot;www&quot;</span>);</span><br><span class="line">        DataStream&lt;String&gt; broadcast = dataStream.shuffle();</span><br><span class="line">        broadcast.print(<span class="string">&quot;shuffle : &quot;</span>);</span><br><span class="line">        env.execute();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>âš ï¸ åœ¨ä¸Šä¸‹æ¸¸çš„ç®—å­æ²¡æœ‰æŒ‡å®šåˆ†åŒºå™¨çš„æƒ…å†µä¸‹ï¼Œå¦‚æœä¸Šä¸‹æ¸¸çš„ç®—å­å¹¶è¡Œåº¦ä¸€è‡´ï¼Œåˆ™ä½¿ç”¨ForwardPartitionerï¼Œå¦åˆ™ä½¿ç”¨RebalancePartitionerï¼Œå¯¹äºForwardPartitionerï¼Œå¿…é¡»ä¿è¯ä¸Šä¸‹æ¸¸ç®—å­å¹¶è¡Œåº¦ä¸€è‡´ï¼Œå¦åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p><h2 id="KeyByPartitioner"><a href="#KeyByPartitioner" class="headerlink" title="KeyByPartitioner"></a>KeyByPartitioner</h2><p>æ ¹æ®keyçš„åˆ†ç»„ç´¢å¼•é€‰æ‹©å‘é€åˆ°ç›¸å¯¹åº”çš„ä¸‹æ¸¸subtask</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">keyBy</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        StreamExecutionEnvironment env = getEnv().setMaxParallelism(<span class="number">8</span>);</span><br><span class="line">        DataStreamSource&lt;String&gt; dataStream = env.fromElements(<span class="string">&quot;hhh&quot;</span>, <span class="string">&quot;hhh&quot;</span>, <span class="string">&quot;hhh&quot;</span>, <span class="string">&quot;hhh&quot;</span>, <span class="string">&quot;sss&quot;</span>, <span class="string">&quot;sss&quot;</span>, <span class="string">&quot;sss&quot;</span>, <span class="string">&quot;www&quot;</span>);</span><br><span class="line">        dataStream.flatMap(<span class="keyword">new</span> RichFlatMapFunction&lt;String, String&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">flatMap</span><span class="params">(String s, Collector&lt;String&gt; collector)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                collector.collect(s + <span class="string">&quot;_**&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).keyBy(String::toString).print(<span class="string">&quot;keyBy : &quot;</span>);</span><br><span class="line"></span><br><span class="line">        env.execute();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="CustomPartitionerWrapper"><a href="#CustomPartitionerWrapper" class="headerlink" title="CustomPartitionerWrapper"></a>CustomPartitionerWrapper</h2><p>é€šè¿‡Partitionerå®ä¾‹çš„partitionæ–¹æ³•(è‡ªå®šä¹‰çš„)å°†è®°å½•è¾“å‡ºåˆ°ä¸‹æ¸¸ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">custom</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        StreamExecutionEnvironment env = getEnv().setMaxParallelism(<span class="number">8</span>);</span><br><span class="line">        DataStreamSource&lt;String&gt; dataStream = env.fromElements(<span class="string">&quot;hhhh&quot;</span>, <span class="string">&quot;hhhss&quot;</span>, <span class="string">&quot;hhh&quot;</span>, <span class="string">&quot;hhh&quot;</span>, <span class="string">&quot;sss&quot;</span>, <span class="string">&quot;sss&quot;</span>, <span class="string">&quot;sss&quot;</span>, <span class="string">&quot;www&quot;</span>);</span><br><span class="line">        dataStream.flatMap(<span class="keyword">new</span> RichFlatMapFunction&lt;String, String&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">flatMap</span><span class="params">(String s, Collector&lt;String&gt; collector)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                collector.collect(s + <span class="string">&quot;_**&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).partitionCustom(<span class="keyword">new</span> CustomPartitioner(),String::toString)</span><br><span class="line">        .print(<span class="string">&quot;custom :&quot;</span>);</span><br><span class="line"></span><br><span class="line">        env.execute();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomPartitioner</span> <span class="keyword">implements</span> <span class="title">Partitioner</span>&lt;<span class="title">String</span>&gt; </span>&#123;</span><br><span class="line">        <span class="comment">// key: æ ¹æ®keyçš„å€¼æ¥åˆ†åŒº</span></span><br><span class="line">        <span class="comment">// numPartitions: ä¸‹æ¸¸ç®—å­å¹¶è¡Œåº¦</span></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">partition</span><span class="params">(String key, <span class="keyword">int</span> numPartitions)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> key.length() % numPartitions;<span class="comment">//åœ¨æ­¤å¤„å®šä¹‰åˆ†åŒºç­–ç•¥</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><a href="https://blog.csdn.net/qq_36039236/article/details/112576091?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-0.control&spm=1001.2101.3001.4242">Flinkçš„å…«ç§åˆ†åŒºç­–ç•¥æºç è§£è¯»</a></p><p><a href="https://ci.apache.org/projects/flink/flink-docs-release-1.13/zh/docs/dev/datastream/operators/overview/#custom-partitioning">Apache Flink ä¸­æ–‡æ–‡æ¡£</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Flinkæä¾›çš„8ç§åˆ†åŒºå‡½æ•°&quot;&gt;&lt;a href=&quot;#Flinkæä¾›çš„8ç§åˆ†åŒºå‡½æ•°&quot; class=&quot;headerlink&quot; title=&quot;Flinkæä¾›çš„8ç§åˆ†åŒºå‡½æ•°&quot;&gt;&lt;/a&gt;Flinkæä¾›çš„8ç§åˆ†åŒºå‡½æ•°&lt;/h1&gt;&lt;h2 id=&quot;GlobalPartitioner</summary>
      
    
    
    
    
    <category term="Apache Flink" scheme="http://example.com/tags/Apache-Flink/"/>
    
  </entry>
  
  <entry>
    <title>Flink-UDFå‡½æ•°ç±»</title>
    <link href="http://example.com/wiki/Flink-UDF%E5%87%BD%E6%95%B0%E7%B1%BB/"/>
    <id>http://example.com/wiki/Flink-UDF%E5%87%BD%E6%95%B0%E7%B1%BB/</id>
    <published>2021-08-12T06:36:09.000Z</published>
    <updated>2021-08-12T07:18:26.151Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‡½æ•°ç±»"><a href="#å‡½æ•°ç±»" class="headerlink" title="å‡½æ•°ç±»"></a>å‡½æ•°ç±»</h2><p>æ¯”å¦‚è¯´æˆ‘ä»¬å¸¸ç”¨çš„MapFunctionï¼ŒFilterFunctionï¼ŒProcessFunctionç­‰ï¼Œæ¯ä¸€æ­¥æ“ä½œéƒ½åŸºæœ¬ä¸Šéƒ½å¯¹åº”ä¸€ä¸ªFunctionã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyFlatMapper</span> <span class="keyword">implements</span> <span class="title">FlatMapFunction</span>&lt;<span class="title">String</span>, <span class="title">Tuple2</span>&lt;<span class="title">String</span>, <span class="title">Integer</span>&gt;&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">flatMap</span><span class="params">(String s, Collector&lt;Tuple2&lt;String, Integer&gt;&gt; collector)</span> </span>&#123;</span><br><span class="line">      <span class="comment">// é¦–å…ˆæŒ‰ç…§ç©ºæ ¼åˆ†è¯</span></span><br><span class="line">      String[] words = s.split(<span class="string">&quot; &quot;</span>);</span><br><span class="line">      <span class="comment">// éå†æ‰€æœ‰çš„word åŒ…è£…æˆäºŒå…ƒç»„è¾“å‡º</span></span><br><span class="line">      <span class="keyword">for</span> (String word : words) &#123;</span><br><span class="line">        collector.collect(<span class="keyword">new</span> Tuple2&lt;String, Integer&gt;(word, <span class="number">1</span>));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>âš ï¸ ç®€å•æ»šåŠ¨èšåˆå‡½æ•°ï¼Œæ¯”å¦‚sumï¼Œmaxæ˜¯ä¸éœ€è¦Functionã€‚</p><p><strong>å¥½å¤„ï¼š</strong></p><p>1ã€é€šç”¨å‹å¼ºï¼Œå¯å¤ç”¨</p><p>2ã€å¯æŠ½è±¡æ–¹æ³•ï¼Œä»£ç ç®€æ´</p><h2 id="åŒ¿åå‡½æ•°"><a href="#åŒ¿åå‡½æ•°" class="headerlink" title="åŒ¿åå‡½æ•°"></a>åŒ¿åå‡½æ•°</h2><p>ä¸éœ€è¦å•ç‹¬å®šä¹‰Functionï¼Œç›´æ¥åœ¨Streamçš„æ“ä½œä¸­ç›´æ¥å®ç°ï¼Œæ•ˆæœå’Œä¸Šé¢ğŸ‘†çš„å®Œå…¨ä¸€æ ·ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">DataStream&lt;SensorReading&gt; dataStream = unionStream.map(<span class="keyword">new</span> MapFunction&lt;String, SensorReading&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SensorReading <span class="title">map</span><span class="params">(String s)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">      String[] strings = s.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> SensorReading(strings[<span class="number">0</span>], <span class="keyword">new</span> Double(strings[<span class="number">1</span>]), <span class="keyword">new</span> Double(strings[<span class="number">2</span>]));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="å¯Œå‡½æ•°"><a href="#å¯Œå‡½æ•°" class="headerlink" title="å¯Œå‡½æ•°"></a>å¯Œå‡½æ•°</h2><p>â€˜â€˜å¯Œå‡½æ•°â€™â€™æ˜¯DataStream API æä¾›çš„ä¸€ä¸ªå‡½æ•°ç±»çš„æ¥å£ï¼Œæ‰€æœ‰Flinkå‡½æ•°ç±»éƒ½æœ‰å…¶Richç‰ˆæœ¬ï¼Œå®ƒä¸å¸¸è§„å‡½æ•°çš„ä¸åŒåœ¨äºï¼Œå¯ä»¥è·å–è¿è¡Œç¯å¢ƒçš„ä¸Šä¸‹æ–‡ï¼Œå¹¶åŒ…å«ä¸€äº›å£°æ˜å‘¨æœŸæ–¹æ³•ï¼Œæ‰€ä»¥å¯ä»¥å®ç°æ›´åŠ å¤æ‚çš„åŠŸèƒ½ã€‚</p><p><code>RichMapFunction</code>ï¼Œ<code>RichFlatMapFunction</code>ç­‰ç­‰</p><p>Rich Functionæœ‰ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸçš„æ¦‚å¿µï¼Œå…¸å‹çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æœ‰ ğŸ‘‡</p><p><code>open()</code> æ–¹æ³•æ˜¯rich functionçš„åˆå§‹åŒ–æ–¹æ³•ï¼Œå½“ä¸€ä¸ªç®—å­æ¯”å¦‚mapè¢«è°ƒç”¨ä¹‹å‰è¢«è°ƒç”¨ã€‚</p><p><code>close()</code>æ–¹æ³•æ˜¯ç”Ÿå‘½å‘¨æœŸä¸­æœ€åä¸€ä¸ªè¢«è°ƒç”¨çš„æ–¹æ³•ï¼Œåšä¸€äº›æ¸…ç†å·¥ä½œã€‚</p><blockquote><p>å¦‚æœæœ‰å¤šä¸ªåˆ†åŒºçš„è¯ï¼Œæ¯ä¸ªåˆ†åŒºçš„openæ–¹æ³•å’Œcloseæ–¹æ³•éƒ½ä¼šæ‰§è¡Œä¸€æ¬¡</p></blockquote><p><code>getRuntimeContext()</code>è·å–è¿è¡Œæ—¶ä¸Šä¸‹æ–‡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RichFunctionDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();</span><br><span class="line">        DataStreamSource&lt;String&gt; dataSource = env.socketTextStream(<span class="string">&quot;localhost&quot;</span>, <span class="number">9999</span>);</span><br><span class="line"></span><br><span class="line">        DataStream&lt;SensorReading&gt; dataStream = dataSource.map(<span class="keyword">new</span> MapFunction&lt;String, SensorReading&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> SensorReading <span class="title">map</span><span class="params">(String s)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                String[] strings = s.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> SensorReading(strings[<span class="number">0</span>], <span class="keyword">new</span> Long(strings[<span class="number">1</span>]), <span class="keyword">new</span> Double(strings[<span class="number">2</span>]));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        DataStream&lt;Tuple2&lt;String, Integer&gt;&gt; stream = dataStream.map(<span class="keyword">new</span> MyMapFunction());</span><br><span class="line">        stream.print();</span><br><span class="line">        env.execute();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¯Œå‡½æ•°æ˜¯æŠ½è±¡ç±»ï¼Œè¿™é‡Œè¦ç”¨ç»§æ‰¿</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMapFunction</span> <span class="keyword">extends</span> <span class="title">RichMapFunction</span>&lt;<span class="title">SensorReading</span>, <span class="title">Tuple2</span>&lt;<span class="title">String</span>, <span class="title">Integer</span>&gt;&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">open</span><span class="params">(Configuration parameters)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">            System.err.println(<span class="string">&quot;invoke open&quot;</span>);</span><br><span class="line">            <span class="comment">// ä¸€èˆ¬å®šä¹‰çŠ¶æ€ï¼Œæˆ–è€…é“¾æ¥æ•°æ®åº“æ“ä½œ</span></span><br><span class="line">            <span class="keyword">super</span>.open(parameters);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Tuple2&lt;String, Integer&gt; <span class="title">map</span><span class="params">(SensorReading sensorReading)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">            RuntimeContext runtimeContext = <span class="keyword">this</span>.getRuntimeContext();</span><br><span class="line">            System.err.println(<span class="string">&quot;runtimeContext.getTaskName() : &quot;</span> + runtimeContext.getTaskName());</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Tuple2&lt;&gt;(sensorReading.getSersorId(), runtimeContext.getIndexOfThisSubtask());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">            <span class="keyword">super</span>.close();</span><br><span class="line">            System.err.println(<span class="string">&quot;invoke close method&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;å‡½æ•°ç±»&quot;&gt;&lt;a href=&quot;#å‡½æ•°ç±»&quot; class=&quot;headerlink&quot; title=&quot;å‡½æ•°ç±»&quot;&gt;&lt;/a&gt;å‡½æ•°ç±»&lt;/h2&gt;&lt;p&gt;æ¯”å¦‚è¯´æˆ‘ä»¬å¸¸ç”¨çš„MapFunctionï¼ŒFilterFunctionï¼ŒProcessFunctionç­‰ï¼Œæ¯ä¸€æ­¥æ“ä½œéƒ½åŸºæœ¬ä¸Šéƒ½å¯¹åº”ä¸€ä¸ª</summary>
      
    
    
    
    
    <category term="Apache Flink" scheme="http://example.com/tags/Apache-Flink/"/>
    
  </entry>
  
  <entry>
    <title>Flink-åˆ°åº•æ”¯æŒå¤šå°‘ç§æ•°æ®ç±»å‹</title>
    <link href="http://example.com/wiki/Flink-%E5%88%B0%E5%BA%95%E6%94%AF%E6%8C%81%E5%A4%9A%E5%B0%91%E4%B8%AD%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"/>
    <id>http://example.com/wiki/Flink-%E5%88%B0%E5%BA%95%E6%94%AF%E6%8C%81%E5%A4%9A%E5%B0%91%E4%B8%AD%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/</id>
    <published>2021-08-11T11:50:41.000Z</published>
    <updated>2021-08-12T06:35:36.160Z</updated>
    
    <content type="html"><![CDATA[<p>Flinkæ”¯æŒæ‰€æœ‰çš„Javaå’ŒScalaåŸºç¡€æ•°æ®ç±»å‹ä»¥åŠå…¶åŒ…è£…ç±»å‹</p><p>æ”¯æŒTupleå…ƒç»„ç±»å‹ï¼ŒFlinkåœ¨Java APIä¸­å®šä¹‰äº†å¾ˆå¤šTupleçš„å®ç°ç±»ï¼Œä»Tuple0 ~ Tuple25ç±»å‹</p><p>Scalaæ ·ä¾‹ç±» case classï¼Œå¯¹åº”Javaä¸­çš„POJOç±»å¯¹è±¡(å¿…é¡»æä¾›æ— å‚æ„é€ æ–¹æ³• get/set)</p><p>å…¶ä»–ï¼Œæ¯”å¦‚ Arrays , Lists, Maps, Enumsç­‰éƒ½æ˜¯æ”¯æŒçš„</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Flinkæ”¯æŒæ‰€æœ‰çš„Javaå’ŒScalaåŸºç¡€æ•°æ®ç±»å‹ä»¥åŠå…¶åŒ…è£…ç±»å‹&lt;/p&gt;
&lt;p&gt;æ”¯æŒTupleå…ƒç»„ç±»å‹ï¼ŒFlinkåœ¨Java APIä¸­å®šä¹‰äº†å¾ˆå¤šTupleçš„å®ç°ç±»ï¼Œä»Tuple0 ~ Tuple25ç±»å‹&lt;/p&gt;
&lt;p&gt;Scalaæ ·ä¾‹ç±» case classï¼Œå¯¹åº”Javaä¸­</summary>
      
    
    
    
    
    <category term="Apache Flink" scheme="http://example.com/tags/Apache-Flink/"/>
    
  </entry>
  
  <entry>
    <title>Flink-å¦‚ä½•è¯»å–æ•°æ®æºï¼ˆé›†åˆï½œæ–‡ä»¶ï½œè‡ªå®šä¹‰ï½œKafkaç­‰ï¼‰</title>
    <link href="http://example.com/wiki/Flink-%E5%A6%82%E4%BD%95%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE%E6%BA%90%EF%BC%88%E9%9B%86%E5%90%88%EF%BD%9C%E6%96%87%E4%BB%B6%EF%BD%9C%E8%87%AA%E5%AE%9A%E4%B9%89%EF%BD%9CKafka%E7%AD%89%EF%BC%89/"/>
    <id>http://example.com/wiki/Flink-%E5%A6%82%E4%BD%95%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE%E6%BA%90%EF%BC%88%E9%9B%86%E5%90%88%EF%BD%9C%E6%96%87%E4%BB%B6%EF%BD%9C%E8%87%AA%E5%AE%9A%E4%B9%89%EF%BD%9CKafka%E7%AD%89%EF%BC%89/</id>
    <published>2021-08-11T11:50:11.000Z</published>
    <updated>2021-08-11T12:08:35.086Z</updated>
    
    <content type="html"><![CDATA[<h2 id="è¯»å–æ–‡ä»¶"><a href="#è¯»å–æ–‡ä»¶" class="headerlink" title="è¯»å–æ–‡ä»¶"></a>è¯»å–æ–‡ä»¶</h2><p>è¿™é‡Œæ˜¯ä»¥txtæ–‡ä»¶ä¸ºä¾‹ï¼Œå®ç°WordCountï¼Œå…¶ä»–æ–‡ä»¶ç±»å‹åŒç†ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// 1ã€åˆ›å»ºæ‰§è¡Œç¯å¢ƒ</span></span><br><span class="line">        ExecutionEnvironment env = ExecutionEnvironment.getExecutionEnvironment();</span><br><span class="line">        <span class="comment">// 2ã€è¯»å–æ–‡ä»¶æ•°æ®</span></span><br><span class="line">        String inputPath = <span class="string">&quot;/Users/gaolei/Documents/DemoProjects/flink-start/src/main/resources/hello.txt&quot;</span>;</span><br><span class="line">        DataSource&lt;String&gt; dataSource = env.readTextFile(inputPath);</span><br><span class="line">        <span class="comment">// å¯¹æ•°æ®é›†è¿›è¡Œå¤„ç† æŒ‰ç…§ç©ºæ ¼åˆ†è¯å±•å¼€ è½¬æ¢æˆï¼ˆwordï¼Œ1ï¼‰äºŒå…ƒç»„</span></span><br><span class="line">        AggregateOperator&lt;Tuple2&lt;String, Integer&gt;&gt; result = dataSource.flatMap(<span class="keyword">new</span> MyFlatMapper())</span><br><span class="line">                <span class="comment">// æŒ‰ç…§ç¬¬ä¸€ä¸ªä½ç½® -&gt; word åˆ†ç»„</span></span><br><span class="line">                .groupBy(<span class="number">0</span>)</span><br><span class="line">                .sum(<span class="number">1</span>);</span><br><span class="line">        result.print();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyFlatMapper</span> <span class="keyword">implements</span> <span class="title">FlatMapFunction</span>&lt;<span class="title">String</span>, <span class="title">Tuple2</span>&lt;<span class="title">String</span>, <span class="title">Integer</span>&gt;&gt; </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">flatMap</span><span class="params">(String s, Collector&lt;Tuple2&lt;String, Integer&gt;&gt; collector)</span> </span>&#123;</span><br><span class="line">            <span class="comment">// é¦–å…ˆæŒ‰ç…§ç©ºæ ¼åˆ†è¯</span></span><br><span class="line">            String[] words = s.split(<span class="string">&quot; &quot;</span>);</span><br><span class="line">            <span class="comment">// éå†æ‰€æœ‰çš„word åŒ…è£…æˆäºŒå…ƒç»„è¾“å‡º</span></span><br><span class="line">            <span class="keyword">for</span> (String word : words) &#123;</span><br><span class="line">                collector.collect(<span class="keyword">new</span> Tuple2&lt;String, Integer&gt;(word, <span class="number">1</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å®ç°è‡ªå®šä¹‰æ•°æ®æº"><a href="#å®ç°è‡ªå®šä¹‰æ•°æ®æº" class="headerlink" title="å®ç°è‡ªå®šä¹‰æ•°æ®æº"></a>å®ç°è‡ªå®šä¹‰æ•°æ®æº</h2><p>éœ€è¦è‡ªå·±å†™ä¸€ä¸ªç±»ï¼Œå®ç°SourceFunctionæ¥å£çš„runæ–¹æ³•å’Œcancleæ–¹æ³•ï¼Œæ³¨æ„âš ï¸ï¼ŒSourceFunction<SensorReading>çš„æ³›å‹ç±»å‹å¿…é¡»è¦å†™ä¸Šï¼Œä¸ç„¶ä¼šæŠ¥é”™çš„ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment().setParallelism(<span class="number">1</span>);</span><br><span class="line">        DataStreamSource dataStreamSource = env.addSource(<span class="keyword">new</span> MySourceFunction());</span><br><span class="line">        dataStreamSource.print();</span><br><span class="line">        env.execute();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®ç°è‡ªå®šä¹‰çš„source</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MySourceFunction</span> <span class="keyword">implements</span> <span class="title">SourceFunction</span>&lt;<span class="title">SensorReading</span>&gt; </span>&#123;</span><br><span class="line">        <span class="comment">// å®šä¹‰æ ‡è¯†ä½ æ§åˆ¶æ•°æ®äº§ç”Ÿ</span></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">boolean</span> running = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(SourceContext ctx)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">            <span class="comment">// å®šä¹‰å„ä¸ªéšæœºæ•°ç”Ÿæˆå™¨</span></span><br><span class="line">            HashMap&lt;String, Double&gt; sensorMap = <span class="keyword">new</span> HashMap&lt;String, Double&gt;(<span class="number">10</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">                sensorMap.put(<span class="string">&quot;sensor_&quot;</span> + (i + <span class="number">1</span>), <span class="number">60</span> + <span class="keyword">new</span> Random().nextGaussian() * <span class="number">20</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span> (running) &#123;</span><br><span class="line">                <span class="keyword">for</span> (String sensor : sensorMap.keySet()) &#123;</span><br><span class="line">                    <span class="keyword">double</span> newtemp = sensorMap.get(sensor) + <span class="keyword">new</span> Random().nextGaussian();</span><br><span class="line">                    sensorMap.put(sensor, newtemp);</span><br><span class="line">                    ctx.collect(<span class="keyword">new</span> SensorReading(sensor, System.currentTimeMillis(), newtemp));</span><br><span class="line">                &#125;</span><br><span class="line">                Thread.sleep(<span class="number">10000</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">cancel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            running = <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;è¯»å–æ–‡ä»¶&quot;&gt;&lt;a href=&quot;#è¯»å–æ–‡ä»¶&quot; class=&quot;headerlink&quot; title=&quot;è¯»å–æ–‡ä»¶&quot;&gt;&lt;/a&gt;è¯»å–æ–‡ä»¶&lt;/h2&gt;&lt;p&gt;è¿™é‡Œæ˜¯ä»¥txtæ–‡ä»¶ä¸ºä¾‹ï¼Œå®ç°WordCountï¼Œå…¶ä»–æ–‡ä»¶ç±»å‹åŒç†ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight</summary>
      
    
    
    
    
    <category term="Apache Flink" scheme="http://example.com/tags/Apache-Flink/"/>
    
  </entry>
  
  <entry>
    <title>Flink-ä½ æ‰€çŸ¥é“çš„ç®—å­éƒ½åœ¨è¿™</title>
    <link href="http://example.com/wiki/Flink-%E4%BD%A0%E6%89%80%E7%9F%A5%E9%81%93%E7%9A%84%E7%AE%97%E5%AD%90%E9%83%BD%E5%9C%A8%E8%BF%99/"/>
    <id>http://example.com/wiki/Flink-%E4%BD%A0%E6%89%80%E7%9F%A5%E9%81%93%E7%9A%84%E7%AE%97%E5%AD%90%E9%83%BD%E5%9C%A8%E8%BF%99/</id>
    <published>2021-08-11T11:49:20.000Z</published>
    <updated>2021-08-11T12:04:38.123Z</updated>
    
    <content type="html"><![CDATA[<p>å¥½äº†ï¼Œçœ‹åˆ°è¿™çš„è¯ï¼ŒApache FlinkåŸºç¡€æ¦‚å¿µå•¥çš„éƒ½åº”è¯¥äº†è§£å·®ä¸å¤šäº†å§ï¼Œæˆ‘ä»¬å‡ å¤©å°±Seeä¸€ä¸‹ï¼Œå¹³æ—¶ç”¨åˆ°çš„StreamApiä¸­å„å¼å„æ ·çš„ç®—å­éƒ½æœ‰ä»€ä¹ˆï¼Œç„¶åï¼Œæˆ‘ä»¬æç‚¹Demoè¯•ä¸€ä¸‹ã€‚</p><p>ğŸ“’ æˆ‘ä¹Ÿæ˜¯è¾¹å­¦è¾¹å®ç°ä¸€äº›Demo,è¿™æ ·å‘¢å¯ä»¥æ–¹ä¾¿è‡ªå·±ç†è§£ï¼Œå½¢æˆä½“ç³»ä»¥åä¹Ÿåº”è¯¥èƒ½å¸®åˆ°åˆ«äººå¿«é€Ÿå­¦ä¹ å§ã€‚</p><p>è¿™å°±æ˜¯åœ°å€äº†ğŸ‘‰ <a href="https://github.com/geekibli/flink-study">https://github.com/geekibli/flink-study</a>  æ¬¢è¿starï¼</p><p><strong>ä¸‹é¢çš„Demoéƒ½æ˜¯å¯ä»¥ç›´æ¥è¿è¡Œçš„</strong>  å¦‚æœæ˜¯é€šè¿‡socketè·å–æ•°æ®çš„è¯ï¼Œç¡®è®¤ç°å¼€å¯ç«¯å£å•Šï¼Œæˆ‘ç”¨çš„Macç³»ç»Ÿï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ <code>nc -lk 9999</code></p><h2 id="æä¾›ä¸€ä¸ªå…¨å±€è·å–ç¯å¢ƒçš„æ–¹æ³•"><a href="#æä¾›ä¸€ä¸ªå…¨å±€è·å–ç¯å¢ƒçš„æ–¹æ³•" class="headerlink" title="æä¾›ä¸€ä¸ªå…¨å±€è·å–ç¯å¢ƒçš„æ–¹æ³•"></a>æä¾›ä¸€ä¸ªå…¨å±€è·å–ç¯å¢ƒçš„æ–¹æ³•</h2><p>æˆ‘ä»¬ä¸€ä¸ªé™æ€æ–¹æ³•getEnv(), ä¸ç„¶æ¯æ¬¡è¿˜è¦newï¼ŒæŒºéº»çƒ¦çš„ï¼›</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> StreamExecutionEnvironment <span class="title">getEnv</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> StreamExecutionEnvironment.getExecutionEnvironment();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="POJOç±»"><a href="#POJOç±»" class="headerlink" title="POJOç±»"></a>POJOç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SensorReading</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> String sersorId;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> timestamp;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> newtemp;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><h2 id="map"><a href="#map" class="headerlink" title="map"></a>map</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">mapTest</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    StreamExecutionEnvironment env = getEnv();</span><br><span class="line">    ArrayList&lt;Integer&gt; nums = Lists.newArrayList();</span><br><span class="line">    nums.add(<span class="number">1</span>);</span><br><span class="line">    nums.add(<span class="number">2</span>);</span><br><span class="line">    nums.add(<span class="number">3</span>);</span><br><span class="line">    DataStreamSource&lt;Integer&gt; source = env.fromCollection(nums);</span><br><span class="line">    SingleOutputStreamOperator&lt;Integer&gt; map = source.map(<span class="keyword">new</span> MapFunction&lt;Integer, Integer&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Integer <span class="title">map</span><span class="params">(Integer integer)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> integer * integer;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    map.print();</span><br><span class="line">    env.execute();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="keyBy"><a href="#keyBy" class="headerlink" title="keyBy"></a>keyBy</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">keyByTest</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        StreamExecutionEnvironment env = getEnv();</span><br><span class="line">        DataStreamSource&lt;Tuple2&lt;String, Integer&gt;&gt; source = env.fromElements(</span><br><span class="line">                <span class="keyword">new</span> Tuple2&lt;String, Integer&gt;(<span class="string">&quot;age&quot;</span>, <span class="number">1</span>),</span><br><span class="line">                <span class="keyword">new</span> Tuple2&lt;String, Integer&gt;(<span class="string">&quot;name&quot;</span>, <span class="number">2</span>),</span><br><span class="line">                <span class="keyword">new</span> Tuple2&lt;String, Integer&gt;(<span class="string">&quot;name&quot;</span>, <span class="number">3</span>),</span><br><span class="line">                <span class="keyword">new</span> Tuple2&lt;String, Integer&gt;(<span class="string">&quot;name&quot;</span>, <span class="number">3</span>));</span><br><span class="line"></span><br><span class="line">        source.map(</span><br><span class="line">                <span class="keyword">new</span> MapFunction&lt;Tuple2&lt;String, Integer&gt;, Tuple2&lt;String, Integer&gt;&gt;() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="function"><span class="keyword">public</span> Tuple2&lt;String, Integer&gt; <span class="title">map</span><span class="params">(Tuple2&lt;String, Integer&gt; stringIntegerTuple2)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                        Integer f1 = stringIntegerTuple2.f1;</span><br><span class="line">                        stringIntegerTuple2.setField(f1 + <span class="number">10</span>, <span class="number">1</span>);</span><br><span class="line">                        <span class="keyword">return</span> stringIntegerTuple2;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">                .keyBy(<span class="number">1</span>)</span><br><span class="line">                .print();</span><br><span class="line">        env.execute();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="reduce"><a href="#reduce" class="headerlink" title="reduce"></a>reduce</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">reduceTest</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        StreamExecutionEnvironment env = getEnv();</span><br><span class="line">        env.fromElements(</span><br><span class="line">                Tuple2.of(<span class="number">2L</span>, <span class="number">3L</span>),</span><br><span class="line">                Tuple2.of(<span class="number">1L</span>, <span class="number">5L</span>),</span><br><span class="line">                Tuple2.of(<span class="number">1L</span>, <span class="number">5L</span>),</span><br><span class="line">                Tuple2.of(<span class="number">1L</span>, <span class="number">7L</span>),</span><br><span class="line">                Tuple2.of(<span class="number">2L</span>, <span class="number">4L</span>),</span><br><span class="line">                Tuple2.of(<span class="number">1L</span>, <span class="number">5L</span>))</span><br><span class="line">                .keyBy(<span class="number">1</span>)</span><br><span class="line">                .reduce(<span class="keyword">new</span> ReduceFunction&lt;Tuple2&lt;Long, Long&gt;&gt;() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="function"><span class="keyword">public</span> Tuple2&lt;Long, Long&gt; <span class="title">reduce</span><span class="params">(Tuple2&lt;Long, Long&gt; longLongTuple2, Tuple2&lt;Long, Long&gt; t1)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="keyword">new</span> Tuple2&lt;Long, Long&gt;(t1.f0, longLongTuple2.f1 + t1.f1);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">                .print();</span><br><span class="line">        env.execute();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿˜æœ‰ä¸€ä¸ªæ —å­ğŸŒ°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">reduce</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        StreamExecutionEnvironment env = getEnv();</span><br><span class="line">        DataStreamSource&lt;String&gt; dataSource = env.socketTextStream(<span class="string">&quot;localhost&quot;</span>, <span class="number">9999</span>);</span><br><span class="line"></span><br><span class="line">        DataStream&lt;SensorReading&gt; dataStream = dataSource.map(<span class="keyword">new</span> MapFunction&lt;String, SensorReading&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> SensorReading <span class="title">map</span><span class="params">(String s)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                String[] strings = s.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> SensorReading(strings[<span class="number">0</span>], <span class="keyword">new</span> Long(strings[<span class="number">1</span>]), <span class="keyword">new</span> Double(strings[<span class="number">2</span>]));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        DataStream&lt;SensorReading&gt; sersorId = dataStream.keyBy(<span class="string">&quot;sersorId&quot;</span>)</span><br><span class="line">                .reduce(<span class="keyword">new</span> ReduceFunction&lt;SensorReading&gt;() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="function"><span class="keyword">public</span> SensorReading <span class="title">reduce</span><span class="params">(SensorReading sensorReading, SensorReading t1)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                        String id = t1.getSersorId();</span><br><span class="line">                        Double time = t1.getTimestamp();</span><br><span class="line">                        <span class="keyword">return</span> <span class="keyword">new</span> SensorReading(id, time, Math.max(sensorReading.getNewtemp(), t1.getNewtemp()));</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">        sersorId.print();</span><br><span class="line">        env.execute();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="split-select"><a href="#split-select" class="headerlink" title="split|select"></a>split|select</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">splitTest</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        StreamExecutionEnvironment env = getEnv();</span><br><span class="line">        DataStreamSource&lt;String&gt; dataSource = env.socketTextStream(<span class="string">&quot;localhost&quot;</span>, <span class="number">9999</span>);</span><br><span class="line"></span><br><span class="line">        DataStream&lt;SensorReading&gt; dataStream = dataSource.map(<span class="keyword">new</span> MapFunction&lt;String, SensorReading&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> SensorReading <span class="title">map</span><span class="params">(String s)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                String[] strings = s.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> SensorReading(strings[<span class="number">0</span>], <span class="keyword">new</span> Double(strings[<span class="number">1</span>]), <span class="keyword">new</span> Double(strings[<span class="number">2</span>]));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        SplitStream&lt;SensorReading&gt; split = dataStream.split(<span class="keyword">new</span> OutputSelector&lt;SensorReading&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Iterable&lt;String&gt; <span class="title">select</span><span class="params">(SensorReading value)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> (value.getNewtemp() &gt; <span class="number">30</span>) ? Collections.singleton(<span class="string">&quot;high&quot;</span>) : Collections.singleton(<span class="string">&quot;low&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        DataStream&lt;SensorReading&gt; low = split.select(<span class="string">&quot;low&quot;</span>);</span><br><span class="line">        DataStream&lt;SensorReading&gt; high = split.select(<span class="string">&quot;high&quot;</span>);</span><br><span class="line">        DataStream&lt;SensorReading&gt; all = split.select(<span class="string">&quot;high&quot;</span>, <span class="string">&quot;low&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// connect</span></span><br><span class="line">        DataStream&lt;Tuple2&lt;String, Double&gt;&gt; highStream = high.map(<span class="keyword">new</span> MapFunction&lt;SensorReading, Tuple2&lt;String, Double&gt;&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Tuple2&lt;String, Double&gt; <span class="title">map</span><span class="params">(SensorReading sensorReading)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Tuple2&lt;&gt;(sensorReading.getSersorId(), sensorReading.getNewtemp());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// é“¾æ¥ä¹‹åçš„stream</span></span><br><span class="line">        ConnectedStreams&lt;Tuple2&lt;String, Double&gt;, SensorReading&gt; connect = highStream.connect(low);</span><br><span class="line"></span><br><span class="line">        SingleOutputStreamOperator&lt;Object&gt; resultStream = connect.map(<span class="keyword">new</span> CoMapFunction&lt;Tuple2&lt;String, Double&gt;, SensorReading, Object&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Object <span class="title">map1</span><span class="params">(Tuple2&lt;String, Double&gt; stringDoubleTuple2)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Tuple3&lt;&gt;(stringDoubleTuple2.f0, stringDoubleTuple2.f0, <span class="string">&quot;high temp warning&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Object <span class="title">map2</span><span class="params">(SensorReading sensorReading)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Tuple2&lt;&gt;(sensorReading.getSersorId(), <span class="string">&quot;normal temp&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        resultStream.print();</span><br><span class="line">        env.execute();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="connect-coMap"><a href="#connect-coMap" class="headerlink" title="connect | coMap"></a>connect | coMap</h2><p>å¦‚ä¸Šsplitæ–¹æ³•ä¸‹é¢æˆ‘ä»¬æ˜¯æœ‰æ“ä½œconnectçš„apiçš„</p><h2 id="union"><a href="#union" class="headerlink" title="union"></a>union</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">unionTest</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// å¿…é¡»æ˜¯æ•°æ®ç±»å‹ç›¸åŒ</span></span><br><span class="line">        StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();</span><br><span class="line"></span><br><span class="line">        DataStreamSource&lt;String&gt; firstStream = env.socketTextStream(<span class="string">&quot;localhost&quot;</span>, <span class="number">9999</span>);</span><br><span class="line">        DataStreamSource&lt;String&gt; secondStream = env.socketTextStream(<span class="string">&quot;localhost&quot;</span>, <span class="number">7777</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        DataStream&lt;String&gt; unionStream = firstStream.union(secondStream);</span><br><span class="line">        DataStream&lt;SensorReading&gt; dataStream = unionStream.map(<span class="keyword">new</span> MapFunction&lt;String, SensorReading&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> SensorReading <span class="title">map</span><span class="params">(String s)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                String[] strings = s.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> SensorReading(strings[<span class="number">0</span>], <span class="keyword">new</span> Double(strings[<span class="number">1</span>]), <span class="keyword">new</span> Double(strings[<span class="number">2</span>]));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        dataStream.print();</span><br><span class="line">        env.execute();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>// TODO ä¸æ–­å­¦ä¹  ä¸æ–­è¡¥å……</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å¥½äº†ï¼Œçœ‹åˆ°è¿™çš„è¯ï¼ŒApache FlinkåŸºç¡€æ¦‚å¿µå•¥çš„éƒ½åº”è¯¥äº†è§£å·®ä¸å¤šäº†å§ï¼Œæˆ‘ä»¬å‡ å¤©å°±Seeä¸€ä¸‹ï¼Œå¹³æ—¶ç”¨åˆ°çš„StreamApiä¸­å„å¼å„æ ·çš„ç®—å­éƒ½æœ‰ä»€ä¹ˆï¼Œç„¶åï¼Œæˆ‘ä»¬æç‚¹Demoè¯•ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;ğŸ“’ æˆ‘ä¹Ÿæ˜¯è¾¹å­¦è¾¹å®ç°ä¸€äº›Demo,è¿™æ ·å‘¢å¯ä»¥æ–¹ä¾¿è‡ªå·±ç†è§£ï¼Œå½¢æˆä½“ç³»ä»¥åä¹Ÿåº”</summary>
      
    
    
    
    
    <category term="Apache Flink" scheme="http://example.com/tags/Apache-Flink/"/>
    
  </entry>
  
  <entry>
    <title>Flink-æ ¸å¿ƒä¹‹Windowsçª—å£</title>
    <link href="http://example.com/wiki/Flink-%E6%A0%B8%E5%BF%83%E4%B9%8BWindows%E7%AA%97%E5%8F%A3/"/>
    <id>http://example.com/wiki/Flink-%E6%A0%B8%E5%BF%83%E4%B9%8BWindows%E7%AA%97%E5%8F%A3/</id>
    <published>2021-08-10T08:55:40.000Z</published>
    <updated>2021-08-10T11:40:39.547Z</updated>
    
    <content type="html"><![CDATA[<p>ä»€ä¹ˆæ˜¯çª—å£</p><p>çª—å£åˆ†é…å™¨æœ‰å‡ ç§</p><p>çª—å£å¦‚ä½•å®ç°å¢é‡è®¡ç®—å’Œå…¨é‡è®¡ç®—</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä»€ä¹ˆæ˜¯çª—å£&lt;/p&gt;
&lt;p&gt;çª—å£åˆ†é…å™¨æœ‰å‡ ç§&lt;/p&gt;
&lt;p&gt;çª—å£å¦‚ä½•å®ç°å¢é‡è®¡ç®—å’Œå…¨é‡è®¡ç®—&lt;/p&gt;
</summary>
      
    
    
    
    
    <category term="Apache Flink" scheme="http://example.com/tags/Apache-Flink/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹ç¾-é—¨é¢æ¨¡å¼</title>
    <link href="http://example.com/wiki/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%BE%8E-%E9%97%A8%E9%9D%A2%E6%A8%A1%E5%BC%8F/"/>
    <id>http://example.com/wiki/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%BE%8E-%E9%97%A8%E9%9D%A2%E6%A8%A1%E5%BC%8F/</id>
    <published>2021-08-07T12:27:47.000Z</published>
    <updated>2021-08-07T12:36:22.057Z</updated>
    
    <content type="html"><![CDATA[<h1 id="é—¨é¢æ¨¡å¼"><a href="#é—¨é¢æ¨¡å¼" class="headerlink" title="é—¨é¢æ¨¡å¼"></a>é—¨é¢æ¨¡å¼</h1><p>é—¨é¢æ¨¡å¼åˆå«åšå¤–è§‚æ¨¡å¼ï¼Œæä¾›ç»Ÿä¸€çš„ä¸€ä¸ªæ¥å£ï¼Œç”¨æ¥è®¿é—®å­ç³»ç»Ÿä¸­çš„ä¸€ç¾¤æ¥å£ï¼›<br>é—¨é¢æ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªé«˜å±‚æ¥å£ï¼Œè®©å­ç³»ç»Ÿæ›´å®¹æ˜“ä½¿ç”¨ï¼›é—¨é¢æ¨¡å¼å±äºç»“æ„å‹æ¨¡å¼ï¼›  </p><h2 id="ç±»å›¾"><a href="#ç±»å›¾" class="headerlink" title="ç±»å›¾"></a>ç±»å›¾</h2><p><img src="https://oscimg.oschina.net/oscnet/up-937cef58fcd4540a37854b0eeb31cda5c06.png">  </p><h3 id="Facade-é—¨é¢ç±»"><a href="#Facade-é—¨é¢ç±»" class="headerlink" title="Facade é—¨é¢ç±»"></a>Facade é—¨é¢ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Facade</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ç»§æ‰¿å„ä¸ªå­ç³»ç»ŸåŠŸèƒ½ï¼Œè¿›è¡Œå°è£…ï¼Œä¸€å®šç¨‹åº¦ä¸Šä¸éµå¾ªå•ä¸€èŒè´£åŸåˆ™</span></span><br><span class="line">    SubSystemA subSystemA = <span class="keyword">new</span> SubSystemA();</span><br><span class="line">    SubSystemB subSystemB = <span class="keyword">new</span> SubSystemB();</span><br><span class="line">    SubSystemC subSystemC = <span class="keyword">new</span> SubSystemC();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doA</span><span class="params">()</span></span>&#123;</span><br><span class="line">        subSystemA.doA();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doB</span><span class="params">()</span></span>&#123;</span><br><span class="line">        subSystemB.doB();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doC</span><span class="params">()</span></span>&#123;</span><br><span class="line">        subSystemC.doC();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å­ç³»ç»ŸA"><a href="#å­ç³»ç»ŸA" class="headerlink" title="å­ç³»ç»ŸA"></a>å­ç³»ç»ŸA</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SubSystemA</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doA</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å­ç³»ç»ŸB"><a href="#å­ç³»ç»ŸB" class="headerlink" title="å­ç³»ç»ŸB"></a>å­ç³»ç»ŸB</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SubSystemB</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doB</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å­ç³»ç»ŸC"><a href="#å­ç³»ç»ŸC" class="headerlink" title="å­ç³»ç»ŸC"></a>å­ç³»ç»ŸC</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SubSystemC</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doC</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸ŠFacadeç±»é›†æˆäº†ä¸‰ä¸ªå­ç³»ç»Ÿçš„ç±»ï¼Œåœ¨è‡ªå·±å®šä¹‰çš„æ–¹æ³•ä¸­ï¼Œå¹¶ä¸æ˜¯Facadeè‡ªå·±å®ç°çš„é€»è¾‘ï¼Œè€Œæ˜¯<br>è°ƒç”¨äº†å¯¹åº”å­ç³»ç»Ÿçš„æ–¹æ³•ï¼Œè¿™ç§å®ç°æ–¹å¼å«åšé—¨é¢æ¨¡å¼ï¼›æ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼›  </p><p>çœ‹åˆ°è¿™æ˜¯ä¸æ˜¯æœ‰ç‚¹ä¼¼æ›¾ç›¸è¯†å‘¢ï¼Œæ²¡é”™ï¼Œæˆ‘ä»¬å¤©å¤©éƒ½åœ¨å†™çš„Controller,Service,Daoä¸å°±æ˜¯é—¨é¢æ¨¡å¼å—ï¼Œ<br>æ²¡é”™ï¼Œåªä¸è¿‡æŠŠè¿™ç§æ–¹å¼å½¢æˆæ–¹æ³•è®ºï¼Œä¹Ÿå°±æœ‰äº†æ‰€è°“çš„é—¨é¢æ¨¡å¼ï¼  </p><h2 id="ä¸¾ä¸ªæ —å­"><a href="#ä¸¾ä¸ªæ —å­" class="headerlink" title="ä¸¾ä¸ªæ —å­"></a>ä¸¾ä¸ªæ —å­</h2><p>ä¸€äº›å•†ä¸šåšå®¢ä¼šæœ‰ä¸€ä¸ªåŠŸèƒ½ï¼Œå°±æ˜¯å‘è¡¨æ–‡ç« æˆ–è€…è¯„è®ºç‚¹èµä¼šè·å¾—ä¸€äº›ç§¯åˆ†å•Šï¼Œè™šæ‹Ÿå¸å•Š,ç„¶åä¼šæœ‰ç§¯åˆ†å•†åŸï¼Œåœ¨é‡Œé¢å¯ä»¥å…è´¹çš„å…‘æ¢å•†å“ï¼Œå…¶å®å¾ˆéš¾å‡‘çš„å¤Ÿç§¯åˆ†ï¼Œä¸å¤Ÿè´¹åŠ²çš„â€¦ å¥½äº†ï¼Œç»“åˆä¼ªä»£ç æ¥ä½“éªŒé—¨é¢æ¨¡å¼ğŸ‘‡ğŸ‘‡ğŸ‘‡ï¼š  </p><p><strong>ä¸‹é¢æ˜¯ä¸€äº›æ¼”ç¤ºæ‰€éœ€è¦çš„ç±»ï¼š</strong>  </p><h3 id="å…³ç³»å›¾å¦‚ä¸‹"><a href="#å…³ç³»å›¾å¦‚ä¸‹" class="headerlink" title="å…³ç³»å›¾å¦‚ä¸‹"></a>å…³ç³»å›¾å¦‚ä¸‹</h3><p><img src="https://oscimg.oschina.net/oscnet/up-e117a07cbd9489e5a037d1e64961c1062c7.png">  </p><h3 id="PaymentService-æ”¯ä»˜æœåŠ¡"><a href="#PaymentService-æ”¯ä»˜æœåŠ¡" class="headerlink" title="PaymentService æ”¯ä»˜æœåŠ¡"></a>PaymentService æ”¯ä»˜æœåŠ¡</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PaymentService</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">pay</span><span class="params">(GiftInfo giftInfo)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ‰£å‡&quot;</span> + giftInfo.getName() + <span class="string">&quot;ç§¯åˆ†æˆåŠŸï¼&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="QualityService-åº“å­˜æœåŠ¡"><a href="#QualityService-åº“å­˜æœåŠ¡" class="headerlink" title="QualityService åº“å­˜æœåŠ¡"></a>QualityService åº“å­˜æœåŠ¡</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QualityService</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isAvailable</span><span class="params">(GiftInfo giftInfo)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ ¡éªŒ&quot;</span> + giftInfo.getName() + <span class="string">&quot;ç§¯åˆ†é€šè¿‡ï¼Œåº“å­˜å……è¶³ï¼&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ShipService-ç‰©æµæœåŠ¡"><a href="#ShipService-ç‰©æµæœåŠ¡" class="headerlink" title="ShipService ç‰©æµæœåŠ¡"></a>ShipService ç‰©æµæœåŠ¡</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShipService</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">doShip</span><span class="params">(GiftInfo giftInfo)</span></span>&#123;</span><br><span class="line">        System.out.println(giftInfo.getName() + <span class="string">&quot;ç”Ÿæˆç‰©æµè®¢å•&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> String.valueOf(System.currentTimeMillis());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å®¢æˆ·ç«¯-éé—¨é¢æ¨¡å¼å†™æ³•"><a href="#å®¢æˆ·ç«¯-éé—¨é¢æ¨¡å¼å†™æ³•" class="headerlink" title="å®¢æˆ·ç«¯ éé—¨é¢æ¨¡å¼å†™æ³•"></a>å®¢æˆ·ç«¯ éé—¨é¢æ¨¡å¼å†™æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    QualityService qualityService = <span class="keyword">new</span> QualityService();</span><br><span class="line">    PaymentService paymentService = <span class="keyword">new</span> PaymentService();</span><br><span class="line">    ShipService shipService = <span class="keyword">new</span> ShipService();</span><br><span class="line"></span><br><span class="line">    GiftInfo giftInfo = <span class="keyword">new</span> GiftInfo(<span class="string">&quot; ã€ŠJavaç¼–ç¨‹æ€æƒ³ã€‹ &quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!qualityService.isAvailable(giftInfo))&#123;</span><br><span class="line">        System.err.println(<span class="string">&quot;Quality not enough!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!paymentService.pay(giftInfo))&#123;</span><br><span class="line">        System.err.println(<span class="string">&quot;Pay error!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    String shipNo = shipService.doShip(giftInfo);</span><br><span class="line">    System.err.println(<span class="string">&quot;Order shipNo:&quot;</span> + shipNo);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ç§å†™æ³•ä¼šå°†åº“å­˜ï¼Œæ”¯ä»˜å’Œç‰©æµç­‰æœåŠ¡éƒ½æš´éœ²ç»™è°ƒç”¨æ–¹ï¼Œæ˜¯å¾ˆä¸å®‰å…¨çš„ï¼Œè€Œä¸”é€ æˆå®¢æˆ·ç«¯ä¾èµ–ä¸¥é‡ï¼Œä»£ç è‡ƒè‚¿ï¼›  </p><h3 id="é—¨é¢æ¨¡å¼å†™æ³•"><a href="#é—¨é¢æ¨¡å¼å†™æ³•" class="headerlink" title="é—¨é¢æ¨¡å¼å†™æ³•"></a>é—¨é¢æ¨¡å¼å†™æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">       FacadeService facadeService = <span class="keyword">new</span> FacadeService();</span><br><span class="line">       GiftInfo giftInfo = <span class="keyword">new</span> GiftInfo(<span class="string">&quot; ã€ŠJavaç¼–ç¨‹æ€æƒ³ã€‹ &quot;</span>);</span><br><span class="line">       String shipNo = facadeService.doOrder(giftInfo);</span><br><span class="line">       System.err.println(<span class="string">&quot;Order shipNo:&quot;</span> + shipNo);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™ç§å°±æ˜¯é—¨é¢æ¨¡å¼çš„å†™æ³•ğŸ‘† ï¼Œ ç›¸ä¿¡å¤§å®¶åº”è¯¥å¾ˆç†Ÿæ‚‰å§ï¼Œè¿™æ ·çš„è¯ï¼Œæš´éœ²ç»™å®¢æˆ·ç«¯å°±ä¸€ä¸ªè®¢å•æœåŠ¡å°±å¯ä»¥äº†ï¼</p><h2 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h2><ul><li><strong>å­ç³»ç»Ÿè¶Šæ¥è¶Šå¤æ‚ï¼Œå¢åŠ é—¨é¢æ¨¡å¼æä¾›ç®€å•çš„æ¥å£ï¼Œç»™ç”¨æˆ·ä½¿ç”¨ï¼›</strong></li><li><strong>æ„å»ºå¤šå±‚çš„ç³»ç»Ÿæ¥å£ï¼Œåˆ©ç”¨é—¨é¢å¯¹è±¡ä½œä¸ºæ¯å±‚çš„å…¥å£ï¼Œç®€åŒ–å±‚ä¹‹é—´çš„è°ƒç”¨</strong></li></ul><h2 id="åº”ç”¨"><a href="#åº”ç”¨" class="headerlink" title="åº”ç”¨"></a>åº”ç”¨</h2><p><code>Spring JdbcUtils</code><br><code>Mybatis configuration</code><br><code>Tomcat requestFacade responseFacade </code></p><h2 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h2><ul><li><strong>ç®€åŒ–äº†è°ƒç”¨è¿‡ç¨‹ï¼Œæ— éœ€æ·±å…¥äº†è§£å­ç³»ç»Ÿï¼Œä»¥é˜²æ­¢ç»™å­ç³»ç»Ÿå¸¦æ¥é£é™©</strong></li></ul><p>æ ¹æ®ä¸Šé¢ç¤¼å“å…‘æ¢çš„é€»è¾‘ï¼Œç”¨æˆ·æ ¹æœ¬ä¸careä½ åº•å±‚çš„å…‘æ¢é€»è¾‘ï¼Œä»€ä¹ˆåº“å­˜å•Šï¼Œæ”¯ä»˜çŠ¶æ€å•Šï¼Œç”Ÿæˆè®¢å•é€»è¾‘ç­‰ç­‰ï¼Œå¯¹äºç”¨æˆ·æ¥è¯´ï¼Œæˆ‘åªéœ€è¦ä¸€æ­¥ä¸‹å•å³å¯ï¼›  </p><ul><li><strong>å‡å°‘ç³»ç»Ÿä¾èµ–ï¼Œæ¾è€¦åˆ</strong></li></ul><p>è¿™ä¸€ç‚¹ä¹Ÿæ˜¯ç›¸å¯¹å®¢æˆ·ç«¯æ¥è¯´ï¼Œå®¢æˆ·ç«¯åªå…³å¿ƒçš„çš„è®¢å•æœåŠ¡å°±å¥½äº†ï¼Œå…¶ä»–çš„åº“å­˜ï¼Œä¾›åº”é“¾ç­‰éƒ½ä¸å…³ç³»ï¼›</p><ul><li><strong>æ›´å¥½çš„åˆ’åˆ†è®¿é—®å±‚æ¬¡ï¼Œæé«˜äº†å®‰å…¨æ€§</strong></li></ul><p>åˆç†çš„åˆ’åˆ†å±‚æ¬¡ï¼Œå‡å°‘åº•å±‚ç³»ç»Ÿçš„æš´éœ²ï¼Œä»…ä»…æš´éœ²ä¸€äº›å¿…è¦çš„çŠ¶æ€å’Œæ¥å£ï¼Œè¿™ä¸€ç‚¹å¤§å®¶åº”è¯¥éƒ½çŸ¥é“çš„ï¼Œåƒserviceå±‚è°ƒç”¨Daoå±‚ï¼Œè€Œä¸èƒ½åœ¨serviceå±‚ç›´æ¥è®¿é—®æ•°æ®åº“ï¼›</p><ul><li><strong>éµå¾ªè¿ªç±³ç‰¹æ³•åˆ™</strong></li></ul><h2 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h2><ul><li><strong>å½“å­ç³»ç»Ÿçš„åŠŸèƒ½éœ€è¦æ‰©å±•æˆ–è€…ä¿®æ”¹çš„æ—¶å€™ï¼Œä¸Šå±‚å°è£…å¯èƒ½è¦é¢ä¸´ä¿®æ”¹çš„é£é™©ï¼Œè¿™æ ·å¢åŠ äº†åæœŸçš„ç»´æŠ¤æˆæœ¬ï¼Œä¹Ÿä¸éµå¾ªå¼€é—­åŸåˆ™</strong></li><li><strong>å¯èƒ½ä¼šè¿èƒŒå•ä¸€èŒè´£åŸåˆ™</strong></li></ul><h2 id="é—¨é¢æ¨¡å¼å’Œä»£ç†æ¨¡å¼çš„åŒºåˆ«"><a href="#é—¨é¢æ¨¡å¼å’Œä»£ç†æ¨¡å¼çš„åŒºåˆ«" class="headerlink" title="é—¨é¢æ¨¡å¼å’Œä»£ç†æ¨¡å¼çš„åŒºåˆ«"></a>é—¨é¢æ¨¡å¼å’Œä»£ç†æ¨¡å¼çš„åŒºåˆ«</h2><p>ç®€å•æ¥è¯´ï¼Œé—¨é¢æ¨¡å¼å°±æ˜¯ä¸€ç§ä»£ç†æ¨¡å¼ï¼Œæ˜¯å±äºé™æ€ä»£ç†çš„æ¨¡å¼ï¼›ä½†æ˜¯å’Œé™æ€ä»£ç†åˆæœ‰ä¸€äº›åŒºåˆ«ï¼Œé—¨é¢æ¨¡å¼çš„ä¾§é‡ç‚¹åœ¨äºå¯¹åº•å±‚çš„å°è£…ï¼Œè€Œé™æ€ä»£ç†åˆ™ç»ˆäºå¯¹ä»£ç†å¯¹è±¡çš„å¢å¼ºï¼Œé™¤äº†è°ƒç”¨å—å§”æ‰˜å¯¹è±¡çš„æ–¹æ³•ä¹‹å¤–ï¼Œå¯ä»¥æ‰©å±•é¢å¤–çš„åŠŸèƒ½ï¼›<br>å¾ˆå¤šæ—¶å€™ä¼šæŠŠé—¨é¢æ¨¡å¼æ³¨å…¥æˆå•ä¾‹ï¼Œæ¯”å¦‚ä¸€äº›å…¨å±€çš„Util,è¿˜æœ‰æˆ‘ä»¬å¸¸è§çš„ä¸€äº›Controllerç­‰ç­‰ï¼›  </p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;é—¨é¢æ¨¡å¼&quot;&gt;&lt;a href=&quot;#é—¨é¢æ¨¡å¼&quot; class=&quot;headerlink&quot; title=&quot;é—¨é¢æ¨¡å¼&quot;&gt;&lt;/a&gt;é—¨é¢æ¨¡å¼&lt;/h1&gt;&lt;p&gt;é—¨é¢æ¨¡å¼åˆå«åšå¤–è§‚æ¨¡å¼ï¼Œæä¾›ç»Ÿä¸€çš„ä¸€ä¸ªæ¥å£ï¼Œç”¨æ¥è®¿é—®å­ç³»ç»Ÿä¸­çš„ä¸€ç¾¤æ¥å£ï¼›&lt;br&gt;é—¨é¢æ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªé«˜å±‚æ¥å£ï¼Œè®©å­ç³»ç»Ÿæ›´å®¹æ˜“ä½¿</summary>
      
    
    
    
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="http://example.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹ç¾-é€‚é…å™¨æ¨¡å¼</title>
    <link href="http://example.com/wiki/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%BE%8E-%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/"/>
    <id>http://example.com/wiki/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%BE%8E-%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/</id>
    <published>2021-08-07T12:23:59.000Z</published>
    <updated>2021-08-07T12:25:54.734Z</updated>
    
    <content type="html"><![CDATA[<h1 id="é€‚é…å™¨æ¨¡å¼"><a href="#é€‚é…å™¨æ¨¡å¼" class="headerlink" title="é€‚é…å™¨æ¨¡å¼"></a>é€‚é…å™¨æ¨¡å¼</h1><p>é€‚é…å™¨æ¨¡å¼ï¼ˆAdapter Patternï¼‰åˆå«åšå˜å‹å™¨æ¨¡å¼ï¼Œå®ƒçš„åŠŸèƒ½æ˜¯å°†ä¸€ä¸ªç±»çš„æ¥å£å˜æˆå®¢æˆ·ç«¯æ‰€æœŸæœ›çš„å¦ä¸€ä¸ªæ¥å£ï¼Œä»è€Œ<br>ä½¿å¾—åŸæœ¬å› æ¥å£ä¸åŒ¹é…è€Œå¯¼è‡´æ— æ³•åœ¨ä¸€èµ·å·¥ä½œçš„ä¸¤ä¸ªç±»èƒ½å¤Ÿåœ¨ä¸€èµ·å·¥ä½œï¼Œå±äºç»“æ„æ€§è®¾è®¡æ¨¡å¼çš„ä¸€ç§ï¼›</p><p>åœ¨è½¯ä»¶å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼ŒåŸºæœ¬ä¸Šä»»ä½•é—®é¢˜éƒ½å¯ä»¥é€šè¿‡ä¸€ä¸ªä¸­é—´å±‚è§£å†³ã€‚é€‚é…å™¨æ¨¡å¼å…¶å®å°±æ˜¯ä¸€ä¸ªä¸­é—´å±‚ï¼Œé€‚é…å™¨æ¨¡å¼èµ·ç€<br>è½¬åŒ–/å§”æ‰˜çš„ä½œç”¨ï¼Œå°†ä¸€ç§æ¥å£è½¬åŒ–ä¸ºä¸¤ä¸€ç§æœåŠ¡åŠŸèƒ½æˆ–éœ€æ±‚çš„æ¥å£ã€‚</p><p>ä¸‹é¢ä¸¾ä¸ªä¾‹å­æ¥åˆ†æä¸€ä¸‹ğŸ‘‡  </p><h2 id="ç±»å›¾"><a href="#ç±»å›¾" class="headerlink" title="ç±»å›¾"></a>ç±»å›¾</h2><img src="https://cdn.jsdelivr.net/gh/zabernism/image@main/gao/up-785fc6504778eee5c2c820597c0d6e36fbd.png" style="zoom:67%;" /> å¦‚å›¾æ˜¯ä¸€ä¸ªé€‚é…å™¨æ¨¡å¼ç±»å›¾æ‰€åœ¨ğŸ‘†  <h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p>å®ç°ä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬æœ‰å¾ˆå¤šä¸­é€‰æ‹©ï¼Œäºšé©¬é€Šçš„AWS,é˜¿é‡Œçš„OSSç­‰ç­‰å§ï¼Œä½†æ˜¯ä¸åŒçš„å‚å•†æœ‰è‡ªå·±çš„æ ‡å‡†æˆ–è€…API,ä½†æ˜¯åœ¨æˆ‘ä»¬ç³»ç»Ÿä¸­ä½“ç°çš„å°±æ˜¯ä¸€ä¸ªputObjectæ–¹æ³•ï¼Œæ‰€ä»¥éœ€è¦å®šä¹‰ä¸€ä¸ªCloudSDKæ ‡å‡†ï¼Œç„¶åä¸åŒçš„å‚å•†æ¥é€‚é…æˆ‘ä»¬è‡ªå·±çš„æ ‡å‡†ï¼Œåœ¨æˆ‘ä»¬çš„putObjectå’Œä¸‰æ–¹çš„SDKä¸­é—´åŠ ä¸€å±‚é€‚é…å±‚ï¼›<br>å¯¹äºå®¢æˆ·ç«¯æ¥è¯´ï¼Œä»…ä»…æ˜¯å®Œæˆæ–‡ä»¶ä¸Šä¼ çš„åŠ¨ä½œï¼Œè‡³äºä½ æœåŠ¡ç«¯åˆ°åº•ä½¿ç”¨äºšé©¬é€Šçš„æœåŠ¡è¿˜æ˜¯é˜¿é‡Œçš„æœåŠ¡ï¼Œå®ƒæ˜¯ä¸careçš„ï¼Œè¿™ä¹Ÿä½“ç°çš„ç­–ç•¥æ¨¡å¼ï¼›  æ‰€ä»¥è¿™ä¸ªä¾‹å­å…¼å¤‡å·¥å‚æ¨¡å¼+ç­–ç•¥æ¨¡å¼+é€‚é…å™¨æ¨¡å¼ï¼›  </p><h3 id="CloudController"><a href="#CloudController" class="headerlink" title="CloudController"></a>CloudController</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CloudController</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¦‚æœæ˜¯Springé¡¹ç›®è¿™é‡Œç›´æ¥æ³¨å…¥å°±å¯ä»¥äº†ï¼Œæ²¡å¿…è¦è¿™ä¹ˆéº»çƒ¦</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CloudController</span><span class="params">(CloudService cloudService)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.cloudService = cloudService;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> CloudService cloudService;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">uploadFile</span><span class="params">(String fileName)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;invoke upload file service!&quot;</span> + fileName);</span><br><span class="line">        cloudService.uploadFile(fileName);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        CloudController cloudController = <span class="keyword">new</span> CloudController(<span class="keyword">new</span> CloudService(<span class="string">&quot;ali&quot;</span>));</span><br><span class="line">        cloudController.uploadFile(<span class="string">&quot;think in java&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="CloudService"><a href="#CloudService" class="headerlink" title="CloudService"></a>CloudService</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CloudService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> CloudSDK cloudSDK;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CloudService</span><span class="params">(String cloudStorage)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨å·¥å‚æ¥åˆ›å»ºå…·ä½“çš„SDK</span></span><br><span class="line">        <span class="keyword">this</span>.cloudSDK = CloudFactory.create(cloudStorage);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">uploadFile</span><span class="params">(String fileName)</span> </span>&#123;</span><br><span class="line">        cloudSDK.putObject(fileName);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="CloudSDK-å®šä¹‰SDKæ ‡å‡†"><a href="#CloudSDK-å®šä¹‰SDKæ ‡å‡†" class="headerlink" title="CloudSDK å®šä¹‰SDKæ ‡å‡†"></a>CloudSDK å®šä¹‰SDKæ ‡å‡†</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">CloudSDK</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">putObject</span><span class="params">(String fileName)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="AWSSDKAdapter-é€‚é…CloudSDKæ ‡å‡†"><a href="#AWSSDKAdapter-é€‚é…CloudSDKæ ‡å‡†" class="headerlink" title="AWSSDKAdapter é€‚é…CloudSDKæ ‡å‡†"></a>AWSSDKAdapter é€‚é…CloudSDKæ ‡å‡†</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AWSSDKAdapter</span> <span class="keyword">implements</span> <span class="title">CloudSDK</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> AWSSDK awssdk;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AWSSDKAdapter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.awssdk = <span class="keyword">new</span> AWSSDK();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">putObject</span><span class="params">(String fileName)</span> </span>&#123;</span><br><span class="line">        awssdk.putObject(fileName);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="AliSDKAdapteré€‚é…CloudSDKæ ‡å‡†"><a href="#AliSDKAdapteré€‚é…CloudSDKæ ‡å‡†" class="headerlink" title="AliSDKAdapteré€‚é…CloudSDKæ ‡å‡†"></a>AliSDKAdapteré€‚é…CloudSDKæ ‡å‡†</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AliSDKAdapter</span> <span class="keyword">implements</span> <span class="title">CloudSDK</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> AliSDK aliSDK;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AliSDKAdapter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.aliSDK = <span class="keyword">new</span> AliSDK();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è¿™ä¸ªæ–¹æ³•å°±æ˜¯é€‚é…å™¨çš„æ ‡å‡† ä¸ç®¡ä½ çš„ä¸‰æ–¹æœåŠ¡éœ€è¦å¤šå°‘æ¥å£ï¼Œæ˜¯è¦å®ç°äº‘ä¸Šä¼ ï¼Œç»Ÿä¸€é€šè¿‡putObjectè¿™ä¸ªæ¥å£å®ç°å°±å¯ä»¥</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">putObject</span><span class="params">(String fileName)</span> </span>&#123;</span><br><span class="line">        aliSDK.setBucket();</span><br><span class="line">        aliSDK.uploadFile(fileName);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="AWSSDK-ä¸‰æ–¹SDK"><a href="#AWSSDK-ä¸‰æ–¹SDK" class="headerlink" title="AWSSDK ä¸‰æ–¹SDK"></a>AWSSDK ä¸‰æ–¹SDK</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AWSSDK</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ä¸€èˆ¬ä»¥JARçš„æ–¹å¼å¼•å…¥åˆ°é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿä¸å¯èƒ½å»ä¿®æ”¹ä¸‰æ–¹çš„SDK,è¿™æ˜¯å„ä¸ªå‚å•†åˆ¶å®šçš„è‡ªå·±çš„æ ‡å‡†</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">putObject</span><span class="params">(String fileName)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;aws upload file &quot;</span> + fileName);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="AliSDK-ä¸‰æ–¹SDK"><a href="#AliSDK-ä¸‰æ–¹SDK" class="headerlink" title="AliSDK ä¸‰æ–¹SDK"></a>AliSDK ä¸‰æ–¹SDK</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AliSDK</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ä¸€èˆ¬ä»¥JARçš„æ–¹å¼å¼•å…¥åˆ°é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿä¸å¯èƒ½å»ä¿®æ”¹ä¸‰æ–¹çš„SDK,è¿™æ˜¯å„ä¸ªå‚å•†åˆ¶å®šçš„è‡ªå·±çš„æ ‡å‡†</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBucket</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Ali oss set bucket!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">uploadFile</span><span class="params">(String fileName)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Ali oss upload file!&quot;</span> + fileName);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="CloudFactory"><a href="#CloudFactory" class="headerlink" title="CloudFactory"></a>CloudFactory</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CloudFactory</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è¿™é‡Œæ˜¯å†™æ­»äº† ç”Ÿäº§ç¯å¢ƒä¸­å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶çš„æ–¹å¼æˆ–è€…å¯åŠ¨åŠ è½½ç­‰ç­‰æ–¹å¼å®ç°ï¼Œæœ‰å¾ˆå¤š</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Map&lt;String, CloudSDK&gt; sdkMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ€»ä¹‹è¦ç¬¦åˆå¼€é—­åŸåˆ™ å¯¹ä¿®æ”¹å…³é—­</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        sdkMap.put(<span class="string">&quot;ali&quot;</span>, <span class="keyword">new</span> AliSDKAdapter());</span><br><span class="line">        sdkMap.put(<span class="string">&quot;aws&quot;</span>, <span class="keyword">new</span> AWSSDKAdapter());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// é€šè¿‡ä¸åŒçš„ç­–ç•¥ç”Ÿæˆå…·ä½“çš„SDKå®ä¾‹</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> CloudSDK <span class="title">create</span><span class="params">(String storage)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sdkMap.get(storage);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é€‚é…å™¨å’Œè£…é¥°å™¨æ¨¡å¼çš„åŒºåˆ«"><a href="#é€‚é…å™¨å’Œè£…é¥°å™¨æ¨¡å¼çš„åŒºåˆ«" class="headerlink" title="é€‚é…å™¨å’Œè£…é¥°å™¨æ¨¡å¼çš„åŒºåˆ«"></a>é€‚é…å™¨å’Œè£…é¥°å™¨æ¨¡å¼çš„åŒºåˆ«</h2><p>é€‚é…å™¨æ¨¡å¼å’Œè£…é¥°å™¨æ¨¡å¼éƒ½æ˜¯åŒ…è£…å™¨æ¨¡å¼ï¼Œè£…é¥°å™¨æ¨¡å¼å…¶å®æ˜¯ä¸€ç§ç‰¹æ®Šçš„ä»£ç†æ¨¡å¼ï¼›</p><table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>é€‚é…å™¨æ¨¡å¼</th><th>è£…é¥°å™¨æ¨¡å¼</th></tr></thead><tbody><tr><td>å½¢å¼</td><td>æ²¡æœ‰å±‚çº§å…³ç³»</td><td>ä¸€ç§éå¸¸ç‰¹åˆ«çš„ä»£ç†æ¨¡å¼ï¼Œå…·æœ‰å±‚çº§å…³ç³»</td></tr><tr><td>å®šä¹‰</td><td>é€‚é…å™¨å’Œè¢«é€‚é…è€…æ²¡æœ‰å¿…ç„¶çš„è”ç³»ï¼Œé€šå¸¸é‡‡ç”¨ç»§æ‰¿æˆ–ä»£ç†çš„æ–¹å¼è¿›è¡ŒåŒ…è£…</td><td>è£…é¥°å™¨å’Œè¢«è£…é¥°è€…éƒ½å®ç°åŒä¸€ä¸ªæ¥å£ï¼Œä¸»è¦ç›®çš„æ˜¯æ‰©å±•ä¹‹åä¾æ—§ä¿ç•™OOPå…³ç³»</td></tr><tr><td>å…³ç³»</td><td>æ²¡æœ‰æ»¡è¶³has-açš„å…³ç³»</td><td>æ»¡è¶³is-aå…³ç³»</td></tr><tr><td>åŠŸèƒ½</td><td>æ³¨é‡å…¼å®¹ã€è½¬æ¢</td><td>æ³¨é‡è¦†ç›–ã€æ‰©å±•</td></tr><tr><td>è®¾è®¡</td><td>åç½®è€ƒè™‘</td><td>å‰ç½®è€ƒè™‘</td></tr></tbody></table><h2 id="é€‚é…å™¨åŠŸèƒ½çš„ä¼˜ç‚¹-âœ…"><a href="#é€‚é…å™¨åŠŸèƒ½çš„ä¼˜ç‚¹-âœ…" class="headerlink" title="é€‚é…å™¨åŠŸèƒ½çš„ä¼˜ç‚¹ âœ…"></a>é€‚é…å™¨åŠŸèƒ½çš„ä¼˜ç‚¹ âœ…</h2><ul><li><strong>èƒ½æé«˜ç±»çš„é€æ˜æ€§å’Œå¤ç”¨ï¼Œä½†ç°æœ‰çš„ç±»å¤ç”¨ä¸éœ€è¦æ”¹å˜</strong>  </li><li><strong>é€‚é…å™¨ç±»å’ŒåŸè§’è‰²è§£è€¦ï¼ŒæŠ•ç¨¿ç¨‹åºçš„æ‰©å±•æ€§</strong></li><li><strong>åœ¨å¾ˆå¤šä¸šåŠ¡ä¸­ç¬¦åˆå¼€é—­åŸåˆ™</strong>  </li></ul><h2 id="é€‚é…å™¨çš„ç¼ºç‚¹"><a href="#é€‚é…å™¨çš„ç¼ºç‚¹" class="headerlink" title="é€‚é…å™¨çš„ç¼ºç‚¹"></a>é€‚é…å™¨çš„ç¼ºç‚¹</h2><ul><li><strong>é€‚é…å™¨ç¼–å†™è¿‡ç¨‹éœ€è¦ç»“åˆä¸šåŠ¡åœºæ™¯ç»¼åˆè€ƒè™‘ï¼Œå¯èƒ½ä¼šå¢åŠ ç³»ç»Ÿçš„å¤æ‚æ€§</strong></li><li><strong>å¢åŠ ä»£ç é˜…è¯»éš¾åº¦ï¼Œé™ä½ä»£ç å¯è¯»æ€§ï¼Œè¿‡å¤šçš„é€‚é…å™¨ä¼šä½¿å¾—ç³»ç»Ÿä»£ç å˜å¾—ç´Šä¹±</strong></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;é€‚é…å™¨æ¨¡å¼&quot;&gt;&lt;a href=&quot;#é€‚é…å™¨æ¨¡å¼&quot; class=&quot;headerlink&quot; title=&quot;é€‚é…å™¨æ¨¡å¼&quot;&gt;&lt;/a&gt;é€‚é…å™¨æ¨¡å¼&lt;/h1&gt;&lt;p&gt;é€‚é…å™¨æ¨¡å¼ï¼ˆAdapter Patternï¼‰åˆå«åšå˜å‹å™¨æ¨¡å¼ï¼Œå®ƒçš„åŠŸèƒ½æ˜¯å°†ä¸€ä¸ªç±»çš„æ¥å£å˜æˆå®¢æˆ·ç«¯æ‰€æœŸæœ›çš„å¦ä¸€ä¸ªæ¥å£ï¼Œ</summary>
      
    
    
    
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="http://example.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹ç¾-è´£ä»»é“¾æ¨¡å¼</title>
    <link href="http://example.com/wiki/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%BE%8E-%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F/"/>
    <id>http://example.com/wiki/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%BE%8E-%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F/</id>
    <published>2021-08-07T12:21:01.000Z</published>
    <updated>2021-08-07T12:23:18.865Z</updated>
    
    <content type="html"><![CDATA[<h1 id="è´£ä»»é“¾æ¨¡å¼"><a href="#è´£ä»»é“¾æ¨¡å¼" class="headerlink" title="è´£ä»»é“¾æ¨¡å¼"></a>è´£ä»»é“¾æ¨¡å¼</h1><p>è´£ä»»é“¾æ¨¡å¼ï¼ˆChain of Responsibility Patterï¼‰æ˜¯å°†é“¾ä¸­çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹çœ‹æˆæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ¯ä¸ªèŠ‚ç‚¹å¤„ç†çš„è¯·æ±‚å‡ä¸ç›¸åŒï¼Œ<br>å¹¶ä¸”å†…éƒ¨è‡ªåŠ¨ç»´æŠ¤ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å¯¹è±¡ã€‚å½“ä¸€ä¸ªè¯·æ±‚ä»é“¾çš„å¤´éƒ¨å‘å‡ºæ—¶ï¼Œä¼šæ²¿ç€é“¾çš„è·¯å¾„ä¸€æ¬¡ä¼ é€’ç»™æ¯ä¸€ä¸ªèŠ‚ç‚¹å¯¹è±¡ï¼Œç›´åˆ°æœ‰èŠ‚ç‚¹å¤„ç†è¿™ä¸ªè¯·æ±‚ä¸ºæ­¢ï¼›è´£ä»»é“¾æ¨¡å¼å±äºè¡Œä¸ºå‹æ¨¡å¼</p><h2 id="ç±»å›¾"><a href="#ç±»å›¾" class="headerlink" title="ç±»å›¾"></a>ç±»å›¾</h2><img src="https://cdn.jsdelivr.net/gh/zabernism/image@main/gao/up-346d95211f8ced1530fe1098a480a35a535.png" style="zoom:67%;" />  <h3 id="Handler-è´£ä»»é“¾æŠ½è±¡ç±»-é“¾å¼ç»“æ„"><a href="#Handler-è´£ä»»é“¾æŠ½è±¡ç±»-é“¾å¼ç»“æ„" class="headerlink" title="Handler è´£ä»»é“¾æŠ½è±¡ç±» é“¾å¼ç»“æ„"></a>Handler è´£ä»»é“¾æŠ½è±¡ç±» é“¾å¼ç»“æ„</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Handler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> Handler nextHandler;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setNextHandler</span><span class="params">(Handler nextHandler)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.nextHandler = nextHandler;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">handleRequest</span><span class="params">(String request)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ConcreteHandlerA-èŠ‚ç‚¹å¯¹è±¡A"><a href="#ConcreteHandlerA-èŠ‚ç‚¹å¯¹è±¡A" class="headerlink" title="ConcreteHandlerA èŠ‚ç‚¹å¯¹è±¡A"></a>ConcreteHandlerA èŠ‚ç‚¹å¯¹è±¡A</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcreteHandlerA</span> <span class="keyword">extends</span> <span class="title">Handler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleRequest</span><span class="params">(String request)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;reqA&quot;</span>.equals(request)) &#123;</span><br><span class="line">            System.err.println(<span class="keyword">this</span>.getClass().getSimpleName() + <span class="string">&quot;deal this request &quot;</span> + request);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.nextHandler != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.nextHandler.handleRequest(request);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ConcreteHandlerB-èŠ‚ç‚¹å¯¹è±¡B"><a href="#ConcreteHandlerB-èŠ‚ç‚¹å¯¹è±¡B" class="headerlink" title="ConcreteHandlerB èŠ‚ç‚¹å¯¹è±¡B"></a>ConcreteHandlerB èŠ‚ç‚¹å¯¹è±¡B</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcreteHandlerB</span> <span class="keyword">extends</span> <span class="title">Handler</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleRequest</span><span class="params">(String request)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;reqB&quot;</span>.equals(request)) &#123;</span><br><span class="line">            System.err.println(<span class="keyword">this</span>.getClass().getSimpleName() + <span class="string">&quot;deal this request &quot;</span> + request);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.nextHandler != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.nextHandler.handleRequest(request);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="DemoTest-æµ‹è¯•ç±»"><a href="#DemoTest-æµ‹è¯•ç±»" class="headerlink" title="DemoTest æµ‹è¯•ç±»"></a>DemoTest æµ‹è¯•ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Handler handlerA = <span class="keyword">new</span> ConcreteHandlerA();</span><br><span class="line">        Handler handlerB = <span class="keyword">new</span> ConcreteHandlerB();</span><br><span class="line">        handlerA.setNextHandler(handlerB);</span><br><span class="line">        handlerA.handleRequest(<span class="string">&quot;reqB&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¾“å‡ºç»“æœï¼š</span></span><br><span class="line"><span class="comment">//ConcreteHandlerBdeal this request reqB</span></span><br></pre></td></tr></table></figure><h2 id="ä¸šåŠ¡"><a href="#ä¸šåŠ¡" class="headerlink" title="ä¸šåŠ¡"></a>ä¸šåŠ¡</h2><p>ä¸‹é¢æˆ‘ä»¬ä¸¾ä¸€ä¸ªä¸šåŠ¡åœºæ™¯çš„ä¾‹å­ğŸŒ°æ¥å±•ç¤ºä¸€ä¸‹ä»€ä¹ˆæ˜¯è´£ä»»é“¾æ¨¡å¼ï¼š<br>æˆ‘ä»¬ç™»å½•æ—¶ï¼Œè‚¯å®šè¦æ ¡éªŒç”¨æˆ·åå’Œå¯†ç æœ‰æ²¡æœ‰ä¼ å‚ï¼Œå¦‚æœå‚æ•°éƒ½æ˜¯ç©ºçš„è¯ï¼Œé‚£ä¹Ÿæ²¡æœ‰å¿…è¦æ‰§è¡Œåé¢çš„ç™»å½•éƒ¨åˆ†ï¼Œç›´æ¥è¿”å›äº†ï¼›å¦‚æœå‚æ•°æ˜¯åˆæ³•çš„ï¼Œé‚£æˆ‘ä»¬å°±è¦æ ¡éªŒæ•°æ®åº“æ˜¯å¦å­˜åœ¨è¿™ä¸ªç”¨æˆ·äº†ï¼Œå¦‚æœä¸å­˜åœ¨è¯¥ç”¨æˆ·ï¼Œé‚£å°±ç›´æ¥è¿”å›ï¼›å¦‚æœå­˜åœ¨ï¼Œé‚£å°±è¦æ ¡éªŒç”¨æˆ·æœ‰æ²¡æœ‰æƒé™è®¿é—®æ­£åœ¨è¯·æ±‚çš„èµ„æºï¼Œå¦‚æœæœ‰æƒé™ï¼Œåˆ™å¯ä»¥æ­£å¸¸è®¿é—®èµ„æºï¼Œå¦‚æœæ²¡æœ‰æƒé™ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ï¼›  </p><h3 id="éè´£ä»»é“¾æ¨¡å¼å†™æ³•"><a href="#éè´£ä»»é“¾æ¨¡å¼å†™æ³•" class="headerlink" title="éè´£ä»»é“¾æ¨¡å¼å†™æ³•"></a>éè´£ä»»é“¾æ¨¡å¼å†™æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»¥ä¸‹æ˜¯ä¼ªä»£ç </span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">login</span><span class="params">(String userName,String pwd)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(userName) || StringUtils.isEmpty(pwd))&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException();</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        Member member = selectUser(userName,pwd);</span><br><span class="line">        <span class="keyword">if</span> (Objects.isNull(member))&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException();</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (!validateRoot(member))&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException();</span><br><span class="line">        &#125;</span><br><span class="line">        System.err.println(<span class="string">&quot;Login success!&quot;</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>è¿™ç§å†™æ³•è™½ç„¶ç®€å•ï¼Œä½†æ˜¯å°†æ‰€æœ‰çš„æ“ä½œå…¨éƒ¨æ‚ç³…åœ¨ä¸€èµ·äº†ï¼Œç»“æ„æ˜¯ååˆ†æ··ä¹±çš„ï¼›<br>ä¸‹é¢ğŸ‘‡çœ‹ä¸€ä¸‹å¦‚æœä½¿ç”¨è´£ä»»é“¾æ¨¡å¼è¯¥å¦‚ä½•å®ç°ï¼š<br><img src="https://cdn.jsdelivr.net/gh/zabernism/image@main/gao/up-f94e4e83f493d7a998e1e8bbb36f3c8eb4b.png" style="zoom:67%;" /> </p><h3 id="Handler-æŠ½è±¡è´£ä»»é“¾å¤„ç†å™¨"><a href="#Handler-æŠ½è±¡è´£ä»»é“¾å¤„ç†å™¨" class="headerlink" title="Handler æŠ½è±¡è´£ä»»é“¾å¤„ç†å™¨"></a>Handler æŠ½è±¡è´£ä»»é“¾å¤„ç†å™¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Handler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">protected</span> Handler next;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">next</span><span class="params">(Handler next)</span></span>&#123;</span><br><span class="line">       <span class="keyword">this</span>.next = next;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">doHandler</span><span class="params">(Member member)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ValidateHandler-å‚æ•°æ ¡éªŒå¤„ç†å™¨"><a href="#ValidateHandler-å‚æ•°æ ¡éªŒå¤„ç†å™¨" class="headerlink" title="ValidateHandler å‚æ•°æ ¡éªŒå¤„ç†å™¨"></a>ValidateHandler å‚æ•°æ ¡éªŒå¤„ç†å™¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ValidateHandler</span> <span class="keyword">extends</span> <span class="title">Handler</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doHandler</span><span class="params">(Member member)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(member.getLoginName()) || StringUtils.isEmpty(member.getLoginPass()))&#123;</span><br><span class="line">            System.err.println(<span class="string">&quot;ç™»å½•åæˆ–è€…å¯†ç ä¸ºç©ºï¼&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        System.err.println(<span class="string">&quot;å‚æ•°æ ¡éªŒæˆåŠŸï¼&quot;</span>);</span><br><span class="line">        next.doHandler(member);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç™»å½•å¤„ç†å™¨"><a href="#ç™»å½•å¤„ç†å™¨" class="headerlink" title="ç™»å½•å¤„ç†å™¨"></a>ç™»å½•å¤„ç†å™¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginHandler</span> <span class="keyword">extends</span> <span class="title">Handler</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doHandler</span><span class="params">(Member member)</span> </span>&#123;</span><br><span class="line">        System.err.println(<span class="string">&quot;login success!&quot;</span>);</span><br><span class="line">        member.setRoleName(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        next.doHandler(member);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é‰´æƒå¤„ç†å™¨"><a href="#é‰´æƒå¤„ç†å™¨" class="headerlink" title="é‰´æƒå¤„ç†å™¨"></a>é‰´æƒå¤„ç†å™¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AuthHandler</span> <span class="keyword">extends</span> <span class="title">Handler</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doHandler</span><span class="params">(Member member)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;root&quot;</span>.equals(member.getRoleName()))&#123;</span><br><span class="line">            System.err.println(<span class="string">&quot;Auth success!&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        System.err.println(<span class="string">&quot;Auth failed!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Memberæˆå‘˜ç±»"><a href="#Memberæˆå‘˜ç±»" class="headerlink" title="Memberæˆå‘˜ç±»"></a>Memberæˆå‘˜ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Member</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String loginName;</span><br><span class="line">    <span class="keyword">private</span> String loginPass;</span><br><span class="line">    <span class="keyword">private</span> String roleName;</span><br><span class="line"></span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="title">Member</span><span class="params">(String loginName, String loginPass)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.loginName = loginName;</span><br><span class="line">            <span class="keyword">this</span>.loginPass = loginPass;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// GETTER SETTER ....</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="DemoTest-æµ‹è¯•ç±»-1"><a href="#DemoTest-æµ‹è¯•ç±»-1" class="headerlink" title="DemoTest æµ‹è¯•ç±»"></a>DemoTest æµ‹è¯•ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoTest</span> </span>&#123;</span><br><span class="line">    <span class="comment">// é¦–å…ˆåˆ›å»ºæ‰€æœ‰çš„å¤„ç†å™¨ï¼Œè®¾ç½®åå®ƒä»¬çš„å…ˆåé¡ºåºï¼Œè®¾ç½®nextèŠ‚ç‚¹ï¼Œå®Œæˆä¹‹ååœ¨æ‰§è¡Œé“¾è·¯æ“ä½œï¼›</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ValidateHandler validateHandler = <span class="keyword">new</span> ValidateHandler();</span><br><span class="line">        LoginHandler loginHandler = <span class="keyword">new</span> LoginHandler();</span><br><span class="line">        validateHandler.next(loginHandler);</span><br><span class="line">        AuthHandler authHandler = <span class="keyword">new</span> AuthHandler();</span><br><span class="line">        loginHandler.next(authHandler);</span><br><span class="line">        Member member = <span class="keyword">new</span> Member(<span class="string">&quot;xiaoming&quot;</span>, <span class="string">&quot;222&quot;</span>);</span><br><span class="line">        validateHandler.doHandler(member);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„å†™æ³•ï¼Œçœ‹èµ·æ¥æœ‰æ²¡æœ‰æ¯”éè´£ä»»é“¾å†™æ³•è¦Bæ ¼é«˜ä¸€äº›ï¼Œä½†æ˜¯ï¼Œè¿™æ ·æ¯æ¬¡åˆ›å»ºèŠ‚ç‚¹å¯¹è±¡ï¼Œå¥½åƒåˆæ˜¾å¾—ä¸å¤ªçˆ½ï¼Œæœ‰äº›è‡ƒè‚¿çš„æ„æ€ï¼è€Œä¸”è°ƒæ•´èŠ‚ç‚¹ä¹‹é—´çš„é¡ºåºæ—¶ä¹Ÿæ¯”è¾ƒå¤æ‚ï¼Œå®¹æ˜“æ”¹é”™ï¼ é‚£æˆ‘ä»¬å°±è¿›ä¸€æ­¥ä¼˜åŒ–ä»¥ä¸‹å§ï¼  </p><h2 id="è´£ä»»é“¾æ¨¡å¼-å»ºé€ è€…æ¨¡å¼-ä¼˜åŒ–"><a href="#è´£ä»»é“¾æ¨¡å¼-å»ºé€ è€…æ¨¡å¼-ä¼˜åŒ–" class="headerlink" title="è´£ä»»é“¾æ¨¡å¼+å»ºé€ è€…æ¨¡å¼ ä¼˜åŒ–"></a>è´£ä»»é“¾æ¨¡å¼+å»ºé€ è€…æ¨¡å¼ ä¼˜åŒ–</h2><h3 id="æ·»åŠ å»ºé€ å™¨builder"><a href="#æ·»åŠ å»ºé€ å™¨builder" class="headerlink" title="æ·»åŠ å»ºé€ å™¨builder"></a>æ·»åŠ å»ºé€ å™¨builder</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Handler</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> Handler next;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">next</span><span class="params">(Handler next)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.next = next;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">doHandler</span><span class="params">(Member member)</span></span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æš´éœ²å»ºé€ å™¨ï¼Œå°†èŠ‚ç‚¹å¯¹è±¡ä»¥é“¾è¡¨çš„å½¢å¼ä¸²èµ·æ¥</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Builder</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> Handler&lt;T&gt; head;</span><br><span class="line">        <span class="keyword">private</span> Handler&lt;T&gt; tail;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Handler&lt;T&gt; <span class="title">build</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.head;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Builder&lt;T&gt; <span class="title">addHandler</span><span class="params">(Handler&lt;T&gt; handler)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.head == <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">this</span>.head = <span class="keyword">this</span>.tail = handler;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">this</span>.tail.next(handler);</span><br><span class="line">            <span class="keyword">this</span>.tail = handler;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Member member = <span class="keyword">new</span> Member(<span class="string">&quot;xiaoming&quot;</span>, <span class="keyword">null</span>);</span><br><span class="line">        Handler.Builder&lt;Handler&gt; builder = <span class="keyword">new</span> Handler.Builder();</span><br><span class="line">        builder.addHandler(<span class="keyword">new</span> ValidateHandler())</span><br><span class="line">                .addHandler(<span class="keyword">new</span> LoginHandler())</span><br><span class="line">                .addHandler(<span class="keyword">new</span> AuthHandler())</span><br><span class="line">                .build()</span><br><span class="line">        .doHandler(member);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡æ·»åŠ å»ºé€ å™¨ä¹‹åï¼Œè´£ä»»é“¾çš„ç»„è£…ä¸è°ƒç”¨æ˜¯ä¸æ˜¯æ˜¾å¾—å¾ˆæ¸…æ™°ï¼Œæ¯ä¸ªèŠ‚ç‚¹å¯¹è±¡å„å¸å…¶èŒï¼Œå¦‚æœéœ€è¦æœ¬èŠ‚ç‚¹æ‰§è¡Œï¼Œåˆ™æ‰§è¡Œï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™äº¤ç»™ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ç»§ç»­ï¼  </p><h2 id="è´£ä»»é“¾é€‚ç”¨çš„åœºæ™¯"><a href="#è´£ä»»é“¾é€‚ç”¨çš„åœºæ™¯" class="headerlink" title="è´£ä»»é“¾é€‚ç”¨çš„åœºæ™¯"></a>è´£ä»»é“¾é€‚ç”¨çš„åœºæ™¯</h2><ul><li><strong>å¤šä¸ªå¯¹è±¡å¤„ç†åŒä¸€ä¸ªè¯·æ±‚ï¼Œä½†å…·ä½“ç”±é‚£ä¸ªå¯¹è±¡å¤„ç†åˆ™åœ¨è¿åŠ¨æ—¶åŠ¨æ€å†³å®š</strong></li><li><strong>åœ¨ä¸æ˜ç¡®ğŸˆ¯æŒ‡å®šæ¥å—è€…çš„æƒ…å†µä¸‹ï¼Œå‘å¤šä¸ªå¯¹è±¡çš„ä¸€ä¸ªæäº¤è¯·æ±‚</strong></li><li><strong>å¯ä»¥åŠ¨æ€æŒ‡å®šä¸€ç»„å¯¹è±¡å¤„ç†è¯·æ±‚</strong></li></ul><blockquote><p>ä¸¾ä¸€äº›å®é™…çš„ä¾‹å­ï¼š<br>javax.servlet.Filterçš„doFilteræ–¹æ³•å°±æ˜¯ä½¿ç”¨çš„è´£ä»»é“¾æ¨¡å¼;</p></blockquote><h3 id="org-springframework-web-filter-CompositeFilter-doFilter"><a href="#org-springframework-web-filter-CompositeFilter-doFilter" class="headerlink" title="org.springframework.web.filter.CompositeFilter#doFilter"></a>org.springframework.web.filter.CompositeFilter#doFilter</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">        (<span class="keyword">new</span> CompositeFilter.VirtualFilterChain(chain, <span class="keyword">this</span>.filters)).doFilter(request, response);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯Springæ¡†æ¶ä¸­çš„ä¸€ä¸ªå®ç°(javax.servlet.Filter),ä¸‹é¢å±•å¼€å…·ä½“çš„ä»£ç ï¼š</p><h3 id="org-springframework-web-filter-CompositeFilter"><a href="#org-springframework-web-filter-CompositeFilter" class="headerlink" title="org.springframework.web.filter.CompositeFilter"></a>org.springframework.web.filter.CompositeFilter</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CompositeFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line">    <span class="comment">//Filter è¿™é‡Œçš„Filterç›¸å½“äºå¤„ç†èŠ‚ç‚¹ï¼Œå­˜æ”¾åœ¨Listä¸­ï¼Œå’Œæˆ‘ä»¬ä¸Šé¢çš„Handlerå­˜æ”¾åœ¨å»ºé€ è€…çš„é“¾å¼ç»“æ„ä¸­ï¼Œå¼‚æ›²åŒå·¥ã€‚</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;? extends Filter&gt; filters = <span class="keyword">new</span> ArrayList();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CompositeFilter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFilters</span><span class="params">(List&lt;? extends Filter&gt; filters)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.filters = <span class="keyword">new</span> ArrayList(filters);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig config)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">        Iterator var2 = <span class="keyword">this</span>.filters.iterator();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(var2.hasNext()) &#123;</span><br><span class="line">            Filter filter = (Filter)var2.next();</span><br><span class="line">            filter.init(config);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">        (<span class="keyword">new</span> CompositeFilter.VirtualFilterChain(chain, <span class="keyword">this</span>.filters)).doFilter(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="keyword">this</span>.filters.size();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(i-- &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            Filter filter = (Filter)<span class="keyword">this</span>.filters.get(i);</span><br><span class="line">            filter.destroy();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">VirtualFilterChain</span> <span class="keyword">implements</span> <span class="title">FilterChain</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">final</span> FilterChain originalChain;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">final</span> List&lt;? extends Filter&gt; additionalFilters;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> currentPosition = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">VirtualFilterChain</span><span class="params">(FilterChain chain, List&lt;? extends Filter&gt; additionalFilters)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.originalChain = chain;</span><br><span class="line">            <span class="keyword">this</span>.additionalFilters = additionalFilters;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest request, ServletResponse response)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.currentPosition == <span class="keyword">this</span>.additionalFilters.size()) &#123;</span><br><span class="line">                <span class="keyword">this</span>.originalChain.doFilter(request, response);</span><br><span class="line">            <span class="comment">// é€šè¿‡currentPositionçš„ç§»åŠ¨ï¼Œè½¬ç§»åˆ°é“¾è·¯ä¸Šçš„ä¸åŒå¤„ç†èŠ‚ç‚¹ï¼Œè¿™å°±æ˜¯è´£ä»»é“¾æ¨¡å¼çš„ä½“ç°</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                ++<span class="keyword">this</span>.currentPosition;</span><br><span class="line">                Filter nextFilter = (Filter)<span class="keyword">this</span>.additionalFilters.get(<span class="keyword">this</span>.currentPosition - <span class="number">1</span>);</span><br><span class="line">                nextFilter.doFilter(request, response, <span class="keyword">this</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åƒä¸Šé¢çš„ä¾‹å­è¿˜æœ‰å¾ˆå¤šå¾ˆå¤šï¼Œæ¯”å¦‚Spring Securityå’ŒShiroä¸­çš„æ‹¦æˆªå™¨å°±æ˜¯å¾ˆå…¸å‹çš„è´£ä»»é“¾æ¨¡å¼ï¼Œè¿˜æœ‰Nettyä¸­çš„ io.netty.channel.ChannelPipelineç­‰ç­‰ï¼Œéƒ½æ˜¯è´£ä»»é“¾æ¨¡å¼ï¼›  </p><h2 id="è´£ä»»é“¾æ¨¡å¼çš„ä¼˜ç‚¹ğŸ‘ğŸ‘ğŸ‘"><a href="#è´£ä»»é“¾æ¨¡å¼çš„ä¼˜ç‚¹ğŸ‘ğŸ‘ğŸ‘" class="headerlink" title="è´£ä»»é“¾æ¨¡å¼çš„ä¼˜ç‚¹ğŸ‘ğŸ‘ğŸ‘"></a>è´£ä»»é“¾æ¨¡å¼çš„ä¼˜ç‚¹ğŸ‘ğŸ‘ğŸ‘</h2><ul><li><strong>å°†è¯·æ±‚ä¸å¤„ç†è§£è€¦</strong></li><li><strong>è¯·æ±‚å¤„ç†è€…ï¼ˆèŠ‚ç‚¹å¯¹è±¡ï¼‰åªéœ€è¦å…³æ³¨è‡ªå·±æ„Ÿå…´è¶£çš„è¯·æ±‚è¿›è¡Œå¤„ç†å³å¯ï¼Œå¯¹äºä¸æ„Ÿå…´è¶£çš„è¯·æ±‚ï¼Œç›´æ¥è½¬å‘ç»™ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å¯¹è±¡</strong></li><li><strong>å…·å¤‡é“¾å¼ä¼ é€’å¤„ç†è¯·æ±‚åŠŸèƒ½ï¼Œè¯·æ±‚å‘é€è€…æ— éœ€çŸ¥æ™“é“¾è·¯ç»“æ„ï¼Œåªéœ€ç­‰å¾…å¤„ç†è¯·æ±‚ç»“æœ</strong></li><li><strong>é“¾è·¯ç»“æ„çµæ´»ï¼Œå¯ä»¥é€šè¿‡æ”¹å˜é“¾è·¯ç»“æœåŠ¨æ€çš„æ–°å¢å’Œåˆ é™¤è´£ä»»</strong></li><li><strong>æ˜“äºæ‰©å±•æ–°çš„è¯·æ±‚èŠ‚ç‚¹ï¼ˆç¬¦åˆå¼€é—­åŸåˆ™ï¼‰</strong></li></ul><h2 id="è´£ä»»é“¾æ¨¡å¼çš„ç¼ºç‚¹"><a href="#è´£ä»»é“¾æ¨¡å¼çš„ç¼ºç‚¹" class="headerlink" title="è´£ä»»é“¾æ¨¡å¼çš„ç¼ºç‚¹"></a>è´£ä»»é“¾æ¨¡å¼çš„ç¼ºç‚¹</h2><ul><li><strong>è´£ä»»é“¾å¤ªé•¿æˆ–è€…å¤„ç†æ—¶é—´å¤ªé•¿ï¼Œå¯¼è‡´ç³»ç»Ÿæ€§èƒ½ä¸‹é™</strong></li><li><strong>å¦‚æœèŠ‚ç‚¹å¯¹è±¡å­˜åœ¨å¾ªç¯â™»ï¸å¼•ç”¨æ—¶ï¼Œä¼šé€ æˆæ­»å¾ªç¯ï¼Œå¯¼è‡´ç³»ç»Ÿå´©æºƒï¼Œæ‰€ä»¥è¿™ä¸ªåœ¨è®¾è®¡çš„æ—¶å€™ä¸€å®šè¦æ³¨æ„ä¸èƒ½å½¢æˆé—­ç¯âš ï¸âš ï¸âš ï¸</strong></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;è´£ä»»é“¾æ¨¡å¼&quot;&gt;&lt;a href=&quot;#è´£ä»»é“¾æ¨¡å¼&quot; class=&quot;headerlink&quot; title=&quot;è´£ä»»é“¾æ¨¡å¼&quot;&gt;&lt;/a&gt;è´£ä»»é“¾æ¨¡å¼&lt;/h1&gt;&lt;p&gt;è´£ä»»é“¾æ¨¡å¼ï¼ˆChain of Responsibility Patterï¼‰æ˜¯å°†é“¾ä¸­çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹çœ‹æˆæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ¯ä¸ªèŠ‚</summary>
      
    
    
    
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="http://example.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹ç¾-è§‚å¯Ÿè€…æ¨¡å¼</title>
    <link href="http://example.com/wiki/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%BE%8E-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/"/>
    <id>http://example.com/wiki/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%BE%8E-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/</id>
    <published>2021-08-07T12:18:40.000Z</published>
    <updated>2021-08-07T12:20:21.869Z</updated>
    
    <content type="html"><![CDATA[<h1 id="è§‚å¯Ÿè€…æ¨¡å¼"><a href="#è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼"></a>è§‚å¯Ÿè€…æ¨¡å¼</h1><h2 id="è§‚å¯Ÿè€…æ¨¡å¼-1"><a href="#è§‚å¯Ÿè€…æ¨¡å¼-1" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼"></a>è§‚å¯Ÿè€…æ¨¡å¼</h2><p>æŒ‡å¤šä¸ªå¯¹è±¡é—´å­˜åœ¨ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½å¾—åˆ°é€šçŸ¥å¹¶è¢«è‡ªåŠ¨æ›´æ–°ã€‚è¿™ç§æ¨¡å¼æœ‰æ—¶åˆç§°ä½œå‘å¸ƒ-è®¢é˜…æ¨¡å¼ã€æ¨¡å‹-è§†å›¾æ¨¡å¼ï¼Œå®ƒæ˜¯å¯¹è±¡è¡Œä¸ºå‹æ¨¡å¼ã€‚</p><p>å±äºè¡Œä¸ºå‹æ¨¡å¼</p><h2 id="ç±»å›¾"><a href="#ç±»å›¾" class="headerlink" title="ç±»å›¾"></a>ç±»å›¾</h2><img src="https://cdn.jsdelivr.net/gh/zabernism/image@main/gao/up-cc1738bd0907f74ecc63783f3282a9a1aec.png" style="zoom: 50%;" />  <h3 id="ISubject"><a href="#ISubject" class="headerlink" title="ISubject"></a>ISubject</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ISubject</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">attach</span><span class="params">(IObserver&lt;E&gt; observer)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">detach</span><span class="params">(IObserver&lt;E&gt; observer)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">notify</span><span class="params">(E event)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ConcreteSubject"><a href="#ConcreteSubject" class="headerlink" title="ConcreteSubject"></a>ConcreteSubject</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcreteSubject</span>&lt;<span class="title">E</span>&gt; <span class="keyword">implements</span> <span class="title">ISubject</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;IObserver&lt;E&gt;&gt; observers = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">attach</span><span class="params">(IObserver&lt;E&gt; observer)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.observers.contains(observer)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        observers.add(observer);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">detach</span><span class="params">(IObserver&lt;E&gt; observer)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.observers.remove(observer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">notify</span><span class="params">(E event)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (IObserver observer : observers) &#123;</span><br><span class="line">            observer.update(event);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="IObserver"><a href="#IObserver" class="headerlink" title="IObserver"></a>IObserver</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span>  <span class="title">IObserver</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line">     <span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(E event)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ConcreteObserver"><a href="#ConcreteObserver" class="headerlink" title="ConcreteObserver"></a>ConcreteObserver</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcreteObserver</span>&lt;<span class="title">E</span>&gt; <span class="keyword">implements</span> <span class="title">IObserver</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(E event)</span> </span>&#123;</span><br><span class="line">        System.err.println(<span class="string">&quot;receive event  &quot;</span> + event);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="DemoTest"><a href="#DemoTest" class="headerlink" title="DemoTest"></a>DemoTest</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ISubject&lt;String&gt; subject = <span class="keyword">new</span> ConcreteSubject&lt;String&gt;();</span><br><span class="line">        subject.attach(<span class="keyword">new</span> ConcreteObserver&lt;String&gt;());</span><br><span class="line">        subject.attach(<span class="keyword">new</span> ConcreteObserver&lt;String&gt;());</span><br><span class="line">        subject.attach(<span class="keyword">new</span> ConcreteObserver&lt;String&gt;());</span><br><span class="line">        subject.notify(<span class="string">&quot;test&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="JDKå®ç°è§‚å¯Ÿè€…æ¨¡å¼"><a href="#JDKå®ç°è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="JDKå®ç°è§‚å¯Ÿè€…æ¨¡å¼"></a>JDKå®ç°è§‚å¯Ÿè€…æ¨¡å¼</h2><blockquote><p>æ¯”å¦‚æœ‰ä¸€ä¸ªåšå®¢ç³»ç»Ÿæä¾›äº†é—®é¢˜ç¤¾åŒºï¼Œä¸€ä¸ªäººæå‡ºé—®é¢˜ï¼Œä¼šæœ‰å…¶ä»–äººæ”¶åˆ°è¿™ä¸ªæ¶ˆæ¯ï¼›æˆ‘ä»¬ä½¿ç”¨JDKæ¥æ¨¡æ‹Ÿä¸€ä¸ªç®€å•çš„åœºæ™¯ï¼›</p></blockquote><img src="https://cdn.jsdelivr.net/gh/zabernism/image@main/gao/up-a268997531d268d3ff748a45b29adc83031.png" style="zoom:67%;" />    <h3 id="Blog-è¢«è§‚å¯Ÿå¯¹è±¡"><a href="#Blog-è¢«è§‚å¯Ÿå¯¹è±¡" class="headerlink" title="Blog è¢«è§‚å¯Ÿå¯¹è±¡"></a>Blog è¢«è§‚å¯Ÿå¯¹è±¡</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Blog</span> <span class="keyword">extends</span> <span class="title">Observable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Blog</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Blog blog = <span class="keyword">new</span> Blog();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name = <span class="string">&quot;IBLi Blog&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Blog <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> blog;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">question</span><span class="params">(Question question)</span> </span>&#123;</span><br><span class="line">        System.out.println(question.getUserName() + <span class="string">&quot; åœ¨ blog æäº¤äº†é—®é¢˜ ï¼š &quot;</span> + question.getContent());</span><br><span class="line">        setChanged();</span><br><span class="line">        notifyObservers(question);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Question</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="keyword">private</span> String content;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Question</span><span class="params">(String userName, String content)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.userName = userName;</span><br><span class="line">        <span class="keyword">this</span>.content = content;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUserName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserName</span><span class="params">(String userName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.userName = userName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getContent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> content;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setContent</span><span class="params">(String content)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.content = content;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Student-å­¦ç”Ÿç±»-è¢«é€šçŸ¥å¯¹è±¡"><a href="#Student-å­¦ç”Ÿç±»-è¢«é€šçŸ¥å¯¹è±¡" class="headerlink" title="Student å­¦ç”Ÿç±» è¢«é€šçŸ¥å¯¹è±¡"></a>Student å­¦ç”Ÿç±» è¢«é€šçŸ¥å¯¹è±¡</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">implements</span> <span class="title">Observer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * This method is called whenever the observed object is changed. An</span></span><br><span class="line"><span class="comment">     * application calls an &lt;tt&gt;Observable&lt;/tt&gt; object&#x27;s</span></span><br><span class="line"><span class="comment">     * &lt;code&gt;notifyObservers&lt;/code&gt; method to have all the object&#x27;s</span></span><br><span class="line"><span class="comment">     * observers notified of the change.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> o   the observable object.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> arg an argument passed to the &lt;code&gt;notifyObservers&lt;/code&gt;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(Observable o, Object arg)</span> </span>&#123;</span><br><span class="line">        Blog blog = (Blog) o;</span><br><span class="line">        Question question = (Question) arg;</span><br><span class="line">        System.out.println(<span class="string">&quot;******************&quot;</span>);</span><br><span class="line">        System.out.println(<span class="keyword">this</span>.name + <span class="string">&quot; çœ‹åˆ°äº†  &quot;</span> + question.getUserName() + <span class="string">&quot; çš„é—®é¢˜ \n&quot;</span> + <span class="string">&quot;é—®é¢˜æ˜¯ï¼š &quot;</span> + question.getContent());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Client-æµ‹è¯•"><a href="#Client-æµ‹è¯•" class="headerlink" title="Client æµ‹è¯•"></a>Client æµ‹è¯•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Blog blog = Blog.getInstance();</span><br><span class="line"></span><br><span class="line">        blog.addObserver(<span class="keyword">new</span> Student(<span class="string">&quot;Tom&quot;</span>));</span><br><span class="line">        blog.addObserver(<span class="keyword">new</span> Student(<span class="string">&quot;John&quot;</span>));</span><br><span class="line">        Question question = <span class="keyword">new</span> Question(<span class="string">&quot;å°æ˜&quot;</span>,<span class="string">&quot;è§‚å¯Ÿè€…æ¨¡å¼æ˜¯ä»€ä¹ˆï¼Ÿ&quot;</span>);</span><br><span class="line">        blog.question(question);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•ç»“æœ"><a href="#æµ‹è¯•ç»“æœ" class="headerlink" title="æµ‹è¯•ç»“æœ"></a>æµ‹è¯•ç»“æœ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">å°æ˜ åœ¨ blog æäº¤äº†é—®é¢˜ ï¼š è§‚å¯Ÿè€…æ¨¡å¼æ˜¯ä»€ä¹ˆï¼Ÿ</span><br><span class="line">******************</span><br><span class="line">Johnçœ‹åˆ°äº†  å°æ˜ çš„é—®é¢˜ </span><br><span class="line">é—®é¢˜æ˜¯ï¼š è§‚å¯Ÿè€…æ¨¡å¼æ˜¯ä»€ä¹ˆï¼Ÿ</span><br><span class="line">******************</span><br><span class="line">Tomçœ‹åˆ°äº†  å°æ˜ çš„é—®é¢˜ </span><br><span class="line">é—®é¢˜æ˜¯ï¼š è§‚å¯Ÿè€…æ¨¡å¼æ˜¯ä»€ä¹ˆï¼Ÿ</span><br></pre></td></tr></table></figure><h2 id="åŸºäºGuavaå®ç°è§‚å¯Ÿè€…æ¨¡å¼"><a href="#åŸºäºGuavaå®ç°è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="åŸºäºGuavaå®ç°è§‚å¯Ÿè€…æ¨¡å¼"></a>åŸºäºGuavaå®ç°è§‚å¯Ÿè€…æ¨¡å¼</h2><h3 id="Student-è¢«è§‚å¯Ÿå¯¹è±¡"><a href="#Student-è¢«è§‚å¯Ÿå¯¹è±¡" class="headerlink" title="Student è¢«è§‚å¯Ÿå¯¹è±¡"></a>Student è¢«è§‚å¯Ÿå¯¹è±¡</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Student&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Subscribe</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Observer</span><span class="params">(Student str)</span> </span>&#123;</span><br><span class="line">        System.err.println(<span class="string">&quot;student invoke method + &quot;</span> + str.toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Teacher-è¢«é€šçŸ¥å¯¹è±¡"><a href="#Teacher-è¢«é€šçŸ¥å¯¹è±¡" class="headerlink" title="Teacher è¢«é€šçŸ¥å¯¹è±¡"></a>Teacher è¢«é€šçŸ¥å¯¹è±¡</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Teacher</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Teacher</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Teacher&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Subscribe</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Observer</span><span class="params">(Teacher str)</span> </span>&#123;</span><br><span class="line">        System.err.println(<span class="string">&quot;teacher invoke method + &quot;</span> + str.toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Client-æµ‹è¯•ç±»"><a href="#Client-æµ‹è¯•ç±»" class="headerlink" title="Client æµ‹è¯•ç±»"></a>Client æµ‹è¯•ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        EventBus eventBus = <span class="keyword">new</span> EventBus();</span><br><span class="line">        Student student = <span class="keyword">new</span> Student(<span class="string">&quot;Ibli&quot;</span>);</span><br><span class="line">        Teacher teacher = <span class="keyword">new</span> Teacher(<span class="string">&quot;laoshi&quot;</span>);</span><br><span class="line">        eventBus.register(student);</span><br><span class="line">        eventBus.register(teacher);</span><br><span class="line">        eventBus.post(<span class="keyword">new</span> Student(<span class="string">&quot;xuesheng&quot;</span>));</span><br><span class="line">        eventBus.post(<span class="keyword">new</span> Teacher(<span class="string">&quot;teacher&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•ç»“æœ-1"><a href="#æµ‹è¯•ç»“æœ-1" class="headerlink" title="æµ‹è¯•ç»“æœ"></a>æµ‹è¯•ç»“æœ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">student invoke method + Student&#123;name=<span class="string">&#x27;xuesheng&#x27;</span>&#125;</span><br><span class="line">teacher invoke method + Teacher&#123;name=<span class="string">&#x27;teacher&#x27;</span>&#125;</span><br></pre></td></tr></table></figure><h2 id="è§‚å¯Ÿè€…æ¨¡å¼ä½¿ç”¨åœºæ™¯"><a href="#è§‚å¯Ÿè€…æ¨¡å¼ä½¿ç”¨åœºæ™¯" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼ä½¿ç”¨åœºæ™¯"></a>è§‚å¯Ÿè€…æ¨¡å¼ä½¿ç”¨åœºæ™¯</h2><p>1ã€å½“ä¸€ä¸ªæŠ½è±¡æ¨¡å‹åŒ…å«ä¸¤ä¸ªæ–¹é¢å†…å®¹ï¼Œå…¶ä¸­ä¸€ä¸ªæ–¹é¢ä¾èµ–å¦ä¸€ä¸ªæ–¹é¢<br>2ã€å…¶ä»–ä¸€ä¸ªæˆ–å¤šä¸ªå¯¹è±¡çš„å˜åŒ–ä¾èµ–å¦ä¸€ä¸ªå¯¹è±¡çš„å˜åŒ–<br>3ã€å®ç°ç±»ä¼¼å¹¿æ’­æœºåˆ¶çš„åŠŸèƒ½ï¼Œæ— éœ€çŸ¥é“å…·ä½“æ”¶å¬è€…ï¼Œåªéœ€è¦å¹¿æ’­ã€‚ç³»ç»Ÿä¸­æ„Ÿå…´è¶£çš„å¯¹è±¡ä¼šè‡ªåŠ¨æ¥å£è¯¥å¹¿æ’­<br>4ã€å¤šå±‚çº§åµŒå¥—æœºåˆ¶ï¼Œå½¢æˆä¸€ç§é“¾å¼å‡ºå‘æœºåˆ¶ï¼Œæ˜¯çš„æ—¶é—´å…·å¤‡è·¨åŸŸï¼ˆè·¨è¶Šä¸¤ç§è§‚å¯Ÿè€…ç±»å‹ï¼‰é€šçŸ¥  </p><h2 id="è§‚å¯Ÿè€…æ¨¡å¼ä¼˜ç‚¹âœ…"><a href="#è§‚å¯Ÿè€…æ¨¡å¼ä¼˜ç‚¹âœ…" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼ä¼˜ç‚¹âœ…"></a>è§‚å¯Ÿè€…æ¨¡å¼ä¼˜ç‚¹âœ…</h2><p>1ã€é™ä½äº†ç›®æ ‡ä¸è§‚å¯Ÿè€…ä¹‹é—´çš„è€¦åˆå…³ç³»ï¼Œä¸¤è€…ä¹‹é—´æ˜¯æŠ½è±¡è€¦åˆå…³ç³»ã€‚ç¬¦åˆä¾èµ–å€’ç½®åŸåˆ™ã€‚<br>2ã€ç›®æ ‡ä¸è§‚å¯Ÿè€…ä¹‹é—´å»ºç«‹äº†ä¸€å¥—è§¦å‘æœºåˆ¶ã€‚   </p><h2 id="è§‚å¯Ÿè€…æ¨¡å¼ç¼ºç‚¹"><a href="#è§‚å¯Ÿè€…æ¨¡å¼ç¼ºç‚¹" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼ç¼ºç‚¹"></a>è§‚å¯Ÿè€…æ¨¡å¼ç¼ºç‚¹</h2><p>ç›®æ ‡ä¸è§‚å¯Ÿè€…ä¹‹é—´çš„ä¾èµ–å…³ç³»å¹¶æ²¡æœ‰å®Œå…¨è§£é™¤ï¼Œè€Œä¸”æœ‰å¯èƒ½å‡ºç°å¾ªç¯å¼•ç”¨ã€‚<br>å½“è§‚å¯Ÿè€…å¯¹è±¡å¾ˆå¤šæ—¶ï¼Œé€šçŸ¥çš„å‘å¸ƒä¼šèŠ±è´¹å¾ˆå¤šæ—¶é—´ï¼Œå½±å“ç¨‹åºçš„æ•ˆç‡ã€‚  </p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;è§‚å¯Ÿè€…æ¨¡å¼&quot;&gt;&lt;a href=&quot;#è§‚å¯Ÿè€…æ¨¡å¼&quot; class=&quot;headerlink&quot; title=&quot;è§‚å¯Ÿè€…æ¨¡å¼&quot;&gt;&lt;/a&gt;è§‚å¯Ÿè€…æ¨¡å¼&lt;/h1&gt;&lt;h2 id=&quot;è§‚å¯Ÿè€…æ¨¡å¼-1&quot;&gt;&lt;a href=&quot;#è§‚å¯Ÿè€…æ¨¡å¼-1&quot; class=&quot;headerlink&quot; title=</summary>
      
    
    
    
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="http://example.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹ç¾-è£…é¥°å™¨æ¨¡å¼</title>
    <link href="http://example.com/wiki/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%BE%8E-%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F/"/>
    <id>http://example.com/wiki/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%BE%8E-%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F/</id>
    <published>2021-08-07T12:15:15.000Z</published>
    <updated>2021-08-07T12:17:52.075Z</updated>
    
    <content type="html"><![CDATA[<h1 id="è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator-Patternï¼‰"><a href="#è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator-Patternï¼‰" class="headerlink" title="è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator Patternï¼‰"></a>è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator Patternï¼‰</h1><p>è£…é¥°å™¨æ¨¡å¼ä¹Ÿå«åšåŒ…è£…æ¨¡å¼ï¼Œæ˜¯æŒ‡åœ¨ä¸æ”¹å˜åŸæœ‰å¯¹è±¡çš„åŸºç¡€ä¸Šï¼Œå°†åŠŸèƒ½é™„åŠ åˆ°å¯¹è±¡ä¸Šï¼Œæä¾›æ¯”ç»§æ‰¿æ›´æœ‰å¼¹æ€§çš„æ›¿ä»£æ–¹æ¡ˆï¼ˆæ‰©å±•åŸæœ‰å¯¹è±¡çš„åŠŸèƒ½ï¼‰ï¼Œå¼ºè°ƒä¸€ç‚¹æ˜¯åŸºäºå·²æœ‰å¯¹è±¡çš„åŠŸèƒ½å¢å¼ºï¼›è£…é¥°å™¨æ¨¡å¼å±äºç»“æ„æ€§æ¨¡å¼;</p><h2 id="è£…é¥°å™¨ç±»å›¾"><a href="#è£…é¥°å™¨ç±»å›¾" class="headerlink" title="è£…é¥°å™¨ç±»å›¾"></a>è£…é¥°å™¨ç±»å›¾</h2><img src="https://cdn.jsdelivr.net/gh/zabernism/image@main/gao/up-b2f04bf843bb9c3e787016e216e5fbd91cf.png" style="zoom:67%;" />  <h3 id="Component-æŠ½è±¡æ„ä»¶"><a href="#Component-æŠ½è±¡æ„ä»¶" class="headerlink" title="Component æŠ½è±¡æ„ä»¶"></a>Component æŠ½è±¡æ„ä»¶</h3><blockquote><p>å®šä¹‰ä¸€ä¸ªæŠ½è±¡æ¥å£ä»¥è§„èŒƒå‡†å¤‡æ¥å—é™„åŠ è´£ä»»çš„å¯¹è±¡</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">operation</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ConcreteComponent-å…·ä½“çš„æ„ä»¶"><a href="#ConcreteComponent-å…·ä½“çš„æ„ä»¶" class="headerlink" title="ConcreteComponent å…·ä½“çš„æ„ä»¶"></a>ConcreteComponent å…·ä½“çš„æ„ä»¶</h3><blockquote><p>å®ç°æŠ½è±¡æ„ä»¶,é€šè¿‡è£…é¥°è§’è‰²ä¸ºå…¶æ·»åŠ ä¸€äº›èŒè´£</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcreteComponent</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">operation</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.err.println(<span class="string">&quot;Do some biz event!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Decorator-æŠ½è±¡è£…é¥°è§’è‰²"><a href="#Decorator-æŠ½è±¡è£…é¥°è§’è‰²" class="headerlink" title="Decorator æŠ½è±¡è£…é¥°è§’è‰²"></a>Decorator æŠ½è±¡è£…é¥°è§’è‰²</h3><blockquote><p>ç»§æ‰¿æŠ½è±¡æ„ä»¶,å¹¶åŒ…å«å…·ä½“æ„ä»¶çš„å®ä¾‹,å¯ä»¥é€šè¿‡å…¶å­ç±»æ‰©å±•å…·ä½“æ„ä»¶çš„åŠŸèƒ½</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Decorator</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æŒæœ‰ç»„ä»¶å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">protected</span> Component component;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Decorator</span><span class="params">(Component component)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.component = component;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">operation</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//è½¬å‘è¯·æ±‚ç»™ç»„ä»¶å¯¹è±¡,å¯ä»¥åœ¨è½¬å‘å‰åæ‰§è¡Œä¸€äº›é™„åŠ åŠ¨ä½œ</span></span><br><span class="line">        component.operation();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ConcreteDecoratorA"><a href="#ConcreteDecoratorA" class="headerlink" title="ConcreteDecoratorA"></a>ConcreteDecoratorA</h3><blockquote><p>å®ç°æŠ½è±¡è£…é¥°çš„ç›¸å…³æ–¹æ³•,å¹¶ç»™å…·ä½“æ„ä»¶å¯¹è±¡æ·»åŠ é™„åŠ çš„è´£ä»»</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcreteDecoratorA</span> <span class="keyword">extends</span> <span class="title">Decorator</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ConcreteDecoratorA</span><span class="params">(Component component)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(component);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">operationFirst</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.err.println(<span class="string">&quot;ConcreteDecoratorA first!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">operationLast</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.err.println(<span class="string">&quot;ConcreteDecoratorA last!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">operation</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        operationFirst();</span><br><span class="line">        <span class="keyword">super</span>.operation();</span><br><span class="line">        operationLast();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Client-æµ‹è¯•ç±»"><a href="#Client-æµ‹è¯•ç±»" class="headerlink" title="Client æµ‹è¯•ç±»"></a>Client æµ‹è¯•ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Component component = <span class="keyword">new</span> ConcreteComponent();</span><br><span class="line">        Decorator decoratorA = <span class="keyword">new</span> ConcreteDecoratorA(component);</span><br><span class="line">        decoratorA.operation();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸¾ä¸ªä¾‹å­"><a href="#ä¸¾ä¸ªä¾‹å­" class="headerlink" title="ä¸¾ä¸ªä¾‹å­"></a>ä¸¾ä¸ªä¾‹å­</h2><p>ä¹°ç…é¥¼çš„æ—¶å€™,æˆ‘ä»¬å¯ä»¥ç›´æ¥ä¹°ä¸€ä¸ªç…é¥¼,ä½†æœ‰çš„æ—¶å€™è§‰å¾—å‘³é“å•ä¸€æˆ–è€…åƒä¸é¥±,æˆ‘ä»¬å¯ä»¥åŠ ä¸€äº›ä¸œè¥¿,æ¯”å¦‚çƒ¤è‚ ,é¸¡è›‹,é¸¡æ’ç­‰ç­‰;  </p><p><strong>å…ˆçœ‹çœ‹éè£…é¥°å™¨æ¨¡å¼çš„å†™æ³•</strong>  </p><h3 id="BatterCake"><a href="#BatterCake" class="headerlink" title="BatterCake"></a>BatterCake</h3><blockquote><p>å°±ä¸€ä¸ªæ™®é€šçš„ç…é¥¼ç±»ï¼›  </p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BatterCake</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> String <span class="title">getMsg</span><span class="params">()</span></span>&#123;<span class="keyword">return</span> <span class="string">&quot;ç…é¥¼&quot;</span>;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getPrice</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="BatterCakeWithEgg"><a href="#BatterCakeWithEgg" class="headerlink" title="BatterCakeWithEgg"></a>BatterCakeWithEgg</h3><blockquote><p>æ·»åŠ ä¸€ä¸ªé¸¡è›‹çš„ç…é¥¼ï¼›  </p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BatterCakeWithEgg</span> <span class="keyword">extends</span> <span class="title">BatterCake</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> String <span class="title">getMsg</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.getMsg() + <span class="string">&quot; åŠ ä¸€ä¸ªé¸¡è›‹&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getPrice</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.getPrice() + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="BatterCakeWithEggAndSauage"><a href="#BatterCakeWithEggAndSauage" class="headerlink" title="BatterCakeWithEggAndSauage"></a>BatterCakeWithEggAndSauage</h3><blockquote><p>åŠ ä¸€ä¸ªé¸¡è›‹ å†åŠ ä¸€è·Ÿçƒ¤è‚ çš„ç…é¥¼ï¼›  </p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BatterCakeWithEggAndSauage</span> <span class="keyword">extends</span> <span class="title">BatterCakeWithEgg</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> String <span class="title">getMsg</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.getMsg() + <span class="string">&quot; åŠ ä¸€ä¸ªçƒ¤è‚ &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getPrice</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.getPrice() + <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Client-å®¢æˆ·"><a href="#Client-å®¢æˆ·" class="headerlink" title="Client å®¢æˆ·"></a>Client å®¢æˆ·</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        BatterCake batterCake = <span class="keyword">new</span> BatterCake();</span><br><span class="line">        System.err.println(batterCake.getMsg() + <span class="string">&quot;ä»·æ ¼ &quot;</span> + batterCake.getPrice());</span><br><span class="line"></span><br><span class="line">        BatterCakeWithEgg batterCakeWithEgg = <span class="keyword">new</span> BatterCakeWithEgg();</span><br><span class="line">        System.err.println(batterCakeWithEgg.getMsg() + <span class="string">&quot;ä»·æ ¼ &quot;</span> + batterCakeWithEgg.getPrice());</span><br><span class="line"></span><br><span class="line">        BatterCakeWithEggAndSauage batterCakeWithEggAndSauage = <span class="keyword">new</span> BatterCakeWithEggAndSauage();</span><br><span class="line">        System.err.println(batterCakeWithEggAndSauage.getMsg() + <span class="string">&quot;ä»·æ ¼ &quot;</span> + batterCakeWithEggAndSauage.getPrice());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çœ‹åˆ°è¿™ç§å†™æ³•ï¼Œåº”è¯¥èƒ½çœ‹å‡ºå®ƒçš„å¼Šç«¯äº†ï¼Œå°±æ˜¯å®ç°å¾ˆç®€å•ï¼Œé€‚åˆäºéœ€æ±‚å›ºå®šçš„ä¸šåŠ¡å’Œå¤šæ ·æ€§æ¯”è¾ƒç®€å•çš„ä¸šåŠ¡ï¼›ä¸€æ—¦å®¢æˆ·éœ€è¦ä¸€ä¸ªé¸¡è›‹ï¼Œä¸¤æ ¹çƒ¤è‚ ï¼Œé‚£æ˜¯ä¸æ˜¯è¿˜è¦åœ¨BatterCakeWithEggAndSauageç±»ä¸Šç»§ç»­æ‰©å±•å‘¢ï¼Œè¿™å…¶å®æ˜¯å¾ˆlowçš„è®¾è®¡ï¼›è€Œä¸”éå¸¸ä¸çµæ´»ï¼Œæ¯”å¦‚å®¢æˆ·åªéœ€è¦ä¸€è·Ÿçƒ¤è‚ çš„ç…é¥¼ã€‚è¿™ä¸ªæ—¶å€™æ€ä¹ˆè§£å†³å‘¢ï¼›</p><p><strong>ä½¿ç”¨è£…é¥°å™¨æ¨¡å¼ä¼˜åŒ–</strong>  </p><h3 id="BatterCake-æŠ½è±¡ç»„ä»¶"><a href="#BatterCake-æŠ½è±¡ç»„ä»¶" class="headerlink" title="BatterCake æŠ½è±¡ç»„ä»¶"></a>BatterCake æŠ½è±¡ç»„ä»¶</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">BatterCake</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> String <span class="title">getMsg</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">int</span> <span class="title">getPrice</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åŸºç¡€ç±»-å®ç°æŠ½è±¡æ¥å£"><a href="#åŸºç¡€ç±»-å®ç°æŠ½è±¡æ¥å£" class="headerlink" title="åŸºç¡€ç±» å®ç°æŠ½è±¡æ¥å£"></a>åŸºç¡€ç±» å®ç°æŠ½è±¡æ¥å£</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseBatterCake</span> <span class="keyword">extends</span> <span class="title">BatterCake</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> String <span class="title">getMsg</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ç…é¥¼&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">int</span> <span class="title">getPrice</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">5</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="BatterCakeDecorator-è£…é¥°å™¨"><a href="#BatterCakeDecorator-è£…é¥°å™¨" class="headerlink" title="BatterCakeDecorator è£…é¥°å™¨"></a>BatterCakeDecorator è£…é¥°å™¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BatterCakeDecorator</span> <span class="keyword">extends</span> <span class="title">BatterCake</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> BatterCake batterCake;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BatterCakeDecorator</span><span class="params">(BatterCake batterCake)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.batterCake = batterCake;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> String <span class="title">getMsg</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.batterCake.getMsg();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">int</span> <span class="title">getPrice</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.batterCake.getPrice();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="EggDecorator-å…·ä½“çš„è£…é¥°å™¨å¯¹è±¡"><a href="#EggDecorator-å…·ä½“çš„è£…é¥°å™¨å¯¹è±¡" class="headerlink" title="EggDecorator å…·ä½“çš„è£…é¥°å™¨å¯¹è±¡"></a>EggDecorator å…·ä½“çš„è£…é¥°å™¨å¯¹è±¡</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EggDecorator</span> <span class="keyword">extends</span> <span class="title">BatterCakeDecorator</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">EggDecorator</span><span class="params">(BatterCake batterCake)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">super</span>(batterCake);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> String <span class="title">getMsg</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.getMsg() + <span class="string">&quot; åŠ ä¸€ä¸ªé¸¡è›‹&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">int</span> <span class="title">getPrice</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.getPrice() + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="SauageDecorator-å…·ä½“çš„è£…é¥°å¯¹è±¡"><a href="#SauageDecorator-å…·ä½“çš„è£…é¥°å¯¹è±¡" class="headerlink" title="SauageDecorator å…·ä½“çš„è£…é¥°å¯¹è±¡"></a>SauageDecorator å…·ä½“çš„è£…é¥°å¯¹è±¡</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SauageDecorator</span> <span class="keyword">extends</span> <span class="title">BatterCakeDecorator</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SauageDecorator</span><span class="params">(BatterCake batterCake)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">super</span>(batterCake);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> String <span class="title">getMsg</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.getMsg() + <span class="string">&quot; åŠ ä¸€ä¸ªçƒ¤è‚ &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">int</span> <span class="title">getPrice</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.getPrice() + <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å®¢æˆ·-æµ‹è¯•ç±»"><a href="#å®¢æˆ·-æµ‹è¯•ç±»" class="headerlink" title="å®¢æˆ· æµ‹è¯•ç±»"></a>å®¢æˆ· æµ‹è¯•ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        BatterCake batterCake = <span class="keyword">new</span> BaseBatterCake();</span><br><span class="line">        System.err.println(batterCake.getMsg() + <span class="string">&quot;æ€»è®¡ : &quot;</span> + batterCake.getPrice());</span><br><span class="line"></span><br><span class="line">        batterCake = <span class="keyword">new</span> EggDecorator(batterCake);</span><br><span class="line">        System.err.println(batterCake.getMsg() + <span class="string">&quot;æ€»è®¡ : &quot;</span> + batterCake.getPrice());</span><br><span class="line"></span><br><span class="line">        batterCake = <span class="keyword">new</span> SauageDecorator(batterCake);</span><br><span class="line">        System.err.println(batterCake.getMsg() + <span class="string">&quot;æ€»è®¡ : &quot;</span> + batterCake.getPrice());</span><br><span class="line"></span><br><span class="line">        batterCake = <span class="keyword">new</span> EggDecorator(batterCake);</span><br><span class="line">        System.err.println(batterCake.getMsg() + <span class="string">&quot;æ€»è®¡ : &quot;</span> + batterCake.getPrice());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™ç§å†™æ³•æ˜¯è¿ç”¨äº†è£…é¥°å™¨æ¨¡å¼çš„å†™æ³•ï¼Œè¿™æ ·ä¼šå¢åŠ ç¨‹åºçš„çµæ´»æ€§ï¼ŒEggDecoratorè¿”å›ä¸€ä¸ªBatterCakeï¼Œåœ¨EggDecoratorä¸­çš„getMsgæ–¹æ³•å’ŒgetPriceæ–¹æ³•ä¸­æ·»åŠ å…³äºEggçš„é€»è¾‘æ¥å®ç°å¯¹BatterCakeçš„å¢å¼ºï¼ŒåŒç†SauageDecoratorä¹Ÿæ˜¯ï¼Œåœ¨å®ƒè‡ªå·±çš„getMsgæ–¹æ³•å’ŒgetPriceæ–¹æ³•ä¸­æ·»åŠ è‡ªå·±çš„é€»è¾‘ï¼Œå½“ç„¶ï¼Œéƒ½æ˜¯åŸºäºè°ƒç”¨superæ–¹æ³•çš„åŸºç¡€ä¸Šæ·»åŠ è‡ªå·±çš„é€»è¾‘ï¼ŒåŒæ—¶å…·ä½“çš„è£…é¥°å¯¹è±¡è¿”å›çˆ¶ç±»ç±»å‹çš„å¯¹è±¡ï¼›  </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">int</span> <span class="title">getPrice</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.getPrice() + <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><strong>è¿™é‡Œè¿›è¡Œä¸€ä¸‹æ€»ç»“ï¼š</strong><br>1ã€å…·ä½“è£…é¥°å¯¹è±¡(EggDecorator)ä¸€å®šæ˜¯ç»§æ‰¿è‡ªè£…é¥°ç»„ä»¶(BatterCakeDecorator)<br>2ã€ä¸ºäº†å®ç°å¯¹è±¡å¢å¼ºï¼Œå­ç±»ä¸­çš„æ–¹æ³•ä¸€å®šæ˜¯åŸºäºsuperæ–¹æ³•çš„åŸºç¡€ä¸Šï¼Œæ·»åŠ è‡ªå·±çš„é€»è¾‘çš„  </p><h2 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a>ä½¿ç”¨åœºæ™¯</h2><ul><li>ç”¨äºæ‰©å±•ä¸€ä¸ªç±»çš„åŠŸèƒ½æˆ–ç»™ä¸€ä¸ªç±»æ·»åŠ é™„åŠ èŒè´£</li><li>åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ åŠŸèƒ½,è¿™äº›åŠŸèƒ½å¯ä»¥åœ¨åŠ¨æ€çš„æ’¤é”€</li></ul><h2 id="å®é™…åº”ç”¨"><a href="#å®é™…åº”ç”¨" class="headerlink" title="å®é™…åº”ç”¨"></a>å®é™…åº”ç”¨</h2><p>Spring TransactionAwareCacheManager<br>JDK FileInputStream   </p><h2 id="è£…é¥°å™¨æ¨¡å¼ä¸ä»£ç†æ¨¡å¼"><a href="#è£…é¥°å™¨æ¨¡å¼ä¸ä»£ç†æ¨¡å¼" class="headerlink" title="è£…é¥°å™¨æ¨¡å¼ä¸ä»£ç†æ¨¡å¼"></a>è£…é¥°å™¨æ¨¡å¼ä¸ä»£ç†æ¨¡å¼</h2><ul><li>è£…é¥°å™¨æ¨¡å¼æ˜¯ä¸€ç§ç‰¹æ®Šçš„ä»£ç†æ¨¡å¼  </li><li>è£…é¥°å™¨æ¨¡å¼å¼ºè°ƒè‡ªèº«çš„åŠŸèƒ½æ‰©å±•,é€æ˜çš„,åŠ¨æ€çš„æ‰©å±•ä¸å¢å¼º  <blockquote><p>é€æ˜æŒ‡çš„æ˜¯åŠŸèƒ½çš„æ‰©å±•ç”±å®¢æˆ·ç«¯æ§åˆ¶  </p></blockquote></li><li>ä»£ç†æ¨¡å¼å¼ºè°ƒä»£ç†è¿‡ç¨‹çš„æ§åˆ¶  </li></ul><h2 id="è£…é¥°å™¨æ¨¡å¼çš„ä¼˜ç‚¹"><a href="#è£…é¥°å™¨æ¨¡å¼çš„ä¼˜ç‚¹" class="headerlink" title="è£…é¥°å™¨æ¨¡å¼çš„ä¼˜ç‚¹"></a>è£…é¥°å™¨æ¨¡å¼çš„ä¼˜ç‚¹</h2><p>1ã€è£…é¥°å™¨æ˜¯ç»§æ‰¿çš„æœ‰åŠ›è¡¥å……ï¼Œæ¯”ç»§æ‰¿çµæ´»ï¼Œåœ¨ä¸æ”¹å˜åŸæœ‰å¯¹è±¡çš„æƒ…å†µä¸‹ï¼ŒåŠ¨æ€çš„ç»™ä¸€ä¸ªå¯¹è±¡æ‰©å±•åŠŸèƒ½ï¼Œå³æ’å³ç”¨<br>2ã€é€šè¿‡ä½¿ç”¨ä¸ç”¨è£…é¥°ç±»åŠè¿™äº›è£…é¥°ç±»çš„æ’åˆ—ç»„åˆï¼Œå¯ä»¥å®ç°ä¸åŒæ•ˆæœ<br>3ã€è£…é¥°å™¨æ¨¡å¼å®Œå…¨éµå®ˆå¼€é—­åŸåˆ™  </p><h2 id="è£…é¥°å™¨æ¨¡å¼çš„ç¼ºç‚¹"><a href="#è£…é¥°å™¨æ¨¡å¼çš„ç¼ºç‚¹" class="headerlink" title="è£…é¥°å™¨æ¨¡å¼çš„ç¼ºç‚¹"></a>è£…é¥°å™¨æ¨¡å¼çš„ç¼ºç‚¹</h2><p>1ã€å¢åŠ äº†ä¸€äº›å­ç±»ï¼Œç³»ç»Ÿä»£ç ä¼šæ˜¾å¾—è‡ƒè‚¿ã€‚<br>2ã€ç»„åˆæ–¹å¼å®¹æ˜“å‡ºé”™ï¼Œä»£ç å¯è¯»æ€§æ¯”è¾ƒå·®ã€‚   </p><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><p>1ã€<a href="https://juejin.cn/post/6844903603178569741">åŒ…è£…æ¨¡å¼å°±æ˜¯è¿™ä¹ˆç®€å•å•¦</a><br>2ã€<a href="http://c.biancheng.net/view/1366.html">è£…é¥°å™¨æ¨¡å¼ï¼ˆè£…é¥°è®¾è®¡æ¨¡å¼ï¼‰è¯¦è§£</a><br>3ã€<a href="https://www.cnblogs.com/losedMemory/p/6246029.html">javaä¸­çš„è£…é¥°è®¾è®¡æ¨¡å¼ï¼Œæµ…è°ˆä¸ç»§æ‰¿ä¹‹é—´çš„åŒºåˆ«</a><br>4ã€<a href="https://blog.csdn.net/lsgqjh/article/details/63254876">JDK IOä¸­çš„é€‚é…å™¨æ¨¡å¼å’Œè£…é¥°è€…æ¨¡å¼</a>  </p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator-Patternï¼‰&quot;&gt;&lt;a href=&quot;#è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator-Patternï¼‰&quot; class=&quot;headerlink&quot; title=&quot;è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator Patternï¼‰&quot;&gt;&lt;/a&gt;è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorato</summary>
      
    
    
    
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="http://example.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹ç¾-ç­–ç•¥æ¨¡å¼</title>
    <link href="http://example.com/wiki/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%BE%8E-%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/"/>
    <id>http://example.com/wiki/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%BE%8E-%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/</id>
    <published>2021-08-07T12:09:10.000Z</published>
    <updated>2021-08-07T12:14:15.107Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ç­–ç•¥æ¨¡å¼"><a href="#ç­–ç•¥æ¨¡å¼" class="headerlink" title="ç­–ç•¥æ¨¡å¼"></a>ç­–ç•¥æ¨¡å¼</h1><p><strong>ç­–ç•¥æ¨¡å¼</strong>ï¼ˆStrategy Patternï¼‰ä¹Ÿå«åšæ”¿ç­–æ¨¡å¼ï¼ˆPolicy Patternï¼‰,å®ƒæ˜¯å°†å®šä¹‰çš„ç®—æ³•å°è£…èµ·æ¥ï¼Œ<br>è®©å®ƒä»¬ä¹‹é—´å¯ä»¥ç›¸äº’æ›¿æ¢ï¼Œä»è€Œè®©ç®—æ³•çš„å˜åŒ–ä¸å½±å“åˆ°ä½¿ç”¨ç®—æ³•çš„ç”¨æˆ·ï¼›å®ƒå±äºè¡Œä¸ºå‹æ¨¡å¼ã€‚å¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šè§„é¿<br>if-else/switchç­‰<br>ç­–ç•¥æ¨¡å¼ä½¿ç”¨çš„é¢å‘å¯¹è±¡çš„ç»§æ‰¿å’Œå¤šæ€æœºåˆ¶ï¼Œä»è€Œå®ç°åŒä¸€è¡Œä¸ºåœ¨ä¸åŒçš„åœºæ™¯ä¸‹å…·å¤‡ä¸åŒçš„å®ç°ï¼›  </p><h2 id="åº”ç”¨"><a href="#åº”ç”¨" class="headerlink" title="åº”ç”¨"></a>åº”ç”¨</h2><p>ç­–ç•¥æ¨¡å¼åœ¨å®é™…åº”ç”¨åœºæ™¯ä¸­æœ‰å¾ˆå¤šçš„åº”ç”¨ï¼Œå‡¡æ˜¯è®¾è®¡åˆ°é€‰æ‹©çš„åœºæ™¯åŸºæœ¬éƒ½å¯ä»¥ä½¿ç”¨ç­–ç•¥æ¨¡å¼æ¥å®ç°ï¼›æ¯”å¦‚è´­ä¹°ä¸€ä¸ªå•†å“é€‰æ‹©æ”¯ä»˜æ–¹å¼ï¼Œæ˜¯é€‰æ‹©é“¶è¡Œå¡è¿˜æ˜¯å¿«æ·æ”¯ä»˜ï¼Œå¾®ä¿¡ï¼Ÿæ”¯ä»˜å®ç­‰ï¼›  </p><ul><li>å‡å¦‚ä¸€ä¸ªç³»ç»Ÿä¸­æœ‰å¾ˆå¤šç±»ï¼Œè€Œå®ƒä»¬çš„åŒºåˆ«ä»…ä»…åœ¨ä¸å®ƒä»¬çš„è¡Œä¸ºä¸åŒï¼›</li><li>ä¸€ä¸ªç³»ç»Ÿéœ€è¦åŠ¨æ€çš„ä»å‡ ç§ç®—æ³•ä¸­é€‰æ‹©ä¸€ç§ï¼›ä¸€äº›å¹³å°å‹äº§å“ä¸­è‚¯å®šä¼šç”¨åˆ°çš„</li><li>éœ€è¦å±è”½ç®—æ³•è§„åˆ™ï¼›</li></ul><h2 id="ç­–ç•¥æ¨¡å¼ç±»å›¾"><a href="#ç­–ç•¥æ¨¡å¼ç±»å›¾" class="headerlink" title="ç­–ç•¥æ¨¡å¼ç±»å›¾"></a>ç­–ç•¥æ¨¡å¼ç±»å›¾</h2><img src="https://cdn.jsdelivr.net/gh/zabernism/image@main/gao/up-bcd8e7bee16acac3b254b110a2c2f3796b8.png" style="zoom:50%;" />   é€šè¿‡ä¸Šå›¾å¯ä»¥çœ‹åˆ°ï¼Œç­–ç•¥æ¨¡å¼ä¸»è¦åŒ…å«3ä¸ªè§’è‰²ï¼š  <ul><li><strong>ä¸Šä¸‹æ–‡è§’è‰²ï¼ˆContextï¼‰</strong>: ç”¨æ¥æ“ä½œç­–ç•¥çš„ä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œå±è”½é«˜å±‚æ¨¡å—ï¼ˆå®¢æˆ·ç«¯ï¼‰å¯¹ç­–ç•¥/ç®—æ³•çš„ç›´æ¥è®¿é—®ï¼Œå°è£…å¯èƒ½<br>å­˜åœ¨çš„å˜åŒ–</li><li><strong>æŠ½è±¡ç­–ç•¥è§’è‰²ï¼ˆIStrategyï¼‰</strong>: è§„å®šç­–ç•¥æˆ–ç®—æ³•çš„è¡Œä¸º    </li><li><strong>å…·ä½“çš„ç­–ç•¥è§’è‰²ï¼ˆConcreteStrategyï¼‰</strong>: å…·ä½“çš„ç­–ç•¥é€»è¾‘æˆ–ç®—æ³•  </li></ul><p>è¿™é‡Œçš„ä¸Šä¸‹æ–‡è§’è‰²ä»…ä»…æ˜¯ä¸€ä¸ªç§°è°“ï¼Œå¤§å®¶åªè¦çŸ¥é“ä»–åœ¨ç­–ç•¥æ¨¡å¼ä¸­çš„ä½œç”¨å°±å¯ä»¥äº†ï¼Œå°±æ˜¯æ¡¥æ¥å®¢æˆ·ç«¯å’Œç­–ç•¥/æ–¹æ³•çš„ä½œç”¨ï¼›  </p><h2 id="ä¸¾ä¸ªä¾‹å­"><a href="#ä¸¾ä¸ªä¾‹å­" class="headerlink" title="ä¸¾ä¸ªä¾‹å­"></a>ä¸¾ä¸ªä¾‹å­</h2><blockquote><p>èƒŒæ™¯ï¼š ç”µå•†åœºæ™¯ä¸‹ï¼Œç”¨æˆ·è´­ä¹°ä¸€ä¸ªå•†å“ï¼Œæ”¯ä»˜æ—¶å¯ä»¥é€‰æ‹©ä¸€ç§ä¼˜æƒ ç­–ç•¥ï¼Œå¦‚æœæ²¡æœ‰ä¼˜æƒ ï¼Œåˆ™ä½¿ç”¨é»˜è®¤çš„ç­–ç•¥ï¼Œå³æ— ä»»ä½•ä¼˜æƒ ï¼›  </p></blockquote><img src="https://cdn.jsdelivr.net/gh/zabernism/image@main/gao/up-1f96ebedc89c21db9af9a2ae899918d9fb8.png" style="zoom: 33%;" />  <p>1ã€ä¸Šé¢ä¸¤å±‚æ˜¯å®šä¹‰çš„ä¸€ä¸ªè¥é”€ç­–ç•¥çš„æ¥å£ï¼Œç„¶åæä¾›ä¸åŒçš„ç­–ç•¥æ¥å®ç°ï¼›<br>2ã€ç¬¬ä¸‰å±‚æ˜¯ç­–ç•¥ç”Ÿæˆæ‰€ä½¿ç”¨çš„å·¥å‚å’Œå®¢æˆ·ç«¯è°ƒç”¨ç­–ç•¥ä¸­é—´çš„ä¸Šä¸‹æ–‡ï¼Œæ‰¿æ¥ä¸Šä¸‹ï¼Œæ¡¥æ¥æ¨¡å¼ï¼›<br>3ã€æœ€ä¸‹å±‚çš„Demoå¯ä»¥çœ‹æˆæ˜¯å®¢æˆ·ç«¯ï¼›  </p><h3 id="å®šä¹‰ç­–ç•¥æ¥å£-åˆ¶å®šæ ‡å‡†æ–¹æ³•"><a href="#å®šä¹‰ç­–ç•¥æ¥å£-åˆ¶å®šæ ‡å‡†æ–¹æ³•" class="headerlink" title="å®šä¹‰ç­–ç•¥æ¥å£ åˆ¶å®šæ ‡å‡†æ–¹æ³•"></a>å®šä¹‰ç­–ç•¥æ¥å£ åˆ¶å®šæ ‡å‡†æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IPromotionStrategy</span> </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">doPromote</span><span class="params">()</span></span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="CashBackStrategy-ç°é‡‘æŠ˜è¿”ç­–ç•¥"><a href="#CashBackStrategy-ç°é‡‘æŠ˜è¿”ç­–ç•¥" class="headerlink" title="CashBackStrategy ç°é‡‘æŠ˜è¿”ç­–ç•¥"></a>CashBackStrategy ç°é‡‘æŠ˜è¿”ç­–ç•¥</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CashBackStrategy</span> <span class="keyword">implements</span> <span class="title">IPromotionStrategy</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPromote</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç›´æ¥è¿”ç°&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="CouponStrategy-ä¼˜æƒ åˆ¸ç­–ç•¥"><a href="#CouponStrategy-ä¼˜æƒ åˆ¸ç­–ç•¥" class="headerlink" title="CouponStrategy ä¼˜æƒ åˆ¸ç­–ç•¥"></a>CouponStrategy ä¼˜æƒ åˆ¸ç­–ç•¥</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CouponStrategy</span> <span class="keyword">implements</span> <span class="title">IPromotionStrategy</span></span>&#123;</span><br><span class="line">    <span class="comment">// ä¼˜æƒ åˆ¸ç­–ç•¥</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPromote</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä½¿ç”¨ä¼˜æƒ åˆ¸æŠµæ‰£&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="GroupBuyStrategy-å›¢è´­ä¼˜æƒ ç­–ç•¥"><a href="#GroupBuyStrategy-å›¢è´­ä¼˜æƒ ç­–ç•¥" class="headerlink" title="GroupBuyStrategy å›¢è´­ä¼˜æƒ ç­–ç•¥"></a>GroupBuyStrategy å›¢è´­ä¼˜æƒ ç­–ç•¥</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GroupBuyStrategy</span> <span class="keyword">implements</span> <span class="title">IPromotionStrategy</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPromote</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å›¢è´­ 5äººæˆå›¢&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="EmptyStrategy-é»˜è®¤ç­–ç•¥"><a href="#EmptyStrategy-é»˜è®¤ç­–ç•¥" class="headerlink" title="EmptyStrategy é»˜è®¤ç­–ç•¥"></a>EmptyStrategy é»˜è®¤ç­–ç•¥</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmptyStrategy</span> <span class="keyword">implements</span> <span class="title">IPromotionStrategy</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPromote</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ— ä»»ä½•ä¼˜æƒ &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="PromoteActivity-å®¢æˆ·ç«¯å’Œå…·ä½“ç®—æ³•ä¹‹é—´çš„ä¸Šä¸‹æ–‡ï¼Œç”¨äºæ¡¥æ¥"><a href="#PromoteActivity-å®¢æˆ·ç«¯å’Œå…·ä½“ç®—æ³•ä¹‹é—´çš„ä¸Šä¸‹æ–‡ï¼Œç”¨äºæ¡¥æ¥" class="headerlink" title="PromoteActivity å®¢æˆ·ç«¯å’Œå…·ä½“ç®—æ³•ä¹‹é—´çš„ä¸Šä¸‹æ–‡ï¼Œç”¨äºæ¡¥æ¥"></a>PromoteActivity å®¢æˆ·ç«¯å’Œå…·ä½“ç®—æ³•ä¹‹é—´çš„ä¸Šä¸‹æ–‡ï¼Œç”¨äºæ¡¥æ¥</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PromoteActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> IPromotionStrategy promotionStrategy;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">PromoteActivity</span><span class="params">(IPromotionStrategy promotionStrategy)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.promotionStrategy = promotionStrategy;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">()</span></span>&#123;</span><br><span class="line">        promotionStrategy.doPromote();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="PromoteStrategyFactory-ç­–ç•¥å·¥å‚"><a href="#PromoteStrategyFactory-ç­–ç•¥å·¥å‚" class="headerlink" title="PromoteStrategyFactory ç­–ç•¥å·¥å‚"></a>PromoteStrategyFactory ç­–ç•¥å·¥å‚</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PromoteStrategyFactory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">PromoteStrategyFactory</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ç­–ç•¥å®¹å™¨  </span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Map&lt;String, IPromotionStrategy&gt; promotionStrategyMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    <span class="comment">// é»˜è®¤ç©ºç­–ç•¥-æ²¡æœ‰ä»»ä½•ä¼˜æƒ </span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> IPromotionStrategy emptyStrategy = <span class="keyword">new</span> EmptyStrategy();</span><br><span class="line">    <span class="comment">// è¿™ä¸ªå¯ä»¥æ”¾åˆ°é…ç½®æ–‡ä»¶æˆ–è€…æ”¾åˆ°æ•°æ®åº“ï¼Œåœ¨é¡¹ç›®å¯åŠ¨çš„æ—¶å€™åŠ è½½åˆ°æœåŠ¡ä¸­å°±å¯ä»¥äº†</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        promotionStrategyMap.put(PromoteKey.CASH_BACK, <span class="keyword">new</span> CashBackStrategy());</span><br><span class="line">        promotionStrategyMap.put(PromoteKey.COUPON, <span class="keyword">new</span> CouponStrategy());</span><br><span class="line">        promotionStrategyMap.put(PromoteKey.CROUP_BUY, <span class="keyword">new</span> GroupBuyStrategy());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ç®€å•å·¥å‚åˆ›å»ºè¥é”€ç­–ç•¥</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> IPromotionStrategy <span class="title">createPromoteStrategy</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">        IPromotionStrategy promotionStrategy = promotionStrategyMap.get(key);</span><br><span class="line">        <span class="keyword">if</span> (promotionStrategy == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> emptyStrategy;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> promotionStrategy;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰€æœ‰å®šä¹‰å¥½çš„ç­–ç•¥</span></span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">interface</span> <span class="title">PromoteKey</span> </span>&#123;</span><br><span class="line">        String COUPON = <span class="string">&quot;coupon&quot;</span>;</span><br><span class="line">        String CROUP_BUY = <span class="string">&quot;groupBuy&quot;</span>;</span><br><span class="line">        String CASH_BACK = <span class="string">&quot;cashBack&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å› ä¸ºç­–ç•¥æ¨¡å¼éœ€è¦ç”¨æˆ·çŸ¥é“æ‰€æœ‰å¯ç”¨çš„ç­–ç•¥ï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•æš´éœ²ç»™å®¢æˆ·ç«¯</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Set&lt;String&gt; <span class="title">getPromoteKeySet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> promotionStrategyMap.keySet();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç­–ç•¥æ¨¡å¼ä¸‹å®¢æˆ·ç«¯å†™æ³•"><a href="#ç­–ç•¥æ¨¡å¼ä¸‹å®¢æˆ·ç«¯å†™æ³•" class="headerlink" title="ç­–ç•¥æ¨¡å¼ä¸‹å®¢æˆ·ç«¯å†™æ³•"></a>ç­–ç•¥æ¨¡å¼ä¸‹å®¢æˆ·ç«¯å†™æ³•</h3> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    String strategy = PromoteStrategyFactory.getPromoteKeySet().stream().findAny().get();</span><br><span class="line">    IPromotionStrategy promoteStrategy = PromoteStrategyFactory.createPromoteStrategy(strategy);</span><br><span class="line">    promoteStrategy.doPromote();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="éç­–ç•¥æ¨¡å¼ä¸‹å®¢æˆ·ç«¯å†™æ³•"><a href="#éç­–ç•¥æ¨¡å¼ä¸‹å®¢æˆ·ç«¯å†™æ³•" class="headerlink" title="éç­–ç•¥æ¨¡å¼ä¸‹å®¢æˆ·ç«¯å†™æ³•"></a>éç­–ç•¥æ¨¡å¼ä¸‹å®¢æˆ·ç«¯å†™æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    String strategy = <span class="string">&quot;å®¢æˆ·é€‰æ‹©çš„ç­–ç•¥&quot;</span>;</span><br><span class="line">    IPromotionStrategy promotionStrategy;</span><br><span class="line">    <span class="keyword">if</span> (<span class="string">&quot;å›¢è´­&quot;</span>.equals(strategy))&#123;</span><br><span class="line">         promotionStrategy = <span class="keyword">new</span> GroupBuyStrategy();</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;ä¼˜æƒ åˆ¸&quot;</span>.equals(strategy))&#123;</span><br><span class="line">        promotionStrategy = <span class="keyword">new</span> CouponStrategy();</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;ç°é‡‘æŠ˜è¿”&quot;</span>.equals(strategy))&#123;</span><br><span class="line">        promotionStrategy = <span class="keyword">new</span> CashBackStrategy();</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        promotionStrategy = <span class="keyword">new</span> EmptyStrategy();</span><br><span class="line">    &#125;</span><br><span class="line">    promotionStrategy.doPromote();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šçš„å¯¹æ¯”ï¼Œå“ªç§æ–¹å¼æ¯”è¾ƒä¼˜é›…ï¼Œç«‹è§é«˜ä¸‹äº†å§ğŸ˜„ğŸ˜„ğŸ˜„   </p><h2 id="ç­–ç•¥æ¨¡å¼çš„ä¼˜ç‚¹"><a href="#ç­–ç•¥æ¨¡å¼çš„ä¼˜ç‚¹" class="headerlink" title="ç­–ç•¥æ¨¡å¼çš„ä¼˜ç‚¹"></a>ç­–ç•¥æ¨¡å¼çš„ä¼˜ç‚¹</h2><ul><li><strong>ç­–ç•¥æ¨¡å¼æ˜¯ç¬¦åˆå¼€é—­åŸåˆ™çš„</strong></li><li><strong>é¿å…ä½¿ç”¨å¤šé‡æ¡ä»¶è½¬ç§»è¯­å¥ if-elseè¯­å¥ã€switchè¯­å¥ç­‰</strong></li><li><strong>ä½¿ç”¨ç­–ç•¥æ¨¡å¼å¯ä»¥æé«˜ç®—æ³•çš„ä¿å¯†æ€§å’Œå®‰å…¨æ€§ï¼ˆå®¢æˆ·ç«¯é€šè¿‡ä¸Šä¸‹æ–‡ç»„å»ºæ¥è°ƒç”¨å…·ä½“çš„ç®—æ³•-æ¡¥æ¥ï¼‰</strong></li></ul><h2 id="ç­–ç•¥æ¨¡å¼çš„ç¼ºç‚¹"><a href="#ç­–ç•¥æ¨¡å¼çš„ç¼ºç‚¹" class="headerlink" title="ç­–ç•¥æ¨¡å¼çš„ç¼ºç‚¹"></a>ç­–ç•¥æ¨¡å¼çš„ç¼ºç‚¹</h2><ul><li><strong>å®¢æˆ·ç«¯å¿…é¡»è¦çŸ¥é“å…¨éƒ¨å¯ç”¨çš„ç­–ç•¥ï¼Œç„¶åç”±ç”¨æˆ·å†³å®šä½¿ç”¨é‚£ä¸ªç­–ç•¥ï¼Œå†³å®šæƒåœ¨äºå®¢æˆ·</strong></li><li><strong>ä»£ç ä¸­ä¼šäº§ç”Ÿå¾ˆå¤šçš„ç­–ç•¥ç±»ï¼Œå¢åŠ ä»£ç é‡å’Œç³»ç»Ÿçš„ç»´æŠ¤éš¾åº¦</strong></li></ul><h2 id="ğŸ‘¤ä¸ªäººä½“ä¼š"><a href="#ğŸ‘¤ä¸ªäººä½“ä¼š" class="headerlink" title="ğŸ‘¤ä¸ªäººä½“ä¼š"></a>ğŸ‘¤ä¸ªäººä½“ä¼š</h2><p>1ã€ç»“åˆä¸šåŠ¡åœºæ™¯æ¥è®¾è®¡ï¼Œä½“ä¼šè®¾è®¡æ¨¡å¼çš„æ€è·¯ï¼Œå­¦è®¾è®¡æ¨¡å¼æœ€é‡è¦çš„æ˜¯æ€æƒ³ï¼›<br>2ã€è®¾è®¡æ¨¡å¼ä¸€èˆ¬åœ¨æ¡†æ¶ä¸­ä½“ç°çš„æ¯”è¾ƒå¤šï¼Œå¤§å®¶å¯ä»¥å¤šå­¦ä¹ ä¸€äº›æ¡†æ¶æºç çš„è®¾è®¡ç†å¿µï¼Œå¦‚æœä½ æ˜¯åˆçº§ï¼Œå¯èƒ½ä¸€ä¸‹å­ç†è§£ä¸äº†ï¼Œæ…¢æ…¢ä½“ä¼šå§ï¼Œå½“ä½ å·¥ä½œä¸€æ®µæ—¶é—´ä¹‹åï¼Œè§è¿‡ä¸€äº›å·¥ä¸šç”Ÿäº§çš„é¡¹ç›®ï¼Œçœ‹è¿‡ä¸€äº›ä¼˜ç§€çš„æ¡†æ¶æºç çš„æ—¶å€™ï¼Œä¼šæœ‰ä¸€ä¸ª â€œæŸ³æš—èŠ±æ˜åˆä¸€æ‘â€çš„é˜¶æ®µï¼›<br>3ã€ä¸¾ä¸ªä¾‹å­ï¼ŒControlleræˆ‘ä»¬éƒ½å†™è¿‡çš„ï¼Œä¸€ä¸ªé¡¹ç›®ä¸­çš„æ¥å£è·¯å¾„æ˜¯å”¯ä¸€çš„ï¼Œé¡¹ç›®å¯åŠ¨çš„æ—¶å€™ï¼Œç”±SpringåŠ è½½åˆ°å®¹å™¨ä¸­ï¼Œ<br>å½“ç”±è¯·æ±‚è¿›æ¥æ—¶æ˜¯ï¼ŒSpringæ˜¯æ ¹æ®pathæ¥è¿”å›å…·ä½“çš„æ§åˆ¶å™¨ï¼Œä¹Ÿå°±æ˜¯Controllerå…·ä½“çš„æ–¹æ³•ï¼›<br>4ã€è¿˜æœ‰Comparatoræ¯”è¾ƒå™¨ï¼Œä¸åŒçš„å®¹å™¨å†…éƒ¨åšæ•°æ®æ’åºçš„æ—¶å€™ç”±ä¸åŒçš„å®ç°ï¼Œè¿™ä¹Ÿæ˜¯ç­–ç•¥æ¨¡å¼çš„ä½“ç°ï¼›<br>5ã€æœ¬æ–‡ä¸­çš„ä¾‹å­è™½ç„¶ç®€å•ï¼Œä½†æ˜¯åŒ…å«äº†ç®€å•å·¥å‚æ¨¡å¼ï¼Œæ¡¥æ¥æ¨¡å¼ï¼Œç­–ç•¥æ¨¡å¼ã€‚ä»»ä½•ä¸€ç§è®¾è®¡æ¨¡å¼éƒ½éš¾ä»¥ç‹¬ç«‹å­˜åœ¨ï¼Œè¿™ä¸ªå¤§å®¶è¦æ³¨æ„ï¼›  </p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ç­–ç•¥æ¨¡å¼&quot;&gt;&lt;a href=&quot;#ç­–ç•¥æ¨¡å¼&quot; class=&quot;headerlink&quot; title=&quot;ç­–ç•¥æ¨¡å¼&quot;&gt;&lt;/a&gt;ç­–ç•¥æ¨¡å¼&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;ç­–ç•¥æ¨¡å¼&lt;/strong&gt;ï¼ˆStrategy Patternï¼‰ä¹Ÿå«åšæ”¿ç­–æ¨¡å¼ï¼ˆPolicy Patternï¼‰</summary>
      
    
    
    
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="http://example.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹ç¾-æ¡¥æ¥æ¨¡å¼</title>
    <link href="http://example.com/wiki/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%BE%8E-%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F/"/>
    <id>http://example.com/wiki/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%BE%8E-%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F/</id>
    <published>2021-08-07T11:59:32.000Z</published>
    <updated>2021-08-07T12:05:24.908Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ¡¥æ¥æ¨¡å¼ï¼ˆBridge-Patternï¼‰"><a href="#æ¡¥æ¥æ¨¡å¼ï¼ˆBridge-Patternï¼‰" class="headerlink" title="æ¡¥æ¥æ¨¡å¼ï¼ˆBridge Patternï¼‰"></a>æ¡¥æ¥æ¨¡å¼ï¼ˆBridge Patternï¼‰</h1><p>æ¡¥æ¥æ¨¡å¼ä¹Ÿç§°ä¸ºæ¡¥æ¢æ¨¡å¼ï¼Œæ¥å£ï¼ˆIntegerï¼‰æ¨¡å¼æˆ–è€…æŸ„ä½“ï¼ˆHandle and Bodyï¼‰æ¨¡å¼ï¼Œæ˜¯å°†æŠ½è±¡éƒ¨åˆ†å’Œå®ƒçš„å…·ä½“å®ç°éƒ¨åˆ†åˆ†ç¦»ï¼Œæ˜¯å®ƒä»¬éƒ½å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–ï¼›</p><p>é€šè¿‡ç»„åˆçš„æ–¹å¼å»ºç«‹ä¸¤ä¸ªç±»ä¹‹é—´çš„è”ç³»ï¼Œè€Œä¸æ˜¯ç»§æ‰¿ï¼› æ¡¥æ¥æ¨¡å¼å±äºç»“æ„å‹æ¨¡å¼ï¼›  </p><p>ç»§æ‰¿ä¸€èˆ¬æ¥ä½œä¸ºå¤šç»§æ‰¿çš„å¤‡ç”¨æ–¹æ¡ˆï¼›  </p><h2 id="æ¡¥æ¥æ¨¡å¼çš„ç»“æ„"><a href="#æ¡¥æ¥æ¨¡å¼çš„ç»“æ„" class="headerlink" title="æ¡¥æ¥æ¨¡å¼çš„ç»“æ„"></a>æ¡¥æ¥æ¨¡å¼çš„ç»“æ„</h2><img src="https://cdn.jsdelivr.net/gh/zabernism/image@main/gao/up-0d535d57f31a3116d90f4022b039595b8cd.png" style="zoom:50%;" />  <p><strong>æ¡¥æ¥æ¨¡å¼ä¸»è¦åŒ…æ‹¬ä¸€ä¸‹å‡ ä¸ªè§’è‰²ï¼š</strong>  </p><p>1ã€<strong>æŠ½è±¡è§’è‰²ï¼ˆAbstractionï¼‰ï¼š</strong> å®šä¹‰æŠ½è±¡ç±»ï¼Œå¹¶åŒ…å«ä¸€ä¸ªå¯¹å®ç°åŒ–å¯¹è±¡çš„å¼•ç”¨ï¼Œæ­£æ˜¯è¿™ä¸ªå¼•ç”¨ï¼Œèµ·ç€æ¡¥æ¢æ€§çš„ä½œç”¨ï¼›<br>2ã€<strong>æ‰©å±•æŠ½è±¡åŒ–ï¼ˆRefined Abstractionï¼‰è§’è‰²</strong>ï¼š</p><h3 id="Abstraction"><a href="#Abstraction" class="headerlink" title="Abstraction"></a>Abstraction</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Abstraction</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> IImplementor iImplementor;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Abstraction</span><span class="params">(IImplementor iImplementor)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.iImplementor = iImplementor;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">operation</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.iImplementor.operation();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="IImplementor"><a href="#IImplementor" class="headerlink" title="IImplementor"></a>IImplementor</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IImplementor</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">operation</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ConcreteImplementA"><a href="#ConcreteImplementA" class="headerlink" title="ConcreteImplementA"></a>ConcreteImplementA</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcreteImplementA</span> <span class="keyword">implements</span> <span class="title">IImplementor</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">operation</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ConcreteImplementB"><a href="#ConcreteImplementB" class="headerlink" title="ConcreteImplementB"></a>ConcreteImplementB</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcreteImplementB</span> <span class="keyword">implements</span> <span class="title">IImplementor</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">operation</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="RefinedAbstraction"><a href="#RefinedAbstraction" class="headerlink" title="RefinedAbstraction"></a>RefinedAbstraction</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RefinedAbstraction</span> <span class="keyword">extends</span> <span class="title">Abstraction</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RefinedAbstraction</span><span class="params">(IImplementor iImplementor)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(iImplementor);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">operation</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.operation();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸¾ä¸ªä¾‹å­"><a href="#ä¸¾ä¸ªä¾‹å­" class="headerlink" title="ä¸¾ä¸ªä¾‹å­"></a>ä¸¾ä¸ªä¾‹å­</h2><img src="https://cdn.jsdelivr.net/gh/zabernism/image@main/gao/up-e5443bab7294cf3d4213da30e87e593a889.png" style="zoom:50%;" />  <h3 id="AbstractMessage"><a href="#AbstractMessage" class="headerlink" title="AbstractMessage"></a>AbstractMessage</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractMessage</span> </span>&#123;</span><br><span class="line"> <span class="keyword">private</span> IMessage message;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AbstractMessage</span><span class="params">(IMessage message)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.message = message;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">sendMsg</span><span class="params">(String msg,String toUser)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.message.send(msg,toUser);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="IMessage"><a href="#IMessage" class="headerlink" title="IMessage"></a>IMessage</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IMessage</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">send</span><span class="params">(String msg,String toUser)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="SmsMessage"><a href="#SmsMessage" class="headerlink" title="SmsMessage"></a>SmsMessage</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SmsMessage</span> <span class="keyword">implements</span> <span class="title">IMessage</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">send</span><span class="params">(String msg, String toUser)</span> </span>&#123;</span><br><span class="line">        System.err.println(<span class="string">&quot;ä½¿ç”¨çŸ­ä¿¡æ¶ˆæ¯å‘é€ &quot;</span> + msg + <span class="string">&quot; å‘é€ç»™ &quot;</span> + toUser);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="EmailMessage"><a href="#EmailMessage" class="headerlink" title="EmailMessage"></a>EmailMessage</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmailMessage</span> <span class="keyword">implements</span> <span class="title">IMessage</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">send</span><span class="params">(String msg, String toUser)</span> </span>&#123;</span><br><span class="line">        System.err.println(<span class="string">&quot;ä½¿ç”¨é‚®ä»¶æ¶ˆæ¯å‘é€ &quot;</span> + msg + <span class="string">&quot; å‘é€ç»™ &quot;</span> + toUser);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="NormalMessage"><a href="#NormalMessage" class="headerlink" title="NormalMessage"></a>NormalMessage</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NormalMessage</span> <span class="keyword">extends</span> <span class="title">AbstractMessage</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">NormalMessage</span><span class="params">(IMessage message)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">sendMsg</span><span class="params">(String msg, String toUser)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.sendMsg(msg, toUser);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="UegencyMessage"><a href="#UegencyMessage" class="headerlink" title="UegencyMessage"></a>UegencyMessage</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UegencyMessage</span> <span class="keyword">extends</span> <span class="title">AbstractMessage</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">sendMsg</span><span class="params">(String msg,String toUser)</span></span>&#123;</span><br><span class="line">        msg = <span class="string">&quot;[ åŠ æ€¥]&quot;</span> + msg;</span><br><span class="line">        <span class="keyword">super</span>.sendMsg(msg,toUser);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">UegencyMessage</span><span class="params">(IMessage message)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="DemoTest"><a href="#DemoTest" class="headerlink" title="DemoTest"></a>DemoTest</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        IMessage message = <span class="keyword">new</span> SmsMessage();</span><br><span class="line">        AbstractMessage abstractMessage = <span class="keyword">new</span> NormalMessage(message);</span><br><span class="line">        abstractMessage.sendMsg(<span class="string">&quot;åŠ ç­ç”³è¯·&quot;</span>,<span class="string">&quot;è€å¤§&quot;</span>);</span><br><span class="line"></span><br><span class="line">        message = <span class="keyword">new</span> EmailMessage();</span><br><span class="line">        abstractMessage = <span class="keyword">new</span> UegencyMessage(message);</span><br><span class="line">        abstractMessage.sendMsg(<span class="string">&quot;è°ƒä¼‘ç”³è¯·&quot;</span>,<span class="string">&quot;è€æ€»&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨çŸ­ä¿¡æ¶ˆæ¯å‘é€ åŠ ç­ç”³è¯· å‘é€ç»™ è€å¤§</span><br><span class="line">ä½¿ç”¨é‚®ä»¶æ¶ˆæ¯å‘é€ [ åŠ æ€¥]è°ƒä¼‘ç”³è¯· å‘é€ç»™ è€æ€»</span><br></pre></td></tr></table></figure><h2 id="æ¡¥æ¥æ¨¡å¼çš„é€‚ç”¨åœºæ™¯"><a href="#æ¡¥æ¥æ¨¡å¼çš„é€‚ç”¨åœºæ™¯" class="headerlink" title="æ¡¥æ¥æ¨¡å¼çš„é€‚ç”¨åœºæ™¯"></a>æ¡¥æ¥æ¨¡å¼çš„é€‚ç”¨åœºæ™¯</h2><p>1ã€åœ¨æŠ½è±¡å’Œå…·ä½“å®ç°ä¹‹é—´éœ€è¦å¢åŠ æ›´å¤šçš„çµæ´»æ€§çš„åœºæ™¯ï¼›<br>2ã€ä¸€ä¸ªç±»åœ¨ä¸¤ä¸ªæˆ–è€…å¤šä¸ªç‹¬ç«‹å˜åŒ–çš„ç»´åº¦ï¼Œè€Œè¿™ä¸¤ä¸ªæˆ–å¤šä¸ªç»´åº¦éƒ½éœ€è¦ç‹¬ç«‹çš„è¿›è¡Œæ‹“å±•<br>3ã€ä¸å¸Œæœ›ä½¿ç”¨ç»§æ‰¿ï¼Œæˆ–è€…å› ä¸ºå¤šå±‚ç»§æ‰¿å¯¼è‡´ç³»ç»Ÿç±»çš„ä¸ªæ•°å‰§å¢ï¼›  </p><p><img src="https://cdn.jsdelivr.net/gh/zabernism/image@main/gao/up-e40c001a6bb521fdb429fd7436df93981f8.png">  </p><h2 id="æ¡¥æ¥æ¨¡å¼çš„ä¼˜ç‚¹"><a href="#æ¡¥æ¥æ¨¡å¼çš„ä¼˜ç‚¹" class="headerlink" title="æ¡¥æ¥æ¨¡å¼çš„ä¼˜ç‚¹"></a>æ¡¥æ¥æ¨¡å¼çš„ä¼˜ç‚¹</h2><p>1ã€éµå¾ªè½¯ä»¶è®¾è®¡åŸåˆ™ï¼Œåˆ†ç¦»æŠ½è±¡éƒ¨åˆ†å’Œå…·ä½“å®ç°éƒ¨åˆ†<br>2ã€æé«˜äº†ç³»ç»Ÿçš„æ‰©å±•æ€§<br>3ã€ç¬¦åˆå¼€é—­åŸåˆ™<br>4ã€ç¬¦åˆåˆæˆå¤ç”¨åŸåˆ™  ä¸ä½¿ç”¨ç»§æ‰¿è€Œä½¿ç”¨ç»„åˆ  </p><h2 id="æ¡¥æ¥æ¨¡å¼"><a href="#æ¡¥æ¥æ¨¡å¼" class="headerlink" title="æ¡¥æ¥æ¨¡å¼"></a>æ¡¥æ¥æ¨¡å¼</h2><p>1ã€å¢åŠ äº†ç³»ç»Ÿä»£ç å¯è¯»æ€§å’Œå¤æ‚æ€§<br>2ã€éœ€è¦æ­£ç¡®è¯†åˆ«äº¤æ¥çš„ä¸åŒç»´åº¦    </p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;æ¡¥æ¥æ¨¡å¼ï¼ˆBridge-Patternï¼‰&quot;&gt;&lt;a href=&quot;#æ¡¥æ¥æ¨¡å¼ï¼ˆBridge-Patternï¼‰&quot; class=&quot;headerlink&quot; title=&quot;æ¡¥æ¥æ¨¡å¼ï¼ˆBridge Patternï¼‰&quot;&gt;&lt;/a&gt;æ¡¥æ¥æ¨¡å¼ï¼ˆBridge Patternï¼‰&lt;/h1&gt;&lt;</summary>
      
    
    
    
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="http://example.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹ç¾-å»ºé€ è€…æ¨¡å¼</title>
    <link href="http://example.com/wiki/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%BE%8E-%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F/"/>
    <id>http://example.com/wiki/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%BE%8E-%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F/</id>
    <published>2021-08-07T11:55:36.000Z</published>
    <updated>2021-08-07T11:58:49.307Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å»ºé€ è€…æ¨¡å¼"><a href="#å»ºé€ è€…æ¨¡å¼" class="headerlink" title="å»ºé€ è€…æ¨¡å¼"></a>å»ºé€ è€…æ¨¡å¼</h1><p> å»ºé€ è€…æ¨¡å¼ï¼ˆBuilder Patternï¼‰å°†ä¸€ä¸ªå¤æ‚çš„å¯¹è±¡çš„æ„å»ºè¿‡ç¨‹ä¸å®ƒçš„è¡¨ç¤ºï¼Œä½¿å¾—åŒæ ·çš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºå‡ºä¸åŒçš„è¡¨ç¤ºã€‚<br> å»ºé€ è€…æ¨¡å¼å±äºåˆ›å»ºå‹æ¨¡å¼ï¼›</p><p>å¯¹äºç”¨æˆ·è€Œè¨€ï¼Œä½¿ç”¨å»ºé€ è€…æ¨¡å¼åªéœ€è¦æŒ‡å®šéœ€è¦åˆ›å»ºçš„ç±»å‹å°±å¯ä»¥è·å–å¯¹è±¡ï¼Œåˆ›å»ºçš„è¿‡ç¨‹ä»¥åŠç»†èŠ‚ä¸éœ€è¦äº†è§£ï¼Œæ ¹æ®å»ºé€ è€…æ¨¡å¼çš„å®šä¹‰ï¼Œå¯ä»¥ç®€å•çš„ç†è§£<br>ä¸ºä¸¤å±‚å«ä¹‰ï¼š<br>1ã€æ„å»ºä¸è¡¨ç¤ºåˆ†ç¦»ï¼›æ„å»ºä»£è¡¨å¯¹è±¡åˆ›å»ºï¼Œè¡¨ç¤ºä»£è¡¨å¯¹è±¡è¡Œä¸ºï¼Œæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯å°†å¯¹è±¡çš„åˆ›å»ºä¸è¡Œä¸ºåˆ†ç¦»ï¼›ï¼ˆå¯¹åº”åˆ°Javaä»£ç ï¼Œå…¶å®å°±æ˜¯ä½¿ç”¨æ¥å£è§„èŒƒè¡Œä¸ºï¼Œ<br>ç„¶åç”±å…·ä½“çš„å®ç°è¿›è¡Œæ„å»ºï¼‰<br>2ã€åˆ›å»ºä¸åŒçš„è¡¨ç¤ºï¼›ä¹Ÿå°±æ˜¯å…·å¤‡åŒæ ·çš„è¡Œä¸ºï¼Œä½†æ˜¯å´ç”±äºæ„å»ºçš„è¡Œä¸ºé¡ºåºä¸åŒæˆ–å…¶ä»–åŸå› å¯ä»¥åˆ›å»ºå‡ºä¸åŒçš„è¡¨ç¤ºï¼›</p><h3 id="Course"><a href="#Course" class="headerlink" title="Course"></a>Course</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="meta">@Setter</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Course</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String ppt;</span><br><span class="line">    <span class="keyword">private</span> String video;</span><br><span class="line">    <span class="keyword">private</span> String note;</span><br><span class="line">    <span class="keyword">private</span> String homework;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="CourseBuilder"><a href="#CourseBuilder" class="headerlink" title="CourseBuilder"></a>CourseBuilder</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CourseBuilder</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Course course = <span class="keyword">new</span> Course();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> CourseBuilder <span class="title">addName</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">        course.setName(name);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> CourseBuilder <span class="title">addHomework</span><span class="params">(String homework)</span></span>&#123;</span><br><span class="line">        course.setHomework(homework);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> CourseBuilder <span class="title">addVideo</span><span class="params">(String video)</span></span>&#123;</span><br><span class="line">        course.setVideo(video);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> CourseBuilder <span class="title">addPpt</span><span class="params">(String ppt)</span></span>&#123;</span><br><span class="line">        course.setPpt(ppt);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> CourseBuilder <span class="title">addNote</span><span class="params">(String note)</span></span>&#123;</span><br><span class="line">        course.setNote(note);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Course <span class="title">builder</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> course;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="DomoTest-æµ‹è¯•"><a href="#DomoTest-æµ‹è¯•" class="headerlink" title="DomoTest æµ‹è¯•"></a>DomoTest æµ‹è¯•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DomoTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        CourseBuilder courseBuilder = <span class="keyword">new</span> CourseBuilder();</span><br><span class="line">        courseBuilder.addHomework(<span class="string">&quot;è¯¾åä½œä¸š111&quot;</span>)</span><br><span class="line">        .addName(<span class="string">&quot;è®¾è®¡æ¨¡å¼&quot;</span>)</span><br><span class="line">        .addNote(<span class="string">&quot;è¯¾å ‚ç¬”è®°&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;courseBuilder = &quot;</span> + courseBuilder.builder());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">courseBuilder = Course(name=è®¾è®¡æ¨¡å¼, ppt=null, video=null, note=è¯¾å ‚ç¬”è®°, homework=è¯¾åä½œä¸š111)</span><br></pre></td></tr></table></figure><h2 id="å»ºé€ è€…åœ¨JDKä¸­çš„åº”ç”¨"><a href="#å»ºé€ è€…åœ¨JDKä¸­çš„åº”ç”¨" class="headerlink" title="å»ºé€ è€…åœ¨JDKä¸­çš„åº”ç”¨"></a>å»ºé€ è€…åœ¨JDKä¸­çš„åº”ç”¨</h2><h3 id="StringBuilder"><a href="#StringBuilder" class="headerlink" title="StringBuilder"></a>StringBuilder</h3><img src="https://cdn.jsdelivr.net/gh/zabernism/image@main/gao/up-2381a159db921a2ce7d6b78fac5d7260ffd.png" style="zoom:50%;" /><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">StringBuilder</span></span></span><br><span class="line"><span class="class">    <span class="keyword">extends</span> <span class="title">AbstractStringBuilder</span></span></span><br><span class="line"><span class="class">    <span class="keyword">implements</span> <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span>, <span class="title">CharSequence</span></span>&#123;&#125;</span><br></pre></td></tr></table></figure><h3 id="java-lang-StringBuilder-append-java-lang-CharSequence"><a href="#java-lang-StringBuilder-append-java-lang-CharSequence" class="headerlink" title="java.lang.StringBuilder.append(java.lang.CharSequence)"></a>java.lang.StringBuilder.append(java.lang.CharSequence)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> StringBuilder <span class="title">append</span><span class="params">(CharSequence s)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.append(s);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„StringBuilderå°±æ˜¯ä¸€ä¸ªå®ç°æ„é€ å™¨ï¼Œåªä¸è¿‡å®ƒçš„ä¸Šçº§è¿˜æœ‰ä¸€ä¸ªæŠ½è±¡çš„æ„é€ å™¨AbstractStringBuilder;<br>çœ‹åˆ°è¿™æºç æ˜¯ä¸æ˜¯å’Œæˆ‘ä»¬ä¸Šé¢ä¸¾çš„ä¾‹å­ç±»ä¼¼å‘¢ï¼Œè¿™å°±æ˜¯JDKæºç ä¸­å¾ˆå…¸å‹çš„å»ºé€ è€…æ¨¡å¼çš„åº”ç”¨ï¼›<br>å¤„ç†ä¸Šé¢çš„StringBuilderä¹‹å¤–ï¼Œè¿˜æœ‰åƒMybatisæ¡†æ¶ä¸­çš„CacheBuilderç¼“å­˜æ„é€ å™¨ï¼Œè¿˜æœ‰åƒSqlSessionFactoryè£…è½½æ—¶çš„openSessionæ–¹æ³•éƒ½æ˜¯å»ºé€ è€…æ¨¡å¼ï¼›</p><h2 id="å»ºé€ è€…æ¨¡å¼çš„ä½¿ç”¨åœºæ™¯"><a href="#å»ºé€ è€…æ¨¡å¼çš„ä½¿ç”¨åœºæ™¯" class="headerlink" title="å»ºé€ è€…æ¨¡å¼çš„ä½¿ç”¨åœºæ™¯"></a>å»ºé€ è€…æ¨¡å¼çš„ä½¿ç”¨åœºæ™¯</h2><ul><li><strong>é€‚ç”¨äºåˆ›å»ºå¯¹è±¡éœ€è¦å¾ˆå¤šæ­¥éª¤ï¼Œä½†æ˜¯æ­¥éª¤çš„é¡ºåºä¸ä¸€å®šæ˜¯å›ºå®šçš„</strong></li><li><strong>å¦‚æœä¸€ä¸ªå¯¹è±¡æœ‰éå¸¸å¤æ‚çš„å†…éƒ¨ç»“æ„ï¼ˆæœ‰å¾ˆå¤šçš„æˆå‘˜å˜é‡æˆ–å±æ€§ï¼‰</strong></li><li><strong>æŠŠå¤æ‚å¯¹è±¡çš„åˆ›å»ºå’Œä½¿ç”¨åˆ†ç¦»</strong></li></ul><h2 id="å»ºé€ è€…æ¨¡å¼çš„ä¼˜ç‚¹"><a href="#å»ºé€ è€…æ¨¡å¼çš„ä¼˜ç‚¹" class="headerlink" title="å»ºé€ è€…æ¨¡å¼çš„ä¼˜ç‚¹"></a>å»ºé€ è€…æ¨¡å¼çš„ä¼˜ç‚¹</h2><ul><li><strong>å°è£…è¡Œå¾ˆå¥½ï¼Œä½¿å¾—åˆ›å»ºè¿‡ç¨‹å’Œä½¿ç”¨åˆ†ç¦»å¼€</strong></li><li><strong>æ‰©å±•æ€§å¥½ï¼Œå»ºé€ ç±»ä¹‹é—´ç‹¬ç«‹ï¼Œä¸€å®šç¨‹åº¦ä¸Šè§£è€¦</strong></li><li><strong>ä¾¿äºæ§åˆ¶ç»†èŠ‚ï¼Œå»ºé€ è€…å¯ä»¥å¯¹åˆ›å»ºè¿‡ç¨‹é€æ­¥ç»†åŒ–ï¼Œè€Œä¸å¯¹å…¶ä»–æ¨¡å—äº§ç”Ÿä»»ä½•å½±å“</strong> </li></ul><h2 id="å»ºé€ è€…æ¨¡å¼çš„ç¼ºç‚¹"><a href="#å»ºé€ è€…æ¨¡å¼çš„ç¼ºç‚¹" class="headerlink" title="å»ºé€ è€…æ¨¡å¼çš„ç¼ºç‚¹"></a>å»ºé€ è€…æ¨¡å¼çš„ç¼ºç‚¹</h2><ul><li><strong>äº§ç”Ÿäº†å¯¹äºçš„Builderå¯¹è±¡ï¼Œé€ æˆäº†ç±»çš„å†—ä½™</strong></li><li><strong>å¦‚æœäº§å“å†…éƒ¨å‘ç”Ÿå˜åŒ–ï¼Œå»ºé€ è€…éƒ½è¦ä¿®æ”¹ï¼Œç»´æŠ¤æˆæœ¬æ¯”è¾ƒå¤§ï¼›ä¸é€‚åˆç»å¸¸å˜åŠ¨çš„å¯¹è±¡ï¼Œè¿™æ ·ä¹Ÿæ˜¯ä¸ç¬¦åˆå¼€é—­åŸåˆ™çš„</strong></li></ul><h2 id="å»ºé€ è€…æ¨¡å¼å’Œå·¥å‚æ¨¡å¼çš„å¯¹æ¯”"><a href="#å»ºé€ è€…æ¨¡å¼å’Œå·¥å‚æ¨¡å¼çš„å¯¹æ¯”" class="headerlink" title="å»ºé€ è€…æ¨¡å¼å’Œå·¥å‚æ¨¡å¼çš„å¯¹æ¯”"></a>å»ºé€ è€…æ¨¡å¼å’Œå·¥å‚æ¨¡å¼çš„å¯¹æ¯”</h2><ul><li><strong>å»ºé€ è€…æ¨¡å¼æ›´åŠ æ³¨é‡æ–¹æ³•çš„è°ƒç”¨é¡ºåºï¼Œå·¥å‚æ¨¡å¼æ³¨é‡äºå¯¹è±¡çš„åˆ›å»º</strong></li><li><strong>åˆ›å»ºå¯¹è±¡çš„åŠ›åº¦ä¸åŒï¼Œå»ºé€ è€…æ¨¡å¼åˆ›å»ºå¤æ‚çš„å¯¹è±¡ï¼Œç”±å„ç§å¤æ‚çš„ç»„ä»¶ç»„æˆï¼Œå·¥å‚æ¨¡å¼åˆ›å»ºå‡ºæ¥å¯¹è±¡çš„éƒ½ä¸€æ ·</strong></li><li><strong>å…³æ³¨ç‚¹ä¸åŒï¼Œå·¥å‚æ¨¡å¼åªéœ€è¦å§å¯¹è±¡åˆ›å»ºå‡ºæ¥å°±å¯ä»¥äº†ï¼Œè€Œå»ºé€ è€…æ¨¡å¼ä¸­ä¸ä»…è¦åˆ›å»ºå‡ºè¿™ä¸ªå¯¹è±¡ï¼Œè¿˜è¦çŸ¥é“è¿™ä¸ªå¯¹è±¡ç”±é‚£äº›ç»„ä»¶ç»„æˆ</strong></li><li><strong>å»ºé€ è€…æ¨¡å¼æ ¹æ®å»ºé€ è¿‡ç¨‹ä¸­çš„é¡ºåºä¸ä¸€æ ·ï¼Œæœ€ç»ˆçš„å¯¹è±¡ä¸è§ç»„æˆä¹Ÿä¸ä¸€æ ·ï¼Œå¯¹è±¡çš„æ¯ä¸ªéƒ¨ä»¶çš„è®¾ç½®éƒ½æ˜¯å¾ˆçµæ´»çš„</strong></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å»ºé€ è€…æ¨¡å¼&quot;&gt;&lt;a href=&quot;#å»ºé€ è€…æ¨¡å¼&quot; class=&quot;headerlink&quot; title=&quot;å»ºé€ è€…æ¨¡å¼&quot;&gt;&lt;/a&gt;å»ºé€ è€…æ¨¡å¼&lt;/h1&gt;&lt;p&gt; å»ºé€ è€…æ¨¡å¼ï¼ˆBuilder Patternï¼‰å°†ä¸€ä¸ªå¤æ‚çš„å¯¹è±¡çš„æ„å»ºè¿‡ç¨‹ä¸å®ƒçš„è¡¨ç¤ºï¼Œä½¿å¾—åŒæ ·çš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºå‡ºä¸åŒ</summary>
      
    
    
    
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="http://example.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹ç¾-å·¥å‚æ¨¡å¼</title>
    <link href="http://example.com/wiki/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%BE%8E-%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/"/>
    <id>http://example.com/wiki/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%BE%8E-%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/</id>
    <published>2021-08-07T11:40:56.000Z</published>
    <updated>2021-08-07T11:48:14.308Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-ç®€å•å·¥å‚æ¨¡å¼"><a href="#1-ç®€å•å·¥å‚æ¨¡å¼" class="headerlink" title="1. ç®€å•å·¥å‚æ¨¡å¼"></a>1. ç®€å•å·¥å‚æ¨¡å¼</h2><p>ç®€å•å·¥å‚æ¨¡å¼æ˜¯æŒ‡æœ‰ä¸€ä¸ªå·¥å‚å¯¹è±¡å†³å®šåˆ›å»ºå‡ºå“ªä¸€ä¸ªäº§å“ç±»çš„å®ä¾‹ï¼›å±äº<code>åˆ›å»ºå‹æ¨¡å¼</code>ï¼Œä½†å®ƒä¸å±äºGOF 23ç§è®¾è®¡æ¨¡å¼ã€‚</p><p>UMLç±»å›¾<br><img src="https://cdn.jsdelivr.net/gh/zabernism/image@main/gao/up-2e06fcc599aa2313d88c542a32a125934fc.png" style="zoom:50%;" /></p><p><strong>ç»„æˆè¦ç´ </strong><br>1ã€ä¸€ä¸ªæŠ½è±¡äº§å“ç±»<br>2ã€å…·ä½“äº§å“ç±»<br>3ã€ä¸€ä¸ªå·¥å‚  </p><p><strong>è‚¥å®…å–œçˆ±çš„å„ç§å¿«ä¹æ°´ï¼ˆäº§å“æ¥å£ï¼‰</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Kls</span> </span>&#123;</span><br><span class="line">    <span class="function">String <span class="title">name</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è‚¥å®…å¿«ä¹æ°´-å¯ä¹ï¼ˆå…·ä½“äº§å“ï¼‰</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Coke</span> <span class="keyword">implements</span> <span class="title">Kls</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">name</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;è‚¥å®…å¿«ä¹æ°´-å¯ä¹&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å¿«ä¹æ°´-é›ªç¢§ï¼ˆå…·ä½“äº§å“ï¼‰</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Sprite</span> <span class="keyword">implements</span> <span class="title">Kls</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">name</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;å¿«ä¹æ°´-é›ªç¢§&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å¿«ä¹æ°´ç”Ÿäº§å·¥å‚(å·¥å‚ç±»)</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">KlsFactory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Kls <span class="title">getFzs</span><span class="params">(String type)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Kls fzs = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;coke&quot;</span>.equalsIgnoreCase(type)) &#123;</span><br><span class="line">            fzs = <span class="keyword">new</span> Coke();</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;sprite&quot;</span>.equalsIgnoreCase(type)) &#123;</span><br><span class="line">            fzs = <span class="keyword">new</span> Sprite();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (Objects.isNull(fzs)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">&quot;æ²¡æ‰¾åˆ°å¿«ä¹æ°´~&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> fzs;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å®¢æˆ·ç«¯ä½¿ç”¨</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Fz</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">drink</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// åˆ¶é€ å¯ä¹</span></span><br><span class="line">        Kls coke = KlsFactory.getFzs(<span class="string">&quot;coke&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;è‚¥å®…å¼€å§‹å–ï¼š&quot;</span> + coke.name());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ¶é€ é›ªç¢§</span></span><br><span class="line">        Kls sprite = KlsFactory.getFzs(<span class="string">&quot;sprite&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;è‚¥å®…å¼€å§‹å–ï¼š&quot;</span> + sprite.name());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="1-1-ä¼˜ç‚¹"><a href="#1-1-ä¼˜ç‚¹" class="headerlink" title="1.1 ä¼˜ç‚¹"></a>1.1 ä¼˜ç‚¹</h3><ul><li>å¯¹å®¢æˆ·ç«¯éšè—çš„å…·ä½“çš„å®ç°ï¼Œå®¢æˆ·ç«¯åªéœ€è¦çŸ¥é“è¦åˆ›å»ºä»€ä¹ˆå¯¹è±¡å³å¯ï¼Œä¸ç”¨å…³å¿ƒå¯¹è±¡æ˜¯æ€ä¹ˆåˆ›å»ºçš„</li><li>è§£è€¦ï¼Œå®¢æˆ·ç«¯ä¸éœ€è¦é€šè¿‡newæ¥åˆ›å»ºå¯¹è±¡ï¼Œå¦‚æœåæœŸäº§å“ç±»éœ€è¦ä¿®æ”¹ï¼Œåˆ™åªéœ€è¦ä¿®æ”¹å·¥å‚ç±»å³å¯ï¼Œä¸ç”¨æ•´ä¸ªé¡¹ç›®éåœ°å»å¯»æ‰¾å“ªé‡Œæœ‰new </li></ul><h3 id="1-2-ç¼ºç‚¹"><a href="#1-2-ç¼ºç‚¹" class="headerlink" title="1.2 ç¼ºç‚¹"></a>1.2 ç¼ºç‚¹</h3><ul><li>ç”±ä¸€ä¸ªä¸“é—¨çš„å·¥å‚è´Ÿè´£ç”Ÿäº§ï¼Œå¦‚æœä¸šåŠ¡å˜å¾—å¤æ‚ï¼Œè¿™ä¸ªç±»å°†å˜å¾—ååˆ†è‡ƒè‚¿</li><li>å·¥å‚ç±»ç”Ÿäº§ä»€ä¹ˆäº§å“éƒ½æ˜¯å†™æ­»åœ¨å·¥å‚ä¸­çš„ï¼Œå¦‚æœå¢åŠ æ–°çš„äº§å“ï¼Œè¿˜è¦ä¿®æ”¹å·¥å‚ç±»çš„ç”Ÿäº§é€»è¾‘</li></ul><h2 id="2-å·¥å‚æ–¹æ³•æ¨¡å¼"><a href="#2-å·¥å‚æ–¹æ³•æ¨¡å¼" class="headerlink" title="2. å·¥å‚æ–¹æ³•æ¨¡å¼"></a>2. å·¥å‚æ–¹æ³•æ¨¡å¼</h2><p>å·¥å‚æ–¹æ³•æ¨¡å¼ï¼ˆFactory Methodï¼‰æ˜¯ç®€å•å·¥å‚çš„ä»…ä¸€æ­¥æ·±åŒ–ï¼Œ åœ¨å·¥å‚æ–¹æ³•æ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬ä¸å†æä¾›ä¸€ä¸ªç»Ÿä¸€çš„å·¥å‚ç±»æ¥åˆ›å»ºæ‰€æœ‰çš„å¯¹è±¡ï¼Œè€Œæ˜¯é’ˆå¯¹ä¸åŒçš„å¯¹è±¡æä¾›ä¸åŒçš„å·¥å‚ã€‚ä¹Ÿå°±æ˜¯è¯´æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å¯¹åº”çš„å·¥å‚ã€‚<br><img src="https://cdn.jsdelivr.net/gh/zabernism/image@main/gao/up-11fa4bfb1062c445c055e49bc1d00b7d9cf.png" style="zoom:50%;" /></p><p><strong>ç»„æˆè¦ç´ </strong><br>1ã€ä¸€ä¸ªæŠ½è±¡äº§å“ç±»<br>2ã€å¤šä¸ªå…·ä½“äº§å“ç±»<br>3ã€ä¸€ä¸ªæŠ½è±¡å·¥å‚<br>4ã€å¤šä¸ªå…·ä½“å·¥å‚ - æ¯ä¸€ä¸ªå…·ä½“äº§å“å¯¹åº”ä¸€ä¸ªå…·ä½“å·¥å‚<br>5ã€ç¬¦åˆ - OCPå¼€æ”¾å°é—­åŸåˆ™  </p><p>æ¥ç€ä¸Šé¢å¿«ä¹æ°´çš„ä¾‹å­ã€‚å°† å¿«ä¹æ°´å·¥å‚ ï¼ˆKlsFactoryï¼‰ æŠ½è±¡å‡ºå…±æœ‰æ–¹æ³•ï¼Œå†åˆ†åˆ«å®ç°å…·ä½“çš„å¿«ä¹æ°´ç”Ÿäº§å·¥å‚ã€‚</p><p><strong>å¿«ä¹æ°´æ€»å·¥å‚</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Factory</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ¶é€ å¿«ä¹æ°´</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> Kls</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">Kls <span class="title">create</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å¯ä¹å·¥å‚</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CokeFactory</span> <span class="keyword">implements</span> <span class="title">Factory</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Kls <span class="title">create</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Coke();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>é›ªç¢§å·¥å‚</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpriteFactory</span> <span class="keyword">implements</span> <span class="title">Factory</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Kls <span class="title">create</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Sprite();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è‚¥å®…(å®¢æˆ·ç«¯)</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Fz</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">drink</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// åˆ¶é€ å¯ä¹</span></span><br><span class="line">        CokeFactory cokeFactory = <span class="keyword">new</span> CokeFactory();</span><br><span class="line">        Kls coke = cokeFactory.create();</span><br><span class="line">        System.out.println(<span class="string">&quot;è‚¥å®…å¼€å§‹å–ï¼š&quot;</span> + coke.name());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ¶é€ é›ªç¢§</span></span><br><span class="line">        SpriteFactory spriteFactory = <span class="keyword">new</span> SpriteFactory();</span><br><span class="line">        Kls sprite = spriteFactory.create();</span><br><span class="line">        System.out.println(<span class="string">&quot;è‚¥å®…å¼€å§‹å–ï¼š&quot;</span> + sprite.name());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ‰©å±•èŠ¬è¾¾å¿«ä¹æ°´</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Fanta</span> <span class="keyword">implements</span> <span class="title">Kls</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">name</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;å¿«ä¹æ°´-èŠ¬è¾¾&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å¤åˆ¶ä»£ç èŠ¬è¾¾å·¥å‚</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FantaFactory</span> <span class="keyword">implements</span> <span class="title">Factory</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Kls <span class="title">create</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Fanta();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è‚¥å®…ä½¿ç”¨æ·»åŠ </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">FantaFactory fantaFactory = <span class="keyword">new</span> FantaFactory();</span><br><span class="line">Kls fanta = fantaFactory.create();</span><br><span class="line">System.out.println(<span class="string">&quot;è‚¥å®…å¼€å§‹å–ï¼š&quot;</span> + fanta.name());</span><br></pre></td></tr></table></figure><h3 id="2-1-ä¼˜ç‚¹"><a href="#2-1-ä¼˜ç‚¹" class="headerlink" title="2.1 ä¼˜ç‚¹"></a>2.1 ä¼˜ç‚¹</h3><p>1ã€é™ä½äº†ä»£ç è€¦åˆåº¦ï¼Œå¯¹è±¡çš„ç”Ÿæˆäº¤ç»™å­ç±»å»å®Œæˆï¼ˆè¿™é‡Œçš„è€¦åˆåº¦æ˜¯ç›¸å¯¹äºç®€å•å·¥å‚æ¨¡å¼çš„å·¥å‚ç±»æ¯”è¾ƒçš„ï¼‰<br>2ã€é™ä½äº†ä»£ç è€¦åˆåº¦ï¼Œå¯¹è±¡çš„ç”Ÿæˆäº¤ç»™å­ç±»å»å®Œæˆ  </p><h3 id="2-2-ç¼ºç‚¹"><a href="#2-2-ç¼ºç‚¹" class="headerlink" title="2.2 ç¼ºç‚¹"></a>2.2 ç¼ºç‚¹</h3><p>1ã€å¢åŠ äº†ä»£ç é‡ï¼Œæ¯ä¸ªå…·ä½“äº§å“éƒ½éœ€è¦ä¸€ä¸ªå…·ä½“å·¥å‚ï¼ˆåœ¨å…·ä½“çš„ä¸šåŠ¡ä¸­å¯èƒ½ä¼šäº§ç”Ÿå¤§é‡çš„é‡å¤ä»£ç ï¼‰<br>2ã€å½“å¢åŠ æŠ½è±¡äº§å“ ä¹Ÿå°±æ˜¯æ·»åŠ ä¸€ä¸ªå…¶ä»–äº§å“æ— éœ€è¦ä¿®æ”¹å·¥å‚ è¿èƒŒOCP</p><h2 id="3-æŠ½è±¡å·¥å‚æ¨¡å¼"><a href="#3-æŠ½è±¡å·¥å‚æ¨¡å¼" class="headerlink" title="3. æŠ½è±¡å·¥å‚æ¨¡å¼"></a>3. æŠ½è±¡å·¥å‚æ¨¡å¼</h2><img src="https://cdn.jsdelivr.net/gh/zabernism/image@main/gao/up-9121de8d650bac2739bb7ad27f1f4174a0c.png" style="zoom:50%;" /><p><strong>ç»„æˆè¦ç´ </strong><br>1ã€å¤šä¸ªæŠ½è±¡äº§å“ç±»<br>2ã€å…·ä½“äº§å“ç±»<br>3ã€æŠ½è±¡å·¥å‚ç±» - å£°æ˜(ä¸€ç»„)è¿”å›æŠ½è±¡äº§å“çš„æ–¹æ³•<br>4ã€å…·ä½“å·¥å‚ç±» - ç”Ÿæˆ(ä¸€ç»„)å…·ä½“äº§å“  </p><p><strong>ä¸€ä¸ªæŠ½è±¡äº§å“ç±»å’Œä¸¤ä¸ªå…·ä½“çš„äº§å“ï¼ˆå¯ä¹ï¼‰</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Coke</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">doCreate</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LocalCoke</span> <span class="keyword">extends</span> <span class="title">Coke</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doCreate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.err.println(<span class="string">&quot;ç”Ÿäº§æœ¬åœŸå¯ä¹&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ForeignCoke</span> <span class="keyword">extends</span> <span class="title">Coke</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doCreate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç”Ÿäº§å¤–å›½å¯ä¹&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸€ä¸ªæŠ½è±¡äº§å“ç±»å’Œä¸¤ä¸ªå…·ä½“çš„äº§å“ï¼ˆé›ªç¢§ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Sprite</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">doCreate</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LocalSprite</span> <span class="keyword">extends</span> <span class="title">Sprite</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doCreate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç”Ÿäº§æœ¬åœ°é›ªç¢§&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ForeignSprite</span> <span class="keyword">extends</span> <span class="title">Sprite</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doCreate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.err.println(<span class="string">&quot;ç”Ÿäº§å¤–å›½é›ªç¢§&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä¸€ä¸ªæŠ½è±¡å·¥å‚å’Œä¸¤ä¸ªå…·ä½“çš„å·¥å‚</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IAbstractFactory</span> </span>&#123;</span><br><span class="line">   </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æˆäº§å¯ä¹</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å£°æ˜(ä¸€ç»„)è¿”å›æŠ½è±¡äº§å“çš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">Coke <span class="title">createCoke</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”Ÿäº§é›ªç¢§</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å£°æ˜(ä¸€ç»„)è¿”å›æŠ½è±¡äº§å“çš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">Sprite <span class="title">createSprite</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LocalFactory</span> <span class="keyword">implements</span> <span class="title">IAbstractFactory</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æˆäº§å¯ä¹</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ç”Ÿæˆ(ä¸€ç»„)å…·ä½“äº§å“  </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> LocalCoke <span class="title">createCoke</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> LocalCoke();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”Ÿäº§é›ªç¢§</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ç”Ÿæˆ(ä¸€ç»„)å…·ä½“äº§å“  </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> LocalSprite <span class="title">createSprite</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> LocalSprite();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ForeignFactory</span> <span class="keyword">implements</span> <span class="title">IAbstractFactory</span></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æˆäº§å¯ä¹</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ç”Ÿæˆ(ä¸€ç»„)å…·ä½“äº§å“  </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ForeignCoke <span class="title">createCoke</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ForeignCoke();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”Ÿäº§é›ªç¢§</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ç”Ÿæˆ(ä¸€ç»„)å…·ä½“äº§å“  </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ForeignSprite <span class="title">createSprite</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ForeignSprite();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-1-æŠ½è±¡å·¥å‚çš„ä½¿ç”¨"><a href="#3-1-æŠ½è±¡å·¥å‚çš„ä½¿ç”¨" class="headerlink" title="3.1 æŠ½è±¡å·¥å‚çš„ä½¿ç”¨"></a>3.1 æŠ½è±¡å·¥å‚çš„ä½¿ç”¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FactoryTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        LocalFactory localFactory = <span class="keyword">new</span> LocalFactory();</span><br><span class="line">        LocalCoke localCoke = localFactory.createCoke();</span><br><span class="line">        localCoke.doCreate();</span><br><span class="line"></span><br><span class="line">        ForeignFactory foreignFactory = <span class="keyword">new</span> ForeignFactory();</span><br><span class="line">        ForeignSprite foreignSprite = foreignFactory.createSprite();</span><br><span class="line">        foreignSprite.doCreate();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-2-ä¼˜ç‚¹"><a href="#3-2-ä¼˜ç‚¹" class="headerlink" title="3.2 ä¼˜ç‚¹"></a>3.2 ä¼˜ç‚¹</h3><p>1ã€ä»£ç è§£è€¦<br>2ã€å¾ˆå¥½çš„æ»¡è¶³OCPå¼€æ”¾å°é—­åŸåˆ™<br>3ã€æŠ½è±¡å·¥å‚æ¨¡å¼ä¸­æˆ‘ä»¬å¯ä»¥å®šä¹‰å®ç°ä¸æ­¢ä¸€ä¸ªæ¥å£ï¼Œä¸€ä¸ªå·¥å‚ä¹Ÿå¯ä»¥ç”Ÿæˆä¸æ­¢ä¸€ä¸ªäº§å“ç±» å¯¹äºå¤æ‚å¯¹è±¡çš„ç”Ÿäº§ç›¸å½“çµæ´»æ˜“æ‰©å±•<br>(ç›¸å¯¹äºå·¥å‚æ–¹æ³•æ¨¡å¼çš„ä¼˜åŒ–)  </p><h3 id="3-3-ç¼ºç‚¹"><a href="#3-3-ç¼ºç‚¹" class="headerlink" title="3.3 ç¼ºç‚¹"></a>3.3 ç¼ºç‚¹</h3><p>1ã€æ‰©å±•äº§å“æ˜¯éœ€è¦ä¿®æ”¹æ‰€æœ‰å·¥å‚ï¼Œè¿åè¿åOCPåŸåˆ™<br>2ã€æ•´ä½“å®ç°ä¹Ÿæ¯”è¾ƒå¤æ‚  </p><h2 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h2><blockquote><ul><li><a href="https://juejin.im/post/6844903650641330189">è®¾è®¡æ¨¡å¼-ç®€å•å·¥å‚ã€å·¥å‚æ–¹æ³•æ¨¡å¼ã€æŠ½è±¡å·¥å‚æ¨¡å¼</a></li><li><a href="https://juejin.im/post/6844903780819927054">è®¾è®¡æ¨¡å¼ â€”â€” å·¥å‚æ¨¡å¼</a></li></ul></blockquote><p align="middle" > è¿˜æœ‰å¤šå°‘ä¸ªåå¹´ ç»§ç»­åšçƒ­è¡€å°‘å¹´ </p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1-ç®€å•å·¥å‚æ¨¡å¼&quot;&gt;&lt;a href=&quot;#1-ç®€å•å·¥å‚æ¨¡å¼&quot; class=&quot;headerlink&quot; title=&quot;1. ç®€å•å·¥å‚æ¨¡å¼&quot;&gt;&lt;/a&gt;1. ç®€å•å·¥å‚æ¨¡å¼&lt;/h2&gt;&lt;p&gt;ç®€å•å·¥å‚æ¨¡å¼æ˜¯æŒ‡æœ‰ä¸€ä¸ªå·¥å‚å¯¹è±¡å†³å®šåˆ›å»ºå‡ºå“ªä¸€ä¸ªäº§å“ç±»çš„å®ä¾‹ï¼›å±äº&lt;code&gt;åˆ›å»ºå‹æ¨¡å¼&lt;</summary>
      
    
    
    
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="http://example.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹ç¾-åŸå‹æ¨¡å¼</title>
    <link href="http://example.com/wiki/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%BE%8E-%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F/"/>
    <id>http://example.com/wiki/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%BE%8E-%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F/</id>
    <published>2021-08-07T11:31:43.000Z</published>
    <updated>2021-08-07T11:39:12.030Z</updated>
    
    <content type="html"><![CDATA[<h1 id="åŸå‹æ¨¡å¼"><a href="#åŸå‹æ¨¡å¼" class="headerlink" title="åŸå‹æ¨¡å¼"></a>åŸå‹æ¨¡å¼</h1><p>åŸå‹æ¨¡å¼ï¼ˆPrototype Patternï¼‰æŒ‡åŸå‹å®ä¾‹æŒ‡å®šåˆ›å»ºå¯¹è±¡çš„ç§ç±»ï¼Œå¹¶ä¸”é€šè¿‡å¤åˆ¶è¿™äº›åŸå‹åˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œå±äºåˆ›<br>å»ºå‹æ¨¡å¼ï¼›</p><p>åŸå‹æ¨¡å¼çš„æ ¸å¿ƒåœ¨äºå¤åˆ¶åŸå‹å¯¹è±¡ã€‚ä»¥ç³»ç»Ÿä¸­å·²å­˜åœ¨çš„ä¸€ä¸ªå¯¹è±¡ä¸ºåŸå‹ï¼Œç›´æ¥åŸºäºå†…å­˜äºŒè¿›åˆ¶æµè¿›è¡Œå¤åˆ¶ï¼Œä¸éœ€è¦<br>å†ç²¾åŠ›è€—æ—¶çš„å¯¹è±¡åˆå§‹åŒ–è¿‡ç¨‹ï¼ˆä¸è°ƒç”¨æ„é€ å‡½æ•°ï¼‰ï¼Œæ€§èƒ½æå‡å¾ˆå¤šã€‚å½“å¯¹è±¡çš„æ„é€ è¿‡ç¨‹æ¯”è¾ƒè€—æ—¶æ—¶ï¼Œå¯ä»¥æŠŠå½“å‰ç³»ç»Ÿ<br>å·²å­˜åœ¨çš„å¯¹è±¡ä½œä¸ºåŸå‹ï¼Œå¯¹å…¶è¿›è¡Œå¤åˆ¶ï¼ˆä¸€èˆ¬æ˜¯åŸºäºäºŒè¿›åˆ¶æµçš„å¤åˆ¶ï¼‰ï¼Œèº²é¿åˆå§‹åŒ–è¿‡ç¨‹ï¼Œä½¿å¾—æ–°å¯¹è±¡çš„åˆ›å»ºæ—¶é—´å¤§å¤§ç¼©çŸ­ï¼›</p><h2 id="åŸå‹æ¨¡å¼ç±»å›¾"><a href="#åŸå‹æ¨¡å¼ç±»å›¾" class="headerlink" title="åŸå‹æ¨¡å¼ç±»å›¾"></a>åŸå‹æ¨¡å¼ç±»å›¾</h2><p><img src="https://oscimg.oschina.net/oscnet/up-85e3522fe29b05e31c4957bbcdf82eeba4c.png"></p><h3 id="IPrototype-å®šä¹‰å…‹éš†çš„æ–¹æ³•-ç±»ä¼¼äºJDKè‡ªå¸¦çš„Cloneable"><a href="#IPrototype-å®šä¹‰å…‹éš†çš„æ–¹æ³•-ç±»ä¼¼äºJDKè‡ªå¸¦çš„Cloneable" class="headerlink" title="IPrototype å®šä¹‰å…‹éš†çš„æ–¹æ³• ç±»ä¼¼äºJDKè‡ªå¸¦çš„Cloneable"></a>IPrototype å®šä¹‰å…‹éš†çš„æ–¹æ³• ç±»ä¼¼äºJDKè‡ªå¸¦çš„Cloneable</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IPrototype</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function">T <span class="title">clone</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ConcretePrototype-å…·ä½“çš„è¦å…‹éš†çš„å¯¹è±¡"><a href="#ConcretePrototype-å…·ä½“çš„è¦å…‹éš†çš„å¯¹è±¡" class="headerlink" title="ConcretePrototype å…·ä½“çš„è¦å…‹éš†çš„å¯¹è±¡"></a>ConcretePrototype å…·ä½“çš„è¦å…‹éš†çš„å¯¹è±¡</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcretePrototype</span> <span class="keyword">implements</span> <span class="title">IPrototype</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¯èƒ½æˆ‘ä»¬å¹³æ—¶éƒ½è¿™ä¹ˆå»å¤åˆ¶å¯¹è±¡</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ConcretePrototype <span class="title">clone</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        ConcretePrototype concretePrototype = <span class="keyword">new</span> ConcretePrototype();</span><br><span class="line">        concretePrototype.setAge(<span class="keyword">this</span>.age);</span><br><span class="line">        concretePrototype.setName(<span class="keyword">this</span>.name);</span><br><span class="line">        <span class="keyword">return</span> concretePrototype;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ConcretePrototype&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Client-å®¢æˆ·ç«¯-æµ‹è¯•"><a href="#Client-å®¢æˆ·ç«¯-æµ‹è¯•" class="headerlink" title="Client å®¢æˆ·ç«¯ æµ‹è¯•"></a>Client å®¢æˆ·ç«¯ æµ‹è¯•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">     <span class="comment">//åˆ›å»ºåŸå‹å¯¹è±¡</span></span><br><span class="line">     ConcretePrototype prototype = <span class="keyword">new</span> ConcretePrototype();</span><br><span class="line">     prototype.setAge(<span class="number">18</span>);</span><br><span class="line">     prototype.setName(<span class="string">&quot;Tom&quot;</span>);</span><br><span class="line">     System.out.println(prototype);</span><br><span class="line"></span><br><span class="line">     <span class="comment">//æ‹·è´åŸå‹å¯¹è±¡</span></span><br><span class="line">     ConcretePrototype cloneType = prototype.clone();</span><br><span class="line">     System.out.println(cloneType);</span><br><span class="line">     System.err.println(cloneType == prototype);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ConcretePrototype&#123;age=<span class="number">18</span>, name=<span class="string">&#x27;Tom&#x27;</span>&#125;</span><br><span class="line">ConcretePrototype&#123;age=<span class="number">18</span>, name=<span class="string">&#x27;Tom&#x27;</span>&#125;</span><br><span class="line"><span class="keyword">false</span> </span><br></pre></td></tr></table></figure><h3 id="å®ç°JDK-Cloneableçš„å…‹éš†å¯¹è±¡å†™æ³•"><a href="#å®ç°JDK-Cloneableçš„å…‹éš†å¯¹è±¡å†™æ³•" class="headerlink" title="å®ç°JDK Cloneableçš„å…‹éš†å¯¹è±¡å†™æ³•"></a>å®ç°JDK Cloneableçš„å…‹éš†å¯¹è±¡å†™æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcretePrototype1</span> <span class="keyword">implements</span> <span class="title">Cloneable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ConcretePrototype1 <span class="title">clone</span><span class="params">()</span>  </span>&#123;</span><br><span class="line">        Object clone = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            clone = <span class="keyword">super</span>.clone();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (CloneNotSupportedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            System.err.println(<span class="string">&quot;Clone Error!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (ConcretePrototype1) clone;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ConcretePrototype&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœåŒä¸Šï¼›ä»¥ä¸Šçš„ä¸¤ä¸ªå±æ€§éƒ½æ˜¯åŸºæœ¬æ•°æ®ç±»å‹å’ŒStringï¼Œå¹¶æ²¡æœ‰å¼•ç”¨ç±»å‹ï¼Œä¸‹é¢æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªå¼•ç”¨ç±»å‹çš„å±æ€§æµ‹è¯•ä»¥ä¸‹ğŸ‘‡ğŸ‘‡  </p><h3 id="ConcretePrototypeæ·»åŠ ä¸€ä¸ªListç±»å‹å±æ€§"><a href="#ConcretePrototypeæ·»åŠ ä¸€ä¸ªListç±»å‹å±æ€§" class="headerlink" title="ConcretePrototypeæ·»åŠ ä¸€ä¸ªListç±»å‹å±æ€§"></a>ConcretePrototypeæ·»åŠ ä¸€ä¸ªListç±»å‹å±æ€§</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcretePrototype</span> <span class="keyword">implements</span> <span class="title">IPrototype</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; hobbies;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">getHobbies</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> hobbies;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHobbies</span><span class="params">(List&lt;String&gt; hobbies)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.hobbies = hobbies;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ConcretePrototype <span class="title">clone</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        ConcretePrototype concretePrototype = <span class="keyword">new</span> ConcretePrototype();</span><br><span class="line">        concretePrototype.setAge(<span class="keyword">this</span>.age);</span><br><span class="line">        concretePrototype.setName(<span class="keyword">this</span>.name);</span><br><span class="line">        concretePrototype.setHobbies(<span class="keyword">this</span>.hobbies);</span><br><span class="line">        <span class="keyword">return</span> concretePrototype;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ConcretePrototype&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, hobbies=&quot;</span> + hobbies +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="SETTERæ–¹æ³•å®ç°æµ…å…‹éš†"><a href="#SETTERæ–¹æ³•å®ç°æµ…å…‹éš†" class="headerlink" title="SETTERæ–¹æ³•å®ç°æµ…å…‹éš†"></a>SETTERæ–¹æ³•å®ç°æµ…å…‹éš†</h3><img src="https://cdn.jsdelivr.net/gh/zabernism/image@main/gao/up-569ebf8ef5519ace6b434b1301d87165f2c.png" style="zoom:50%;" /><blockquote><p>æµ…å…‹éš†ä¹Ÿå«æµ…æ‹·è´ï¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œæ–°å¯¹è±¡çš„å±æ€§å’ŒåŸæ¥å¯¹è±¡å®Œå…¨ç›¸åŒï¼Œå¯¹äºéåŸºæœ¬ç±»å‹å±æ€§ï¼Œä»æŒ‡å‘åŸæœ‰å±æ€§æ‰€æŒ‡å‘çš„å¯¹è±¡çš„å†…å­˜åœ°å€ã€‚  </p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºåŸå‹å¯¹è±¡</span></span><br><span class="line">        ConcretePrototype1 prototype = <span class="keyword">new</span> ConcretePrototype1();</span><br><span class="line">        prototype.setAge(<span class="number">18</span>);</span><br><span class="line">        prototype.setName(<span class="string">&quot;Tom&quot;</span>);</span><br><span class="line">        ArrayList&lt;String&gt; strings = Lists.newArrayList(<span class="string">&quot;æ•°å­¦&quot;</span>, <span class="string">&quot;è‹±è¯­&quot;</span>);</span><br><span class="line">        prototype.setHobbies(strings);</span><br><span class="line">        System.out.println(prototype);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ‹·è´åŸå‹å¯¹è±¡</span></span><br><span class="line">        ConcretePrototype1 cloneType = prototype.clone();</span><br><span class="line">        cloneType.getHobbies().add(<span class="string">&quot;è¯­æ–‡&quot;</span>);</span><br><span class="line">        System.out.println(cloneType);</span><br><span class="line">        System.out.println(prototype);</span><br><span class="line">        System.err.println(cloneType == prototype);</span><br><span class="line">        System.err.println(cloneType.getHobbies() == prototype.getHobbies());</span><br><span class="line">    &#125;</span><br><span class="line">è¾“å‡ºç»“æœï¼š</span><br><span class="line">ConcretePrototype1&#123;age=<span class="number">18</span>, name=<span class="string">&#x27;Tom&#x27;</span>, hobbies=[æ•°å­¦, è‹±è¯­]&#125;</span><br><span class="line">ConcretePrototype1&#123;age=<span class="number">18</span>, name=<span class="string">&#x27;Tom&#x27;</span>, hobbies=[æ•°å­¦, è‹±è¯­, è¯­æ–‡]&#125;</span><br><span class="line">ConcretePrototype1&#123;age=<span class="number">18</span>, name=<span class="string">&#x27;Tom&#x27;</span>, hobbies=[æ•°å­¦, è‹±è¯­, è¯­æ–‡]&#125;</span><br><span class="line"><span class="keyword">false</span></span><br><span class="line"><span class="comment">// è¿™é‡Œä¸ºä»€ä¹ˆç»“æœæ˜¯trueçœ‹åˆ°ä¸Šé¢ç”»çš„å›¾åº”è¯¥å¯ä»¥çœ‹æ‡‚å§ï¼Œsetæ–¹æ³•å…¶å®æ˜¯å°†listçš„å¼•ç”¨è®¾ç½®è¿‡å»ï¼Œå¹¶ä¸æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„listå†èµ‹å€¼ï¼</span></span><br><span class="line"><span class="keyword">true</span></span><br></pre></td></tr></table></figure><h2 id="é€šè¿‡å†…å­˜å­—èŠ‚æµâ€å…‹éš†â€å¯¹è±¡ï¼Œå®ç°æ·±å…‹éš†"><a href="#é€šè¿‡å†…å­˜å­—èŠ‚æµâ€å…‹éš†â€å¯¹è±¡ï¼Œå®ç°æ·±å…‹éš†" class="headerlink" title="é€šè¿‡å†…å­˜å­—èŠ‚æµâ€å…‹éš†â€å¯¹è±¡ï¼Œå®ç°æ·±å…‹éš†"></a>é€šè¿‡å†…å­˜å­—èŠ‚æµâ€å…‹éš†â€å¯¹è±¡ï¼Œå®ç°æ·±å…‹éš†</h2><img src="https://cdn.jsdelivr.net/gh/zabernism/image@main/gao/up-41df4d66a80f2d0c2bfd87b7fea52ca9ddd.png" style="zoom:50%;" /><blockquote><p>æ·±å…‹éš†ä¹Ÿå«æ·±æ‹·è´ï¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå±æ€§ä¸­å¼•ç”¨çš„å…¶ä»–å¯¹è±¡ä¹Ÿä¼šè¢«å…‹éš†ï¼Œä¸å†æŒ‡å‘åŸæœ‰å¯¹è±¡åœ°å€ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcretePrototypeDeep</span> <span class="keyword">implements</span> <span class="title">Cloneable</span>,<span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; hobbies;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">getHobbies</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> hobbies;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHobbies</span><span class="params">(List&lt;String&gt; hobbies)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.hobbies = hobbies;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åŸºäºå†…å­˜å­—èŠ‚æµç”Ÿæˆå¯¹è±¡</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ConcretePrototypeDeep <span class="title">deepClone</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//å°†å½“å‰å¯¹è±¡ä¿¡æ¯å†™åˆ°å†…å­˜</span></span><br><span class="line">            ByteArrayOutputStream byteArrayOutputStream = <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line">            ObjectOutputStream objectOutputStream = <span class="keyword">new</span> ObjectOutputStream(byteArrayOutputStream);</span><br><span class="line">            objectOutputStream.writeObject(<span class="keyword">this</span>);</span><br><span class="line">            <span class="comment">//ä»å†…å­˜ä¸­è¯»å–å¯¹è±¡ä¿¡æ¯ï¼Œå¼ºåˆ¶è½¬æ¢æˆå½“å‰ç±»å‹</span></span><br><span class="line">            ByteArrayInputStream byteArrayInputStream = <span class="keyword">new</span> ByteArrayInputStream(byteArrayOutputStream.toByteArray());</span><br><span class="line">            ObjectInputStream objectInputStream = <span class="keyword">new</span> ObjectInputStream(byteArrayInputStream);</span><br><span class="line">            <span class="keyword">return</span> (ConcretePrototypeDeep) objectInputStream.readObject();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException ioException) &#123;</span><br><span class="line">            ioException.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ConcretePrototype&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, hobbies=&quot;</span> + hobbies +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœï¼š  </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ConcretePrototype&#123;age=<span class="number">18</span>, name=<span class="string">&#x27;Tom&#x27;</span>, hobbies=[æ•°å­¦, è‹±è¯­]&#125;</span><br><span class="line">ConcretePrototype&#123;age=<span class="number">18</span>, name=<span class="string">&#x27;Tom&#x27;</span>, hobbies=[æ•°å­¦, è‹±è¯­, è¯­æ–‡]&#125;</span><br><span class="line">ConcretePrototype&#123;age=<span class="number">18</span>, name=<span class="string">&#x27;Tom&#x27;</span>, hobbies=[æ•°å­¦, è‹±è¯­]&#125;</span><br><span class="line"><span class="keyword">false</span></span><br><span class="line"><span class="keyword">false</span></span><br></pre></td></tr></table></figure><p>åœ¨Javaè¯­è¨€ä¸­ï¼Œå¦‚æœéœ€è¦å®ç°æ·±å…‹éš†ï¼Œå¯ä»¥é€šè¿‡è¦†ç›–Objectç±»çš„clone()æ–¹æ³•å®ç°ï¼Œä¹Ÿå¯ä»¥é€šè¿‡åºåˆ—åŒ–(Serialization)ç­‰æ–¹å¼æ¥å®ç°ã€‚</p><blockquote><p>è¦å®ç°æ·±æ‹·è´ï¼Œå¿…é¡»å®ç°Cloneableæ¥å£ï¼Œå»é‡å†™cloneæ–¹æ³•ï¼Œå¦åˆ™ä¼šæŠ›å‡ºCloneNotSupportedExceptionå¼‚å¸¸ï¼Œ<br>ä½†æ˜¯å¦‚æœå¯¹è±¡ä¸­åŒ…å«å¾ˆå¤šå¼•ç”¨ç±»å‹çš„å±æ€§ï¼Œè¿™æ ·å»è¦†ç›–cloneæ–¹æ³•å…¶å®æ˜¯å¾ˆéº»çƒ¦çš„ï¼Œå¯ä»¥ä¼˜å…ˆä½¿ç”¨åºåˆ—åŒ–çš„æ–¹å¼å®ç°ï¼    </p></blockquote><h2 id="å…‹éš†ç ´åå•ä¾‹æ¨¡å¼"><a href="#å…‹éš†ç ´åå•ä¾‹æ¨¡å¼" class="headerlink" title="å…‹éš†ç ´åå•ä¾‹æ¨¡å¼"></a>å…‹éš†ç ´åå•ä¾‹æ¨¡å¼</h2><p>å¦‚æœæˆ‘ä»¬å…‹éš†çš„ç›®æ ‡çš„å¯¹è±¡æ˜¯å•ä¾‹å¯¹è±¡ï¼Œè¿™ä¾¿æ„å‘³ç€ï¼Œæ·±å…‹éš†ä¼šç ´åå•ä¾‹ã€‚è§£å†³ä»¥ä¸Šé—®é¢˜çš„æ€è·¯ï¼š</p><ul><li><strong>ç¦æ­¢æ·±å…‹éš†</strong></li><li><strong>åœ¨å•ä¾‹å¯¹è±¡çš„getInstanceæ–¹æ³•ï¼Œè¿”å›å½“å‰å¯¹è±¡ï¼Œè€Œä¸æ˜¯å»æ–°åˆ›å»ºä¸€ä¸ªå¯¹è±¡æˆ–è€…é€šè¿‡å†…å­˜å­—èŠ‚æµç­‰æ–¹æ³•ç”Ÿæˆå¯¹è±¡</strong></li></ul><h2 id="åŸå‹æ¨¡å¼åœ¨Javaä¸­çš„åº”ç”¨"><a href="#åŸå‹æ¨¡å¼åœ¨Javaä¸­çš„åº”ç”¨" class="headerlink" title="åŸå‹æ¨¡å¼åœ¨Javaä¸­çš„åº”ç”¨"></a>åŸå‹æ¨¡å¼åœ¨Javaä¸­çš„åº”ç”¨</h2><p>ArrayListåº•å±‚æ˜¯åŸºäºæ•°ç»„ç»“æœçš„ï¼Œå®ƒçš„åŠ¨æ€æ‰©å®¹è¿‡ç¨‹æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œå¹¶æŠŠæ•°ç»„ä¸­çš„å…ƒç´ æ‹·è´è¿‡å»ï¼Œç”¨æ–°çš„æ•°ç»„æ¥ç»§ç»­å­˜æ”¾å…ƒç´ ï¼›<br>åœ¨åˆ›å»ºæ–°æ•°ç»„çš„è¿‡ç¨‹ä¸­ä¾¿ä½¿ç”¨äº†åŸå‹æ¨¡å¼ã€‚</p><h3 id="java-util-ArrayList-clone"><a href="#java-util-ArrayList-clone" class="headerlink" title="java.util.ArrayList.clone"></a>java.util.ArrayList.clone</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">clone</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        ArrayList&lt;?&gt; v = (ArrayList&lt;?&gt;) <span class="keyword">super</span>.clone();</span><br><span class="line">        v.elementData = Arrays.copyOf(elementData, size);</span><br><span class="line">        v.modCount = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> v;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (CloneNotSupportedException e) &#123;</span><br><span class="line">        <span class="comment">// this shouldn&#x27;t happen, since we are Cloneable</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> InternalError(e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="java-util-Arrays-copyOf-T-int"><a href="#java-util-Arrays-copyOf-T-int" class="headerlink" title="java.util.Arrays.copyOf(T[], int)"></a>java.util.Arrays.copyOf(T[], int)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; T[] copyOf(T[] original, <span class="keyword">int</span> newLength) &#123;</span><br><span class="line">       <span class="keyword">return</span> (T[]) copyOf(original, newLength, original.getClass());</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h3 id="java-util-Arrays-copyOf-U-int-java-lang-Class-lt-extends-T-gt"><a href="#java-util-Arrays-copyOf-U-int-java-lang-Class-lt-extends-T-gt" class="headerlink" title="java.util.Arrays.copyOf(U[], int, java.lang.Class&lt;? extends T[]&gt;)"></a>java.util.Arrays.copyOf(U[], int, java.lang.Class&lt;? extends T[]&gt;)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T,U&gt; T[] copyOf(U[] original, <span class="keyword">int</span> newLength, Class&lt;? extends T[]&gt; newType) &#123;</span><br><span class="line">        <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">        T[] copy = ((Object)newType == (Object)Object[].class)</span><br><span class="line">            ? (T[]) <span class="keyword">new</span> Object[newLength]</span><br><span class="line">            : (T[]) Array.newInstance(newType.getComponentType(), newLength);</span><br><span class="line">        System.arraycopy(original, <span class="number">0</span>, copy, <span class="number">0</span>,</span><br><span class="line">                         Math.min(original.length, newLength));</span><br><span class="line">        <span class="keyword">return</span> copy;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆè¿˜æ˜¯System.arraycopy(original, 0, copy, 0,<br>                             Math.min(original.length, newLength));è¿™ä¸ªæ–¹æ³•æ¥å®Œæˆæ•°ç»„çš„æ‹·è´ï¼<br>åƒæˆ‘ä»¬ä½¿ç”¨çš„ </p><p><code>com.alibaba.fastjson.JSON#parseObject</code></p><p>org.springframework.beans.BeanUtils#copyProperties(java.lang.Object, java.lang.Object)`</p><p>ç­‰éƒ½æ˜¯åŸå‹æ¨¡å¼ï¼›</p><h2 id="åŸå‹æ¨¡å¼é€‚ç”¨åœºæ™¯"><a href="#åŸå‹æ¨¡å¼é€‚ç”¨åœºæ™¯" class="headerlink" title="åŸå‹æ¨¡å¼é€‚ç”¨åœºæ™¯"></a>åŸå‹æ¨¡å¼é€‚ç”¨åœºæ™¯</h2><ul><li><strong>ç±»åˆå§‹åŒ–æ¶ˆè€—èµ„æºè¿‡å¤š</strong>  </li><li><strong>newä¸€ä¸ªå¯¹è±¡éœ€è¦å¾ˆå¤šç¹ççš„è¿‡ç¨‹ï¼ˆæ•°æ®å‡†å¤‡ï¼Œè®¿é—®æƒé™ç­‰ï¼‰</strong>  </li><li><strong>æ„é€ å‡½æ•°æ¯”è¾ƒå¤æ‚</strong></li><li><strong>å¾ªç¯ä½“å†…äº§ç”Ÿå¤§é‡å¯¹è±¡æ—¶</strong></li></ul><h2 id="åŸå‹æ¨¡å¼çš„ä¼˜ç‚¹"><a href="#åŸå‹æ¨¡å¼çš„ä¼˜ç‚¹" class="headerlink" title="åŸå‹æ¨¡å¼çš„ä¼˜ç‚¹"></a>åŸå‹æ¨¡å¼çš„ä¼˜ç‚¹</h2><ul><li><strong>Javaè‡ªå¸¦çš„åŸå‹æ¨¡å¼æ˜¯åŸºäºå†…å­˜äºŒè¿›åˆ¶æµçš„å¤åˆ¶ï¼Œåœ¨æ€§èƒ½ä¸Šæ¯”ç›´æ¥åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ›´åŠ ä¼˜è‰¯</strong></li><li><strong>å¯ä»¥ä½¿ç”¨æ·±å…‹éš†çš„æ–¹å¼ä¿å­˜å¯¹è±¡çš„çŠ¶æ€ï¼Œä½¿ç”¨åŸå‹æ¨¡å¼å°†å¯¹è±¡å¤åˆ¶ä¸€ä»½ï¼Œå¹¶å°†å…¶çŠ¶æ€ä¿å­˜èµ·æ¥ï¼Œç®€åŒ–äº†åˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹ï¼Œ<br>ä»¥ä¾¿åœ¨éœ€è¦çš„æ—¶å€™ä½¿ç”¨ï¼Œå¯è¾…åŠ©å®ç°æ’¤é”€æ“ä½œã€‚</strong></li></ul><h2 id="åŸå‹æ¨¡å¼çš„ç¼ºç‚¹"><a href="#åŸå‹æ¨¡å¼çš„ç¼ºç‚¹" class="headerlink" title="åŸå‹æ¨¡å¼çš„ç¼ºç‚¹"></a>åŸå‹æ¨¡å¼çš„ç¼ºç‚¹</h2><ul><li><strong>éœ€è¦ä¸ºæ¯ä¸€ä¸ªç±»éƒ½é…ç½®ä¸€ä¸ª clone æ–¹æ³•</strong></li><li><strong>clone æ–¹æ³•ä½äºç±»çš„å†…éƒ¨ï¼Œå½“å¯¹å·²æœ‰ç±»è¿›è¡Œæ”¹é€ çš„æ—¶å€™ï¼Œéœ€è¦ä¿®æ”¹ä»£ç ï¼Œè¿èƒŒäº†å¼€é—­åŸåˆ™</strong></li><li><strong>å½“å®ç°æ·±å…‹éš†æ—¶ï¼Œéœ€è¦ç¼–å†™è¾ƒä¸ºå¤æ‚çš„ä»£ç ï¼Œè€Œä¸”å½“å¯¹è±¡ä¹‹é—´å­˜åœ¨å¤šé‡åµŒå¥—å¼•ç”¨æ—¶ï¼Œä¸ºäº†å®ç°æ·±å…‹éš†ï¼Œæ¯ä¸€å±‚å¯¹è±¡å¯¹åº”çš„ç±»éƒ½å¿…é¡»æ”¯æŒæ·±å…‹éš†ï¼Œ<br>å®ç°èµ·æ¥ä¼šæ¯”è¾ƒéº»çƒ¦ã€‚å› æ­¤ï¼Œæ·±å…‹éš†ã€æµ…å…‹éš†éœ€è¦è¿ç”¨å¾—å½“</strong></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;åŸå‹æ¨¡å¼&quot;&gt;&lt;a href=&quot;#åŸå‹æ¨¡å¼&quot; class=&quot;headerlink&quot; title=&quot;åŸå‹æ¨¡å¼&quot;&gt;&lt;/a&gt;åŸå‹æ¨¡å¼&lt;/h1&gt;&lt;p&gt;åŸå‹æ¨¡å¼ï¼ˆPrototype Patternï¼‰æŒ‡åŸå‹å®ä¾‹æŒ‡å®šåˆ›å»ºå¯¹è±¡çš„ç§ç±»ï¼Œå¹¶ä¸”é€šè¿‡å¤åˆ¶è¿™äº›åŸå‹åˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œå±äºåˆ›&lt;br&gt;</summary>
      
    
    
    
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="http://example.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
</feed>
