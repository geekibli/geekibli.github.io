<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>GeekIBLi</title>
  
  <subtitle>For Coder</subtitle>
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2021-07-05T05:45:52.961Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>gaolei</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>canalåŒæ­¥mysqlæ•°æ®åˆ°elasticsearch</title>
    <link href="http://example.com/wiki/canal%E5%90%8C%E6%AD%A5mysql%E6%95%B0%E6%8D%AE%E5%88%B0elasticsearch/"/>
    <id>http://example.com/wiki/canal%E5%90%8C%E6%AD%A5mysql%E6%95%B0%E6%8D%AE%E5%88%B0elasticsearch/</id>
    <published>2021-07-05T03:26:50.000Z</published>
    <updated>2021-07-05T05:45:52.961Z</updated>
    
    <content type="html"><![CDATA[<h2 id="é¦–å…ˆå®‰è£…elk"><a href="#é¦–å…ˆå®‰è£…elk" class="headerlink" title="é¦–å…ˆå®‰è£…elk"></a>é¦–å…ˆå®‰è£…elk</h2><p>æ¨èå¤§å®¶åˆ°elasicä¸­æ–‡ç¤¾åŒºå»ä¸‹è½½ ğŸ‘‰ <a href="https://elasticsearch.cn/">ã€ä¼ é€ã€‘</a><br>âš ï¸ elastcisearch | logstash | kibana çš„ç‰ˆæœ¬æœ€å¥½ä¿æŒä¸€ç›´ï¼Œå¦åˆ™ä¼šå‡ºç°å¾ˆå¤šå‘çš„ï¼Œåˆ‡è®°ï¼</p><p>å®‰è£…ELKçš„æ­¥éª¤è¿™é‡Œå°±ä¸åšä»‹ç»äº†ï¼Œå¯ä»¥æŸ¥çœ‹ ğŸ‘‰ ã€TODOã€‘</p><h2 id="ä¸‹è½½å®‰è£…canal-adapter"><a href="#ä¸‹è½½å®‰è£…canal-adapter" class="headerlink" title="ä¸‹è½½å®‰è£…canal-adapter"></a>ä¸‹è½½å®‰è£…canal-adapter</h2><p>canal githubä¼ é€é—¨ ğŸ‘‰  <a href="https://github.com/alibaba/canal">ã€Alibaba Canalã€‘</a></p><h3 id="canal-client-æ¨¡å¼"><a href="#canal-client-æ¨¡å¼" class="headerlink" title="canal-client æ¨¡å¼"></a>canal-client æ¨¡å¼</h3><p>å¯ä»¥å‚ç…§canalç»™å‡ºçš„exampleé¡¹ç›®å’Œ<a href="https://github.com/alibaba/canal/wiki/ClientExample">å®˜æ–¹æ–‡æ¡£</a>ç»™å‡ºçš„ä¾‹å­æ¥æµ‹è¯•</p><h4 id="ä¾èµ–é…ç½®"><a href="#ä¾èµ–é…ç½®" class="headerlink" title="ä¾èµ–é…ç½®"></a>ä¾èµ–é…ç½®</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.otter<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>canal.client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="åˆ›å»ºmavené¡¹ç›®"><a href="#åˆ›å»ºmavené¡¹ç›®" class="headerlink" title="åˆ›å»ºmavené¡¹ç›®"></a>åˆ›å»ºmavené¡¹ç›®</h4><p>ä¿è¯canal-server å·²ç»æ­£ç¡®å¯åŠ¨ ğŸ‘ˆ  ç„¶åå¯åŠ¨ä¸‹é¢æœåŠ¡ï¼Œæ“ä½œæ•°æ®åº“å³å¯çœ‹åˆ°æ§åˆ¶å°çš„æ—¥å¿—è¾“å‡ºï¼›</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.redtom.canal.deploy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.otter.canal.client.CanalConnector;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.otter.canal.client.CanalConnectors;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.otter.canal.protocol.CanalEntry;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.otter.canal.protocol.Message;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.InitializingBean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.net.InetSocketAddress;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> gaolei</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2021/6/30 2:57 ä¸‹åˆ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CanalClient</span> <span class="keyword">implements</span> <span class="title">InitializingBean</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> BATCH_SIZE = <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterPropertiesSet</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºé“¾æ¥</span></span><br><span class="line">        CanalConnector connector = CanalConnectors.newSingleConnector(<span class="keyword">new</span> InetSocketAddress(<span class="string">&quot;***.***.***.***&quot;</span>, <span class="number">11111</span>),</span><br><span class="line">                <span class="string">&quot;example&quot;</span>, <span class="string">&quot;canal&quot;</span>, <span class="string">&quot;canal&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//æ‰“å¼€è¿æ¥</span></span><br><span class="line">            connector.connect();</span><br><span class="line">            <span class="comment">//è®¢é˜…æ•°æ®åº“è¡¨,å…¨éƒ¨è¡¨</span></span><br><span class="line">            connector.subscribe(<span class="string">&quot;.*\\..*&quot;</span>);</span><br><span class="line">            <span class="comment">//å›æ»šåˆ°æœªè¿›è¡Œackçš„åœ°æ–¹ï¼Œä¸‹æ¬¡fetchçš„æ—¶å€™ï¼Œå¯ä»¥ä»æœ€åä¸€ä¸ªæ²¡æœ‰ackçš„åœ°æ–¹å¼€å§‹æ‹¿</span></span><br><span class="line">            connector.rollback();</span><br><span class="line">            <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">                <span class="comment">// è·å–æŒ‡å®šæ•°é‡çš„æ•°æ®</span></span><br><span class="line">                Message message = connector.getWithoutAck(BATCH_SIZE);</span><br><span class="line">                <span class="comment">//è·å–æ‰¹é‡ID</span></span><br><span class="line">                <span class="keyword">long</span> batchId = message.getId();</span><br><span class="line">                <span class="comment">//è·å–æ‰¹é‡çš„æ•°é‡</span></span><br><span class="line">                <span class="keyword">int</span> size = message.getEntries().size();</span><br><span class="line">                <span class="comment">//å¦‚æœæ²¡æœ‰æ•°æ®</span></span><br><span class="line">                <span class="keyword">if</span> (batchId == -<span class="number">1</span> || size == <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        <span class="comment">//çº¿ç¨‹ä¼‘çœ 2ç§’</span></span><br><span class="line">                        Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">//å¦‚æœæœ‰æ•°æ®,å¤„ç†æ•°æ®</span></span><br><span class="line">                    printEntry(message.getEntries());</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//è¿›è¡Œ batch id çš„ç¡®è®¤ã€‚ç¡®è®¤ä¹‹åï¼Œå°äºç­‰äºæ­¤ batchId çš„ Message éƒ½ä¼šè¢«ç¡®è®¤ã€‚</span></span><br><span class="line">                connector.ack(batchId);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            connector.disconnect();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰“å°canal serverè§£æbinlogè·å¾—çš„å®ä½“ç±»ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printEntry</span><span class="params">(List&lt;CanalEntry.Entry&gt; entrys)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (CanalEntry.Entry entry : entrys) &#123;</span><br><span class="line">            <span class="keyword">if</span> (entry.getEntryType() == CanalEntry.EntryType.TRANSACTIONBEGIN || entry.getEntryType() == CanalEntry.EntryType.TRANSACTIONEND) &#123;</span><br><span class="line">                <span class="comment">//å¼€å¯/å…³é—­äº‹åŠ¡çš„å®ä½“ç±»å‹ï¼Œè·³è¿‡</span></span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//RowChangeå¯¹è±¡ï¼ŒåŒ…å«äº†ä¸€è¡Œæ•°æ®å˜åŒ–çš„æ‰€æœ‰ç‰¹å¾</span></span><br><span class="line">            <span class="comment">//æ¯”å¦‚isDdl æ˜¯å¦æ˜¯ddlå˜æ›´æ“ä½œ sql å…·ä½“çš„ddl sql beforeColumns afterColumns å˜æ›´å‰åçš„æ•°æ®å­—æ®µç­‰ç­‰</span></span><br><span class="line">            CanalEntry.RowChange rowChage;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                rowChage = CanalEntry.RowChange.parseFrom(entry.getStoreValue());</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">&quot;ERROR ## parser of eromanga-event has an error , data:&quot;</span> + entry.toString(), e);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//è·å–æ“ä½œç±»å‹ï¼šinsert/update/deleteç±»å‹</span></span><br><span class="line">            CanalEntry.EventType eventType = rowChage.getEventType();</span><br><span class="line">            <span class="comment">//æ‰“å°Headerä¿¡æ¯</span></span><br><span class="line">            log.info(<span class="string">&quot;headers:&#123;&#125; &quot;</span>, String.format(<span class="string">&quot;================ã€‹; binlog[%s:%s] , name[%s,%s] , eventType : %s&quot;</span>,</span><br><span class="line">                    entry.getHeader().getLogfileName(), entry.getHeader().getLogfileOffset(),</span><br><span class="line">                    entry.getHeader().getSchemaName(), entry.getHeader().getTableName(),</span><br><span class="line">                    eventType));</span><br><span class="line">            <span class="comment">//åˆ¤æ–­æ˜¯å¦æ˜¯DDLè¯­å¥</span></span><br><span class="line">            <span class="keyword">if</span> (rowChage.getIsDdl()) &#123;</span><br><span class="line">                log.info(<span class="string">&quot;================ã€‹;isDdl: true,sql: &#123;&#125;&quot;</span>, rowChage.getSql());</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//è·å–RowChangeå¯¹è±¡é‡Œçš„æ¯ä¸€è¡Œæ•°æ®ï¼Œæ‰“å°å‡ºæ¥</span></span><br><span class="line">            <span class="keyword">for</span> (CanalEntry.RowData rowData : rowChage.getRowDatasList()) &#123;</span><br><span class="line">                <span class="comment">//å¦‚æœæ˜¯åˆ é™¤è¯­å¥</span></span><br><span class="line">                <span class="keyword">if</span> (eventType == CanalEntry.EventType.DELETE) &#123;</span><br><span class="line">                    printColumn(rowData.getBeforeColumnsList());</span><br><span class="line">                    <span class="comment">//å¦‚æœæ˜¯æ–°å¢è¯­å¥</span></span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (eventType == CanalEntry.EventType.INSERT) &#123;</span><br><span class="line">                    printColumn(rowData.getAfterColumnsList());</span><br><span class="line">                    <span class="comment">//å¦‚æœæ˜¯æ›´æ–°çš„è¯­å¥</span></span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">//å˜æ›´å‰çš„æ•°æ®</span></span><br><span class="line">                    log.info(<span class="string">&quot;-------&gt;; before&quot;</span>);</span><br><span class="line">                    printColumn(rowData.getBeforeColumnsList());</span><br><span class="line">                    <span class="comment">//å˜æ›´åçš„æ•°æ®</span></span><br><span class="line">                    log.info(<span class="string">&quot;-------&gt;; after&quot;</span>);</span><br><span class="line">                    printColumn(rowData.getAfterColumnsList());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printColumn</span><span class="params">(List&lt;CanalEntry.Column&gt; columns)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (CanalEntry.Column column : columns) &#123;</span><br><span class="line">            log.info(<span class="string">&quot; &#123;&#125; :  &#123;&#125;   update= &#123;&#125;&quot;</span>, column.getName(), column.getValue(), column.getUpdated());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="canal-adapter-æ¨¡å¼"><a href="#canal-adapter-æ¨¡å¼" class="headerlink" title="canal-adapter æ¨¡å¼"></a>canal-adapter æ¨¡å¼</h3><p>adapter é…ç½®æ–‡ä»¶å¦‚ä¸‹</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8081</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">jackson:</span></span><br><span class="line">    <span class="attr">date-format:</span> <span class="string">yyyy-MM-dd</span> <span class="string">HH:mm:ss</span></span><br><span class="line">    <span class="attr">time-zone:</span> <span class="string">GMT+8</span></span><br><span class="line">    <span class="attr">default-property-inclusion:</span> <span class="string">non_null</span></span><br><span class="line"></span><br><span class="line"><span class="attr">canal.conf:</span></span><br><span class="line">  <span class="attr">mode:</span> <span class="string">tcp</span> <span class="comment">#tcp kafka rocketMQ rabbitMQ</span></span><br><span class="line">  <span class="attr">flatMessage:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">zookeeperHosts:</span></span><br><span class="line">  <span class="attr">syncBatchSize:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">batchSize:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">retries:</span> <span class="number">0</span></span><br><span class="line">  <span class="attr">timeout:</span></span><br><span class="line">  <span class="attr">accessKey:</span></span><br><span class="line">  <span class="attr">secretKey:</span></span><br><span class="line">  <span class="attr">consumerProperties:</span></span><br><span class="line">    <span class="comment"># canal tcp consumer</span></span><br><span class="line">    <span class="attr">canal.tcp.server.host:</span> <span class="number">172.25</span><span class="number">.101</span><span class="number">.75</span><span class="string">:11111</span></span><br><span class="line">    <span class="attr">canal.tcp.zookeeper.hosts:</span></span><br><span class="line">    <span class="attr">canal.tcp.batch.size:</span> <span class="number">500</span></span><br><span class="line">    <span class="attr">canal.tcp.username:</span></span><br><span class="line">    <span class="attr">canal.tcp.password:</span></span><br><span class="line">  <span class="attr">srcDataSources:</span></span><br><span class="line">    <span class="attr">defaultDS:</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">jdbc:mysql://xxxx:pppp/database?useUnicode=true</span></span><br><span class="line">      <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">      <span class="attr">password:</span> <span class="string">pwd</span></span><br><span class="line">  <span class="attr">canalAdapters:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">instance:</span> <span class="string">example</span> <span class="comment"># canal instance Name or mq topic name</span></span><br><span class="line">    <span class="attr">groups:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">groupId:</span> <span class="string">g1</span></span><br><span class="line">      <span class="attr">outerAdapters:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">logger</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">es7</span></span><br><span class="line">        <span class="attr">hosts:</span> <span class="number">172.25</span><span class="number">.101</span><span class="number">.75</span><span class="string">:9300</span> <span class="comment"># 127.0.0.1:9200 for rest mode</span></span><br><span class="line">        <span class="attr">properties:</span></span><br><span class="line">          <span class="attr">mode:</span> <span class="string">transport</span> <span class="comment"># or rest</span></span><br><span class="line"><span class="comment">#          # security.auth: test:123456 #  only used for rest mode</span></span><br><span class="line">          <span class="attr">cluster.name:</span> <span class="string">my-application</span></span><br><span class="line"><span class="comment">#        - name: kudu</span></span><br><span class="line"><span class="comment">#          key: kudu</span></span><br><span class="line"><span class="comment">#          properties:</span></span><br><span class="line"><span class="comment">#            kudu.master.address: 127.0.0.1 # &#x27;,&#x27; split multi address</span></span><br></pre></td></tr></table></figure><p>æˆ‘çš„elasticsearchæ˜¯7.10.0ç‰ˆæœ¬çš„<br><code>application.yml  bootstrap.yml  es6  es7  hbase  kudu  logback.xml  META-INF  rdb</code><br>æ‰€ä»¥ï¼šğŸ‘‡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd es7</span><br><span class="line">biz_order.yml  customer.yml  mytest_user.yml</span><br><span class="line">vim customer.yml</span><br></pre></td></tr></table></figure><p>customer.yml é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dataSourceKey:</span> <span class="string">defaultDS</span></span><br><span class="line"><span class="attr">destination:</span> <span class="string">example</span></span><br><span class="line"><span class="attr">groupId:</span> <span class="string">g1</span></span><br><span class="line"><span class="attr">esMapping:</span></span><br><span class="line">  <span class="attr">_index:</span> <span class="string">customer</span></span><br><span class="line">  <span class="attr">_id:</span> <span class="string">id</span></span><br><span class="line">  <span class="attr">relations:</span></span><br><span class="line">    <span class="attr">customer_order:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">customer</span></span><br><span class="line">  <span class="attr">sql:</span> <span class="string">&quot;select t.id, t.name, t.email from customer t&quot;</span></span><br><span class="line">  <span class="attr">etlCondition:</span> <span class="string">&quot;where t.c_time&gt;=&#123;&#125;&quot;</span></span><br><span class="line">  <span class="attr">commitBatch:</span> <span class="number">3000</span></span><br></pre></td></tr></table></figure><h4 id="åˆ›å»ºè¡¨ç»“æ„"><a href="#åˆ›å»ºè¡¨ç»“æ„" class="headerlink" title="åˆ›å»ºè¡¨ç»“æ„"></a>åˆ›å»ºè¡¨ç»“æ„</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `customer` (</span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `name` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `email` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `order_id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `order_serial` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `order_time` datetime <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `customer_order` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `c_time` datetime <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span></span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4;</span><br></pre></td></tr></table></figure><h4 id="åˆ›å»ºç´¢å¼•"><a href="#åˆ›å»ºç´¢å¼•" class="headerlink" title="åˆ›å»ºç´¢å¼•"></a>åˆ›å»ºç´¢å¼•</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">PUT customer</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;mappings&quot;</span>:&#123;</span><br><span class="line">      <span class="attr">&quot;properties&quot;</span>:&#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: &#123;</span><br><span class="line">          <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;long&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;name&quot;</span>: &#123;</span><br><span class="line">         <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;text&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;email&quot;</span>: &#123;</span><br><span class="line">          <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;text&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;order_id&quot;</span>: &#123;</span><br><span class="line">          <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;long&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;order_serial&quot;</span>: &#123;</span><br><span class="line">          <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;text&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;order_time&quot;</span>: &#123;</span><br><span class="line">          <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;date&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;customer_order&quot;</span>:&#123;</span><br><span class="line">          <span class="attr">&quot;type&quot;</span>:<span class="string">&quot;join&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;relations&quot;</span>:&#123;</span><br><span class="line">            <span class="attr">&quot;customer&quot;</span>:<span class="string">&quot;order&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æµ‹è¯•canal-adapteråŒæ­¥æ•ˆæœ"><a href="#æµ‹è¯•canal-adapteråŒæ­¥æ•ˆæœ" class="headerlink" title="æµ‹è¯•canal-adapteråŒæ­¥æ•ˆæœ"></a>æµ‹è¯•canal-adapteråŒæ­¥æ•ˆæœ</h4><h5 id="åˆ›å»ºä¸€æ¡è®°å½•"><a href="#åˆ›å»ºä¸€æ¡è®°å½•" class="headerlink" title="åˆ›å»ºä¸€æ¡è®°å½•"></a>åˆ›å»ºä¸€æ¡è®°å½•</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2021-07-05 11:50:53.725 [pool-3-thread-1] DEBUG c.a.o.canal.client.adapter.es.core.service.ESSyncService - DML: &#123;&quot;data&quot;:[&#123;&quot;id&quot;:1,&quot;name&quot;:&quot;1&quot;,&quot;email&quot;:&quot;1&quot;,&quot;order_id&quot;:1,&quot;order_serial&quot;:&quot;1&quot;,&quot;order_time&quot;:1625457046000,&quot;customer_order&quot;:&quot;1&quot;,&quot;c_time&quot;:1625457049000&#125;],&quot;database&quot;:&quot;redtom_dev&quot;,&quot;destination&quot;:&quot;example&quot;,&quot;es&quot;:1625457053000,&quot;groupId&quot;:&quot;g1&quot;,&quot;isDdl&quot;:false,&quot;old&quot;:null,&quot;pkNames&quot;:[],&quot;sql&quot;:&quot;&quot;,&quot;table&quot;:&quot;customer&quot;,&quot;ts&quot;:1625457053724,&quot;type&quot;:&quot;INSERT&quot;&#125;</span><br><span class="line">Affected indexes: customer</span><br></pre></td></tr></table></figure><p>Elastcisearch æ•ˆæœ</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;took&quot;</span> : <span class="number">0</span>,</span><br><span class="line">  <span class="attr">&quot;timed_out&quot;</span> : <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">&quot;_shards&quot;</span> : &#123;</span><br><span class="line">    <span class="attr">&quot;total&quot;</span> : <span class="number">1</span>,</span><br><span class="line">    <span class="attr">&quot;successful&quot;</span> : <span class="number">1</span>,</span><br><span class="line">    <span class="attr">&quot;skipped&quot;</span> : <span class="number">0</span>,</span><br><span class="line">    <span class="attr">&quot;failed&quot;</span> : <span class="number">0</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;hits&quot;</span> : &#123;</span><br><span class="line">    <span class="attr">&quot;total&quot;</span> : &#123;</span><br><span class="line">      <span class="attr">&quot;value&quot;</span> : <span class="number">1</span>,</span><br><span class="line">      <span class="attr">&quot;relation&quot;</span> : <span class="string">&quot;eq&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;max_score&quot;</span> : <span class="number">1.0</span>,</span><br><span class="line">    <span class="attr">&quot;hits&quot;</span> : [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;_index&quot;</span> : <span class="string">&quot;customer&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;_type&quot;</span> : <span class="string">&quot;_doc&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;_id&quot;</span> : <span class="string">&quot;1&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;_score&quot;</span> : <span class="number">1.0</span>,</span><br><span class="line">        <span class="attr">&quot;_source&quot;</span> : &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span> : <span class="string">&quot;1&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;email&quot;</span> : <span class="string">&quot;1&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;customer_order&quot;</span> : &#123;</span><br><span class="line">            <span class="attr">&quot;name&quot;</span> : <span class="string">&quot;customer&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ä¿®æ”¹æ•°æ®"><a href="#ä¿®æ”¹æ•°æ®" class="headerlink" title="ä¿®æ”¹æ•°æ®"></a>ä¿®æ”¹æ•°æ®</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2021-07-05 11:54:36.402 [pool-3-thread-1] DEBUG c.a.o.canal.client.adapter.es.core.service.ESSyncService - DML: &#123;&quot;data&quot;:[&#123;&quot;id&quot;:1,&quot;name&quot;:&quot;2&quot;,&quot;email&quot;:&quot;2&quot;,&quot;order_id&quot;:2,&quot;order_serial&quot;:&quot;2&quot;,&quot;order_time&quot;:1625457046000,&quot;customer_order&quot;:&quot;2&quot;,&quot;c_time&quot;:1625457049000&#125;],&quot;database&quot;:&quot;redtom_dev&quot;,&quot;destination&quot;:&quot;example&quot;,&quot;es&quot;:1625457275000,&quot;groupId&quot;:&quot;g1&quot;,&quot;isDdl&quot;:false,&quot;old&quot;:[&#123;&quot;name&quot;:&quot;1&quot;,&quot;email&quot;:&quot;1&quot;,&quot;order_id&quot;:1,&quot;order_serial&quot;:&quot;1&quot;,&quot;customer_order&quot;:&quot;1&quot;&#125;],&quot;pkNames&quot;:[],&quot;sql&quot;:&quot;&quot;,&quot;table&quot;:&quot;customer&quot;,&quot;ts&quot;:1625457276401,&quot;type&quot;:&quot;UPDATE&quot;&#125;</span><br><span class="line">Affected indexes: customer</span><br></pre></td></tr></table></figure><p>Elastcisearch æ•ˆæœ<br><img src="https://oscimg.oschina.net/oscnet/up-afadff417c35ecb74811967d8e1da10f134.png" width=700 height=400></p><h5 id="åˆ é™¤ä¸€æ¡æ•°æ®"><a href="#åˆ é™¤ä¸€æ¡æ•°æ®" class="headerlink" title="åˆ é™¤ä¸€æ¡æ•°æ®"></a>åˆ é™¤ä¸€æ¡æ•°æ®</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2021-07-05 11:56:51.524 [pool-3-thread-1] DEBUG c.a.o.canal.client.adapter.es.core.service.ESSyncService - DML: &#123;&quot;data&quot;:[&#123;&quot;id&quot;:1,&quot;name&quot;:&quot;2&quot;,&quot;email&quot;:&quot;2&quot;,&quot;order_id&quot;:2,&quot;order_serial&quot;:&quot;2&quot;,&quot;order_time&quot;:1625457046000,&quot;customer_order&quot;:&quot;2&quot;,&quot;c_time&quot;:1625457049000&#125;],&quot;database&quot;:&quot;redtom_dev&quot;,&quot;destination&quot;:&quot;example&quot;,&quot;es&quot;:1625457411000,&quot;groupId&quot;:&quot;g1&quot;,&quot;isDdl&quot;:false,&quot;old&quot;:null,&quot;pkNames&quot;:[],&quot;sql&quot;:&quot;&quot;,&quot;table&quot;:&quot;customer&quot;,&quot;ts&quot;:1625457411523,&quot;type&quot;:&quot;DELETE&quot;&#125;</span><br><span class="line">Affected indexes: customer</span><br></pre></td></tr></table></figure><p>Elastcisearch æ•ˆæœ<br><img src="https://oscimg.oschina.net/oscnet/up-7f49aeda581a547bf528b55bad6d0af27de.png" width=700 height=400></p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><blockquote><ul><li><a href="https://blog.csdn.net/puhaiyang/article/details/100171395">ä½¿ç”¨canal client-adapterå®Œæˆmysqlåˆ°esæ•°æ®åŒæ­¥æ•™ç¨‹(åŒ…æ‹¬å…¨é‡å’Œå¢é‡)</a></li><li><a href="https://github.com/alibaba/canal/issues/1514">es åŒæ­¥é—®é¢˜ #1514 Github issue</a></li></ul></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;é¦–å…ˆå®‰è£…elk&quot;&gt;&lt;a href=&quot;#é¦–å…ˆå®‰è£…elk&quot; class=&quot;headerlink&quot; title=&quot;é¦–å…ˆå®‰è£…elk&quot;&gt;&lt;/a&gt;é¦–å…ˆå®‰è£…elk&lt;/h2&gt;&lt;p&gt;æ¨èå¤§å®¶åˆ°elasicä¸­æ–‡ç¤¾åŒºå»ä¸‹è½½ ğŸ‘‰ &lt;a href=&quot;https://elasticsear</summary>
      
    
    
    
    <category term="Elasticsearch" scheme="http://example.com/categories/Elasticsearch/"/>
    
    
    <category term="elasticsearch" scheme="http://example.com/tags/elasticsearch/"/>
    
  </entry>
  
  <entry>
    <title>mysqlé…ç½®binlog</title>
    <link href="http://example.com/wiki/binlog%E9%85%8D%E7%BD%AE/"/>
    <id>http://example.com/wiki/binlog%E9%85%8D%E7%BD%AE/</id>
    <published>2021-07-05T03:06:36.000Z</published>
    <updated>2021-07-05T03:10:53.525Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å¼€å¯binlog"><a href="#å¼€å¯binlog" class="headerlink" title="å¼€å¯binlog"></a>å¼€å¯binlog</h2><p>[mysqld]<br>log-bin=mysql-bin #æ·»åŠ è¿™ä¸€è¡Œå°±ok<br>binlog-format=ROW #é€‰æ‹©rowæ¨¡å¼<br>server_id=1 #é…ç½®mysql replactionéœ€è¦å®šä¹‰ï¼Œä¸èƒ½å’Œcanalçš„slaveIdé‡å¤  </p><h2 id="æŸ¥çœ‹binlogçŠ¶æ€"><a href="#æŸ¥çœ‹binlogçŠ¶æ€" class="headerlink" title="æŸ¥çœ‹binlogçŠ¶æ€"></a>æŸ¥çœ‹binlogçŠ¶æ€</h2><p>mysql&gt; show variables like â€˜binlog_formatâ€™;</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+---------------+-------+</span><br><span class="line">| Variable_name | Value |</span><br><span class="line">+---------------+-------+</span><br><span class="line">| binlog_format | ROW   |</span><br><span class="line">+---------------+-------+</span><br></pre></td></tr></table></figure><p>show variables like â€˜log_binâ€™;</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+---------------+-------+</span><br><span class="line">| Variable_name | Value |</span><br><span class="line">+---------------+-------+</span><br><span class="line">| log_bin       | ON    |</span><br><span class="line">+---------------+-------+</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;å¼€å¯binlog&quot;&gt;&lt;a href=&quot;#å¼€å¯binlog&quot; class=&quot;headerlink&quot; title=&quot;å¼€å¯binlog&quot;&gt;&lt;/a&gt;å¼€å¯binlog&lt;/h2&gt;&lt;p&gt;[mysqld]&lt;br&gt;log-bin=mysql-bin #æ·»åŠ è¿™ä¸€è¡Œå°±ok&lt;br&gt;bin</summary>
      
    
    
    
    <category term="DataBase" scheme="http://example.com/categories/DataBase/"/>
    
    <category term="MySQl" scheme="http://example.com/categories/DataBase/MySQl/"/>
    
    
    <category term="MySQL" scheme="http://example.com/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>mysqlå¸¸ç”¨å‘½ä»¤</title>
    <link href="http://example.com/wiki/mysql%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
    <id>http://example.com/wiki/mysql%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</id>
    <published>2021-07-05T03:06:36.000Z</published>
    <updated>2021-07-05T03:09:20.881Z</updated>
    
    <content type="html"><![CDATA[<h2 id="binlogç›¸å…³å‘½ä»¤"><a href="#binlogç›¸å…³å‘½ä»¤" class="headerlink" title="binlogç›¸å…³å‘½ä»¤"></a>binlogç›¸å…³å‘½ä»¤</h2><p>mysql&gt; show variables like â€˜binlog_formatâ€™;</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+---------------+-------+</span><br><span class="line">| Variable_name | Value |</span><br><span class="line">+---------------+-------+</span><br><span class="line">| binlog_format | ROW   |</span><br><span class="line">+---------------+-------+</span><br></pre></td></tr></table></figure><p>show variables like â€˜log_binâ€™;</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+---------------+-------+</span><br><span class="line">| Variable_name | Value |</span><br><span class="line">+---------------+-------+</span><br><span class="line">| log_bin       | ON    |</span><br><span class="line">+---------------+-------+</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;binlogç›¸å…³å‘½ä»¤&quot;&gt;&lt;a href=&quot;#binlogç›¸å…³å‘½ä»¤&quot; class=&quot;headerlink&quot; title=&quot;binlogç›¸å…³å‘½ä»¤&quot;&gt;&lt;/a&gt;binlogç›¸å…³å‘½ä»¤&lt;/h2&gt;&lt;p&gt;mysql&amp;gt; show variables like â€˜binlog_</summary>
      
    
    
    
    <category term="DataBase" scheme="http://example.com/categories/DataBase/"/>
    
    <category term="MySQl" scheme="http://example.com/categories/DataBase/MySQl/"/>
    
    
    <category term="MySQL" scheme="http://example.com/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>flinkç®€å•ä¸Šæ‰‹</title>
    <link href="http://example.com/wiki/flink%E7%AE%80%E5%8D%95%E4%B8%8A%E6%89%8B/"/>
    <id>http://example.com/wiki/flink%E7%AE%80%E5%8D%95%E4%B8%8A%E6%89%8B/</id>
    <published>2021-07-04T14:23:43.000Z</published>
    <updated>2021-07-04T15:43:41.031Z</updated>
    
    <content type="html"><![CDATA[<h2 id="mac-å®‰è£…-flink"><a href="#mac-å®‰è£…-flink" class="headerlink" title="mac å®‰è£… flink"></a>mac å®‰è£… flink</h2><p><b>1ã€æ‰§è¡Œ brew install apache-flink å‘½ä»¤</b></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">gaolei:/ gaolei$ brew install apache-flink</span><br><span class="line">Updating Homebrew...</span><br><span class="line">==&gt; Auto-updated Homebrew!</span><br><span class="line">Updated 1 tap (homebrew/services).</span><br><span class="line">No changes to formulae.</span><br><span class="line"></span><br><span class="line">==&gt; Downloading https://archive.apache.org/dist/flink/flink-1.9.1/flink-1.9.1-bin-scala_2.11.tgz</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">####################################################################### 100.0%</span></span></span><br><span class="line">ğŸº  /usr/local/Cellar/apache-flink/1.9.1: 166 files, 277MB, built in 15 minutes 29 seconds</span><br></pre></td></tr></table></figure><p><b>2ã€æ‰§è¡Œflinkå¯åŠ¨è„šæœ¬</b></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/Cellar/apache-flink/1.9.1/libexec/bin</span><br><span class="line">./start-cluster.sh</span><br></pre></td></tr></table></figure><h2 id="WordCountæ‰¹å¤„ç†Demo"><a href="#WordCountæ‰¹å¤„ç†Demo" class="headerlink" title="WordCountæ‰¹å¤„ç†Demo"></a>WordCountæ‰¹å¤„ç†Demo</h2><h3 id="åˆ›å»ºmavené¡¹ç›®ï¼Œå¯¼å…¥ä¾èµ–"><a href="#åˆ›å»ºmavené¡¹ç›®ï¼Œå¯¼å…¥ä¾èµ–" class="headerlink" title="åˆ›å»ºmavené¡¹ç›®ï¼Œå¯¼å…¥ä¾èµ–"></a>åˆ›å»ºmavené¡¹ç›®ï¼Œå¯¼å…¥ä¾èµ–</h3><p> æ³¨æ„è‡ªå·±çš„flinkç‰ˆæœ¬ ğŸ‘‡ğŸ‘‡</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.flink/flink-streaming-java --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.flink<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>flink-streaming-java_2.12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.flink/flink-java --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.flink<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>flink-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.flink<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>flink-clients_2.12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™æ‰¹å¤„ç†ç¨‹åº"><a href="#ç¼–å†™æ‰¹å¤„ç†ç¨‹åº" class="headerlink" title="ç¼–å†™æ‰¹å¤„ç†ç¨‹åº"></a>ç¼–å†™æ‰¹å¤„ç†ç¨‹åº</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">       <span class="comment">// 1ã€åˆ›å»ºæ‰§è¡Œç¯å¢ƒ</span></span><br><span class="line">       ExecutionEnvironment env = ExecutionEnvironment.getExecutionEnvironment();</span><br><span class="line">       <span class="comment">// 2ã€è¯»å–æ–‡ä»¶æ•°æ®</span></span><br><span class="line">       String inputPath = <span class="string">&quot;/Users/gaolei/Documents/DemoProjects/flink-start/src/main/resources/hello.txt&quot;</span>;</span><br><span class="line">       DataSource&lt;String&gt; dataSource = env.readTextFile(inputPath);</span><br><span class="line">       <span class="comment">// å¯¹æ•°æ®é›†è¿›è¡Œå¤„ç† æŒ‰ç…§ç©ºæ ¼åˆ†è¯å±•å¼€ è½¬æ¢æˆï¼ˆwordï¼Œ1ï¼‰äºŒå…ƒç»„</span></span><br><span class="line">       AggregateOperator&lt;Tuple2&lt;String, Integer&gt;&gt; result = dataSource.flatMap(<span class="keyword">new</span> MyFlatMapper())</span><br><span class="line">               <span class="comment">// æŒ‰ç…§ç¬¬ä¸€ä¸ªä½ç½® -&gt; word åˆ†ç»„</span></span><br><span class="line">               .groupBy(<span class="number">0</span>)</span><br><span class="line">               .sum(<span class="number">1</span>);</span><br><span class="line">       result.print();</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyFlatMapper</span> <span class="keyword">implements</span> <span class="title">FlatMapFunction</span>&lt;<span class="title">String</span>, <span class="title">Tuple2</span>&lt;<span class="title">String</span>, <span class="title">Integer</span>&gt;&gt; </span>&#123;</span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">flatMap</span><span class="params">(String s, Collector&lt;Tuple2&lt;String, Integer&gt;&gt; collector)</span> </span>&#123;</span><br><span class="line">           <span class="comment">// é¦–å…ˆæŒ‰ç…§ç©ºæ ¼åˆ†è¯</span></span><br><span class="line">           String[] words = s.split(<span class="string">&quot; &quot;</span>);</span><br><span class="line">           <span class="comment">// éå†æ‰€æœ‰çš„word åŒ…è£…æˆäºŒå…ƒç»„è¾“å‡º</span></span><br><span class="line">           <span class="keyword">for</span> (String word : words) &#123;</span><br><span class="line">               collector.collect(<span class="keyword">new</span> Tuple2&lt;String, Integer&gt;(word, <span class="number">1</span>));</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h3 id="å‡†å¤‡æ•°æ®æºæ–‡ä»¶"><a href="#å‡†å¤‡æ•°æ®æºæ–‡ä»¶" class="headerlink" title="å‡†å¤‡æ•°æ®æºæ–‡ä»¶"></a>å‡†å¤‡æ•°æ®æºæ–‡ä»¶</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">hello spark</span><br><span class="line">hello world</span><br><span class="line">hello java</span><br><span class="line">hello flink</span><br><span class="line">how are you</span><br><span class="line">what is your name</span><br></pre></td></tr></table></figure><h3 id="æ‰§è¡Œç»“æœ"><a href="#æ‰§è¡Œç»“æœ" class="headerlink" title="æ‰§è¡Œç»“æœ"></a>æ‰§è¡Œç»“æœ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">(is,1)</span><br><span class="line">(what,1)</span><br><span class="line">(you,1)</span><br><span class="line">(flink,1)</span><br><span class="line">(name,1)</span><br><span class="line">(world,1)</span><br><span class="line">(hello,4)</span><br><span class="line">(your,1)</span><br><span class="line">(are,1)</span><br><span class="line">(java,1)</span><br><span class="line">(how,1)</span><br><span class="line">(spark,1)</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;mac-å®‰è£…-flink&quot;&gt;&lt;a href=&quot;#mac-å®‰è£…-flink&quot; class=&quot;headerlink&quot; title=&quot;mac å®‰è£… flink&quot;&gt;&lt;/a&gt;mac å®‰è£… flink&lt;/h2&gt;&lt;p&gt;&lt;b&gt;1ã€æ‰§è¡Œ brew install apache-fl</summary>
      
    
    
    
    <category term="Apache Flink" scheme="http://example.com/categories/Apache-Flink/"/>
    
    
    <category term="flink" scheme="http://example.com/tags/flink/"/>
    
  </entry>
  
  <entry>
    <title>Apache Flink</title>
    <link href="http://example.com/wiki/flink%E7%AE%80%E4%BB%8B/"/>
    <id>http://example.com/wiki/flink%E7%AE%80%E4%BB%8B/</id>
    <published>2021-07-04T12:45:57.000Z</published>
    <updated>2021-07-05T05:44:30.585Z</updated>
    
    <content type="html"><![CDATA[<img src="https://flink.apache.org/img/flink-header-logo.svg" width=300 height=300><p>å®˜æ–¹åœ°å€è¯·æˆ³ğŸ‘‰ <a href="https://flink.apache.org/">ã€ä¼ é€ã€‘</a> </p><blockquote><p>Apache Flink is a framework and distributed processing engine for stateful computations over unbounded and bounded data streams. Flink has been designed to run in all common cluster environments, perform computations at in-memory speed and at any scale.  </p></blockquote><p>Apache Flink æ˜¯ä¸€ä¸ªæ¡†æ¶å’Œåˆ†å¸ƒå¼å¤„ç†å™¨å¼•æ“ï¼Œç”¨äºå¯¹æ— ç•Œå’Œæœ‰ç•Œæ•°æ®è¿›è¡ŒçŠ¶æ€è®¡ç®—ï¼›  </p><h2 id="Why-Flink"><a href="#Why-Flink" class="headerlink" title="Why Flink"></a>Why Flink</h2><ul><li>æµæ•°æ®æ›´çœŸå®åœ°ååº”äº†æˆ‘ä»¬çš„ç”Ÿæ´»æ–¹å¼</li><li>ä¼ ç»Ÿçš„æ•°æ®æ¶æ„æ˜¯åŸºäºæœ‰é™æ•°æ®é›†çš„</li><li>æˆ‘ä»¬çš„ç›®æ ‡<br>1ã€ä½å»¶è¿Ÿ æ¯«ç§’çº§å“åº”<br>2ã€é«˜åå èƒ½å¤Ÿå¤„ç†æµ·é‡æ•°æ® åˆ†å¸ƒå¼<br>3ã€ç»“æœçš„å‡†ç¡®æ€§å’Œè‰¯å¥½çš„å®¹é”™æ€§  </li></ul><h2 id="Where-need-Flink"><a href="#Where-need-Flink" class="headerlink" title="Where need Flink"></a>Where need Flink</h2><ul><li>ç”µå•†å’Œå¸‚åœºè¥é”€<br>æ•°æ®æŠ¥è¡¨ã€å¹¿å‘ŠæŠ•æ”¾ã€ä¸šåŠ¡æµç¨‹éœ€è¦</li><li>ç‰©è”ç½‘ï¼ˆIOTï¼‰<br>ä¼ æ„Ÿå™¨å®æ—¶æ•°æ®é‡‡é›†å’Œæ˜¾ç¤ºï¼Œå®æ—¶æŠ¥è­¦ï¼Œäº¤é€šè¿è¾“ä¸š</li><li>ç”µä¿¡ä¸š<br>åŸºç«™æµé‡è°ƒé…</li><li>é“¶è¡Œå’Œé‡‘èä¸š<br>å®æ—¶ç»“ç®—å’Œé€šçŸ¥æ¨é€ã€å®æ—¶æ£€æµ‹å¼‚å¸¸è¡Œä¸º</li></ul><h2 id="ä¼ ç»Ÿæ•°æ®å¤„ç†æ¶æ„"><a href="#ä¼ ç»Ÿæ•°æ®å¤„ç†æ¶æ„" class="headerlink" title="ä¼ ç»Ÿæ•°æ®å¤„ç†æ¶æ„"></a>ä¼ ç»Ÿæ•°æ®å¤„ç†æ¶æ„</h2><img src="https://oscimg.oschina.net/oscnet/up-5c77526cb1dbc4696143519dff42c447149.png" width=500 height=300><p>ä¼ ç»Ÿçš„æ•°æ®å¤„ç†æ¶æ„å¦‚ä¸ŠğŸ‘†<br>CRM(ç”¨æˆ·å…³ç³»ç³»ç»Ÿ)ï¼Œ Order System(è®¢å•ç³»ç»Ÿ), Web App (ç”¨æˆ·ç‚¹å‡»æ—¶é—´)ï¼Œå½“ç”¨æˆ·å‡ºå‘è¡Œä¸ºä¹‹åéœ€è¦ç³»ç»Ÿä½œå‡ºå“åº”ï¼Œé¦–å…ˆç”±ä¸Šå±‚çš„è®¡ç®—å±‚å¤„ç†è®¡ç®—é€»è¾‘ï¼Œè®¡ç®—å±‚çš„é€»è¾‘è®¡ç®—ä¾èµ–ä¸‹é¢çš„å­˜å‚¨å±‚ï¼Œè®¡ç®—å±‚è®¡ç®—å®Œæˆä¹‹åï¼Œå°†å“åº”è¿”å›ç»™å®¢æˆ·ç«¯ã€‚<br>è¿™ç§åŸºäºä¼ ç»Ÿæ•°æ®åº“æ–¹å¼æ— æ³•æ»¡è¶³é«˜å¹¶å‘åœºæ™¯ï¼Œæ•°æ®åº“çš„å¹¶å‘é‡éƒ½æ˜¯å¾ˆä½çš„ã€‚</p><h2 id="åˆ†æå¤„ç†æµç¨‹"><a href="#åˆ†æå¤„ç†æµç¨‹" class="headerlink" title="åˆ†æå¤„ç†æµç¨‹"></a>åˆ†æå¤„ç†æµç¨‹</h2><img src="https://oscimg.oschina.net/oscnet/up-060fc9ea54c7bfc0e2d5d73b2d674cad5d4.png" width="500" height="300">åˆ†æå¤„ç†æµç¨‹æ¶æ„å¦‚ä¸ŠğŸ‘†ï¼Œæ•°æ®å…ˆæœ‰ä¼ ç»Ÿçš„å…³ç³»æ•°æ®åº“ï¼Œç»è¿‡æå–ï¼Œæ¸…æ´—è¿‡æ»¤ç­‰ï¼Œå°†æ•°æ®å­˜æ”¾åˆ°æ•°æ®ä»“åº“ï¼Œç„¶åé€šè¿‡ä¸€äº›sqlå¤„ç†ï¼Œç”Ÿæˆæ•°æ®æŠ¥è¡¨å’Œä¸€äº›å…¶ä»–çš„æŸ¥è¯¢ã€‚  <ul><li>é—®é¢˜ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œå®æ—¶æ€§å¤ªå·®äº†ï¼Œå¤„ç†æµç¨‹å¤ªé•¿ï¼Œæ— æ³•æ»¡è¶³æ¯«ç§’çº§éœ€æ±‚</li><li>æ•°æ®æ¥æºä¸å”¯ä¸€ï¼Œèƒ½æ»¡è¶³æµ·é‡æ•°æ®å’Œé«˜å¹¶å‘çš„éœ€æ±‚ï¼Œä½†æ˜¯æ— æ³•æ»¡è¶³å®æ—¶çš„éœ€æ±‚</li></ul><h2 id="æœ‰çŠ¶æ€çš„æµå¼å¤„ç†"><a href="#æœ‰çŠ¶æ€çš„æµå¼å¤„ç†" class="headerlink" title="æœ‰çŠ¶æ€çš„æµå¼å¤„ç†"></a>æœ‰çŠ¶æ€çš„æµå¼å¤„ç†</h2><img src="https://oscimg.oschina.net/oscnet/up-cdf03c1c17f534673e73968bb4a094aadbc.png" width="500" height="300">æŠŠå½“å‰åšæµå¼è®¡ç®—æ‰€éœ€è¦çš„æ•°æ®ä¸å­˜æ”¾åœ¨æ•°æ®åº“ä¸­ï¼Œè€Œæ˜¯ç®€å•ç²—æš´çš„ç›´æ¥æ”¾åˆ°æœ¬åœ°å†…å­˜ä¸­ï¼›<h3 id="å†…å­˜ä¸ç¨³å®šï¼Ÿ"><a href="#å†…å­˜ä¸ç¨³å®šï¼Ÿ" class="headerlink" title="å†…å­˜ä¸ç¨³å®šï¼Ÿ"></a>å†…å­˜ä¸ç¨³å®šï¼Ÿ</h3><p>å‘¨æœŸæ€§çš„æ£€æŸ¥ç‚¹ï¼Œæ•°æ®å­˜ç›˜å’Œæ•…éšœæ£€æµ‹ï¼›    </p><h2 id="lambdaæ¶æ„"><a href="#lambdaæ¶æ„" class="headerlink" title="lambdaæ¶æ„"></a>lambdaæ¶æ„</h2><p>ç”¨ä¸¤å°ç³»ç»ŸåŒæ—¶ä¿éšœä½å»¶è¿Ÿå’Œç»“æœå‡†ç¡®ï¼›<br><img src="https://oscimg.oschina.net/oscnet/up-d33708041d13956206958f26e3b5b209a37.png" width="500" height="300"></p><ul><li>è¿™å¥—æ¶æ„åˆ†æˆä¸¤ä¸ªæµç¨‹ï¼Œä¸Šé¢ä¸ºæ‰¹å¤„ç†æµç¨‹ï¼Œæ•°æ®æ”¶é›†åˆ°ä¸€å®šç¨‹åºï¼Œäº¤ç»™æ‰¹å¤„ç†å™¨å¤„ç†ï¼Œæœ€ç»ˆäº§ç”Ÿä¸€ä¸ªæ‰¹å¤„ç†ç»“æœ</li><li>ä¸‹é¢çš„æµç¨‹ä¸ºæµå¼å¤„ç†æµç¨‹ï¼Œä¿è¯èƒ½å¿«é€Ÿå¾—åˆ°ç»“æœ</li><li>æœ€ç»ˆæœ‰æˆ‘ä»¬åœ¨åº”ç”¨å±‚æ ¹æ®å®é™…é—®é¢˜é€‰æ‹©å…·ä½“çš„å¤„ç†ç»“æœäº¤ç»™åº”ç”¨ç¨‹åºè¿™ç§æ¶æ„æœ‰ä»€ä¹ˆç¼ºé™·ï¼Ÿ<br>å¯èƒ½å¾—åˆ°çš„ç»“æœæ˜¯ä¸å‡†ç¡®çš„ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆå¿«é€Ÿçš„å¾—åˆ°ä¸€ä¸ªå®æ—¶è®¡ç®—çš„ç»“æœï¼Œéš”ä¸€æ®µæ—¶é—´ä¹‹ååœ¨æ¥çœ‹æ‰¹å¤„ç†äº§ç”Ÿçš„ç»“æœã€‚<br>å®ç°ä¸¤å°ç³»ç»Ÿå’Œç»´æŠ¤ä¸¤å¥—ç³»ç»Ÿï¼Œæˆæœ¬å¾ˆå¤§ï¼›  </li></ul><h2 id="ç¬¬ä¸‰ä»£æµå¼å¤„ç†æ¶æ„"><a href="#ç¬¬ä¸‰ä»£æµå¼å¤„ç†æ¶æ„" class="headerlink" title="ç¬¬ä¸‰ä»£æµå¼å¤„ç†æ¶æ„"></a>ç¬¬ä¸‰ä»£æµå¼å¤„ç†æ¶æ„</h2><p>Apache Flink å¯ä»¥å®Œç¾è§£å†³ä¸Šé¢çš„é—®é¢˜ğŸ‘†<br><img src="https://oscimg.oschina.net/oscnet/up-0cec29eb67e668b76cd1387a0cfe71e47a0.png" width="350" height="350"><br>Stromæ— æ³•æ»¡è¶³æµ·é‡æ•°æ®ï¼› Sparking Stream æ— æ³•æ»¡è¶³ä½å»¶è¿Ÿï¼›  </p><h3 id="åŸºäºäº‹ä»¶é©±åŠ¨-ï¼ˆEvent-drivenï¼‰"><a href="#åŸºäºäº‹ä»¶é©±åŠ¨-ï¼ˆEvent-drivenï¼‰" class="headerlink" title="åŸºäºäº‹ä»¶é©±åŠ¨ ï¼ˆEvent-drivenï¼‰"></a>åŸºäºäº‹ä»¶é©±åŠ¨ ï¼ˆEvent-drivenï¼‰</h3><img src="https://oscimg.oschina.net/oscnet/up-cf462b316ee2d27df780fd551ce8ecc72cb.png" width="450" height="330">  <h3 id="å¤„ç†æ— ç•Œå’Œæœ‰ç•Œæ•°æ®"><a href="#å¤„ç†æ— ç•Œå’Œæœ‰ç•Œæ•°æ®" class="headerlink" title="å¤„ç†æ— ç•Œå’Œæœ‰ç•Œæ•°æ®"></a>å¤„ç†æ— ç•Œå’Œæœ‰ç•Œæ•°æ®</h3><p>ä»»ä½•ç±»å‹çš„æ•°æ®éƒ½å¯ä»¥å½¢æˆä¸€ç§äº‹ä»¶æµã€‚ä¿¡ç”¨å¡äº¤æ˜“ã€ä¼ æ„Ÿå™¨æµ‹é‡ã€æœºå™¨æ—¥å¿—ã€ç½‘ç«™æˆ–ç§»åŠ¨åº”ç”¨ç¨‹åºä¸Šçš„ç”¨æˆ·äº¤äº’è®°å½•ï¼Œæ‰€æœ‰è¿™äº›æ•°æ®éƒ½å½¢æˆä¸€ç§æµã€‚<br>æ•°æ®å¯ä»¥è¢«ä½œä¸º æ— ç•Œ æˆ–è€… æœ‰ç•Œ æµæ¥å¤„ç†ã€‚  </p><ul><li><p><b>æ— ç•Œæµ</b> æœ‰å®šä¹‰æµçš„å¼€å§‹ï¼Œä½†æ²¡æœ‰å®šä¹‰æµçš„ç»“æŸã€‚å®ƒä»¬ä¼šæ— ä¼‘æ­¢åœ°äº§ç”Ÿæ•°æ®ã€‚æ— ç•Œæµçš„æ•°æ®å¿…é¡»æŒç»­å¤„ç†ï¼Œå³æ•°æ®è¢«æ‘„å–åéœ€è¦ç«‹åˆ»å¤„ç†ã€‚æˆ‘ä»¬ä¸èƒ½ç­‰åˆ°æ‰€æœ‰æ•°æ®éƒ½åˆ°è¾¾å†å¤„ç†ï¼Œå› ä¸ºè¾“å…¥æ˜¯æ— é™çš„ï¼Œåœ¨ä»»ä½•æ—¶å€™è¾“å…¥éƒ½ä¸ä¼šå®Œæˆã€‚å¤„ç†æ— ç•Œæ•°æ®é€šå¸¸è¦æ±‚ä»¥ç‰¹å®šé¡ºåºæ‘„å–äº‹ä»¶ï¼Œä¾‹å¦‚äº‹ä»¶å‘ç”Ÿçš„é¡ºåºï¼Œä»¥ä¾¿èƒ½å¤Ÿæ¨æ–­ç»“æœçš„å®Œæ•´æ€§ã€‚</p></li><li><p><b>æœ‰ç•Œæµ&lt;/&gt; æœ‰å®šä¹‰æµçš„å¼€å§‹ï¼Œä¹Ÿæœ‰å®šä¹‰æµçš„ç»“æŸã€‚æœ‰ç•Œæµå¯ä»¥åœ¨æ‘„å–æ‰€æœ‰æ•°æ®åå†è¿›è¡Œè®¡ç®—ã€‚æœ‰ç•Œæµæ‰€æœ‰æ•°æ®å¯ä»¥è¢«æ’åºï¼Œæ‰€ä»¥å¹¶ä¸éœ€è¦æœ‰åºæ‘„å–ã€‚æœ‰ç•Œæµå¤„ç†é€šå¸¸è¢«ç§°ä¸ºæ‰¹å¤„ç†</p></li></ul><img src="https://flink.apache.org/img/bounded-unbounded.png" width="600" height="330" ><p><b>Apache Flink æ“…é•¿å¤„ç†æ— ç•Œå’Œæœ‰ç•Œæ•°æ®é›†</b> ç²¾ç¡®çš„æ—¶é—´æ§åˆ¶å’ŒçŠ¶æ€åŒ–ä½¿å¾— Flink çš„è¿è¡Œæ—¶(runtime)èƒ½å¤Ÿè¿è¡Œä»»ä½•å¤„ç†æ— ç•Œæµçš„åº”ç”¨ã€‚æœ‰ç•Œæµåˆ™ç”±ä¸€äº›ä¸“ä¸ºå›ºå®šå¤§å°æ•°æ®é›†ç‰¹æ®Šè®¾è®¡çš„ç®—æ³•å’Œæ•°æ®ç»“æ„è¿›è¡Œå†…éƒ¨å¤„ç†ï¼Œäº§ç”Ÿäº†å‡ºè‰²çš„æ€§èƒ½ã€‚</p><h3 id="å…¶ä»–ç‰¹ç‚¹"><a href="#å…¶ä»–ç‰¹ç‚¹" class="headerlink" title="å…¶ä»–ç‰¹ç‚¹"></a>å…¶ä»–ç‰¹ç‚¹</h3><ul><li>æ”¯æŒäº‹ä»¶æ—¶é—´ï¼ˆevent-timeï¼‰å’Œå¤„ç†æ—¶é—´ï¼ˆprocessing-timeï¼‰è¯­ä¹‰</li><li>ç²¾ç¡®ä¸€æ¬¡çš„çŠ¶æ€ä¸€è‡´æ€§ä¿è¯</li><li>ä½å»¶è¿Ÿ æ¯ç§’å¤„ç†æ•°ç™¾ä¸‡ä¸ªäº‹ä»¶ï¼Œæ¯«ç§’çº§å»¶è¿Ÿ</li><li>ä¸ä¼—å¤šå¸¸ç”¨çš„å­˜å‚¨ç³»ç»Ÿé“¾æ¥</li><li>é«˜å¯ç”¨ï¼ŒåŠ¨æ€æ‰©å±•ï¼Œæ”¯æŒ7*24å…¨å¤©è¿è¡Œ</li></ul><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><blockquote><p>1ã€<a href="https://www.bilibili.com/video/BV1qy4y1q728?from=search&seid=13654102476223768024">å°šç¡…è°· 2021 Flink Javaç‰ˆ</a><br>2ã€<a href="https://ci.apache.org/projects/flink/flink-docs-release-1.13/zh/">Apache Flink Documentation</a>  </p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;img src=&quot;https://flink.apache.org/img/flink-header-logo.svg&quot; width=300 height=300&gt;


&lt;p&gt;å®˜æ–¹åœ°å€è¯·æˆ³ğŸ‘‰ &lt;a href=&quot;https://flink.apache.org/&quot;&gt;ã€ä¼ é€ã€‘&lt;/</summary>
      
    
    
    
    <category term="Apache Flink" scheme="http://example.com/categories/Apache-Flink/"/>
    
    
    <category term="flink" scheme="http://example.com/tags/flink/"/>
    
  </entry>
  
  <entry>
    <title>æ‹¥å¡é¿å…</title>
    <link href="http://example.com/wiki/%E6%8B%A5%E5%A1%9E%E9%81%BF%E5%85%8D/"/>
    <id>http://example.com/wiki/%E6%8B%A5%E5%A1%9E%E9%81%BF%E5%85%8D/</id>
    <published>2021-07-04T08:46:13.000Z</published>
    <updated>2021-07-04T08:47:38.792Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ‹¥å¡é¿å…"><a href="#æ‹¥å¡é¿å…" class="headerlink" title="æ‹¥å¡é¿å…"></a>æ‹¥å¡é¿å…</h1><p>æ‹¥å¡æ§åˆ¶çš„æ…¢å¯åŠ¨æ˜¯ä»¥æŒ‡æ•°æ–¹å¼å¿«é€Ÿçš„é€šè¿‡è¯•æ¢æ¥æ‰©å¤§æ‹¥å¡çª—å£çš„ï¼Œä½†æ˜¯ä¸€æ—¦å‘ç”Ÿç½‘ç»œä¸¢åŒ…ï¼Œåˆ™è‚¯å®šæ˜¯å¾ˆå¤šæŠ¥æ–‡æ®µéƒ½ä¼šéƒ½æ˜¯ï¼Œå› ä¸ºçª—å£æ—¶ç§°è¢«å¢é•¿çš„ï¼›ä¸ºäº†è§£å†³è¿™ç§é—®é¢˜ï¼Œéœ€è¦å¼•å…¥â€“ æ‹¥å¡é¿å…</p><h2 id="ä»€ä¹ˆæ˜¯æ‹¥å¡é¿å…"><a href="#ä»€ä¹ˆæ˜¯æ‹¥å¡é¿å…" class="headerlink" title="ä»€ä¹ˆæ˜¯æ‹¥å¡é¿å…"></a>ä»€ä¹ˆæ˜¯æ‹¥å¡é¿å…</h2><p>æ‹¥å¡é¿å…ä¸ºäº†è§£å†³æ…¢å¯åŠ¨ä¸‹ï¼Œå½“æ‹¥å¡çª—å£è¶…å‡ºç½‘ç»œå¸¦å®½æ—¶å‘ç”Ÿçš„å¤§é‡ä¸¢åŒ…é—®é¢˜ï¼Œå®ƒæå‡ºä¸€ä¸ªã€Œæ…¢å¯åŠ¨é˜ˆå€¼ã€çš„æ¦‚å¿µï¼Œå½“æ‹¥å¡çª—å£åˆ°è¾¾è¿™ä¸ªé˜ˆå€¼ä¹‹åï¼Œä¸åœ¨ä»¥æŒ‡æ•°æ–¹å¼å¢é•¿ï¼Œè€Œé€‰æ‹©æ¶¨å¹…æ¯”è¾ƒç¼“æ…¢çš„ã€Œçº¿æ€§å¢é•¿ã€ï¼Œè®¡ç®—æ–¹å¼ï¼š</p><blockquote><p>w cwnd += SMSS*SMSS/cwnd</p></blockquote><img src="https://oscimg.oschina.net/oscnet/up-e56d8072b2a74fa9b18ff6ca2d605405d2f.png" width=760 height=360><p>å½“æ‹¥å¡çª—å£åœ¨çº¿æ€§å¢é•¿æ—¶å‘ç”Ÿä¸¢åŒ…ï¼Œå°†æ…¢å¯åŠ¨é˜ˆå€¼è®¾ç½®ä¸ºå½“å‰çª—å£çš„ä¸€åŠï¼Œæ…¢å¯åŠ¨çª—å£æ¢å¤åˆå§‹çª—å£ï¼ˆinit wndï¼‰ï¼›</p><blockquote><p>i æ‹¥å¡é¿å…å’Œæ…¢å¯åŠ¨æ˜¯ç»“åˆä½¿ç”¨çš„ï¼Œå½“å‘ç”Ÿç½‘ç»œä¸¢åŒ…æ˜¯ï¼Œæ‹¥å¡æ§åˆ¶é‡‡ç”¨å¿«é€Ÿé‡ä¼ å’Œå¿«é€Ÿå¯åŠ¨æ¥è§£å†³ä¸¢åŒ…é—®é¢˜ï¼</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;æ‹¥å¡é¿å…&quot;&gt;&lt;a href=&quot;#æ‹¥å¡é¿å…&quot; class=&quot;headerlink&quot; title=&quot;æ‹¥å¡é¿å…&quot;&gt;&lt;/a&gt;æ‹¥å¡é¿å…&lt;/h1&gt;&lt;p&gt;æ‹¥å¡æ§åˆ¶çš„æ…¢å¯åŠ¨æ˜¯ä»¥æŒ‡æ•°æ–¹å¼å¿«é€Ÿçš„é€šè¿‡è¯•æ¢æ¥æ‰©å¤§æ‹¥å¡çª—å£çš„ï¼Œä½†æ˜¯ä¸€æ—¦å‘ç”Ÿç½‘ç»œä¸¢åŒ…ï¼Œåˆ™è‚¯å®šæ˜¯å¾ˆå¤šæŠ¥æ–‡æ®µéƒ½ä¼šéƒ½æ˜¯ï¼Œå› ä¸ºçª—å£æ—¶ç§°è¢«</summary>
      
    
    
    
    <category term="Computer Network" scheme="http://example.com/categories/Computer-Network/"/>
    
    <category term="TCP" scheme="http://example.com/categories/Computer-Network/TCP/"/>
    
    
    <category term="TCP" scheme="http://example.com/tags/TCP/"/>
    
  </entry>
  
  <entry>
    <title>TCP-å››æ¬¡æŒ¥æ‰‹/æ–­å¼€è¿æ¥</title>
    <link href="http://example.com/wiki/TCP-%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B-%E6%96%AD%E5%BC%80%E8%BF%9E%E6%8E%A5/"/>
    <id>http://example.com/wiki/TCP-%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B-%E6%96%AD%E5%BC%80%E8%BF%9E%E6%8E%A5/</id>
    <published>2021-07-04T08:34:11.000Z</published>
    <updated>2021-07-04T08:47:31.738Z</updated>
    
    <content type="html"><![CDATA[<h1 id="TCPæ–­å¼€è¿æ¥"><a href="#TCPæ–­å¼€è¿æ¥" class="headerlink" title="TCPæ–­å¼€è¿æ¥"></a>TCPæ–­å¼€è¿æ¥</h1><h2 id="å››æ¬¡æŒ¥æ‰‹"><a href="#å››æ¬¡æŒ¥æ‰‹" class="headerlink" title="å››æ¬¡æŒ¥æ‰‹"></a>å››æ¬¡æŒ¥æ‰‹</h2><img src="https://oscimg.oschina.net/oscnet/up-8d9a6b405e874bc02b91e453bd277c46d46.png" width=450 height=550><ul><li>å¼€å§‹å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½æ˜¯å¤„ç†ã€establishedã€‘çŠ¶æ€</li><li>å®¢æˆ·ç«¯å‘é€ã€ŒFINã€æŠ¥æ–‡ä¹‹åï¼Œè¿›å…¥FIN-WAIT-1çŠ¶æ€</li><li>æœåŠ¡ç«¯æ”¶åˆ°å®¢æˆ·ç«¯çš„FINä¹‹åï¼Œæ¢å¤ä¸€ä¸ªACKï¼ŒåŒæ—¶è¿›å…¥CLOSE_WAITçŠ¶æ€</li><li>å®¢æˆ·ç«¯æ¥æ”¶åˆ°ACKä¹‹åï¼Œè¿›å…¥åˆ°FIN-WAIT-2çŠ¶æ€</li><li>æœåŠ¡ç«¯æ¥ç€å‘é€FINæŠ¥æ–‡ï¼ŒåŒæ—¶è¿›å…¥LAST-ACKçŠ¶æ€</li><li>å®¢æˆ·ç«¯æ¥æ”¶åˆ°æœåŠ¡ç«¯çš„FINæŠ¥æ–‡ä¹‹åï¼Œå‘é€ACKæŠ¥æ–‡ï¼Œå¹¶è¿›å…¥TIME_WAITçŠ¶æ€</li><li>å®¢æˆ·ç«¯åœ¨ç»å†2ä¸ªMSLæ—¶é—´ä¹‹åï¼Œè¿›å…¥CLOSEçŠ¶æ€</li><li>æœåŠ¡ç«¯æ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„ACKä¹‹åï¼Œè¿›å…¥CLOSEçŠ¶æ€</li></ul><blockquote><p>i å¹¶ä¸æ˜¯æ‰€æœ‰çš„å››æ¬¡æŒ¥æ‰‹éƒ½æ˜¯ä¸Šè¿°æµç¨‹ï¼Œå½“å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯åŒæ—¶å‘é€å…³é—­è¿æ¥çš„è¯·æ±‚å¦‚ä¸‹ğŸ‘‡ï¼š</p></blockquote><img src="https://oscimg.oschina.net/oscnet/up-d859884b062bda56a946ae9e3c0c148235b.png" width=450 height=550><p>å¯ä»¥çœ‹åˆ°åŒæ–¹éƒ½ä¸»åŠ¨å‘èµ·æ–­å¼€è¯·æ±‚æ‰€ä»¥å„è‡ªéƒ½æ˜¯ä¸»åŠ¨å‘èµ·æ–¹ï¼ŒçŠ¶æ€ä¼šä» FIN_WAIT_1 éƒ½è¿›å…¥åˆ° CLOSING è¿™ä¸ªè¿‡åº¦çŠ¶æ€ç„¶åå†åˆ° TIME_WAITã€‚</p><blockquote><p>i æŒ¥æ‰‹ä¸€å®šéœ€è¦å››æ¬¡å—ï¼Ÿ</p></blockquote><p>å‡è®¾ client å·²ç»æ²¡æœ‰æ•°æ®å‘é€ç»™ server äº†ï¼Œæ‰€ä»¥å®ƒå‘é€ FIN ç»™ server è¡¨æ˜è‡ªå·±æ•°æ®å‘å®Œäº†ï¼Œä¸å†å‘äº†ï¼Œå¦‚æœè¿™æ—¶å€™ server è¿˜æ˜¯æœ‰æ•°æ®è¦å‘é€ç»™ client é‚£ä¹ˆå®ƒå°±æ˜¯å…ˆå›å¤ ack ï¼Œç„¶åç»§ç»­å‘é€æ•°æ®ã€‚<br>ç­‰ server æ•°æ®å‘é€å®Œäº†ä¹‹åå†å‘ client å‘é€ FIN è¡¨æ˜å®ƒä¹Ÿå‘å®Œäº†ï¼Œç„¶åç­‰ client çš„ ACK è¿™ç§æƒ…å†µä¸‹å°±ä¼šæœ‰å››æ¬¡æŒ¥æ‰‹ã€‚<br>é‚£ä¹ˆå‡è®¾ client å‘é€ FIN ç»™ server çš„æ—¶å€™ server ä¹Ÿæ²¡æ•°æ®ç»™ clientï¼Œé‚£ä¹ˆ server å°±å¯ä»¥å°† ACK å’Œå®ƒçš„ FIN ä¸€èµ·å‘ç»™client ï¼Œç„¶åç­‰å¾… client çš„ ACKï¼Œè¿™æ ·ä¸å°±ä¸‰æ¬¡æŒ¥æ‰‹äº†ï¼Ÿ</p><blockquote><p>i ä¸ºä»€ä¹ˆè¦æœ‰ TIME_WAIT?</p></blockquote><p>æ–­å¼€è¿æ¥å‘èµ·æ–¹åœ¨æ¥å—åˆ°æ¥å—æ–¹çš„ FIN å¹¶å›å¤ ACK ä¹‹åå¹¶æ²¡æœ‰ç›´æ¥è¿›å…¥ CLOSED çŠ¶æ€ï¼Œè€Œæ˜¯è¿›è¡Œäº†ä¸€æ³¢ç­‰å¾…ï¼Œç­‰å¾…æ—¶é—´ä¸º 2MSLã€‚MSL æ˜¯ Maximum Segment Lifetimeï¼Œå³æŠ¥æ–‡æœ€é•¿ç”Ÿå­˜æ—¶é—´ï¼ŒRFC 793 å®šä¹‰çš„ MSL æ—¶é—´æ˜¯ 2 åˆ†é’Ÿï¼ŒLinux å®é™…å®ç°æ˜¯ 30sï¼Œé‚£ä¹ˆ 2MSL æ˜¯ä¸€åˆ†é’Ÿã€‚</p><blockquote><p>w <font color=red >é‚£ä¹ˆä¸ºä»€ä¹ˆè¦ç­‰ 2MSL å‘¢ï¼Ÿ</font></p></blockquote><ul><li>å°±æ˜¯æ€•è¢«åŠ¨å…³é—­æ–¹æ²¡æœ‰æ”¶åˆ°æœ€åçš„ ACKï¼Œå¦‚æœè¢«åŠ¨æ–¹ç”±äºç½‘ç»œåŸå› æ²¡æœ‰åˆ°ï¼Œé‚£ä¹ˆå®ƒä¼šå†æ¬¡å‘é€ FINï¼Œ æ­¤æ—¶å¦‚æœä¸»åŠ¨å…³é—­æ–¹å·²ç» CLOSED é‚£å°±å‚»äº†ï¼Œå› æ­¤ç­‰ä¸€ä¼šå„¿ã€‚</li><li>å‡è®¾ç«‹é©¬æ–­å¼€è¿æ¥ï¼Œä½†æ˜¯åˆé‡ç”¨äº†è¿™ä¸ªè¿æ¥ï¼Œå°±æ˜¯äº”å…ƒç»„å®Œå…¨ä¸€è‡´ï¼Œå¹¶ä¸”åºå·è¿˜åœ¨åˆé€‚çš„èŒƒå›´å†…ï¼Œè™½ç„¶æ¦‚ç‡å¾ˆä½ä½†ç†è®ºä¸Šä¹Ÿæœ‰å¯èƒ½ï¼Œé‚£ä¹ˆæ–°çš„è¿æ¥ä¼šè¢«å·²å…³é—­è¿æ¥é“¾è·¯ä¸Šçš„ä¸€äº›æ®‹ç•™æ•°æ®å¹²æ‰°ï¼Œå› æ­¤ç»™äºˆä¸€å®šçš„æ—¶é—´æ¥å¤„ç†ä¸€äº›æ®‹ç•™æ•°æ®ã€‚</li></ul><blockquote><p>i ç­‰å¾… 2MSL ä¼šäº§ç”Ÿä»€ä¹ˆé—®é¢˜ï¼Ÿ</p></blockquote><p>å¦‚æœæœåŠ¡å™¨ä¸»åŠ¨å…³é—­å¤§é‡çš„è¿æ¥ï¼Œé‚£ä¹ˆä¼šå‡ºç°å¤§é‡çš„èµ„æºå ç”¨ï¼Œéœ€è¦ç­‰åˆ° 2MSL æ‰ä¼šé‡Šæ”¾èµ„æºã€‚<br>å¦‚æœæ˜¯å®¢æˆ·ç«¯ä¸»åŠ¨å…³é—­å¤§é‡çš„è¿æ¥ï¼Œé‚£ä¹ˆåœ¨ 2MSL é‡Œé¢é‚£äº›ç«¯å£éƒ½æ˜¯è¢«å ç”¨çš„ï¼Œç«¯å£åªæœ‰ 65535 ä¸ªï¼Œå¦‚æœç«¯å£è€—å°½äº†å°±æ— æ³•å‘èµ·é€çš„è¿æ¥äº†ï¼Œä¸è¿‡æˆ‘è§‰å¾—è¿™ä¸ªæ¦‚ç‡å¾ˆä½ï¼Œè¿™ä¹ˆå¤šç«¯å£ä½ è¿™æ˜¯è¦å»ºç«‹å¤šå°‘ä¸ªè¿æ¥ï¼Ÿ</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;TCPæ–­å¼€è¿æ¥&quot;&gt;&lt;a href=&quot;#TCPæ–­å¼€è¿æ¥&quot; class=&quot;headerlink&quot; title=&quot;TCPæ–­å¼€è¿æ¥&quot;&gt;&lt;/a&gt;TCPæ–­å¼€è¿æ¥&lt;/h1&gt;&lt;h2 id=&quot;å››æ¬¡æŒ¥æ‰‹&quot;&gt;&lt;a href=&quot;#å››æ¬¡æŒ¥æ‰‹&quot; class=&quot;headerlink&quot; titl</summary>
      
    
    
    
    <category term="Computer Network" scheme="http://example.com/categories/Computer-Network/"/>
    
    <category term="TCP" scheme="http://example.com/categories/Computer-Network/TCP/"/>
    
    
    <category term="TCP" scheme="http://example.com/tags/TCP/"/>
    
  </entry>
  
  <entry>
    <title>å¿«é€Ÿé‡ä¼ /å¿«é€Ÿæ¢å¤</title>
    <link href="http://example.com/wiki/%E5%BF%AB%E9%80%9F%E9%87%8D%E4%BC%A0-%E5%BF%AB%E9%80%9F%E6%81%A2%E5%A4%8D/"/>
    <id>http://example.com/wiki/%E5%BF%AB%E9%80%9F%E9%87%8D%E4%BC%A0-%E5%BF%AB%E9%80%9F%E6%81%A2%E5%A4%8D/</id>
    <published>2021-07-04T08:33:35.000Z</published>
    <updated>2021-07-04T08:47:36.949Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å¿«é€Ÿé‡ä¼ å’Œå¿«é€Ÿæ¢å¤"><a href="#å¿«é€Ÿé‡ä¼ å’Œå¿«é€Ÿæ¢å¤" class="headerlink" title="å¿«é€Ÿé‡ä¼ å’Œå¿«é€Ÿæ¢å¤"></a>å¿«é€Ÿé‡ä¼ å’Œå¿«é€Ÿæ¢å¤</h1><h2 id="å¿«é€Ÿé‡ä¼ "><a href="#å¿«é€Ÿé‡ä¼ " class="headerlink" title="å¿«é€Ÿé‡ä¼ "></a>å¿«é€Ÿé‡ä¼ </h2><blockquote><p>d ä¸ºä½•ä¼šæ¥æ”¶åˆ°ä»¥ä¸ªå¤±åºæ•°æ®æ®µï¼Ÿ </p></blockquote><ul><li>è‹¥æŠ¥æ–‡ä¸¢å¤±ï¼Œå°†ä¼šäº§ç”Ÿè¿ç»­çš„å¤±åºACKæ®µ </li><li>è‹¥ç½‘ç»œè·¯å¾„ä¸è®¾å¤‡å¯¼è‡´æ•°æ®æ®µå¤±åºï¼Œå°†ä¼šäº§ç”Ÿå°‘é‡çš„å¤±åºACKæ®µ</li><li>è‹¥æŠ¥æ–‡é‡å¤ï¼Œå°†ä¼šäº§ç”Ÿå°‘é‡çš„å¤±åºACKæ®µ</li></ul><img src="https://oscimg.oschina.net/oscnet/up-eaadaebd682089bdd3919de4f0d232749dc.png" width=450 height= 520><ul><li>å½“å‘é€ç«¯å‘é€pkt0æ˜¯æ­£å¸¸çš„ï¼Œç”±äºæ»‘åŠ¨çª—å£ä¸ºæ»¡ï¼Œå‘é€æ–¹å¯ä»¥ç»§ç»­å‘é€pkt1ï¼Œpkt2ï¼›</li><li>åŠ å…¥pkt1å‘ç”Ÿäº†ä¸¢åŒ…ï¼Œè™½ç„¶pkt2æ¥æ”¶ç«¯æ¥æ”¶æˆåŠŸäº†ï¼Œä½†æ˜¯æ²¡æœ‰pkt1çš„æ•°æ®æ®µï¼Œæ¥æ”¶ç«¯è¿˜æ˜¯å‘é€ACK1çš„ç¡®è®¤æŠ¥æ–‡ï¼›</li><li>åœ¨æ²¡æœ‰ã€Œå¿«é€Ÿé‡ä¼ ã€çš„æƒ…å†µä¸‹ï¼Œå‘é€ç«¯éœ€è¦ç­‰åˆ°RTOä¹‹åï¼Œæ‰å¯ä»¥é‡æ–°å‘é€pkt1</li><li>é‡ä¼ æˆåŠŸä¹‹åï¼Œæ¥æ”¶ç«¯å…¶å®æ”¶åˆ°äº†pkt2ä¹‹å‰çš„æ‰€æœ‰æ•°æ®æ®µï¼Œæ‰€ä»¥å‘é€ACK3çš„ç¡®è®¤æŠ¥æ–‡<blockquote><p>w è¿™ç§éœ€è¦ç­‰å¾…RTOæ‰å¯ä»¥é‡ä¼ çš„æ–¹å¼æ•ˆç‡æ˜¯æ¯”è¾ƒä½çš„ï¼Œå› æ­¤éœ€è¦å¿«é€Ÿé‡ä¼ æ¥è¿›è¡Œä¼˜åŒ–ï¼›</p></blockquote></li></ul><h2 id="å¿«é€Ÿé‡ä¼ å’Œç´¯ç§¯ç¡®è®¤"><a href="#å¿«é€Ÿé‡ä¼ å’Œç´¯ç§¯ç¡®è®¤" class="headerlink" title="å¿«é€Ÿé‡ä¼ å’Œç´¯ç§¯ç¡®è®¤"></a>å¿«é€Ÿé‡ä¼ å’Œç´¯ç§¯ç¡®è®¤</h2><img src="https://oscimg.oschina.net/oscnet/up-9da669c35316aafb318674d3364ea07d72d.png" width=450 height=520><p>å½“å‘é€æ–¹è¿ç»­å‘é€pkt3ï¼Œpkt4ï¼Œpkt5ï¼Œpkt6å››ä¸ªæ•°æ®ç«¯ï¼Œä½†æ˜¯pkt5åœ¨ç½‘ç»œä¸­ä¸¢åŒ…äº†ï¼Œé‚£åé¢å‘é€çš„pkt6ï¼Œpkt7ï¼Œpkt8çš„ç¡®è®¤æŠ¥æ–‡éƒ½è¿”å›ACK5ï¼Œå¸Œæœ›å‘é€æ–¹åƒæ˜‚ä¼ pkt5çš„æ•°æ®æ®µï¼›è¿™ä¸ªæ—¶å€™ï¼Œå‘é€æ–¹æ”¶åˆ°è¿ç»­3ä¸ªç›¸åŒçš„ç¡®è®¤æŠ¥æ–‡ï¼Œä¾¿ç«‹å³é‡æ–°å‘é€pkt5çš„æ•°æ®æ®µï¼›</p><blockquote><p>i æ¥æ”¶æ–¹:</p></blockquote><ul><li>å½“æ¥æ”¶åˆ°ä¸€ä¸ªå¤±åºæ•°æ®æ®µæ—¶ï¼Œç«‹åˆ»å‘é€å®ƒæ‰€æœŸå¾…çš„ç¼ºå£ ACK åºåˆ—å·</li><li>å½“æ¥æ”¶åˆ°å¡«å……å¤±åºç¼ºå£çš„æ•°æ®æ®µæ—¶ï¼Œç«‹åˆ»å‘ é€å®ƒæ‰€æœŸå¾…çš„ä¸‹ä¸€ä¸ª ACK åºåˆ—å·</li></ul><blockquote><p>i å‘é€æ–¹</p></blockquote><ul><li>å½“æ¥æ”¶åˆ°3ä¸ªé‡å¤çš„å¤±åº ACK æ®µ(4ä¸ªç›¸åŒçš„å¤±åºACKæ®µ)æ—¶ï¼Œä¸å†ç­‰å¾…é‡ä¼ å®šæ—¶å™¨çš„è§¦å‘ï¼Œç«‹åˆ»åŸºäºå¿«é€Ÿé‡ä¼ æœºåˆ¶é‡å‘æŠ¥æ–‡æ®µ</li></ul><p>å½“pkt5é‡æ–°å‘é€å¹¶è¢«æ¥æ”¶ç«¯æ¥æ”¶ä¹‹åï¼Œæ¥æ”¶ç«¯å‘é€ACK9çš„ç¡®è®¤æŠ¥æ–‡ï¼Œè€Œä¸æ˜¯å†åˆ†åˆ«å‘é€ACK6ï¼ŒACK7ï¼ŒACK8ï¼Œè¿™ä¸ªç§°è°“ã€Œ <strong><font color=red>ç´¯è®¡ç¡®è®¤</font></strong> ã€ã€‚</p><h2 id="å¿«é€Ÿæ¢å¤"><a href="#å¿«é€Ÿæ¢å¤" class="headerlink" title="å¿«é€Ÿæ¢å¤"></a>å¿«é€Ÿæ¢å¤</h2><blockquote><p>i å¿«é€Ÿé‡ä¼ ä¸‹ä¸€å®šè¦è¿›å…¥æ…¢å¯åŠ¨å—?</p></blockquote><p>æ¥å—ç«¯æ”¶åˆ°é‡å¤ACKï¼Œæ„å‘³ç€ç½‘ç»œä»åœ¨æµåŠ¨ï¼Œè€Œå¦‚æœè¦é‡æ–°è¿›å…¥æ…¢å¯åŠ¨ï¼Œä¼šå¯¼è‡´ç½‘ç»œçªç„¶å‡å°‘æ•°æ®æµï¼Œæ‹¥å¡çª—å£æ¢å¤åˆå§‹çª—å£ï¼Œæ‰€ä»¥ï¼Œã€Œ<strong>åœ¨å¿«é€Ÿæ¢å¤ä¸‹å‘ç”Ÿä¸¢åŒ…çš„åœºæ™¯ä¸‹</strong>ã€ï¼Œåº”è¯¥ä½¿ç”¨å¿«é€Ÿæ¢å¤ï¼Œç®€å•çš„è®²ï¼Œå°±æ˜¯å°†æ…¢å¯åŠ¨é˜ˆå€¼è®¾ç½®æˆå½“å‰æ‹¥å¡çª—å£çš„ä¸€åŠï¼Œè€Œæ‹¥å¡çª—å£ä¹Ÿé€‚å½“æ”¾ä½ï¼Œè€Œä¸æ˜¯ä¸€ä¸‹å­—æ¢å¤åˆ°åˆå§‹çª—å£å¤§å°ï¼›</p><img src="https://oscimg.oschina.net/oscnet/up-4a7f76cb315a13d1d905f2bfb3a376db087.png" ><p>å¿«é€Ÿæ¢å¤çš„æµç¨‹å¦‚ä¸Šå›¾ğŸ‘†æ‰€ç¤ºï¼</p><blockquote><p>w å¿«é€Ÿæ¢å¤çš„å…·ä½“æ“ä½œï¼š</p></blockquote><ul><li>å°† ssthresh è®¾ç½®ä¸ºå½“å‰æ‹¥å¡çª—å£ cwnd çš„ä¸€åŠï¼Œè®¾å½“å‰ cwnd ä¸º ssthresh åŠ ä¸Š 3*MSS</li><li>æ¯æ”¶åˆ°ä¸€ä¸ªé‡å¤ ACKï¼Œcwnd å¢åŠ  1 ä¸ª MSS</li><li>å½“æ–°æ•°æ® ACK åˆ°è¾¾åï¼Œè®¾ç½® cwnd ä¸º ssthresh</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å¿«é€Ÿé‡ä¼ å’Œå¿«é€Ÿæ¢å¤&quot;&gt;&lt;a href=&quot;#å¿«é€Ÿé‡ä¼ å’Œå¿«é€Ÿæ¢å¤&quot; class=&quot;headerlink&quot; title=&quot;å¿«é€Ÿé‡ä¼ å’Œå¿«é€Ÿæ¢å¤&quot;&gt;&lt;/a&gt;å¿«é€Ÿé‡ä¼ å’Œå¿«é€Ÿæ¢å¤&lt;/h1&gt;&lt;h2 id=&quot;å¿«é€Ÿé‡ä¼ &quot;&gt;&lt;a href=&quot;#å¿«é€Ÿé‡ä¼ &quot; class=&quot;headerli</summary>
      
    
    
    
    <category term="Computer Network" scheme="http://example.com/categories/Computer-Network/"/>
    
    <category term="TCP" scheme="http://example.com/categories/Computer-Network/TCP/"/>
    
    
    <category term="TCP" scheme="http://example.com/tags/TCP/"/>
    
  </entry>
  
  <entry>
    <title>TCP-æ‹¥å¡æ§åˆ¶ä¹‹æ…¢å¯åŠ¨</title>
    <link href="http://example.com/wiki/TCP-%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E4%B9%8B%E6%85%A2%E5%90%AF%E5%8A%A8/"/>
    <id>http://example.com/wiki/TCP-%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E4%B9%8B%E6%85%A2%E5%90%AF%E5%8A%A8/</id>
    <published>2021-07-04T08:33:19.000Z</published>
    <updated>2021-07-04T08:44:47.627Z</updated>
    
    <content type="html"><![CDATA[<p>ç”±äºTCPæ˜¯é¢å‘å­—èŠ‚æµçš„ä¼ è¾“åè®®ï¼Œå¯ä»¥å‘é€ä¸å®šé•¿çš„å­—èŠ‚æµæ•°æ®ï¼ŒTCPè¿æ¥å‘é€æ•°æ®æ—¶ä¼šâ€œå…ˆå¤©æ€§â€å°è¯•å ç”¨æ•´ä¸ªå¸¦å®½ï¼Œè€Œå½“æ‰€æœ‰çš„TCPè¿æ¥éƒ½å°è¯•å ç”¨ç½‘ç»œå¸¦å®½æ—¶ï¼Œå°±ä¼šé€ æˆç½‘ç»œçš„å µå¡ï¼Œè€ŒTCPæ…¢å¯åŠ¨ç®—æ³•åˆ™æ˜¯ä¸ºäº†è§£å†³è¿™ä¸€åœºæ™¯ï¼›</p><h2 id="å…¨å±€æ€è€ƒ"><a href="#å…¨å±€æ€è€ƒ" class="headerlink" title="å…¨å±€æ€è€ƒ"></a>å…¨å±€æ€è€ƒ</h2><img src="https://oscimg.oschina.net/oscnet/up-b70475e1aadd0776c54efdd5ecf26ef2606.png" width=700 height=400><p>æ‹¥å¡æ§åˆ¶è¦é¢å‘æ•´ä½“æ€è€ƒï¼Œå¦‚ä¸ŠğŸ‘†ç½‘ç»œæ‹“æ‰‘å›¾ï¼Œå½“å·¦è¾¹çš„ç½‘ç»œèŠ‚ç‚¹é€šè¿‡è·¯ç”±äº¤æ¢è®¾å¤‡å‘å³è¾¹çš„è®¾å¤‡ä¼ è¾“æŠ¥æ–‡çš„æ—¶å€™ï¼Œä¸­é—´çš„æŸä¸€é“¾è·¯çš„å¸¦å®½è‚¯å®šæ˜¯ä¸€å®šçš„ï¼Œè¿™é‡Œå‡è®¾1000Må¸¦å®½ï¼Œå½“å·¦è¾¹R1ä»¥700Mb/sçš„é€Ÿåº¦å‘é“¾è·¯ä¸­å‘é€æ•°æ®ï¼ŒåŒæ—¶R2ä»¥600Mb/sçš„é€Ÿç‡å‘é€æŠ¥æ–‡ï¼Œé‚£åŠ¿å¿…ä¼šæœ‰300Mbçš„æ•°æ®æŠ¥ä¸¢å¤±ï¼›ã€Œè·¯ç”±äº¤æ¢è®¾å¤‡åŸºäºå­˜å‚¨è½¬å‘æ¥å®ç°æŠ¥æ–‡çš„å‘é€ã€å¤§é‡æŠ¥æ–‡éƒ½æ˜¯æ—¶ï¼Œè·¯ç”±è®¾å¤‡çš„ç¼“å†²é˜Ÿåˆ—è‚¯å®šæ˜¯æ…¢çš„ï¼Œè¿™ä¹Ÿä¼šé€ æˆæŸäº›æ•°æ®æŠ¥åœ¨ç½‘ç»œé“¾è·¯ä¸­åœç•™æ—¶é—´è¿‡é•¿ï¼Œä»è€Œå¯¼è‡´TCPé€šè®¯å˜æ…¢ï¼Œç”šè‡³ç½‘ç»œç˜«ç—ªï¼›</p><p>ç†æƒ³çš„æƒ…å†µä¸‹ï¼Œå½“é“¾è·¯å¸¦å®½å æ»¡ä»¥åï¼Œé“¾è·¯ä»¥æœ€å¤§å¸¦å®½ä¼ è¾“æ•°æ®ï¼Œå½“ç„¶æ˜¾ç¤ºä¸­æ˜¯ä¸å¯èƒ½çš„ï¼Œå½“å‘ç”Ÿè½»åº¦æ‹¥å¡æ—¶ï¼Œé“¾è·¯çš„ååé‡å°±å¼€å§‹ä¸‹é™äº†ï¼Œå‘å±•åˆ°ä¸¥é‡é˜»å¡æ—¶ï¼Œé“¾è·¯çš„ååé‡ä¼šä¸¥é‡åœ°ä¸‹é™ï¼Œç”šè‡³ç˜«ç—ªï¼›</p><p>é‚£ä¹ˆï¼Œæ…¢å¯åŠ¨æ˜¯å¦‚ä½•å‘æŒ¥ä½œç”¨çš„å‘¢ï¼Ÿ</p><h2 id="æ‹¥å¡çª—å£"><a href="#æ‹¥å¡çª—å£" class="headerlink" title="æ‹¥å¡çª—å£"></a>æ‹¥å¡çª—å£</h2><blockquote><p>s æ‹¥å¡çª—å£cwnd(congestion window)</p></blockquote><ul><li>é€šå‘Šçª—å£rwnd(receiverâ€˜s advertised window) <blockquote><p>å…¶å®å°±æ˜¯RCV.WNDï¼Œæ ‡å¿—åœ¨TCPé¦–éƒ¨çš„Windowå­—æ®µï¼</p></blockquote></li><li>å‘é€çª—å£swnd = min(cwndï¼Œrwnd)<blockquote><p>å‰é¢å­¦ä¹ æ»‘åŠ¨çª—å£çš„æ—¶å€™æåˆ°å‘é€çª—å£å¤§è‡´ç­‰äºæ¥å—çª—å£ï¼Œå½“å¼•å…¥æ‹¥å¡çª—å£æ—¶ï¼Œå‘é€çª—å£å°±æ˜¯æ‹¥å¡çª—å£å’Œå¯¹æ–¹æ¥å—çª—å£çš„æœ€å°å€¼</p></blockquote></li></ul><img src="https://oscimg.oschina.net/oscnet/up-4fffa8af1fb99c1ce534085f112fa9f065c.png" width=360 height=360><blockquote><p>i æ¯æ”¶åˆ°ä¸€ä¸ªACKï¼Œcwndæ‰©å……ä¸€å€</p></blockquote><p>æ…¢å¯åŠ¨çš„çª—å£å¤§å°å¦‚ä½•è®¾ç½®å‘¢ï¼Ÿ<br>å¦‚ä¸Šæ‰€ç¤ºï¼Œèµ·åˆæ‹¥å¡çª—å£è®¾ç½®æˆ1ä¸ªæŠ¥æ–‡æ®µå¤§å°ï¼Œå½“å‘é€ç«¯å‘é€ä¸€ä¸ªæŠ¥æ–‡æ®µå¹¶ä¸”æ²¡æœ‰å‘ç”Ÿä¸¢åŒ…æ—¶ï¼Œè°ƒæ•´æ‹¥å¡çª—å£ä¸º2ä¸ªæŠ¥æ–‡æ®µå¤§å°ï¼Œå¦‚æœè¿˜æ²¡æœ‰å‘ç”Ÿä¸¢åŒ…ï¼Œä¸€æ¬¡ç±»æ¨ï¼ŒçŸ¥é“å‘ç”Ÿä¸¢åŒ…åœæ­¢ï¼›å‘é€çª—å£ä»¥ã€ŒæŒ‡æ•°ã€çš„æ–¹å¼æ‰©å¤§ï¼›æ…¢å¯åŠ¨æ˜¯æ— æ³•ç¡®çŸ¥ç½‘ç»œæ‹¥å¡ç¨‹åº¦çš„æƒ…å†µä¸‹ï¼Œä»¥è¯•æ¢æ€§åœ°æ–¹å¼å¿«é€Ÿæ‰©å¤§æ‹¥å¡çª—å£ï¼›</p><h2 id="æ…¢å¯åŠ¨åˆå§‹çª—å£"><a href="#æ…¢å¯åŠ¨åˆå§‹çª—å£" class="headerlink" title="æ…¢å¯åŠ¨åˆå§‹çª—å£"></a>æ…¢å¯åŠ¨åˆå§‹çª—å£</h2><p>æ…¢å¯åŠ¨çš„æ‹¥å¡çª—å£çœŸçš„å°±å¦‚ä¸Šé¢æ‰€è¯´çš„ä»¥ä¸€ä¸ªæŠ¥æ–‡æ®µå¤§å°ä½œä¸ºåˆå§‹å€¼å—ï¼Ÿ  </p><img src="https://oscimg.oschina.net/oscnet/up-e632e6592fd276be90e5cf65a8365b3ddfb.png" width=360 height=360>  <blockquote><p>w æ…¢å¯åŠ¨åˆå§‹çª—å£ IW(Initial Window)çš„å˜è¿</p></blockquote><ul><li>1 SMSS:RFC2001(1997)</li><li>2 - 4 SMSS:RFC2414(1998)<blockquote><p>IW = min (4<em>SMSS, max (2</em>SMSS, 4380 bytes))</p></blockquote></li><li>10 SMSS:RFC6928(2013)<blockquote><p>IW = min (10<em>MSS, max (2</em>MSS, 14600))</p></blockquote></li></ul><blockquote><p>w å…¶å®åœ¨å®é™…æƒ…å†µä¸‹ï¼Œäº’è”ç½‘ä¸­çš„ç½‘é¡µéƒ½åœ¨10ä¸ªmsså·¦å³ï¼Œå¦‚æœè¿˜æ˜¯ä»1ä¸ªmsså¼€å§‹ï¼Œåˆ™ä¼šæµªè´¹3ä¸ªRTTçš„æ—¶é—´ï¼›  </p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ç”±äºTCPæ˜¯é¢å‘å­—èŠ‚æµçš„ä¼ è¾“åè®®ï¼Œå¯ä»¥å‘é€ä¸å®šé•¿çš„å­—èŠ‚æµæ•°æ®ï¼ŒTCPè¿æ¥å‘é€æ•°æ®æ—¶ä¼šâ€œå…ˆå¤©æ€§â€å°è¯•å ç”¨æ•´ä¸ªå¸¦å®½ï¼Œè€Œå½“æ‰€æœ‰çš„TCPè¿æ¥éƒ½å°è¯•å ç”¨ç½‘ç»œå¸¦å®½æ—¶ï¼Œå°±ä¼šé€ æˆç½‘ç»œçš„å µå¡ï¼Œè€ŒTCPæ…¢å¯åŠ¨ç®—æ³•åˆ™æ˜¯ä¸ºäº†è§£å†³è¿™ä¸€åœºæ™¯ï¼›&lt;/p&gt;
&lt;h2 id=&quot;å…¨å±€æ€è€ƒ&quot;&gt;&lt;a href=&quot;#å…¨</summary>
      
    
    
    
    <category term="Computer Network" scheme="http://example.com/categories/Computer-Network/"/>
    
    <category term="TCP" scheme="http://example.com/categories/Computer-Network/TCP/"/>
    
    
    <category term="TCP" scheme="http://example.com/tags/TCP/"/>
    
  </entry>
  
  <entry>
    <title>TCP-å¦‚ä½•å‡å°‘å°æŠ¥æ–‡æå‡ç½‘ç»œæ•ˆç‡</title>
    <link href="http://example.com/wiki/TCP-%E5%A6%82%E4%BD%95%E5%87%8F%E5%B0%91%E5%B0%8F%E6%8A%A5%E6%96%87%E6%8F%90%E5%8D%87%E7%BD%91%E7%BB%9C%E6%95%88%E7%8E%87/"/>
    <id>http://example.com/wiki/TCP-%E5%A6%82%E4%BD%95%E5%87%8F%E5%B0%91%E5%B0%8F%E6%8A%A5%E6%96%87%E6%8F%90%E5%8D%87%E7%BD%91%E7%BB%9C%E6%95%88%E7%8E%87/</id>
    <published>2021-07-04T08:32:55.000Z</published>
    <updated>2021-07-04T08:47:34.548Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å¦‚ä½•å‡å°‘å°æŠ¥æ–‡æå‡ç½‘ç»œæ•ˆç‡"><a href="#å¦‚ä½•å‡å°‘å°æŠ¥æ–‡æå‡ç½‘ç»œæ•ˆç‡" class="headerlink" title="å¦‚ä½•å‡å°‘å°æŠ¥æ–‡æå‡ç½‘ç»œæ•ˆç‡"></a>å¦‚ä½•å‡å°‘å°æŠ¥æ–‡æå‡ç½‘ç»œæ•ˆç‡</h1><p>æ¯ä¸€ä¸ªTCPæŠ¥æ–‡æ®µéƒ½åŒ…å«20å­—èŠ‚çš„IPå¤´éƒ¨å’Œ20å­—èŠ‚çš„TCPé¦–éƒ¨ï¼Œå¦‚æœæŠ¥æ–‡æ®µçš„æ•°æ®éƒ¨åˆ†å¾ˆå°‘çš„è¯ï¼Œç½‘ç»œæ•ˆç‡ä¼šå¾ˆå·®ï¼›</p><h2 id="SWS-Silly-Window-syndrome-ç³Šæ¶‚çª—å£ç»¼åˆç—‡"><a href="#SWS-Silly-Window-syndrome-ç³Šæ¶‚çª—å£ç»¼åˆç—‡" class="headerlink" title="SWS(Silly Window syndrome) ç³Šæ¶‚çª—å£ç»¼åˆç—‡"></a>SWS(Silly Window syndrome) ç³Šæ¶‚çª—å£ç»¼åˆç—‡</h2><image src="https://oscimg.oschina.net/oscnet/up-777275434842bda3be80da2687c4556ee3b.png" width=600 height=450 ><p>å¦‚ä¸Šå›¾ğŸ‘†æ‰€ç¤ºåœºæ™¯ï¼Œåœ¨ä¹‹å‰çš„æ»‘åŠ¨çª—å£å·²ç»äº†è§£è¿‡ï¼Œéšç€æœåŠ¡ç«¯å¤„ç†è¿æ¥æ•°æ®èƒ½åŠ›è¶Šæ¥è¶Šä½ï¼ŒæœåŠ¡ç«¯çš„å¯ç”¨çª—å£ä¸æ–­å‹ç¼©ï¼Œæœ€ç»ˆå¯¼è‡´çª—å£å…³é—­ï¼›</p><h3 id="SWS-é¿å…ç®—æ³•"><a href="#SWS-é¿å…ç®—æ³•" class="headerlink" title="SWS é¿å…ç®—æ³•"></a>SWS é¿å…ç®—æ³•</h3><p>SWS é¿å…ç®—æ³•å¯¹å‘é€æ–¹å’Œæ¥æ”¶æ–¹éƒ½åšå®¢</p><ul><li>æ¥æ”¶æ–¹<blockquote><p>i David D Clark ç®—æ³•:çª—å£è¾¹ç•Œç§»åŠ¨å€¼å°äº min(MSS, ç¼“å­˜/2)æ—¶ï¼Œ<br>é€šçŸ¥çª—å£ä¸º 0</p></blockquote></li><li>å‘é€æ–¹<blockquote><p>w Nagle ç®—æ³•:<br>1ã€TCP_NODELAY ç”¨äºå…³é—­ Nagle ç®—æ³•<br>2ã€æ²¡æœ‰å·²å‘é€æœªç¡®è®¤æŠ¥æ–‡æ®µæ—¶ï¼Œç«‹åˆ»å‘é€æ•°æ®<br>3ã€å­˜åœ¨æœªç¡®è®¤æŠ¥æ–‡æ®µæ—¶ï¼Œç›´åˆ°:1-æ²¡æœ‰å·²å‘é€æœªç¡®è®¤æŠ¥æ–‡æ®µï¼Œæˆ–è€… 2-æ•°æ®é•¿åº¦è¾¾åˆ°MSSæ—¶å†å‘é€</p></blockquote></li></ul><h2 id="TCP-delayed-acknowledgment-å»¶è¿Ÿç¡®è®¤"><a href="#TCP-delayed-acknowledgment-å»¶è¿Ÿç¡®è®¤" class="headerlink" title="TCP delayed acknowledgment å»¶è¿Ÿç¡®è®¤"></a>TCP delayed acknowledgment å»¶è¿Ÿç¡®è®¤</h2><p>å®é™…æƒ…å†µä¸‹ï¼Œæ²¡æœ‰æºå¸¦ä»»ä½•æ•°æ®çš„ACKæŠ¥æ–‡ä¹Ÿä¼šé€ æˆç½‘ç»œæ•ˆç‡ä½ä¸‹çš„ï¼Œå› ä¸ºç¡®è®¤æŠ¥æ–‡ä¹ŸåŒ…å«40å­—èŠ‚çš„å¤´éƒ¨ä¿¡æ¯ï¼Œä½†ä»…ä»…æ˜¯ä¸ºäº†ä¼ è¾“ACK=1è¿™æ ·çš„ä¿¡æ¯ï¼Œä¸ºäº†è§£å†³è¿™ç§æƒ…å†µï¼ŒTCPæœ‰ä¸€ç§æœºåˆ¶ï¼Œå«åšå»¶è¿Ÿç¡®è®¤ï¼Œå¦‚ä¸‹ğŸ‘‡ï¼š</p><ul><li>å½“æœ‰å“åº”æ•°æ®è¦å‘é€æ—¶,ackä¼šéšç€å“åº”æ•°æ®ç«‹å³å‘é€ç»™å¯¹æ–¹.</li><li>å¦‚æœæ²¡æœ‰å“åº”æ•°æ®,ackçš„å‘é€å°†ä¼šæœ‰ä¸€ä¸ªå»¶è¿Ÿ,ä»¥ç­‰å¾…çœ‹æ˜¯å¦æœ‰å“åº”æ•°æ®å¯ä»¥ä¸€èµ·å‘é€</li><li>å¦‚æœåœ¨ç­‰å¾…å‘é€ackæœŸé—´,å¯¹æ–¹çš„ç¬¬äºŒä¸ªæ•°æ®æ®µåˆåˆ°è¾¾äº†,è¿™æ—¶è¦ç«‹å³å‘é€ack</li></ul><h3 id="é‚£ä¸ªå»¶è¿Ÿçš„æ—¶é—´å¦‚ä½•è®¾ç½®å‘¢ï¼Ÿ"><a href="#é‚£ä¸ªå»¶è¿Ÿçš„æ—¶é—´å¦‚ä½•è®¾ç½®å‘¢ï¼Ÿ" class="headerlink" title="é‚£ä¸ªå»¶è¿Ÿçš„æ—¶é—´å¦‚ä½•è®¾ç½®å‘¢ï¼Ÿ"></a>é‚£ä¸ªå»¶è¿Ÿçš„æ—¶é—´å¦‚ä½•è®¾ç½®å‘¢ï¼Ÿ</h3><image src="https://oscimg.oschina.net/oscnet/up-5933d7b1310c191603f366eb55669a7cdc8.png" width=400 height=250><p>ä¸Šé¢ğŸ‘†æ˜¯Linuxæ“ä½œç³»ç»Ÿå¯¹äºTCPå»¶æ—¶çš„å®šä¹‰ã€‚</p><p>HZæ˜¯ä»€å‘¢ï¼Ÿå…¶å®é‚£æ˜¯å’Œæ“ä½œç³»ç»Ÿçš„æ—¶é’Ÿç›¸å…³çš„ï¼Œå…·ä½“çš„æ“ä½œç³»ç»Ÿé—´å„æœ‰å·®åˆ«ï¼›<br>å¦‚ä½•æŸ¥çœ‹Linuxæ“ä½œç³»ç»Ÿä¸‹çš„HZå¦‚ä½•è®¾ç½®å‘¢ï¼Ÿ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /boot/config- `-uname -r` | grep &#x27;^GONFIG_HZ=&#x27;</span><br></pre></td></tr></table></figure><h2 id="TCP-CORK"><a href="#TCP-CORK" class="headerlink" title="TCP_CORK"></a>TCP_CORK</h2><blockquote><p>sendfile é›¶æ‹·è´æŠ€æœ¯</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å¦‚ä½•å‡å°‘å°æŠ¥æ–‡æå‡ç½‘ç»œæ•ˆç‡&quot;&gt;&lt;a href=&quot;#å¦‚ä½•å‡å°‘å°æŠ¥æ–‡æå‡ç½‘ç»œæ•ˆç‡&quot; class=&quot;headerlink&quot; title=&quot;å¦‚ä½•å‡å°‘å°æŠ¥æ–‡æå‡ç½‘ç»œæ•ˆç‡&quot;&gt;&lt;/a&gt;å¦‚ä½•å‡å°‘å°æŠ¥æ–‡æå‡ç½‘ç»œæ•ˆç‡&lt;/h1&gt;&lt;p&gt;æ¯ä¸€ä¸ªTCPæŠ¥æ–‡æ®µéƒ½åŒ…å«20å­—èŠ‚çš„IPå¤´éƒ¨å’Œ20å­—èŠ‚</summary>
      
    
    
    
    <category term="Computer Network" scheme="http://example.com/categories/Computer-Network/"/>
    
    <category term="TCP" scheme="http://example.com/categories/Computer-Network/TCP/"/>
    
    
    <category term="TCP" scheme="http://example.com/tags/TCP/"/>
    
  </entry>
  
  <entry>
    <title>TCP-æ»‘åŠ¨çª—å£</title>
    <link href="http://example.com/wiki/TCP-%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3/"/>
    <id>http://example.com/wiki/TCP-%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3/</id>
    <published>2021-07-04T08:32:40.000Z</published>
    <updated>2021-07-04T08:43:48.561Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ»‘åŠ¨çª—å£"><a href="#æ»‘åŠ¨çª—å£" class="headerlink" title="æ»‘åŠ¨çª—å£"></a>æ»‘åŠ¨çª—å£</h1><blockquote><p>i ä¹‹å‰å­¦ä¹ äº†PARæ–¹å¼çš„TCPè¶…æ—¶å’Œé‡ä¼ ï¼Œå…¶å®åœ¨è€ƒè™‘å‘é€æ–¹å‘é€æ•°æ®æŠ¥çš„åŒæ—¶ï¼Œä¹Ÿåº”è¯¥è€ƒè™‘æ¥æ”¶æ–¹å¯¹äºæ•°æ®çš„å¤„ç†èƒ½åŠ›ï¼Œç”±æ­¤å¼•å‡ºæœ¬æ¬¡å­¦ä¹ çš„ä¸»é¢˜ â€“ æ»‘åŠ¨çª—å£</p></blockquote><h2 id="å‘é€ç«¯çª—å£"><a href="#å‘é€ç«¯çª—å£" class="headerlink" title="å‘é€ç«¯çª—å£"></a>å‘é€ç«¯çª—å£</h2><p>æ»‘åŠ¨çª—å£æŒ‰ç…§ä¼ è¾“æ•°æ®æ–¹å‘åˆ†ä¸ºä¸¤ç§ï¼Œå‘é€ç«¯çª—å£å’Œæ¥æ”¶ç«¯çª—å£ï¼›ä¸‹é¢å…ˆçœ‹ä¸€ä¸‹å‘é€ç«¯çª—å£ğŸ‘‡ï¼š</p><image src="https://oscimg.oschina.net/oscnet/up-13e77c53892b884d334614e4fa9550a1113.png"><p>ä¸Šå›¾åˆ†ä¸ºå››ä¸ªéƒ¨åˆ†ï¼š</p><ol><li>å·²å‘é€å¹¶æ”¶åˆ° Ack ç¡®è®¤çš„æ•°æ®:1-31 å­—èŠ‚</li><li>å·²å‘é€æœªæ”¶åˆ° Ack ç¡®è®¤çš„æ•°æ®:32-45 å­—èŠ‚</li><li>æœªå‘é€ä½†æ€»å¤§å°åœ¨æ¥æ”¶æ–¹å¤„ç†èŒƒå›´å†…:46-51 å­—èŠ‚</li><li>æœªå‘é€ä½†æ€»å¤§å°è¶…å‡ºæ¥æ”¶æ–¹å¤„ç†èŒƒå›´:52-å­—èŠ‚</li></ol><h3 id="å¯ç”¨çª—å£å’Œå‘é€çª—å£"><a href="#å¯ç”¨çª—å£å’Œå‘é€çª—å£" class="headerlink" title="å¯ç”¨çª—å£å’Œå‘é€çª—å£"></a>å¯ç”¨çª—å£å’Œå‘é€çª—å£</h3><image src="https://oscimg.oschina.net/oscnet/up-b8bb072922232fe6d62aec3520647d869fe.png"> <p>å¦‚ä¸Šå›¾è¿™é‡Œå¯ä»¥å¼•å‡ºä¸¤ä¸ªæ¦‚å¿µï¼šã€Œå¯ç”¨çª—å£ã€å’Œã€Œå‘é€çª—å£ã€</p><blockquote><p>s ã€ <strong>å¯ç”¨çª—å£</strong> ã€‘ï¼š å°±æ˜¯ä¸Šå›¾ä¸­çš„ç¬¬ä¸‰éƒ¨åˆ†ï¼Œå±äºè¿˜æœªå‘é€ï¼Œä½†æ˜¯åœ¨æ¥æ”¶ç«¯å¯ä»¥å¤„ç†èŒƒå›´å†…çš„éƒ¨åˆ†ï¼›<br>ã€ <strong>å‘é€çª—å£</strong> ã€‘ï¼š å°±æ˜¯å‘é€ç«¯å¯ä»¥å‘é€çš„æœ€å¤§æŠ¥æ–‡å¤§å°ï¼Œå¦‚ä¸Šå›¾ä¸­çš„ç¬¬äºŒéƒ¨åˆ†+ç¬¬ä¸‰éƒ¨åˆ†åˆæˆå‘é€çª—å£ï¼›</p></blockquote><h3 id="å¯ç”¨çª—å£è€—å°½"><a href="#å¯ç”¨çª—å£è€—å°½" class="headerlink" title="å¯ç”¨çª—å£è€—å°½"></a>å¯ç”¨çª—å£è€—å°½</h3><image src="https://oscimg.oschina.net/oscnet/up-333b88e14f6fd5833fd92a9ab45894e60dd.png"> <p>å¯ç”¨çª—å£ä¼šåœ¨ä¸€ä¸ªçŸ­æš‚çš„åœç•™ï¼Œå½“å¤„äºæœªå‘é€å¹¶ä¸”æ¥å—ç«¯å¯ä»¥æ¥å—èŒƒå›´å†…çš„æ•°æ®ä¼ è¾“å®Œæˆä¹‹åï¼Œå¯ç”¨çª—å£è€—å°½ï¼›<br>å½“ç„¶ä¸Šé¢ä»…ä»…è¯´çš„ä¸€ç¬æ—¶çš„çŠ¶æ€ï¼Œè¿™ä¸ªçŠ¶æ€ä¸‹ï¼Œå·²ç»å‘é€çš„æŠ¥æ–‡æ®µè¿˜æ²¡æœ‰ç¡®è®¤ï¼Œå¹¶ä¸”å‘é€çª—å£å¤§å°æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œæ­¤æ—¶å‘é€çª—å£è¾¾åˆ°æœ€å¤§çŠ¶æ€ï¼›</p><h3 id="çª—å£ç§»åŠ¨"><a href="#çª—å£ç§»åŠ¨" class="headerlink" title="çª—å£ç§»åŠ¨"></a>çª—å£ç§»åŠ¨</h3><image src="https://oscimg.oschina.net/oscnet/up-4436cdb5c6720e3e4a262ec1cad64660a77.png">  <p>å¦‚æœåœ¨å‘é€çª—å£ä¸­å·²ç»å‘é€çš„æŠ¥æ–‡æ®µå·²ç»å¾—åˆ°æ¥å—ç«¯ç¡®è®¤ä¹‹åï¼Œé‚£éƒ¨åˆ†æ•°æ®å°±ä¼šè¢«ç§»é™¤å‘é€çª—å£ï¼Œåœ¨å‘é€çª—å£å¤§å°ä¸å‘ç”Ÿå˜åŒ–çš„æƒ…å†µä¸‹ï¼Œå‘é€çª—å£å‘å³â¡ï¸ç§»åŠ¨5ä¸ªå­—èŠ‚ï¼Œå› ä¸ºå·¦è¾¹å·²ç»å‘é€çš„5ä¸ªå­—èŠ‚å¾—åˆ°ç¡®è®¤ä¹‹åï¼Œè¢«ç§»é™¤å‘é€çª—å£ï¼›</p><h3 id="å¯ç”¨çª—å£å¦‚ä½•è®¡ç®—"><a href="#å¯ç”¨çª—å£å¦‚ä½•è®¡ç®—" class="headerlink" title="å¯ç”¨çª—å£å¦‚ä½•è®¡ç®—"></a>å¯ç”¨çª—å£å¦‚ä½•è®¡ç®—</h3><image src="https://oscimg.oschina.net/oscnet/up-76f97fc92f6940c7197ff9fcad3c187fd98.png"><p>å†æ¬¡å¼•å‡ºä¸‰ä¸ªæ¦‚å¿µï¼š</p><ul><li>SND.WND<blockquote><p>i SND æŒ‡çš„æ˜¯å‘é€ç«¯ï¼ŒWNDæŒ‡çš„æ˜¯windowï¼Œä¹Ÿå°±æ˜¯å‘é€ç«¯çª—å£çš„æ„æ€</p></blockquote></li><li>SND.UNA<blockquote><p>i UNA å°±æ˜¯un ACKçš„æ„æ€ï¼ŒæŒ‡çš„æ˜¯å·²ç»å‘é€ä½†æ˜¯æ²¡æœ‰æ²¡æœ‰ç¡®è®¤ å®ƒæŒ‡å‘çª—å£çš„ç¬¬ä¸€ä¸ªå­—èŠ‚å¤„</p></blockquote></li><li>SND.NXT<blockquote><p>i NXT æ˜¯nextçš„ä½ç½®ï¼Œæ˜¯å‘é€æ–¹æ¥ä¸‹æ¥è¦å‘é€çš„ä½ç½®ï¼Œå®ƒæŒ‡å‘å¯ç”¨çª—å£çš„ç¬¬ä¸€ä¸ªå­—èŠ‚å¤„</p></blockquote></li></ul><p><strong>é‚£å°±å¾ˆå®¹æ˜“å¾—å‡ºå¯ç”¨çª—å£çš„å¤§å°äº†ï¼Œè®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š</strong></p><blockquote><p>i Usable Window Size = SND.UNA + SND.WND - SND.NXT </p></blockquote><h2 id="æ¥æ”¶ç«¯çª—å£"><a href="#æ¥æ”¶ç«¯çª—å£" class="headerlink" title="æ¥æ”¶ç«¯çª—å£"></a>æ¥æ”¶ç«¯çª—å£</h2><p>ä¸Šé¢ä»‹ç»äº†å‘é€ç«¯çª—å£çš„ä¸€äº›æ¦‚å¿µï¼Œä¸‹é¢ğŸ‘‡æ˜¯æ¥æ”¶ç«¯çª—å£çš„å­¦ä¹ ï¼š</p><image src="https://oscimg.oschina.net/oscnet/up-0313775eaecc790ad26b44c3daa17ced593.png"><ol><li>å·²ç»æ¥æ”¶å¹¶ä¸”å·²ç»ç¡®è®¤ :28-31 å­—èŠ‚</li><li>è¿˜æœªæ¥æ”¶å¹¶ä¸”æ¥æ”¶ç«¯å¯ä»¥æ¥å—:32-51 å­—èŠ‚</li><li>è¿˜æœªæ¥æ”¶å¹¶ä¸”è¶…å‡ºæ¥æ”¶å¤„ç†èƒ½åŠ›:51-57 å­—èŠ‚</li></ol><p>è¿™é‡Œå¼•å‡ºä¸¤ä¸ªæ¦‚å¿µï¼š</p><ul><li>RCV.WND<blockquote><p>i RCVæ˜¯æ¥æ”¶ç«¯çš„æ„æ€ï¼ŒWNDæ˜¯æ¥å—ç«¯çª—å£çš„å¤§å°</p></blockquote></li><li>RCV.NXT<blockquote><p>i NXTè¡¨ç¤ºçš„æ˜¯æ¥å—ç«¯æ¥æ”¶çª—å£çš„å¼€å§‹ä½ç½®ï¼Œä¹Ÿå°±æ˜¯æ¥æ”¶æ–¹æ¥ä¸‹æ¥å¤„ç†çš„ç¬¬ä¸€ä¸ªå­—èŠ‚ï¼›</p></blockquote></li></ul><p>RCV.WNDçš„å¤§å°æ¥å—ç«¯çš„å†…å­˜ä»¥åŠç¼“å†²åŒºå¤§å°æœ‰å…³ï¼Œåœ¨æŸç§æ„ä¹‰ä¸Šè¯´ï¼Œæ¥å—ç«¯çš„çª—å£å¤§å°å’Œå‘é€ç«¯å¤§å°å¤§è‡´ç›¸åŒï¼›<br>æ¥å—ç«¯å¯æ¥æ”¶çš„æ•°æ®èƒ½åŠ›å¯ä»¥é€šè¿‡TCPé¦–éƒ¨çš„Windowå­—æ®µè®¾ç½®ï¼Œä½†æ˜¯æ¥å—ç«¯çš„å¤„ç†èƒ½åŠ›æ˜¯å¯èƒ½éšæ—¶å˜åŒ–çš„ï¼Œæ‰€ä»¥æ¥å—ç«¯å’ŒæœåŠ¡ç«¯çš„çª—å£å¤§å°å¤§è‡´æ˜¯ä¸€æ ·çš„ï¼›</p><h2 id="æµé‡æ§åˆ¶"><a href="#æµé‡æ§åˆ¶" class="headerlink" title="æµé‡æ§åˆ¶"></a>æµé‡æ§åˆ¶</h2><p>ä¸‹é¢ğŸ‘‡æ ¹æ®ä¸€ä¸ªä¾‹å­æ¥é˜è¿°æµé‡æ§åˆ¶ï¼Œæ¨¡æ‹Ÿä¸€ä¸ªGETè¯·æ±‚ï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡ç«¯è¯·æ±‚ä¸€ä¸ª260å­—èŠ‚çš„æ–‡ä»¶ï¼Œå¤§è‡´æµç¨‹å¦‚ä¸‹ï¼Œæ¯”è¾ƒç¹çï¼š</p><image src="https://oscimg.oschina.net/oscnet/up-08e7b2cd9ee3ddaa44bca900a1824e08b09.png" width=900 height=480> <blockquote><p>s è¿™é‡Œå‡è®¾MSSå’Œçª—å£çš„å¤§å°ä¸å‘ç”Ÿå˜åŒ–ï¼ŒåŒæ—¶å®¢æˆ·ç«¯å’Œå‘é€ç«¯çŠ¶æ€å¦‚ä¸‹ï¼š<br>ã€ å®¢æˆ·ç«¯ ã€‘ï¼š å‘é€çª—å£é»˜è®¤360å­—èŠ‚ æ¥æ”¶çª—å£è®¾å®š200å­—èŠ‚<br>ã€ æœåŠ¡ç«¯ ã€‘ï¼š å‘é€çª—å£è®¾å®š200å­—èŠ‚ æ¥æ”¶çª—å£è®¾å®š360å­—èŠ‚</p></blockquote><p>Step1ï¼š å®¢æˆ·ç«¯å‘é€140å­—èŠ‚çš„æ•°æ®åˆ°æœåŠ¡ç«¯</p><blockquote><p>i ã€å®¢æˆ·ç«¯ã€‘å‘é€140å­—èŠ‚ï¼Œã€SND.NXTã€‘ä»1-&gt;141 </p></blockquote><blockquote><p>w ã€æœåŠ¡ç«¯ã€‘çŠ¶æ€ä¸å˜ï¼Œç­‰å¾…æ¥æ”¶å®¢æˆ·ç«¯ä¼ è¾“çš„140å­—èŠ‚</p></blockquote><p>Step2: æœåŠ¡ç«¯æ¥æ”¶140å­—èŠ‚ï¼Œå‘é€80å­—èŠ‚å“åº”ä»¥åŠACK</p><blockquote><p>i ã€ å®¢æˆ·ç«¯ ã€‘å‘é€140å­—èŠ‚ä¹‹åç­‰å¾…ã€ æœåŠ¡ç«¯ ã€‘çš„ACK</p></blockquote><blockquote><p>wã€ æœåŠ¡ç«¯ ã€‘å¯ç”¨çª—å£å³ç§»ï¼Œã€RCV.NXTã€‘ä»1-&gt;141<br>ã€ æœåŠ¡ç«¯ ã€‘å‘é€80å­—èŠ‚æ•°æ®ï¼Œã€SND.NXTã€‘ä»241-&gt;321</p></blockquote><p>Step3: å®¢æˆ·ç«¯æ¥æ”¶å“åº”ACKï¼Œå¹¶ä¸”å‘é€ACK </p><blockquote><p>i ã€ å®¢æˆ·ç«¯ ã€‘å‘å‡ºçš„140å­—èŠ‚å¾—åˆ°ç¡®è®¤ï¼Œã€SND.UNAã€‘å³ç§»140å­—èŠ‚<br>ã€ å®¢æˆ·ç«¯ ã€‘æ¥æ”¶80å­—èŠ‚æ•°æ®ï¼Œã€RCV.NXTã€‘å³ç§»80å­—èŠ‚ï¼Œä»241-&gt;321</p></blockquote><p>Step4: æœåŠ¡ç«¯å‘é€ä¸€ä¸ª280å­—èŠ‚çš„æ–‡ä»¶ï¼Œä½†æ˜¯280å­—èŠ‚è¶…å‡ºäº†å®¢æˆ·ç«¯çš„æ¥æ”¶çª—å£ï¼Œæ‰€ä»¥å®¢æˆ·ç«¯åˆ†æˆä¸¤éƒ¨åˆ†ä¼ è¾“ï¼Œå…ˆä¼ è¾“120å­—èŠ‚ï¼›</p><blockquote><p>w ã€ æœåŠ¡ç«¯ ã€‘å‘é€120å­—èŠ‚ï¼Œã€SND.NXTã€‘å‘å³ç§»åŠ¨120å­—èŠ‚ï¼Œä»321-&gt;441</p></blockquote><p>Step5: å®¢æˆ·ç«¯æ¥æ”¶æ–‡ä»¶ç¬¬ä¸€éƒ¨åˆ†ï¼Œå¹¶å‘é€ACK</p><blockquote><p>i ã€ å®¢æˆ·ç«¯ ã€‘æ¥æ”¶120å­—èŠ‚ï¼Œã€RCV.NXTã€‘ä»321-&gt;441</p></blockquote><p>Step6ï¼šæœåŠ¡ç«¯æ¥æ”¶åˆ°ç¬¬äºŒæ­¥80å­—èŠ‚çš„ACK</p><blockquote><p>w [ æœåŠ¡å™¨ ] 80å­—èŠ‚å¾—åˆ°ACK ã€SND.UNAã€‘ä»241-&gt;321</p></blockquote><p>Step7: æœåŠ¡ç«¯æ¥æ”¶åˆ°ç¬¬4æ­¥çš„ç¡®è®¤</p><blockquote><p>w ã€ æœåŠ¡ç«¯ ã€‘ä¹‹å‰å‘é€æ–‡ä»¶ç¬¬ä¸€éƒ¨åˆ†çš„120å­—èŠ‚å¾—åˆ°ç¡®è®¤ï¼Œã€SND.UNAã€‘å³ç§»åŠ¨120ï¼Œä»321-&gt;441</p></blockquote><p>Step8: æœåŠ¡ç«¯å‘é€æ–‡ä»¶ç¬¬äºŒéƒ¨åˆ†çš„160å­—èŠ‚</p><blockquote><p>w ã€ æœåŠ¡ç«¯ ã€‘ï¼š å‘é€160å­—èŠ‚ï¼Œã€SND.NXTã€‘å‘å³ç§»åŠ¨160å­—èŠ‚ï¼Œä»441-&gt;601</p></blockquote><p>Step9: å®¢æˆ·ç«¯æ¥æ”¶åˆ°æ–‡ä»¶ç¬¬äºŒéƒ¨åˆ†160å­—èŠ‚ï¼ŒåŒæ—¶å‘é€ACK</p><blockquote><p>i ã€ å®¢æˆ·ç«¯ ã€‘æ¥æ”¶160å­—èŠ‚ï¼Œã€RCV.NXTã€‘å‘å³ç§»åŠ¨160å­—èŠ‚ï¼Œä»441-&gt;601</p></blockquote><p>Step10: æœåŠ¡ç«¯æ”¶åˆ°æ–‡ä»¶ç¬¬äºŒéƒ¨åˆ†çš„ACK</p><blockquote><p>w ã€ æœåŠ¡ç«¯ ã€‘å‘é€çš„160å­—èŠ‚å¾—åˆ°ç¡®è®¤ï¼Œã€SND.UNAã€‘å‘å³ä¸€å®š160å­—èŠ‚ï¼Œä»441-&gt;601ï¼›è‡³æ­¤å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡ç«¯å‘é€çš„å®Œæ•´çš„æ–‡ä»¶ï¼›</p></blockquote><p>ä¸Šé¢é€šè¿‡è¡¨æ ¼åˆ—ä¸¾æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯æ¯ä¸ªçŠ¶æ€åœ¨æ¯ä¸ªæ­¥éª¤çš„çŠ¶æ€ï¼Œå¦‚æœä¸æ˜¯å¾ˆå¥½ç†è§£ï¼Œå¯ä»¥çœ‹å¦‚ä¸‹ç¤ºæ„å›¾è¾…åŠ©ç†è§£ï¼š</p><h3 id="å®¢æˆ·ç«¯äº¤äº’æµç¨‹"><a href="#å®¢æˆ·ç«¯äº¤äº’æµç¨‹" class="headerlink" title="å®¢æˆ·ç«¯äº¤äº’æµç¨‹"></a>å®¢æˆ·ç«¯äº¤äº’æµç¨‹</h3><image src="https://oscimg.oschina.net/oscnet/up-6ee487f0677efac1a822207f45fc0a2b842.png" width=500 ><h3 id="æœåŠ¡ç«¯äº¤äº’æµç¨‹"><a href="#æœåŠ¡ç«¯äº¤äº’æµç¨‹" class="headerlink" title="æœåŠ¡ç«¯äº¤äº’æµç¨‹"></a>æœåŠ¡ç«¯äº¤äº’æµç¨‹</h3><image src="https://oscimg.oschina.net/oscnet/up-4a0095fb6e7a82a708e4df96dfdacd956aa.png" width="500"> <p>ä¸Šé¢ğŸ‘†æ˜¯æ¨¡æ‹Ÿä¸€ä¸ªGETè¯·æ±‚ï¼ŒæœåŠ¡ç«¯å‘é€ä¸€ä¸ª280å­—èŠ‚çš„æ–‡ä»¶ç»™åˆ°å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯çš„æ¥æ”¶çª—å£æ˜¯200å­—èŠ‚åœºæ™¯åŠ ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„æ•°æ®ä¼ è¾“ä¸äº¤äº’æµç¨‹ï¼Œé€šè¿‡è¿™ä¸ªæµç¨‹æ¥å­¦ä¹ æ»‘åŠ¨çª—å£çš„ç§»åŠ¨çŠ¶æ€å’Œæµé‡æ§åˆ¶çš„å¤§è‡´æµç¨‹ï¼›</p><h2 id="æ»‘åŠ¨çª—å£ä¸æ“ä½œç³»ç»Ÿç¼“å†²åŒº"><a href="#æ»‘åŠ¨çª—å£ä¸æ“ä½œç³»ç»Ÿç¼“å†²åŒº" class="headerlink" title="æ»‘åŠ¨çª—å£ä¸æ“ä½œç³»ç»Ÿç¼“å†²åŒº"></a>æ»‘åŠ¨çª—å£ä¸æ“ä½œç³»ç»Ÿç¼“å†²åŒº</h2><p>ä¸Šé¢ğŸ‘†è®²è¿°çš„æ—¶å€™ï¼Œéƒ½æ˜¯å‡è®¾çª—å£å¤§å°æ˜¯ä¸å˜çš„ï¼Œè€Œå®é™…ä¸Šï¼Œå‘é€ç«¯å’Œæ¥å—ç«¯çš„æ»‘åŠ¨çª—å£çš„å­—èŠ‚æ•°éƒ½åƒå­˜å‚¨åœ¨æ“ä½œç³»ç»Ÿç¼“å†²åŒºçš„ï¼Œæ“ä½œç³»ç»Ÿçš„ç¼“å†²åŒºå—æ“ä½œç³»ç»Ÿæ§åˆ¶ï¼Œå½“åº”ç”¨è¿›ç¨‹å¢åŠ æ˜¯ï¼Œæ¯ä¸ªè¿›ç¨‹åˆ†é…çš„å†…å­˜å‡å°‘ï¼Œç¼“å†²åŒºå‡å°‘ï¼Œåˆ†é…ç»™æ¯ä¸ªè¿æ¥çš„çª—å£å°±ä¼šå‹ç¼©ã€‚**<font color="red">è€Œä¸”æ»‘åŠ¨çª—å£çš„å¤§å°ä¹Ÿå—åº”ç”¨è¿›ç¨‹è¯»å–ç¼“å†²åŒºæ•°æ®é€Ÿåº¦æœ‰å…³</font>**ï¼›</p><image src="https://oscimg.oschina.net/oscnet/up-3839118daafc840e059fa6f82d283bef7a9.png" width="500">   <h3 id="åº”ç”¨è¿›ç¨‹è¯»å–ç¼“å†²åŒºæ•°æ®ä¸åŠæ—¶é€ æˆçª—å£æ”¶ç¼©"><a href="#åº”ç”¨è¿›ç¨‹è¯»å–ç¼“å†²åŒºæ•°æ®ä¸åŠæ—¶é€ æˆçª—å£æ”¶ç¼©" class="headerlink" title="åº”ç”¨è¿›ç¨‹è¯»å–ç¼“å†²åŒºæ•°æ®ä¸åŠæ—¶é€ æˆçª—å£æ”¶ç¼©"></a>åº”ç”¨è¿›ç¨‹è¯»å–ç¼“å†²åŒºæ•°æ®ä¸åŠæ—¶é€ æˆçª—å£æ”¶ç¼©</h3><p>step1: å®¢æˆ·ç«¯å‘é€140å­—èŠ‚</p><blockquote><p>i å®¢æˆ·ç«¯å‘é€åˆ°140å­—èŠ‚ä¹‹åï¼Œå¯ç”¨çª—å£æ”¶ç¼©åˆ°220å­—èŠ‚ï¼Œå‘é€çª—å£ä¸å˜</p></blockquote><p>Step2: æœåŠ¡ç«¯æ¥æ”¶140å­—èŠ‚ ä½†æ˜¯åº”ç”¨è¿›ç¨‹ä»…ä»…è¯»å–40å­—èŠ‚</p><blockquote><p>w æœåŠ¡ç«¯åº”ç”¨è¿›ç¨‹ä»…ä»…è¯»å–40å­—èŠ‚ï¼Œä»æœ‰100å­—èŠ‚å ç”¨ç¼“å†²åŒºå¤§å°ï¼Œå¯¼è‡´æ¥å—çª—å£æ”¶ç¼©ï¼ŒæœåŠ¡ç«¯å‘é€ACKæŠ¥æ–‡æ—¶ï¼Œåœ¨é¦–éƒ¨Windowå¸¦ä¸Šæ¥æ”¶çª—å£çš„å¤§å°260</p></blockquote><p>Step3: å®¢æˆ·ç«¯æ”¶åˆ°ç¡®è®¤æŠ¥æ–‡ä¹‹åï¼Œå‘é€çª—å£æ”¶ç¼©åˆ°260</p><p>Step4: å®¢æˆ·ç«¯ç»§ç»­å‘é€180å­—èŠ‚æ•°æ®</p><blockquote><p>i å®¢æˆ·ç«¯å‘é€180å­—èŠ‚ä¹‹åï¼Œå¯ç”¨çª—å£å˜æˆ80å­—èŠ‚</p></blockquote><p>Step5: æœåŠ¡ç«¯æ¥æ”¶åˆ°180å­—èŠ‚</p><blockquote><p>w å‡è®¾åº”ç”¨ç¨‹åºä»ç„¶ä¸è¯»å–è¿™180å­—èŠ‚ï¼Œæœ€ç»ˆä¹Ÿå¯¼è‡´æœåŠ¡ç«¯æ¥æ”¶çª—å£å†æ¬¡æ”¶ç¼©180å­—èŠ‚ï¼Œä»…å‰©ä¸‹80å­—èŠ‚ï¼Œåœ¨å‘é€ç¡®è®¤æŠ¥æ–‡æ—¶ï¼Œè®¾ç½®é¦–éƒ¨window=80</p></blockquote><p>Step6: å®¢æˆ·ç«¯æ”¶åˆ°80å­—èŠ‚çš„çª—å£æ—¶ï¼Œè°ƒæ•´å‘é€çª—å£å¤§å°ä¸º80å­—èŠ‚ï¼Œå¯ç”¨çª—å£ä¹Ÿæ˜¯80å­—èŠ‚</p><p>Step7: å®¢æˆ·ç«¯ä»ç„¶å‘é€80å­—èŠ‚åˆ°æœåŠ¡ç«¯ï¼Œæ­¤æ—¶å¯ç”¨çª—å£ä¸ºç©º</p><p>Step8: æœåŠ¡ç«¯åº”ç”¨è¿›ç¨‹ç»§ç»­ä¸è¯»åŒºè¿™80å­—èŠ‚çš„ç¼“å†²åŒºæ•°æ®ï¼Œæœ€ç»ˆå¯¼è‡´æœåŠ¡ç«¯æ¥æ”¶çª—å£å¤§å°ä¸º0ï¼Œä¸èƒ½å†æ¥æ”¶ä»»ä½•æ•°æ®ï¼ŒåŒæ—¶å‘é€ACKæŠ¥æ–‡ï¼›</p><p>Step9ï¼šå®¢æˆ·ç«¯æ”¶åˆ°ç¡®è®¤æŠ¥æ–‡ä¹‹åï¼Œè°ƒæ•´å‘é€çª—å£å¤§å°ä¸º0ï¼Œè¿™ä¸ªçŠ¶æ€å«åšã€Œ <strong>çª—å£å…³é—­</strong> ã€</p><h3 id="çª—å£æ”¶ç¼©å¯¼è‡´çš„ä¸¢åŒ…"><a href="#çª—å£æ”¶ç¼©å¯¼è‡´çš„ä¸¢åŒ…" class="headerlink" title="çª—å£æ”¶ç¼©å¯¼è‡´çš„ä¸¢åŒ…"></a>çª—å£æ”¶ç¼©å¯¼è‡´çš„ä¸¢åŒ…</h3><image src="https://oscimg.oschina.net/oscnet/up-174e19d4d8de9757707034b8271cb3c69a7.png" width="530"><p>Step1ï¼šå®¢æˆ·ç«¯æœåŠ¡ç«¯å¼€å§‹çš„çª—å£å¤§å°éƒ½æ˜¯360å­—èŠ‚ï¼Œå®¢æˆ·ç«¯å‘é€140å­—èŠ‚æ•°æ®</p><blockquote><p>i å®¢æˆ·ç«¯å‘é€140å­—èŠ‚ä¹‹åï¼Œå¯ç”¨çª—å£å˜æˆ220å­—èŠ‚</p></blockquote><p>Step2ï¼šæœåŠ¡ç«¯åº”ç”¨è¿›ç¨‹éª¤å¢ï¼Œè¿›ç¨‹ç¼“å­˜åŒºå¹³å‡åˆ†é…ï¼Œé€ æˆæœåŠ¡ç«¯æ¥æ”¶çª—å£å‡å°‘ï¼Œä»360å˜æˆ240å­—èŠ‚ï¼›</p><blockquote><p>w å‡è®¾æ¥æ”¶äº†140å­—èŠ‚ä¹‹åï¼Œåº”ç”¨è¿›ç¨‹æ²¡æœ‰è¯»å–ï¼Œé‚£ä¸ªå¯ç”¨çª—å£è¿›ä¸€æ­¥å‹ç¼©ï¼Œå˜æˆ100å­—èŠ‚ï¼›</p></blockquote><p>Step3ï¼šå‡è®¾åŒä¸€ä¸ªè¿æ¥åœ¨æ²¡æœ‰æ”¶åˆ°æœåŠ¡ç«¯ç¡®è®¤ä¹‹åï¼Œåˆå‘é€äº†180ä¸ªå­—èŠ‚çš„æ•°æ®ï¼ˆRetramissionï¼‰</p><blockquote><p>i å…ˆå‘é€äº†140å­—èŠ‚ï¼Œåå‘é€äº†180å­—èŠ‚ï¼Œéƒ½æ²¡æœ‰å¾—åˆ°ç¡®è®¤ï¼Œå®¢æˆ·ç«¯å¯ç”¨çª—å£å¤§å°å˜æˆ40å­—èŠ‚</p></blockquote><p>Step4ï¼šæœåŠ¡ç«¯æ”¶åˆ°ä¸Šé¢ğŸ‘†ç¬¬ä¸‰æ­¥å‘é€çš„180å­—èŠ‚çš„æ•°æ®ï¼Œä½†æ˜¯æ¥å—çª—å£çš„å¤§å°åªæœ‰100å­—èŠ‚ï¼Œæ‰€ä»¥ä¸èƒ½æ¥æ”¶</p><blockquote><p>w æœåŠ¡ç«¯æ‹’ç»æ¥æ”¶180å­—èŠ‚</p></blockquote><p>Step5ï¼šæ­¤æ—¶å®¢æˆ·ç«¯æ‰æ”¶åˆ°ä¹‹å‰140å­—èŠ‚çš„ç¡®è®¤æŠ¥æ–‡ï¼Œæ‰çŸ¥é“æ¥æ”¶çª—å£å‘ç”Ÿäº†å˜åŒ–</p><blockquote><p>i å®¢æˆ·ç«¯ç”±äºæ²¡æœ‰æ”¶åˆ°180å­—èŠ‚çš„ç¡®è®¤ï¼ŒåŠ å…¥å®¢æˆ·ç«¯æ­£åœ¨å‡†å¤‡å‘é€180å­—èŠ‚æ•°æ®ï¼Œå¾—åˆ°æ¥å—ç«¯çš„çª—å£å¤§å°æ˜¯100å­—èŠ‚ä¹‹åï¼Œé¡»å¼ºåˆ¶å°†å³ä¾§çª—å£å‘å·¦æ”¶ç¼©80å­—èŠ‚ï¼›</p></blockquote><h2 id="çª—å£å…³é—­"><a href="#çª—å£å…³é—­" class="headerlink" title="çª—å£å…³é—­"></a>çª—å£å…³é—­</h2><p>è¿™ä¸ªä¾‹å­å’Œä¸Šé¢çš„ä¾‹å­éƒ½å‘ç”Ÿäº†ã€Œ <strong><font color="red">çª—å£å…³é—­</font></strong> ã€</p><blockquote><p>s çª—å£å…³é—­ï¼š å‘é€ç«¯çš„å‘é€çª—å£å˜æˆ0çš„çŠ¶æ€ï¼›</p></blockquote><p>ä¸Šé¢è®²çš„ä¸¤ç§æƒ…å†µä¸€èˆ¬ä¸ä¼šå‘ç”Ÿçš„ï¼Œå› ä¸ºæ“ä½œç³»ç»Ÿä¸ä¼šæ—¢æ”¶ç¼©çª—å£ï¼ŒåŒæ—¶å‡å°‘è¿æ¥ç¼“å­˜ï¼›è€Œæ˜¯ä¸€èˆ¬å…ˆä½¿ç”¨çª—å£æ”¶ç¼©ç­–ç•¥ï¼Œä¹‹ååœ¨å‹ç¼©ç¼“å†²åŒºçš„æ–¹å¼æ¥è§„é¿ä»¥ä¸Šé—®é¢˜ï¼›<br>å‘ç”Ÿçª—å£å…³é—­ä¹‹åï¼Œå‘é€ç«¯ä¸ä¼šè¢«åŠ¨çš„ç­‰å¾…æœåŠ¡ç«¯çš„é€šçŸ¥ï¼Œè€Œæ˜¯ä¼šé‡‡ç”¨å®šæ—¶å—…æ¢çš„æ–¹å¼å»æŸ¥çœ‹æœåŠ¡ç«¯æ¥æ”¶çª—å£æ˜¯å¦å¼€æ”¾ï¼›</p><h2 id="Linuxä¸­å¯¹TCPç¼“å†²åŒºçš„è°ƒæ•´æ–¹å¼"><a href="#Linuxä¸­å¯¹TCPç¼“å†²åŒºçš„è°ƒæ•´æ–¹å¼" class="headerlink" title="Linuxä¸­å¯¹TCPç¼“å†²åŒºçš„è°ƒæ•´æ–¹å¼"></a>Linuxä¸­å¯¹TCPç¼“å†²åŒºçš„è°ƒæ•´æ–¹å¼</h2><ul><li><p>net.ipv4.tcp_rmem = 4096 87380 6291456</p><blockquote><p>è¯»ç¼“å­˜æœ€å°å€¼ã€é»˜è®¤å€¼ã€æœ€å¤§å€¼ï¼Œå•ä½å­—èŠ‚ï¼Œè¦†ç›– net.core.rmem_max</p></blockquote></li><li><p>net.ipv4.tcp_wmem = 4096 16384 4194304</p><blockquote><p>å†™ç¼“å­˜æœ€å°å€¼ã€é»˜è®¤å€¼ã€æœ€å¤§å€¼ï¼Œå•ä½å­—èŠ‚ï¼Œè¦†ç›–net.core.wmem_max</p></blockquote></li><li><p>net.ipv4.tcp_mem = 1541646 2055528 3083292</p><blockquote><p>ç³»ç»Ÿæ— å†…å­˜å‹åŠ›ã€å¯åŠ¨å‹åŠ›æ¨¡å¼é˜€å€¼ã€æœ€å¤§å€¼ï¼Œå•ä½ä¸ºé¡µçš„æ•°é‡</p></blockquote></li><li><p>net.ipv4.tcp_moderate_rcvbuf = 1 </p><blockquote><p>å¼€å¯è‡ªåŠ¨è°ƒæ•´ç¼“å­˜æ¨¡å¼</p></blockquote></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;æ»‘åŠ¨çª—å£&quot;&gt;&lt;a href=&quot;#æ»‘åŠ¨çª—å£&quot; class=&quot;headerlink&quot; title=&quot;æ»‘åŠ¨çª—å£&quot;&gt;&lt;/a&gt;æ»‘åŠ¨çª—å£&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;i ä¹‹å‰å­¦ä¹ äº†PARæ–¹å¼çš„TCPè¶…æ—¶å’Œé‡ä¼ ï¼Œå…¶å®åœ¨è€ƒè™‘å‘é€æ–¹å‘é€æ•°æ®æŠ¥çš„åŒæ—¶ï¼Œä¹Ÿåº”è¯¥è€ƒè™‘æ¥æ”¶æ–¹å¯¹äº</summary>
      
    
    
    
    <category term="Computer Network" scheme="http://example.com/categories/Computer-Network/"/>
    
    <category term="TCP" scheme="http://example.com/categories/Computer-Network/TCP/"/>
    
    
    <category term="TCP" scheme="http://example.com/tags/TCP/"/>
    
  </entry>
  
  <entry>
    <title>TCP-RTOé‡ä¼ è®¡æ•°å™¨çš„è®¡ç®—</title>
    <link href="http://example.com/wiki/TCP-RTO%E9%87%8D%E4%BC%A0%E8%AE%A1%E6%95%B0%E5%99%A8%E7%9A%84%E8%AE%A1%E7%AE%97/"/>
    <id>http://example.com/wiki/TCP-RTO%E9%87%8D%E4%BC%A0%E8%AE%A1%E6%95%B0%E5%99%A8%E7%9A%84%E8%AE%A1%E7%AE%97/</id>
    <published>2021-07-04T08:32:27.000Z</published>
    <updated>2021-07-04T08:43:21.073Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>i ä¹‹å‰çš„æ–‡ç« å·²ç»ä»‹ç»äº†TCPè¶…æ—¶é‡ä¼ çš„è¿‡ç¨‹ä¸­ä½¿ç”¨äº†å®šæ—¶å™¨çš„ç­–ç•¥ï¼Œå½“å®šæ—¶å™¨è§„å®šæ—¶é—´å†…æœªæ”¶åˆ°ç¡®è®¤æŠ¥æ–‡ä¹‹åï¼Œå°±ä¼šè§¦å‘æŠ¥æ–‡çš„é‡ä¼ ï¼ŒåŒæ—¶å®šæ—¶å™¨å¤ä½ï¼›é‚£ä¹ˆå®šæ—¶å™¨è¶…æ—¶æ—¶é—´ï¼ˆRTO Retramission Timeoutï¼‰æ˜¯å¦‚ä½•è®¡ç®—çš„å‘¢ï¼Ÿ</p></blockquote><h2 id="ä»€ä¹ˆæ˜¯RTTï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯RTTï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯RTTï¼Ÿ"></a>ä»€ä¹ˆæ˜¯RTTï¼Ÿ</h2><p>äº†è§£RTOå¦‚ä½•è®¡ç®—ä¹‹å‰ï¼Œé¦–å…ˆæ˜ç¡®ä¸€ä¸ªæ¦‚å¿µã€Œ <strong>RTT</strong> ã€ï¼›</p><image src="https://oscimg.oschina.net/oscnet/up-9b45623a3b0652d842ffa3eecea13e92183.png" width=550 height=400>   <p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä»clientå‘é€ç¬¬ä¸€ä¸ªã€ŒSYNã€æŠ¥æ–‡ï¼Œåˆ°Serveræ¥å—åˆ°æŠ¥æ–‡ï¼Œå¹¶ä¸”è¿”å›ã€ŒSYN ACKã€æŠ¥æ–‡ä¹‹åï¼Œclientæ¥å—åˆ°Serverçš„ã€ŒACKã€æŠ¥æ–‡ä¹‹åï¼Œclientæ‰€ç»å†çš„æ—¶é—´ï¼Œå«åš1ä¸ªRTTæ—¶é—´ï¼›</p><h2 id="å¦‚ä½•åœ¨é‡ä¼ ä¸‹æœ‰æ•ˆæµ‹é‡RTTï¼Ÿ"><a href="#å¦‚ä½•åœ¨é‡ä¼ ä¸‹æœ‰æ•ˆæµ‹é‡RTTï¼Ÿ" class="headerlink" title="å¦‚ä½•åœ¨é‡ä¼ ä¸‹æœ‰æ•ˆæµ‹é‡RTTï¼Ÿ"></a>å¦‚ä½•åœ¨é‡ä¼ ä¸‹æœ‰æ•ˆæµ‹é‡RTTï¼Ÿ</h2><p><img src="https://oscimg.oschina.net/oscnet/up-6c558bfea1825bf5d3b2da74e087cdde43a.png"></p><p>å¦‚ä¸Šå›¾ä¸¤ç§æƒ…å†µï¼š<br>ç¬¬ä¸€ç§ï¼Œå·¦ä¾§aå›¾æ‰€ç¤ºï¼Œå½“ä¸€ç«¯å‘é€çš„æ•°æ®æŠ¥ä¸¢å¤±åè¦è¿›è¡Œé‡ä¼ ï¼Œåˆ°é‡ä¼ ä¹‹åæ¥æ”¶åˆ°ç¡®è®¤æŠ¥æ–‡ä¹‹åï¼Œè¿™ç§åœºæ™¯ä¸‹è¯¥å¦‚ä½•è®¡ç®—RTTå‘¢ï¼Ÿå¼€å§‹æ—¶é—´æ˜¯æŒ‰ç…§ç¬¬ä¸€æ¬¡å‘é€æ•°æ®æŠ¥æ—¶é—´å‘¢è¿˜æ˜¯æŒ‰ç…§é‡ä¼ æ•°æ®æŠ¥çš„æ—¶é—´å‘¢ï¼Ÿ</p><blockquote><p>w æŒ‰ç…§å¸¸ç†æ¥è¯´ï¼Œå¦‚å³ä¾§bå›¾æ‰€ç¤ºï¼ŒRTTæ—¶é—´åº”è¯¥ä»¥RTT2ä¸ºå‡†ï¼›</p></blockquote><p>ç¬¬äºŒç§ï¼Œå·¦ä¾§bå›¾æ‰€ç¤ºï¼Œç¬¬ä¸€æ¬¡å‘é€æ•°æ®æŠ¥æ–‡æ—¶ï¼Œç”±äºç½‘ç»œæ—¶å»¶å¯¼è‡´RTOæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°æ¥æ”¶æ®µçš„ç¡®è®¤æŠ¥æ–‡ï¼Œå‘é€ç«¯è¿›è¡Œé‡å‘ï¼Œä½†æ˜¯åœ¨åˆšåˆšé‡å‘ä¹‹åå°±æ”¶åˆ°äº†ç¬¬ä¸€æ¬¡æŠ¥æ–‡çš„ç¡®è®¤æŠ¥æ–‡ï¼Œé‚£è¿™ç§æƒ…å†µRTTè¯¥å¦‚ä½•è®¡ç®—å‘¢ï¼Ÿ</p><blockquote><p>w å¦‚å³ä¾§aå›¾æ‰€ç¤ºï¼ŒRTTæ—¶é—´åº”è¯¥ä»¥RTT1ä¸ºå‡†ï¼›</p></blockquote><p>å°±åƒä¸Šé¢æåŠçš„ä¸¤ç§æƒ…å†µï¼Œä¸€ä¼šä»¥ç¬¬ä¸€ä¸ªRTT1ä¸ºå‡†ï¼Œä¸€ä¼šä»¥RTT2ä¸ºå‡†ï¼Œé‚£ä¹ˆTCPåè®®å¦‚ä½•æ­£ç¡®çš„è®¡ç®—å‡ºRTTå‘¢ï¼Ÿ</p><h2 id="ä½¿ç”¨Timestampæ–¹å¼è®¡ç®—RTT"><a href="#ä½¿ç”¨Timestampæ–¹å¼è®¡ç®—RTT" class="headerlink" title="ä½¿ç”¨Timestampæ–¹å¼è®¡ç®—RTT"></a>ä½¿ç”¨Timestampæ–¹å¼è®¡ç®—RTT</h2><p>ä¹‹å‰çš„æ–‡ç« ä¸­åœ¨ä»‹ç»TCPè¶…æ—¶ä¸é‡ä¼ çš„ç¬”è®°ä¸­æœ‰ä»‹ç»é€šè¿‡ä½¿ç”¨Timtstampçš„æ–¹å¼æ¥åŒºåˆ†ç›¸åŒSeqåºåˆ—å·çš„ä¸åŒæŠ¥æ–‡ï¼Œ<br>å…¶å®åœ¨TCPæŠ¥æ–‡é¦–éƒ¨å­˜å‚¨Timestampçš„æ—¶å€™ï¼Œä¼šå­˜å‚¨æŠ¥æ–‡çš„å‘é€æ—¶é—´å’Œç¡®è®¤æ—¶é—´ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š<br><image src="https://oscimg.oschina.net/oscnet/up-ad80265bbba417c72a8d02a5c0be7be5f83.png" width=800 height=230> </p><h2 id="å¦‚ä½•è®¡ç®—RTOï¼Ÿ"><a href="#å¦‚ä½•è®¡ç®—RTOï¼Ÿ" class="headerlink" title="å¦‚ä½•è®¡ç®—RTOï¼Ÿ"></a>å¦‚ä½•è®¡ç®—RTOï¼Ÿ</h2><p>ä¸Šé¢ğŸ‘†è¯´åˆ°äº†RTTå¦‚ä½•è®¡ç®—ï¼Œé‚£ä¸ªRTOå’ŒRTTæœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ<br><image src="https://oscimg.oschina.net/oscnet/up-e25afa62f99830eb02c4c1df0c015dbde8a.png"><br> RTOçš„å–å€¼å°†ä¼šå½±å“åˆ°TCPçš„ä¼ è¾“æ•ˆç‡ä»¥åŠç½‘ç»œçš„ååé‡ï¼›</p><blockquote><p>s é€šå¸¸æ¥è¯´RTOåº”è¯¥ç•¥å¤§äºRTTï¼Œå¦‚æœRTOå°äºRTTï¼Œåˆ™ä¼šé€ æˆå‘é€ç«¯é¢‘ç¹é‡å‘ï¼Œå¯èƒ½ä¼šé€ æˆç½‘ç»œé˜»å¡ï¼›å¦‚æœRTOè®¾ç½®çš„è¿‡å¤§ï¼Œåˆ™æ¥å—ç«¯å·²ç»æ”¶åˆ°ç¡®è®¤æŠ¥æ–‡ä¹‹åçš„ä¸€æ®µæ—¶é—´å†…ä»ç„¶ä¸èƒ½å‘é€å…¶ä»–æŠ¥æ–‡ï¼Œä¼šé€ æˆä¸¤ç«¯æ€§èƒ½çš„æµªè´¹å’Œç½‘ç»œååé‡çš„ä¸‹é™ï¼›</p></blockquote><h3 id="å¹³æ»‘RTO"><a href="#å¹³æ»‘RTO" class="headerlink" title="å¹³æ»‘RTO"></a>å¹³æ»‘RTO</h3><p>ç½‘ç»œçš„RTTæ˜¯ä¸æ–­çš„å˜åŒ–çš„ï¼Œæ‰€ä»¥è®¡ç®—RTOçš„æ—¶å€™ï¼Œåº”å½“è€ƒè™‘RTOçš„å¹³æ»‘æ€§ï¼Œå°½é‡é¿å…RTTæ³¢åŠ¨å¸¦æ¥çš„å¹²æ‰°ï¼Œä»¥æŠµæŒ¡ç¬æ—¶å˜åŒ–ï¼›</p><p><strong>å¹³æ»‘RTOåœ¨æ–‡æ¡£RFC793å®šä¹‰ï¼Œç»™å‡ºå¦‚ä¸‹è®¡ç®—æ–¹å¼ï¼š</strong></p><ul><li>SRTT (smoothed round-trip time) = ( Î± * SRTT ) + ((1 - Î±) * RTT)<blockquote><p>w Î± ä» 0åˆ° 1(RFC æ¨è 0.9)ï¼Œè¶Šå¤§è¶Šå¹³æ»‘</p></blockquote></li><li>RTO = min[ UBOUND, max[ LBOUND, (Î² * SRTT) ] ]<blockquote><p>w å¦‚ UBOUNDä¸º1åˆ†é’Ÿï¼ŒLBOUNDä¸º 1 ç§’é’Ÿï¼Œ Î²ä» 1.3 åˆ° 2 ä¹‹é—´ </p></blockquote></li></ul><p>è¿™ç§è®¡ç®—æ–¹å¼ä¸é€‚ç”¨äº RTT æ³¢åŠ¨å¤§(æ–¹å·®å¤§)çš„åœºæ™¯,å¦‚æœç½‘ç»œçš„RTTæ³¢åŠ¨å¾ˆå¤§ï¼Œä¼šé€ æˆRTOè°ƒæ•´ä¸åŠæ—¶ï¼›</p><h3 id="è¿½è¸ªRTTæ–¹å·®è®¡ç®—RTO"><a href="#è¿½è¸ªRTTæ–¹å·®è®¡ç®—RTO" class="headerlink" title="è¿½è¸ªRTTæ–¹å·®è®¡ç®—RTO"></a>è¿½è¸ªRTTæ–¹å·®è®¡ç®—RTO</h3><blockquote><p>i RFC6298(RFC2988)ï¼Œå…¶ä¸­Î± = 1/8ï¼Œ Î² = 1/4ï¼ŒK = 4ï¼ŒG ä¸ºæœ€å°æ—¶é—´é¢—ç²’:</p></blockquote><ul><li><strong>é¦–æ¬¡è®¡ç®— RTOï¼ŒRä¸ºç¬¬ 1 æ¬¡æµ‹é‡å‡ºçš„ RTT</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SRTT(smoothed round-trip time) = R</span><br><span class="line">RTTVAR(round-trip time variation) = R/2</span><br><span class="line">RTO = SRTT + max (G, K*RTTVAR)</span><br></pre></td></tr></table></figure></li><li><strong>åç»­è®¡ç®— RTOï¼ŒRâ€™ä¸ºæœ€æ–°æµ‹é‡å‡ºçš„ RTT</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SRTT= (1-Î±)*SRTT+Î±*Râ€™</span><br><span class="line">RTTVAR=(1-Î²)*RTTVAR+Î²*|SRTT-Râ€™|</span><br><span class="line">RTO = SRTT + max (G, K*RTTVAR)</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;i ä¹‹å‰çš„æ–‡ç« å·²ç»ä»‹ç»äº†TCPè¶…æ—¶é‡ä¼ çš„è¿‡ç¨‹ä¸­ä½¿ç”¨äº†å®šæ—¶å™¨çš„ç­–ç•¥ï¼Œå½“å®šæ—¶å™¨è§„å®šæ—¶é—´å†…æœªæ”¶åˆ°ç¡®è®¤æŠ¥æ–‡ä¹‹åï¼Œå°±ä¼šè§¦å‘æŠ¥æ–‡çš„é‡ä¼ ï¼ŒåŒæ—¶å®šæ—¶å™¨å¤ä½ï¼›é‚£ä¹ˆå®šæ—¶å™¨è¶…æ—¶æ—¶é—´ï¼ˆRTO Retramission Timeoutï¼‰æ˜¯å¦‚ä½•è®¡ç®—çš„å‘¢ï¼Ÿ&lt;/p&gt;
&lt;/bloc</summary>
      
    
    
    
    <category term="Computer Network" scheme="http://example.com/categories/Computer-Network/"/>
    
    <category term="TCP" scheme="http://example.com/categories/Computer-Network/TCP/"/>
    
    
    <category term="TCP" scheme="http://example.com/tags/TCP/"/>
    
  </entry>
  
  <entry>
    <title>TCPè¶…æ—¶ä¸é‡ä¼ </title>
    <link href="http://example.com/wiki/TCP%E8%B6%85%E6%97%B6%E4%B8%8E%E9%87%8D%E4%BC%A0/"/>
    <id>http://example.com/wiki/TCP%E8%B6%85%E6%97%B6%E4%B8%8E%E9%87%8D%E4%BC%A0/</id>
    <published>2021-07-04T08:32:08.000Z</published>
    <updated>2021-07-04T08:42:50.912Z</updated>
    
    <content type="html"><![CDATA[<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><image src="https://oscimg.oschina.net/oscnet/up-4f1230ee04f4c197dd5c6de167991878366.png" width=680 height=300><p>å¦‚ä¸Šå›¾ğŸ‘†æ‰€ç¤ºï¼Œè®¾å¤‡Aå‘è®¾å¤‡Bå‘é€æ¶ˆæ¯ï¼Œæ¶ˆæ¯åœ¨ç½‘ç»œä¸­ä¼šç”±äºå„ç§å„æ ·çš„é—®é¢˜å¯¼è‡´ä¸¢å¤±ï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•è§£å†³ä¸Šè¿°é—®é¢˜å‘¢ï¼Ÿ</p><h2 id="é‡‡ç”¨å®šæ—¶å™¨é‡ä¼ "><a href="#é‡‡ç”¨å®šæ—¶å™¨é‡ä¼ " class="headerlink" title="é‡‡ç”¨å®šæ—¶å™¨é‡ä¼ "></a>é‡‡ç”¨å®šæ—¶å™¨é‡ä¼ </h2><blockquote><p>i PARï¼šPositive Acknowledgment with Retransmission</p></blockquote><image src="https://oscimg.oschina.net/oscnet/up-17f5567e452afb45cf18d01e62bdfa33f96.png" width=680 height=330><p><strong>æœ€ç®€å•çš„æ€è·¯æ˜¯åœ¨å‘é€æ–¹è®¾ç½®ã€Œ å®šæ—¶å™¨ ã€ï¼š</strong></p><ul><li>å½“è®¾å¤‡Aå‘é€ç¬¬ä¸€æ¡æ¶ˆæ¯ä¹‹åï¼Œåœ¨å®šæ—¶å™¨è§„å®šçš„æ—¶é—´å†…ï¼Œå¦‚æœæ”¶åˆ°è®¾å¤‡Bçš„ç¡®è®¤æŠ¥æ–‡ï¼Œåˆ™è®¾å¤‡Aç»§ç»­å‘é€ä¸‹ä¸€ä¸ªæŠ¥æ–‡ï¼ŒåŒæ—¶å®šæ—¶å™¨å¤ä½ï¼›</li><li>å¦‚æœç¬¬ä¸€æ¡æ¶ˆæ¯å‘é€æ—¶é—´è¶…å‡ºäº†å®šæ—¶å™¨è§„å®šçš„æ—¶é—´ï¼Œåˆ™è®¾å¤‡Aå°†é‡æ–°å‘é€ç¬¬ä¸€æ¡æ¶ˆæ¯ï¼ŒåŒæ—¶é‡æ–°è®¾ç½®å®šæ—¶å™¨ï¼›</li><li>è¿™ç§æ–¹å¼æ˜¯ä¸²å‹å‘é€çš„ï¼Œåªæœ‰ç¬¬ä¸€ä¸ªæ¶ˆæ¯å‘é€æˆåŠŸä¹‹åï¼Œæ‰å¯ä»¥å‘é€ä¸‹ä¸€æ¡æ¶ˆæ¯ï¼Œã€Œ <strong>æ•ˆç‡æå·®</strong> ã€ï¼›</li></ul><h2 id="å¹¶å‘èƒ½åŠ›PAR"><a href="#å¹¶å‘èƒ½åŠ›PAR" class="headerlink" title="å¹¶å‘èƒ½åŠ›PAR"></a>å¹¶å‘èƒ½åŠ›PAR</h2><blockquote><p>i åŸºäºä¸Šè¿°PARæ•ˆç‡ä½ä¸‹çš„æ–¹å¼è¿›è¡Œæ”¹é€ ï¼Œåœ¨å‘é€ç«¯é‡‡ç”¨å¹¶å‘+å®šæ—¶å™¨çš„æ–¹å¼è¿›è¡Œæ•°æ®å‘é€ï¼›</p></blockquote><image src="https://oscimg.oschina.net/oscnet/up-96114b57ac73a41915bea1a7d11e0145102.png" width=600 height="500"><ul><li>é¦–å…ˆè®¾å¤‡Aå¯ä»¥åŒæ—¶å‘é€å¤šä¸ªæ¶ˆæ¯æˆ–è€…æŠ¥æ–‡æ®µï¼Œæ¯ä¸ªæŠ¥æ–‡æ®µå…·æœ‰ä¸€ä¸ªæ ‡å¿—å­—æ®µã€#XXã€‘å»æ ‡å¿—å”¯ä¸€ï¼Œæ¯ä¸ªæŠ¥æ–‡æ®µè¿æ¥å…·æœ‰è‡ªå·±çš„å®šæ—¶å™¨ï¼›</li><li>è®¾å¤‡Bè§„å®šæ—¶é—´å†…æ”¶åˆ°è®¾å¤‡Aå‘é€çš„æ•°æ®ä¹‹åå¹¶ä¸”è®¾å¤‡Aå¾—åˆ°è®¾å¤‡Bçš„ç¡®è®¤ä¹‹åï¼Œè®¾å¤‡Aå°†å®šæ—¶å™¨æ¸…é™¤</li><li>åŒPARä¸€æ ·ï¼Œè®¾å¤‡Bæ²¡æœ‰åœ¨è§„å®šçš„æ—¶é—´å†…å‘é€ç¡®è®¤æŠ¥æ–‡ï¼Œè®¾å¤‡Aå°†è¿™ä¸ªæŠ¥æ–‡æ‰€å¯¹åº”çš„å®šæ—¶å™¨å¤ä½ï¼Œé‡æ–°å‘é€è¿™ä¸ªæŠ¥æ–‡</li></ul><h3 id="å¹¶å‘å‘é€å¸¦æ¥çš„é—®é¢˜"><a href="#å¹¶å‘å‘é€å¸¦æ¥çš„é—®é¢˜" class="headerlink" title="å¹¶å‘å‘é€å¸¦æ¥çš„é—®é¢˜"></a>å¹¶å‘å‘é€å¸¦æ¥çš„é—®é¢˜</h3><p>é‡‡ç”¨å¹¶å‘çš„æ–¹å¼å‘é€æ¶ˆæ¯æˆ–è€…æŠ¥æ–‡æ®µå›ºç„¶æå‡äº†å‘é€ç«¯çš„æ€§èƒ½ï¼Œä½†æ˜¯å‘é€ç«¯å‘é€çš„æ¶ˆæ¯å¯èƒ½æ¥å—ç«¯ä¸èƒ½å®Œå…¨å¤„ç†ï¼Œ<strong>è¿™æ˜¯åŒæ–¹æŠ¥æ–‡å¤„ç†é€Ÿåº¦æˆ–è€…æ•ˆç‡ä¸ä¸€è‡´çš„é—®é¢˜</strong>ï¼›</p><p>æ‰€ä»¥å¯¹äºæ¥æ”¶ç«¯è®¾å¤‡Bï¼Œåº”è¯¥æ˜ç¡®è‡ªå·±å¯èƒ½æ¥å—çš„æ•°æ®é‡ï¼Œå¹¶ä¸”åœ¨ç¡®è®¤æŠ¥æ–‡ä¸­åŒæ­¥åˆ°å‘é€ç«¯è®¾å¤‡Aï¼Œè®¾å¤‡Aæ ¹æ®è®¾å¤‡Bçš„å¤„ç†èƒ½åŠ›æ¥è°ƒæ•´å‘é€æ•°æ®çš„å¤§å°ï¼›ä¹Ÿå°±æ˜¯ä¸Šå›¾ä¸­çš„ã€Œ limitã€ï¼›</p><h2 id="ç»§ç»­å»¶ä¼¸"><a href="#ç»§ç»­å»¶ä¼¸" class="headerlink" title="ç»§ç»­å»¶ä¼¸"></a>ç»§ç»­å»¶ä¼¸</h2><p>Sequmentåºåˆ—å·å’ŒAckåºåˆ—å·çš„è®¾è®¡ç†å¿µæˆ–è€…è®¾è®¡åˆè¡·æ˜¯ã€Œ <strong>è§£å†³åº”ç”¨å±‚å­—èŠ‚æµçš„å¯é å‘é€</strong> ã€ </p><ul><li>è·Ÿè¸ªã€Œåº”ç”¨å±‚ã€çš„å‘é€ç«¯æ•°æ®æ˜¯å¦é€è¾¾</li><li>ç¡®å®šã€Œæ¥æ”¶ç«¯æœ‰åºçš„ã€æ¥æ”¶åˆ°ã€Œå­—èŠ‚æµã€</li><li><strong>åºåˆ—å·çš„å€¼é’ˆå¯¹çš„æ˜¯å­—èŠ‚è€Œä¸æ˜¯æŠ¥æ–‡</strong> âš ï¸âš ï¸âš ï¸</li></ul><blockquote><p>i TCPçš„å®šä½å°±æ˜¯é¢å‘å­—èŠ‚æµçš„ï¼</p></blockquote><h2 id="TCPåºåˆ—å·å¦‚ä½•è®¾è®¡çš„"><a href="#TCPåºåˆ—å·å¦‚ä½•è®¾è®¡çš„" class="headerlink" title="TCPåºåˆ—å·å¦‚ä½•è®¾è®¡çš„"></a>TCPåºåˆ—å·å¦‚ä½•è®¾è®¡çš„</h2><image src="https://oscimg.oschina.net/oscnet/up-f5f274ec300162985b9bef86ebd94f6a81e.png" width=450 height=450><p>é€šè¿‡TCPæŠ¥æ–‡å¤´æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼ŒSequmentåºåˆ—å·åŒ…æ‹¬32ä½é•¿åº¦ï¼›ä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªSequmentå¯ä»¥å‘é€2çš„32æ¬¡æ–¹ä¸ªå­—èŠ‚ï¼Œå¤§çº¦4Gçš„æ•°é‡ï¼ŒSequmentå°±æ— æ³•è¡¨ç¤ºäº†ï¼Œå½“ä¼ è¾“çš„æ•°æ®è¶…è¿‡â€œ4Gâ€ä¹‹åï¼Œå¦‚æœè¿™ä¸ªè¿æ¥ä¾ç„¶è¦ä½¿ç”¨çš„è¯ï¼ŒSequmentä¼šé‡æ–°å¤ç”¨ï¼›Sequmentå¤ç”¨ä¼šäº§ç”Ÿä¸€ä¸ªé—®é¢˜ï¼Œä¹Ÿå°±æ˜¯åºåˆ—å·å›ç»•ï¼›ğŸ‘‡</p><h2 id="åºåˆ—å·å›ç»•"><a href="#åºåˆ—å·å›ç»•" class="headerlink" title="åºåˆ—å·å›ç»•"></a>åºåˆ—å·å›ç»•</h2><blockquote><p>i åºåˆ—å·å›ç»• (Protect Against Wrapped Sequence numbers)</p></blockquote><image src="https://oscimg.oschina.net/oscnet/up-4edfd2031f0ec6ebdaa23c497e18df359cd.png" width=800 height=380><ul><li>å½“ä¸€ä¸ªè¿æ¥è¦å‘é€6Gçš„æ•°æ®æ˜¯ï¼ŒAã€Bã€Cã€Dåˆ†åˆ«å‘é€1Gçš„æ•°æ®ï¼Œå¦‚æœç»§ç»­ä½¿ç”¨æ­¤è¿æ¥ï¼ŒEä¸‹ä¸€æ¬¡å‘é€æ•°æ®1Gï¼ŒSeqåºåˆ—å·å¤ç”¨ï¼ŒEæŠ¥æ–‡æ®µçš„åºåˆ—å·å’ŒAæŠ¥æ–‡æ®µçš„åºåˆ—å·è¡¨ç¤ºç›¸åŒ</li><li>æŒ‰ç…§ä¸Šé¢çš„é€»è¾‘ç»§ç»­å‘é€æ•°æ®ï¼ŒFæŠ¥æ–‡æ®µçš„Seqæ ‡å¿—å’ŒBæŠ¥æ–‡æ®µçš„æ˜¯ä¸€æ ·çš„ï¼›</li><li>åŠ å…¥BæŠ¥æ–‡æ®µåœ¨å‘é€è¿‡ç¨‹ä¸­ä¸¢å¤±äº†ï¼Œç›´åˆ°æ¥å—ç«¯æ¥æ”¶äº†FæŠ¥æ–‡æ®µçš„åŒæ—¶BæŠ¥æ–‡æ®µåˆ°è¾¾æ¥å—ç«¯ï¼Œæ¥å—ç«¯è¯¥å¦‚ä½•åŒºåˆ†ç›¸åŒSeqåºåˆ—å·ä¸åŒæ•°æ®çš„æŠ¥æ–‡æ®µå‘¢ï¼Ÿ</li><li>å…¶å®TCPè§£å†³è¿™ä¸ªé—®é¢˜å¾ˆç®€å•ï¼Œå°±æ˜¯åœ¨æ¯ä¸ªæŠ¥æ–‡æ®µä¸Šæ·»åŠ Tcp Timestampæ—¶é—´æˆ³ï¼Œç±»ä¼¼äºç‰ˆæœ¬å·çš„ç†å¿µï¼›</li><li>æ¥æ”¶ç«¯æ”¶åˆ°ç›¸åŒSeqåºåˆ—å·çš„æŠ¥æ–‡æ®µæ˜¯å¯ä»¥æ ¹æ®æ—¶é—´æˆ³æ¥è¿›è¡ŒåŒºåˆ†ï¼›</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h2&gt;&lt;image src=&quot;https://oscimg.oschina.net/oscnet/up-4f1230ee04f4c197dd5c6de1</summary>
      
    
    
    
    <category term="Computer Network" scheme="http://example.com/categories/Computer-Network/"/>
    
    <category term="TCP" scheme="http://example.com/categories/Computer-Network/TCP/"/>
    
    
    <category term="TCP" scheme="http://example.com/tags/TCP/"/>
    
  </entry>
  
  <entry>
    <title>TCPæœ€å¤§æŠ¥æ–‡æ®µï¼ˆMSSï¼‰</title>
    <link href="http://example.com/wiki/TCP%E6%9C%80%E5%A4%A7%E6%8A%A5%E6%96%87%E6%AE%B5%EF%BC%88MSS%EF%BC%89/"/>
    <id>http://example.com/wiki/TCP%E6%9C%80%E5%A4%A7%E6%8A%A5%E6%96%87%E6%AE%B5%EF%BC%88MSS%EF%BC%89/</id>
    <published>2021-07-04T08:31:56.000Z</published>
    <updated>2021-07-04T08:42:16.166Z</updated>
    
    <content type="html"><![CDATA[<h2 id="MSSäº§ç”Ÿçš„èƒŒæ™¯"><a href="#MSSäº§ç”Ÿçš„èƒŒæ™¯" class="headerlink" title="MSSäº§ç”Ÿçš„èƒŒæ™¯"></a>MSSäº§ç”Ÿçš„èƒŒæ™¯</h2><p>æˆ‘ä»¬éƒ½çŸ¥é“TCPåè®®æ˜¯è¿è¾“åœ¨ä¼ è¾“å±‚çš„åè®®ï¼Œå®ƒæ˜¯é¢å‘ã€å­—èŠ‚æµã€‘çš„ä¼ è¾“åè®®ï¼›<br>å®ƒçš„ä¸Šå±‚ï¼Œåº”ç”¨å±‚ä¼ è¾“çš„æ•°æ®æ˜¯æ— é™åˆ¶çš„ï¼Œä½†æ˜¯å®ƒçš„ä¸‹å±‚ä¹Ÿå°±æ˜¯ç½‘ç»œå±‚å’Œé“¾è·¯å±‚ç”±äºè·¯ç”±ç­‰è½¬å‘è®¾å¤‡æœ‰å†…å­˜ç­‰é™åˆ¶æ˜¯ä¸å¯èƒ½æ— é™åˆ¶ä¼ è¾“ä»»ä½•å¤§å°çš„æŠ¥æ–‡çš„ï¼Œå®ƒä»¬ä¸€å®šä¼šé™åˆ¶æŠ¥æ–‡çš„é•¿åº¦ï¼Œå› æ­¤ <strong>TCPåè®®è¦å®Œæˆçš„å·¥ä½œæ˜¯å°†ä»åº”ç”¨å±‚æ¥å—åˆ°çš„ä»»æ„é•¿åº¦æ•°æ®ï¼Œåˆ‡å‰²æˆå¤šä¸ªæŠ¥æ–‡æ®µï¼ŒMSSå°±æ˜¯å¦‚ä½•åˆ‡å‰²æŠ¥æ–‡æ®µçš„ä¾æ®ã€‚</strong></p><image src="https://oscimg.oschina.net/oscnet/up-004bb74a9d5648d949d9549219c677f568f.png" width=450 height=300><h2 id="ä»€ä¹ˆæ˜¯MSS"><a href="#ä»€ä¹ˆæ˜¯MSS" class="headerlink" title="ä»€ä¹ˆæ˜¯MSS"></a>ä»€ä¹ˆæ˜¯MSS</h2><p>MSSï¼ˆMax Segment Sizeï¼‰ï¼šä»…æŒ‡ TCP æ‰¿è½½æ•°æ®ï¼Œä¸åŒ…å« TCP å¤´éƒ¨çš„å¤§å°ï¼Œå‚è§ RFC879</p><h2 id="MSS-é€‰æ‹©ç›®çš„"><a href="#MSS-é€‰æ‹©ç›®çš„" class="headerlink" title="MSS é€‰æ‹©ç›®çš„"></a>MSS é€‰æ‹©ç›®çš„</h2><ul><li>å°½é‡æ¯ä¸ª Segment æŠ¥æ–‡æ®µæºå¸¦æ›´å¤šçš„æ•°æ®ï¼Œä»¥å‡å°‘å¤´éƒ¨ç©ºé—´å ç”¨æ¯”ç‡ </li><li>é˜²æ­¢ Segment è¢«æŸä¸ªè®¾å¤‡çš„ IP å±‚åŸºäº MTU æ‹†åˆ†<blockquote><p>s IPå±‚åŸºäºMTUçš„æ•°æ®æ‹†åˆ†æ˜¯æ•ˆç‡æå·®çš„ï¼Œä¸€ä¸ªæŠ¥æ–‡æ®µä¸¢å¤±ï¼Œæ‰€æœ‰çš„æŠ¥æ–‡æ®µéƒ½è¦é‡ä¼ </p></blockquote></li></ul><h2 id="MSSé»˜è®¤å¤§å°"><a href="#MSSé»˜è®¤å¤§å°" class="headerlink" title="MSSé»˜è®¤å¤§å°"></a>MSSé»˜è®¤å¤§å°</h2><blockquote><p>s é»˜è®¤ MSS:536 å­—èŠ‚(é»˜è®¤ MTU576 å­—èŠ‚ï¼Œ20 å­—èŠ‚ IP å¤´éƒ¨ï¼Œ20 å­—èŠ‚ TCP å¤´éƒ¨)</p></blockquote><h2 id="MSSåœ¨ä»€ä¹ˆæ—¶å€™ä½¿ç”¨"><a href="#MSSåœ¨ä»€ä¹ˆæ—¶å€™ä½¿ç”¨" class="headerlink" title="MSSåœ¨ä»€ä¹ˆæ—¶å€™ä½¿ç”¨"></a>MSSåœ¨ä»€ä¹ˆæ—¶å€™ä½¿ç”¨</h2><blockquote><p>s æ¡æ‰‹é˜¶æ®µåå•† MSS è¿™ä¸ªåœ¨TCPä¸‰æ¬¡æ¡æ‰‹çš„æ–‡ç« ä¸­å·²ç»æåŠè¿‡äº†ï¼</p></blockquote><h2 id="MSS-åˆ†ç±»"><a href="#MSS-åˆ†ç±»" class="headerlink" title="MSS åˆ†ç±»"></a>MSS åˆ†ç±»</h2><ul><li><strong>å‘é€æ–¹æœ€å¤§æŠ¥æ–‡æ®µ:</strong> <blockquote><p>SMSS:SENDER MAXIMUM SEGMENT SIZE</p></blockquote></li><li><strong>æ¥æ”¶æ–¹æœ€å¤§æŠ¥æ–‡æ®µ:</strong> <blockquote><p>RMSS:RECEIVER MAXIMUM SEGMENT SIZE</p></blockquote></li></ul><h2 id="åœ¨TCPå¸¸ç”¨é€‰é¡¹ä¸­å¯ä»¥çœ‹åˆ°ã€MSSã€‘çš„é€‰é¡¹"><a href="#åœ¨TCPå¸¸ç”¨é€‰é¡¹ä¸­å¯ä»¥çœ‹åˆ°ã€MSSã€‘çš„é€‰é¡¹" class="headerlink" title="åœ¨TCPå¸¸ç”¨é€‰é¡¹ä¸­å¯ä»¥çœ‹åˆ°ã€MSSã€‘çš„é€‰é¡¹"></a>åœ¨TCPå¸¸ç”¨é€‰é¡¹ä¸­å¯ä»¥çœ‹åˆ°ã€MSSã€‘çš„é€‰é¡¹</h2><image src="https://oscimg.oschina.net/oscnet/up-c1229634eb30eaa7391516cbee75258c9e1.png" width=750 height=420><h2 id="TCPæµä¸æŠ¥æ–‡æ®µåœ¨æ•°æ®ä¼ è¾“ä¸­çš„çŠ¶æ€"><a href="#TCPæµä¸æŠ¥æ–‡æ®µåœ¨æ•°æ®ä¼ è¾“ä¸­çš„çŠ¶æ€" class="headerlink" title="TCPæµä¸æŠ¥æ–‡æ®µåœ¨æ•°æ®ä¼ è¾“ä¸­çš„çŠ¶æ€"></a>TCPæµä¸æŠ¥æ–‡æ®µåœ¨æ•°æ®ä¼ è¾“ä¸­çš„çŠ¶æ€</h2><image src="https://oscimg.oschina.net/oscnet/up-1a0015bf7b4d8481a4e624b0920bbb43917.png" width=450 height=620><p>ä»ä¸Šå›¾å¯ä»¥çœ‹åˆ°ï¼Œå·¦è¾¹å®¢æˆ·ç«¯åœ¨å‘é€å­—èŠ‚æµæ•°æ®ç»™åˆ°å³è¾¹å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å‘é€ä¸€ä¸ªè¿ç»­çš„å­—èŠ‚æµï¼Œä¼šåœ¨TCPå±‚æŒ‰ç…§MSSå¤§å°è§„å®šè¿›è¡Œæ‹†åˆ†æˆå¤šä¸ªå°çš„æŠ¥æ–‡æ®µï¼Œåˆ†åˆ«ä¼ é€åˆ°å¦ä¸€ä¸ªå®¢æˆ·ç«¯æˆ–è€…å…¶ä»–çš„æ¥æ”¶ç«¯ï¼›</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;MSSäº§ç”Ÿçš„èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#MSSäº§ç”Ÿçš„èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;MSSäº§ç”Ÿçš„èƒŒæ™¯&quot;&gt;&lt;/a&gt;MSSäº§ç”Ÿçš„èƒŒæ™¯&lt;/h2&gt;&lt;p&gt;æˆ‘ä»¬éƒ½çŸ¥é“TCPåè®®æ˜¯è¿è¾“åœ¨ä¼ è¾“å±‚çš„åè®®ï¼Œå®ƒæ˜¯é¢å‘ã€å­—èŠ‚æµã€‘çš„ä¼ è¾“åè®®ï¼›&lt;br&gt;å®ƒçš„ä¸Šå±‚ï¼Œåº”</summary>
      
    
    
    
    <category term="Computer Network" scheme="http://example.com/categories/Computer-Network/"/>
    
    <category term="TCP" scheme="http://example.com/categories/Computer-Network/TCP/"/>
    
    
    <category term="TCP" scheme="http://example.com/tags/TCP/"/>
    
  </entry>
  
  <entry>
    <title>TCPä¸‰æ¬¡æ¡æ‰‹</title>
    <link href="http://example.com/wiki/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B/"/>
    <id>http://example.com/wiki/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B/</id>
    <published>2021-07-04T08:31:42.000Z</published>
    <updated>2021-07-04T08:53:09.760Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ¡æ‰‹ğŸ¤çš„ç›®çš„"><a href="#æ¡æ‰‹ğŸ¤çš„ç›®çš„" class="headerlink" title="æ¡æ‰‹ğŸ¤çš„ç›®çš„"></a>æ¡æ‰‹ğŸ¤çš„ç›®çš„</h2><ul><li>åŒæ­¥Sequenceåºåˆ—å·<blockquote><p>i åˆå§‹åŒ–åº<br>åˆ—å·ISN ï¼ˆInital Sequence Numberï¼‰</p></blockquote></li><li>äº¤æ¢TCPé€šè®¯çš„å‚æ•°<blockquote><p>i æ¯”å¦‚æœ€å¤§æŠ¥æ–‡æ®µå‚æ•°ï¼ˆMSSï¼‰ã€çª—å£æ¯”ä¾‹å› å­ï¼ˆWindowï¼‰ã€é€‰æ‹©æ€§ç¡®è®¤ï¼ˆSACKï¼‰ã€åˆ¶å®šæ ¡éªŒå’Œç®—æ³•ï¼›</p></blockquote></li></ul><h2 id="ä¸‰æ¬¡æ¡æ‰‹æ¡æ‰‹è¿‡ç¨‹"><a href="#ä¸‰æ¬¡æ¡æ‰‹æ¡æ‰‹è¿‡ç¨‹" class="headerlink" title="ä¸‰æ¬¡æ¡æ‰‹æ¡æ‰‹è¿‡ç¨‹"></a>ä¸‰æ¬¡æ¡æ‰‹æ¡æ‰‹è¿‡ç¨‹</h2><image src="https://oscimg.oschina.net/oscnet/up-7ee7a8388d0fc3798344cad07f585bf7961.png" width=500 height=300><p>TCPä¸‰æ¬¡æ¡æ‰‹çš„å¤§è‡´æµç¨‹å›¾å¦‚ä¸ŠğŸ‘†  </p><p>ä½¿ç”¨tcpdumpæŠ“åŒ…åˆ†æä¸‰æ¬¡ğŸ¤æ¡æ‰‹æŠ¥æ–‡ä¸­Seqå’ŒAckçš„å˜åŒ–</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcpdump  port 80 -c 3 -S</span><br></pre></td></tr></table></figure><p><img src="https://sjwx.easydoc.xyz/47754217/files/kmov1k44.png" alt="image.png">  </p><h3 id="ç¬¬ä¸€æ¬¡æ¡æ‰‹ğŸ¤"><a href="#ç¬¬ä¸€æ¬¡æ¡æ‰‹ğŸ¤" class="headerlink" title="ç¬¬ä¸€æ¬¡æ¡æ‰‹ğŸ¤"></a>ç¬¬ä¸€æ¬¡æ¡æ‰‹ğŸ¤</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IP upay.60734 &gt; 100.100.15.23.http: Flags [S], seq 3800409106, win 29200, options [mss 1460,sackOK,TS val 839851765 ecr 0,nop,wscale 7], length 0</span><br></pre></td></tr></table></figure><p>å®¢æˆ·ç«¯upayè®¿é—®æœåŠ¡ç«¯80ç«¯å£ï¼Œå‘é€ä¸€ä¸ªã€Œ seq=3800409106 ã€ ï¼ŒåŒæ—¶æ ‡å¿—ä½SYN=1ï¼Œå£°æ˜æ­¤æ¬¡æ¡æ‰‹æ˜¯è¦å»ºç«‹è¿æ¥ï¼›</p><h3 id="ç¬¬äºŒæ¬¡æ¡æ‰‹ğŸ¤"><a href="#ç¬¬äºŒæ¬¡æ¡æ‰‹ğŸ¤" class="headerlink" title="ç¬¬äºŒæ¬¡æ¡æ‰‹ğŸ¤"></a>ç¬¬äºŒæ¬¡æ¡æ‰‹ğŸ¤</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IP 100.100.15.23.http &gt; upay.60734: Flags [S.], seq 1981710286, ack 3800409107, win 14600, options [mss 1440,nop,nop,sackOK,nop,wscale 7], length 0</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°å®¢æˆ·ç«¯çš„ç”³è¯·è¿æ¥å¼ºæ±‚ï¼ˆSYN=1ï¼‰ä¹‹åï¼Œåœ¨æœåŠ¡ç«¯è‡ªå·±å‡†å¤‡å¥½çš„æƒ…å†µä¸‹ï¼Œç»™å®¢æˆ·ç«¯å‘é€ ã€Œ ACK=1 SYN=1 ã€çš„ç¡®è®¤æŠ¥æ–‡ï¼ŒSYN=1åŒæ ·ä¹Ÿæ˜¯å£°æ˜æ­¤æ¬¡æŠ¥æ–‡æ˜¯å»ºç«‹è¿æ¥çš„æŠ¥æ–‡è¯·æ±‚ï¼› ack= 3800409107 ä¹Ÿå°±æ˜¯ç¬¬ä¸€ä¸ªå®¢æˆ·ç«¯å‘ç»™æœåŠ¡ç«¯çš„seq+1ï¼ˆackæ˜¯æ¥æ”¶æ–¹ä¸‹æ¬¡æœŸæœ›æ¥å£æŠ¥æ–‡çš„å¼€å§‹ä½ç½®ï¼‰</p><h3 id="ç¬¬ä¸‰æ¬¡æ¡æ‰‹æ¡æ‰‹"><a href="#ç¬¬ä¸‰æ¬¡æ¡æ‰‹æ¡æ‰‹" class="headerlink" title="ç¬¬ä¸‰æ¬¡æ¡æ‰‹æ¡æ‰‹"></a>ç¬¬ä¸‰æ¬¡æ¡æ‰‹æ¡æ‰‹</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IP upay.60734 &gt; 100.100.15.23.http: Flags [.], ack 1981710287, win 229, length 0</span><br></pre></td></tr></table></figure><p>å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨è¿”å›çš„ç¡®è®¤æŠ¥æ–‡ï¼Œç¡®è®¤å¯ä»¥è¿›è¡Œè¿æ¥ï¼Œå‘é€ã€Œ ack = 1981710287 ã€çš„ç¡®è®¤æŠ¥æ–‡ï¼Œä¹‹åå°±å®Œæˆäº†ä¸‰æ¬¡æ¡æ‰‹ï¼ŒTCPçš„è¿æ¥å°±åˆ›å»ºæˆåŠŸäº†ï¼Œæ¥ä¸‹æ¥åŒæ–¹å°±å¯ä»¥å‘é€æ•°æ®æŠ¥äº†ï¼›</p><h2 id="TCPè¿æ¥åˆ›å»ºæ„æˆä¸­çŠ¶æ€çš„å˜æ›´"><a href="#TCPè¿æ¥åˆ›å»ºæ„æˆä¸­çŠ¶æ€çš„å˜æ›´" class="headerlink" title="TCPè¿æ¥åˆ›å»ºæ„æˆä¸­çŠ¶æ€çš„å˜æ›´"></a>TCPè¿æ¥åˆ›å»ºæ„æˆä¸­çŠ¶æ€çš„å˜æ›´</h2><image src="https://oscimg.oschina.net/oscnet/up-d6920a59ec1cb6a738265b6f182cbdbe2ba.png" width=550 height=400><ul><li>é¦–å…ˆå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½æ˜¯ã€CLOSEDã€‘çŠ¶æ€ï¼Œå®¢æˆ·ç«¯å‘èµ·è¿æ¥è¯·æ±‚ä¹‹åï¼Œè¿›å…¥ã€SYN-SENTã€‘çŠ¶æ€ï¼Œè¿™ä¸ªçŠ¶æ€ç»´æŒçš„æ—¶é—´å¾ˆçŸ­ï¼Œæˆ‘ä»¬ä½¿ç”¨netstatå»æŸ¥çœ‹tcpè¿æ¥çŠ¶æ€çš„æ—¶å€™ï¼ŒåŸºæœ¬ä¸Šéƒ½ä¸ä¼šçœ‹åˆ°è¿™ä¸ªçŠ¶æ€ï¼Œè€ŒæœåŠ¡ç«¯æ˜¯åœ¨ã€LISTENã€‘çŠ¶æ€ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼›</li><li>æœåŠ¡ç«¯æ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚ä¹‹åï¼Œå‘é€ã€ŒSYN ACKã€ç¡®è®¤æŠ¥æ–‡ï¼ŒåŒæ—¶æœåŠ¡ç«¯è¿›å…¥ã€SYN-RECEIVEDã€‘çŠ¶æ€ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„ç¡®è®¤æŠ¥æ–‡ï¼›</li><li>å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡ç«¯çš„åŒæ­¥ç¡®è®¤è¯·æ±‚ä¹‹åï¼Œå‘é€ã€ŒACKã€ç¡®è®¤æŠ¥æ–‡ï¼ŒåŒæ—¶è¿›å…¥ã€ESTABLISHEDã€‘çŠ¶æ€ï¼Œå‡†å¤‡åç»­çš„æ•°æ®ä¼ è¾“ï¼›</li><li>æœåŠ¡ç«¯æ”¶åˆ°ä¸‰æ¬¡æ¡æ‰‹æœ€åçš„ç¡®è®¤æŠ¥æ–‡ä¹‹åï¼Œè¿›å…¥ã€ESTABLISHEDã€‘çŠ¶æ€ï¼Œè‡³æ­¤ï¼Œä¸€ä¸ªTCPè¿æ¥ç®—æ˜¯å»ºç«‹å®Œæˆäº†ï¼Œåé¢å°±æ˜¯åŒæ–¹çš„é€šä¿¡äº†ï¼›</li></ul><h2 id="TCBï¼ˆTransmission-Control-Blockï¼‰"><a href="#TCBï¼ˆTransmission-Control-Blockï¼‰" class="headerlink" title="TCBï¼ˆTransmission Control Blockï¼‰"></a>TCBï¼ˆTransmission Control Blockï¼‰</h2><blockquote><p>i ä¿å­˜è¿æ¥ä½¿ç”¨çš„æºç«¯å£ã€ç›®çš„ç«¯å£ã€ç›®çš„ ipã€åºå·ã€ åº”ç­”åºå·ã€å¯¹æ–¹çª—å£å¤§å°ã€å·±æ–¹çª—å£å¤§å°ã€tcp çŠ¶æ€ã€tcp è¾“å…¥/è¾“å‡ºé˜Ÿåˆ—ã€åº”ç”¨å±‚è¾“å‡ºé˜Ÿ åˆ—ã€tcp çš„é‡ä¼ æœ‰å…³å˜é‡ç­‰</p></blockquote><h2 id="TCPæ€§èƒ½ä¼˜åŒ–å’Œå®‰å…¨é—®é¢˜"><a href="#TCPæ€§èƒ½ä¼˜åŒ–å’Œå®‰å…¨é—®é¢˜" class="headerlink" title="TCPæ€§èƒ½ä¼˜åŒ–å’Œå®‰å…¨é—®é¢˜"></a>TCPæ€§èƒ½ä¼˜åŒ–å’Œå®‰å…¨é—®é¢˜</h2><image src="https://oscimg.oschina.net/oscnet/up-e99592d430e1219134af66e69aee2e6ccbd.png"  width=550 height=400 ><p>æ­£å¦‚æˆ‘ä»¬äº†è§£çš„TCPä¸‰æ¬¡æ¡æ‰‹ğŸ¤çš„æµç¨‹ï¼Œå½“æœ‰å¤§é‡SYNè¯·æ±‚åˆ°è¾¾æœåŠ¡ç«¯æ—¶ï¼Œä¼šè¿›å…¥åˆ°ã€SYNé˜Ÿåˆ—ã€‘ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°ç¬¬äºŒæ¬¡ç¡®è®¤æŠ¥æ–‡ä¹‹åï¼Œä¼šè¿›å…¥ã€ESTABLISHEDã€‘çŠ¶æ€ï¼ŒæœåŠ¡ç«¯æ“ä½œç³»ç»Ÿå†…æ ¸ä¼šå°†è¿æ¥æ”¾å…¥åˆ°ã€ACCEPTã€‘é˜Ÿåˆ—ä¸­ï¼Œå½“Nginxæˆ–è€…Tomcatè¿™äº›åº”ç”¨ç¨‹åºåœ¨è°ƒç”¨acceptï¼ˆè®¿é—®å†…æ ¸ï¼‰çš„æ—¶å€™ï¼Œå°±æ˜¯åœ¨ã€ACCEPTã€‘é˜Ÿåˆ—ä¸­å–å‡ºè¿æ¥è¿›è¡Œå¤„ç†ï¼›</p><blockquote><p>w ç”±æ­¤å¯è§ï¼Œã€SYNã€‘é˜Ÿåˆ—å’Œã€ACCEPTã€‘æ˜¯ä¼šå½±å“æœåŠ¡å™¨è¿æ¥æ€§èƒ½çš„é‡è¦å› ç´ ï¼Œæ‰€ä»¥å¯¹äºé«˜å¹¶å‘çš„åœºæ™¯ä¸‹ï¼Œè¿™ä¸¤ä¸ªé˜Ÿåˆ—ä¸€å®šæ˜¯è¦è®¾ç½®çš„æ¯”è¾ƒå¤§çš„ï¼›</p></blockquote><h3 id="å¦‚ä½•è®¾ç½®SYNé˜Ÿåˆ—å¤§å°"><a href="#å¦‚ä½•è®¾ç½®SYNé˜Ÿåˆ—å¤§å°" class="headerlink" title="å¦‚ä½•è®¾ç½®SYNé˜Ÿåˆ—å¤§å°"></a>å¦‚ä½•è®¾ç½®SYNé˜Ÿåˆ—å¤§å°</h3><p>æœåŠ¡å™¨ç«¯ SYN_RCV çŠ¶æ€</p><ul><li>net.ipv4.tcp_max_syn_backlog:SYN_RCVD çŠ¶æ€è¿æ¥çš„æœ€å¤§ä¸ªæ•°</li><li>net.ipv4.tcp_synack_retries:è¢«åŠ¨å»ºç«‹è¿æ¥æ—¶ï¼Œå‘SYN/ACKçš„é‡è¯•æ¬¡æ•°</li></ul><p>å®¢æˆ·ç«¯ SYN_SENT çŠ¶æ€ï¼ˆæœåŠ¡ç«¯ä½œä¸ºå®¢æˆ·ç«¯ï¼Œæ¯”å¦‚Ngnixè½¬å‘ç­‰ï¼‰</p><ul><li>net.ipv4.tcp_syn_retries = 6 ä¸»åŠ¨å»ºç«‹è¿æ¥æ—¶ï¼Œå‘ SYN çš„é‡è¯•æ¬¡æ•°</li><li>net.ipv4.ip_local_port_range = 32768 60999 å»ºç«‹è¿æ¥æ—¶çš„æœ¬åœ°ç«¯å£å¯ç”¨èŒƒå›´</li></ul><h2 id="Fast-Openæœºåˆ¶"><a href="#Fast-Openæœºåˆ¶" class="headerlink" title="Fast Openæœºåˆ¶"></a>Fast Openæœºåˆ¶</h2><image src="https://oscimg.oschina.net/oscnet/up-071f997614b36eb8b4511db0f3ba0637d70.png" width=550 height=400 ><p>TCPå¦‚ä½•å¯¹è¿æ¥çš„æ¬¡æ•°ä»¥åŠè¿æ¥æ—¶é—´è¿›è¡Œä¼˜åŒ–çš„å‘¢ï¼Ÿè¿™é‡Œæåˆ°Fast Openæœºåˆ¶ï¼›<br>æ¯”å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªHttp Getè¯·æ±‚ï¼Œæ­£å¸¸çš„ä¸‰æ¬¡æ¡æ‰‹ğŸ¤åˆ°æ”¶åˆ°æœåŠ¡ç«¯æ•°æ®éœ€è¦2ä¸ªRTTçš„æ—¶é—´ï¼›FastOpenåšå‡ºå¦‚ä¸‹ä¼˜åŒ–ï¼š</p><ul><li>ç¬¬ä¸€æ¬¡åˆ›å»ºè¿æ¥çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯è¦ç»å†2ä¸ªRTTæ—¶é—´ï¼Œä½†æ˜¯åœ¨æœåŠ¡ç«¯å‘é€ç¡®è®¤æŠ¥æ–‡çš„æ—¶å€™ï¼Œåœ¨æŠ¥æ–‡ä¸­æ·»åŠ ä¸€ä¸ªcookieï¼›</li><li>ç­‰åˆ°ä¸‹æ¬¡å®¢æˆ·ç«¯å†éœ€è¦åˆ›å»ºè¯·æ±‚çš„æ—¶å€™ï¼Œç›´æ¥å°†ã€SYNã€‘å’Œcookieä¸€å¹¶å¸¦ä¸Šï¼Œå¯ä»¥ä¸€æ¬¡å°±åˆ›å»ºè¿æ¥ï¼Œç»è¿‡ä¸€ä¸ªRTTå®¢æˆ·ç«¯å°±å¯ä»¥æ”¶åˆ°æœåŠ¡ç«¯çš„æ•°æ®ï¼›</li></ul><h4 id="å¦‚ä½•Linuxä¸Šæ‰“å¼€TCP-Fast-Open"><a href="#å¦‚ä½•Linuxä¸Šæ‰“å¼€TCP-Fast-Open" class="headerlink" title="å¦‚ä½•Linuxä¸Šæ‰“å¼€TCP Fast Open"></a>å¦‚ä½•Linuxä¸Šæ‰“å¼€TCP Fast Open</h4><p> net.ipv4.tcp_fastopen:ç³»ç»Ÿå¼€å¯ TFO åŠŸèƒ½ </p><ul><li>0:å…³é—­</li><li>1:ä½œä¸ºå®¢æˆ·ç«¯æ—¶å¯ä»¥ä½¿ç”¨ TFO</li><li>2:ä½œä¸ºæœåŠ¡å™¨æ—¶å¯ä»¥ä½¿ç”¨ TFO</li><li>3:æ— è®ºä½œä¸ºå®¢æˆ·ç«¯è¿˜æ˜¯æœåŠ¡å™¨ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ TFO</li></ul><h3 id="SYNæ”»å‡»"><a href="#SYNæ”»å‡»" class="headerlink" title="SYNæ”»å‡»"></a>SYNæ”»å‡»</h3><h4 id="ä»€ä¹ˆæ˜¯SYNæ”»å‡»ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯SYNæ”»å‡»ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯SYNæ”»å‡»ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯SYNæ”»å‡»ï¼Ÿ</h4><p>  æ­£å¸¸çš„æœåŠ¡é€šè®¯éƒ½æ˜¯ç”±æ“ä½œç³»ç»Ÿå†…æ ¸å®ç°çš„è¯·æ±‚æŠ¥æ–‡æ¥åˆ›å»ºè¿æ¥çš„ï¼Œä½†æ˜¯ï¼Œå¯ä»¥äººä¸ºä¼ªé€ å¤§é‡ä¸åŒIPåœ°å€çš„SYNæŠ¥æ–‡ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢ğŸ‘†çŠ¶æ€å˜æ›´å›¾ä¸­çš„SYNè¯·æ±‚ï¼Œä½†æ˜¯æ”¶åˆ°æœåŠ¡ç«¯çš„ACKæŠ¥æ–‡ä¹‹åï¼Œå´ä¸å‘é€å¯¹äºæœåŠ¡ç«¯çš„ACKè¯·æ±‚ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ï¼Œè¿™æ ·ä¼šé€ æˆå¤§é‡å¤„äºã€SYN-RECEIVEDã€‘çŠ¶æ€çš„TCPè¿æ¥å ç”¨å¤§é‡æœåŠ¡ç«¯èµ„æºï¼Œå¯¼è‡´æ­£å¸¸çš„è¿æ¥æ— æ³•åˆ›å»ºï¼Œä»è€Œå¯¼è‡´ç³»ç»Ÿå´©åï¼›</p><h4 id="SYNæ”»å‡»å¦‚ä½•æŸ¥çœ‹"><a href="#SYNæ”»å‡»å¦‚ä½•æŸ¥çœ‹" class="headerlink" title="SYNæ”»å‡»å¦‚ä½•æŸ¥çœ‹"></a>SYNæ”»å‡»å¦‚ä½•æŸ¥çœ‹</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -nap | grep SYN_RECV</span><br></pre></td></tr></table></figure><blockquote><p>w å¦‚æœå­˜åœ¨å¤§é‡ã€SYN-RECEIVEDã€‘çš„è¿æ¥ï¼Œå°±æ˜¯å‘ç”ŸSYNæ”»å‡»äº†ï¼›</p></blockquote><h4 id="å¦‚ä½•è§„é¿SYNæ”»å‡»ï¼Ÿ"><a href="#å¦‚ä½•è§„é¿SYNæ”»å‡»ï¼Ÿ" class="headerlink" title="å¦‚ä½•è§„é¿SYNæ”»å‡»ï¼Ÿ"></a>å¦‚ä½•è§„é¿SYNæ”»å‡»ï¼Ÿ</h4><ul><li><p><strong>net.core.netdev_max_backlog</strong></p><blockquote><p>æ¥æ”¶è‡ªç½‘å¡ã€ä½†æœªè¢«å†…æ ¸åè®®æ ˆå¤„ç†çš„æŠ¥æ–‡é˜Ÿåˆ—é•¿åº¦</p></blockquote></li><li><p><strong>net.ipv4.tcp_max_syn_backlog</strong></p><blockquote><p>SYN_RCVD çŠ¶æ€è¿æ¥çš„æœ€å¤§ä¸ªæ•°</p></blockquote></li><li><p><strong>net.ipv4.tcp_abort_on_overflow</strong></p><blockquote><p>è¶…å‡ºå¤„ç†èƒ½åŠ›æ—¶ï¼Œå¯¹æ–°æ¥çš„ SYN ç›´æ¥å›åŒ… RSTï¼Œä¸¢å¼ƒè¿æ¥</p></blockquote></li><li><p>è®¾ç½®SYN Timeout</p><blockquote><p>ç”±äºSYN Floodæ”»å‡»çš„æ•ˆæœå–å†³äºæœåŠ¡å™¨ä¸Šä¿æŒçš„SYNåŠè¿æ¥æ•°ï¼Œè¿™ä¸ªå€¼=SYNæ”»å‡»çš„é¢‘åº¦ x SYN Timeoutï¼Œæ‰€ä»¥é€šè¿‡ç¼©çŸ­ä»æ¥æ”¶åˆ°SYNæŠ¥æ–‡åˆ°ç¡®å®šè¿™ä¸ªæŠ¥æ–‡æ— æ•ˆå¹¶ä¸¢å¼ƒæ”¹è¿æ¥çš„æ—¶é—´ï¼Œä¾‹å¦‚è®¾ç½®ä¸º20ç§’ä»¥ä¸‹ï¼Œå¯ä»¥æˆå€çš„é™ä½æœåŠ¡å™¨çš„è´Ÿè·ã€‚ä½†è¿‡ä½çš„SYN Timeoutè®¾ç½®å¯èƒ½ä¼šå½±å“å®¢æˆ·çš„æ­£å¸¸è®¿é—®ã€‚</p></blockquote></li><li><p>è®¾ç½®SYN Cookie (net.ipv4.tcp_syncookies = 1)</p><blockquote><p>å°±æ˜¯ç»™æ¯ä¸€ä¸ªè¯·æ±‚è¿æ¥çš„IPåœ°å€åˆ†é…ä¸€ä¸ªCookieï¼Œå¦‚æœçŸ­æ—¶é—´å†…è¿ç»­å—åˆ°æŸä¸ªIPçš„é‡å¤SYNæŠ¥æ–‡ï¼Œå°±è®¤å®šæ˜¯å—åˆ°äº†æ”»å‡»ï¼Œå¹¶è®°å½•åœ°å€ä¿¡æ¯ï¼Œä»¥åä»è¿™ä¸ªIPåœ°å€æ¥çš„åŒ…ä¼šè¢«ä¸€æ¦‚ä¸¢å¼ƒã€‚è¿™æ ·åšçš„ç»“æœä¹Ÿå¯èƒ½ä¼šå½±å“åˆ°æ­£å¸¸ç”¨æˆ·çš„è®¿é—®ã€‚</p></blockquote></li></ul><image src="https://oscimg.oschina.net/oscnet/up-8cce8662408ffa1f5ed678be972248b92ca.png" width=800 height=350><p>å½“ SYN é˜Ÿåˆ—æ»¡åï¼Œæ–°çš„ SYN ä¸è¿›å…¥é˜Ÿåˆ—ï¼Œè®¡ç®—å‡º cookie å† ä»¥ SYN+ACK ä¸­çš„åºåˆ—å·è¿”å›å®¢æˆ·ç«¯ï¼Œæ­£å¸¸å®¢æˆ·ç«¯å‘æŠ¥æ–‡æ—¶ï¼Œ æœåŠ¡å™¨æ ¹æ®æŠ¥æ–‡ä¸­æºå¸¦çš„ cookie é‡æ–°æ¢å¤è¿æ¥</p><blockquote><p>w ç”±äº cookie å ç”¨åºåˆ—å·ç©ºé—´ï¼Œå¯¼è‡´æ­¤æ—¶æ‰€æœ‰ TCP å¯é€‰ åŠŸèƒ½å¤±æ•ˆï¼Œä¾‹å¦‚æ‰©å……çª—å£ã€æ—¶é—´æˆ³ç­‰</p></blockquote><h2 id="TCP-DEFER-ACCEPT"><a href="#TCP-DEFER-ACCEPT" class="headerlink" title="TCP_DEFER_ACCEPT"></a>TCP_DEFER_ACCEPT</h2><p>è¿™ä¸ªæ˜¯åšä»€ä¹ˆå‘¢ï¼Ÿ æ­£å¦‚ä¸Šé¢ğŸ‘†æ“ä½œç³»ç»Ÿå†…æ ¸å±•ç¤ºå›¾æ‰€ç¤ºï¼Œå†…æ ¸ä¸­ç»´æŠ¤ä¸¤ä¸ªé˜Ÿåˆ—ã€SYNã€‘é˜Ÿåˆ—å’Œã€ACCEPTã€‘é˜Ÿåˆ—ï¼Œåªæœ‰å½“æ”¶åˆ°å®¢æˆ·ç«¯çš„ACKæŠ¥æ–‡ä¹‹åï¼Œè¿æ¥ä¼šè¿›å…¥åˆ°ã€ACCEPTã€‘ï¼ŒåŒæ—¶æœåŠ¡å™¨çš„çŠ¶æ€æ˜¯<br>ã€ESTABLISHEDã€‘çŠ¶æ€ï¼Œæ­¤æ—¶æ“ä½œç³»ç»Ÿå¹¶ä¸ä¼šå»æ¿€æ´»åº”ç”¨è¿›ç¨‹ï¼Œè€Œæ˜¯ä¼šç­‰å¾…ï¼ŒçŸ¥é“æ”¶åˆ°çœŸæ­£çš„dataåˆ†ç»„ä¹‹åï¼Œæ‰ä¼šæ¿€æ´»åº”ç”¨è¿›ç¨‹ï¼Œè¿™æ˜¯ä¸ºäº†æé«˜åº”ç”¨è¿›ç¨‹çš„æ‰§è¡Œæ•ˆç‡ï¼Œé¿å…åº”ç”¨è¿›ç¨‹çš„ç­‰å¾…ï¼›</p><blockquote><p>i TCPä¸‰æ¬¡æ¡æ‰‹ä¸ºä»€ä¹ˆä¸èƒ½æ˜¯ä¸¤æ¬¡æˆ–è€…å››æ¬¡</p></blockquote><p>å‚è§æ–‡ç« ï¼š<a href="https://mp.weixin.qq.com/s/rX3A_FA19n4pI9HicIEsXg">æ•–ä¸™ç”¨è¿‘ 40 å¼ å›¾è§£è¢«é—®åƒç™¾éçš„ TCP ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹é¢è¯•é¢˜</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;æ¡æ‰‹ğŸ¤çš„ç›®çš„&quot;&gt;&lt;a href=&quot;#æ¡æ‰‹ğŸ¤çš„ç›®çš„&quot; class=&quot;headerlink&quot; title=&quot;æ¡æ‰‹ğŸ¤çš„ç›®çš„&quot;&gt;&lt;/a&gt;æ¡æ‰‹ğŸ¤çš„ç›®çš„&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;åŒæ­¥Sequenceåºåˆ—å·&lt;blockquote&gt;
&lt;p&gt;i åˆå§‹åŒ–åº&lt;br&gt;åˆ—å·ISN</summary>
      
    
    
    
    <category term="Computer Network" scheme="http://example.com/categories/Computer-Network/"/>
    
    <category term="TCP" scheme="http://example.com/categories/Computer-Network/TCP/"/>
    
    
    <category term="TCP" scheme="http://example.com/tags/TCP/"/>
    
  </entry>
  
  <entry>
    <title>TCPå¤´éƒ¨</title>
    <link href="http://example.com/wiki/TCP%E5%A4%B4%E9%83%A8/"/>
    <id>http://example.com/wiki/TCP%E5%A4%B4%E9%83%A8/</id>
    <published>2021-07-04T08:31:22.000Z</published>
    <updated>2021-07-04T08:47:43.875Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å¸¦ç€é—®é¢˜å­¦ä¹ "><a href="#å¸¦ç€é—®é¢˜å­¦ä¹ " class="headerlink" title="å¸¦ç€é—®é¢˜å­¦ä¹ "></a>å¸¦ç€é—®é¢˜å­¦ä¹ </h2><ul><li>å¦‚ä½•æ ¡éªŒæŠ¥æ–‡æ®µæ˜¯å¦æŸåï¼Ÿ å¦‚ä½•CRCæ ¡éªŒ</li><li>seqå’Œackæ˜¯å¦‚ä½•è®¡ç®—çš„ï¼Ÿ </li><li>tcpæ ¡éªŒä½éƒ½æœ‰é‚£äº›ï¼Ÿ 6ä¸ª åˆ†åˆ«æ˜¯ä»€ä¹ˆå«ä¹‰ï¼Ÿ</li><li>tcpå¦‚ä½•è®¡ç®—é¦–éƒ¨é•¿åº¦ï¼Ÿ åç§»é‡</li><li>TCP Retransmission é‡ä¼ ï¼Ÿ </li><li>tcp spurious retransmission åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ </li><li>tcp dup ack æ˜¯ä»€ä¹ˆï¼Ÿ</li><li>ackä¸ACKæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ åˆ†åˆ«æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</li></ul><h2 id="TCPå¤´éƒ¨ç»“æ„"><a href="#TCPå¤´éƒ¨ç»“æ„" class="headerlink" title="TCPå¤´éƒ¨ç»“æ„"></a>TCPå¤´éƒ¨ç»“æ„</h2><p><img src="https://oscimg.oschina.net/oscnet/up-d3e5715ff000040a0b18b2c9374d7e55f53.png">   </p><p>å­¦ä¹ TCPåè®®é¦–å…ˆè¦çœ‹ä¸€ä¸‹å®ƒçš„æŠ¥æ–‡æ®µæ˜¯å¦‚ä½•ç»„æˆçš„ï¼›TCPæŠ¥æ–‡æ®µç»„æˆç”±ä¸¤éƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ†æ˜¯æŠ¥æ–‡å¤´éƒ¨ï¼Œç¬¬äºŒéƒ¨åˆ†æ˜¯æ•°æ®éƒ¨åˆ†ï¼›</p><p>å…ˆçœ‹ä¸€ä¸‹æŠ¥æ–‡å¤´ï¼Œä¹Ÿå°±æ˜¯TCPé¦–éƒ¨çš„ç»„æˆï¼›</p><h3 id="16ä½ç«¯å£"><a href="#16ä½ç«¯å£" class="headerlink" title="16ä½ç«¯å£"></a>16ä½ç«¯å£</h3><p>16ä½ç«¯å£å·ï¼šå‘ŠçŸ¥ä¸»æœºè¯¥æŠ¥æ–‡æ®µæ˜¯æ¥è‡ªå“ªé‡Œï¼ˆæºç«¯å£Source Portï¼‰ä»¥åŠä¼ ç»™å“ªä¸ªä¸Šå±‚åè®®æˆ–åº”ç”¨ç¨‹åºï¼ˆç›®çš„ç«¯å£Destination Portï¼‰çš„ã€‚<br>è¿›è¡ŒTCPé€šä¿¡æ—¶ï¼Œå®¢æˆ·ç«¯é€šå¸¸ä½¿ç”¨ç³»ç»Ÿè‡ªåŠ¨é€‰æ‹©çš„ä¸´æ—¶ç«¯å£å·ï¼Œè€ŒæœåŠ¡å™¨åˆ™ä½¿ç”¨çŸ¥åæœåŠ¡ç«¯å£å·ï¼ˆæ¯”å¦‚DNSåè®®å¯¹åº”ç«¯å£53ï¼ŒHTTPåè®®å¯¹åº”80ï¼Œè¿™äº›ç«¯å£å·å¯åœ¨/etc/servicesæ–‡ä»¶ä¸­æ‰¾åˆ°ï¼‰ã€‚  </p><h3 id="åºåˆ—å·ï¼ˆSeqï¼‰"><a href="#åºåˆ—å·ï¼ˆSeqï¼‰" class="headerlink" title="åºåˆ—å·ï¼ˆSeqï¼‰"></a>åºåˆ—å·ï¼ˆSeqï¼‰</h3><p>å 32ä½ï¼Œä¹Ÿå°±æ˜¯4å­—èŠ‚é•¿åº¦ï¼Œåºå·èŒƒå›´è‡ªç„¶ä¹Ÿæ˜¯æ˜¯0~2^32-1ã€‚TCPæ˜¯é¢å‘å­—èŠ‚æµçš„ï¼ŒTCPè¿æ¥ä¸­ä¼ é€çš„å­—èŠ‚æµä¸­çš„æ¯ä¸ªå­—èŠ‚éƒ½æŒ‰é¡ºåºç¼–å·ã€‚æ•´ä¸ªè¦ä¼ é€çš„å­—èŠ‚æµçš„èµ·å§‹åºå·å¿…é¡»è¦åœ¨è¿æ¥å»ºç«‹æ—¶è®¾ç½®ã€‚é¦–éƒ¨ä¸­çš„åºå·å­—æ®µå€¼æŒ‡çš„æ˜¯æœ¬æŠ¥æ–‡æ®µæ‰€å‘é€çš„æ•°æ®çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºå·ã€‚   </p><p>TCPç”¨åºåˆ—å·å¯¹æ•°æ®åŒ…è¿›è¡Œæ ‡è®°ï¼Œä»¥ä¾¿åœ¨åˆ°è¾¾ç›®çš„åœ°åé‡æ–°é‡è£…ï¼Œå‡è®¾å½“å‰çš„åºåˆ—å·ä¸º sï¼Œå‘é€æ•°æ®é•¿åº¦ä¸º lï¼Œåˆ™ä¸‹æ¬¡å‘é€æ•°æ®æ—¶çš„åºåˆ—å·ä¸º s + lã€‚åœ¨å»ºç«‹è¿æ¥æ—¶é€šå¸¸ç”±è®¡ç®—æœºç”Ÿæˆä¸€ä¸ªéšæœºæ•°ä½œä¸ºåºåˆ—å·çš„åˆå§‹å€¼ã€‚  </p><p>**è¿™é‡Œå­˜åœ¨ä¸€ä¸ªç–‘é—®ï¼Œç¬¬ä¸€æ¬¡å»ºç«‹TCPè¿æ¥çš„æ—¶å€™ï¼Œç½‘ä¸Šä¸€äº›åšå®¢ä¸Šè¯´seqæ˜¯clientéšæœºç”Ÿæˆçš„ï¼Œä¹Ÿæœ‰çš„åšå®¢è¯´æ˜¯seq=1ï¼› è¿™é‡Œç»è¿‡æˆ‘æŠ“åŒ…åï¼Œçœ‹åˆ°ç¬¬ä¸€æ¬¡åˆ›å»ºTCPè¿æ¥çš„æ—¶å€™ï¼Œç¡®å®æ˜¯1; **    </p><h3 id="ç¡®è®¤åº”ç­”å·ï¼ˆAckï¼‰"><a href="#ç¡®è®¤åº”ç­”å·ï¼ˆAckï¼‰" class="headerlink" title="ç¡®è®¤åº”ç­”å·ï¼ˆAckï¼‰"></a>ç¡®è®¤åº”ç­”å·ï¼ˆAckï¼‰</h3><p>Ackå 32ä½ï¼Œ4ä¸ªå­—èŠ‚é•¿åº¦ï¼Œè¡¨ç¤ºæœŸæœ›æ”¶åˆ°å¯¹æ–¹ä¸‹ä¸€ä¸ªæŠ¥æ–‡æ®µçš„åºå·å€¼ã€‚ ç”¨ä½œå¯¹å¦ä¸€æ–¹å‘é€æ¥çš„TCPæŠ¥æ–‡æ®µçš„å“åº”ã€‚å…¶å€¼æ˜¯æ”¶åˆ°çš„TCPæŠ¥æ–‡æ®µçš„åºå·å€¼åŠ 1ã€‚å‡è®¾ä¸»æœºAå’Œä¸»æœºBè¿›è¡ŒTCPé€šä¿¡ï¼Œé‚£ä¹ˆAå‘é€å‡ºçš„TCPæŠ¥æ–‡æ®µä¸ä»…æºå¸¦è‡ªå·±çš„åºå·ï¼Œè€Œä¸”åŒ…å«å¯¹Bå‘é€æ¥çš„TCPæŠ¥æ–‡æ®µçš„ç¡®è®¤å·ã€‚åä¹‹ï¼ŒBå‘é€å‡ºçš„TCPæŠ¥æ–‡æ®µä¹ŸåŒæ—¶æºå¸¦è‡ªå·±çš„åºå·å’Œå¯¹Aå‘é€æ¥çš„æŠ¥æ–‡æ®µçš„ç¡®è®¤å·ã€‚<br>TCPçš„å¯é æ€§ï¼Œæ˜¯å»ºç«‹åœ¨ã€Œæ¯ä¸€ä¸ªæ•°æ®æŠ¥æ–‡éƒ½éœ€è¦ç¡®è®¤æ”¶åˆ°ã€çš„åŸºç¡€ä¹‹ä¸Šçš„ã€‚  </p><p>å°±æ˜¯è¯´ï¼Œé€šè®¯çš„ä»»ä½•ä¸€æ–¹åœ¨æ”¶åˆ°å¯¹æ–¹çš„ä¸€ä¸ªæŠ¥æ–‡ä¹‹åï¼Œéƒ½è¦å‘é€ä¸€ä¸ªç›¸å¯¹åº”çš„ã€Œç¡®è®¤æŠ¥æ–‡ã€ï¼Œæ¥è¡¨è¾¾ç¡®è®¤æ”¶åˆ°ã€‚ é‚£ä¹ˆï¼Œç¡®è®¤æŠ¥æ–‡ï¼Œå°±ä¼šåŒ…å«ç¡®è®¤å·ã€‚    </p><p>è‹¥ç¡®è®¤å·=Nï¼Œåˆ™è¡¨æ˜ï¼šåˆ°åºå·N-1ä¸ºæ­¢çš„æ‰€æœ‰æ•°æ®éƒ½å·²æ­£ç¡®æ”¶åˆ°ã€‚    </p><h3 id="æ•°æ®åç§»-Offset"><a href="#æ•°æ®åç§»-Offset" class="headerlink" title="æ•°æ®åç§» Offset"></a>æ•°æ®åç§» Offset</h3><p>å  0.5 ä¸ªå­—èŠ‚ (4 ä½)ã€‚ è¿™ä¸ªå­—æ®µå®é™…ä¸Šæ˜¯æŒ‡å‡ºäº†TCPæŠ¥æ–‡æ®µçš„é¦–éƒ¨é•¿åº¦ ï¼Œå®ƒæŒ‡å‡ºäº†TCPæŠ¥æ–‡æ®µçš„æ•°æ®èµ·å§‹å¤„è·ç¦»TCPæŠ¥æ–‡çš„èµ·å§‹å¤„æœ‰å¤šè¿œã€‚</p><blockquote><p>æ³¨æ„æ•°æ®èµ·å§‹å¤„å’ŒæŠ¥æ–‡èµ·å§‹å¤„çš„æ„æ€ï¼Œä¸Šé¢ğŸ‘†å·²ç»å†™åˆ°ï¼ŒTCPæŠ¥æ–‡æ®µçš„ç»„æˆæœ‰ä¸¤éƒ¨åˆ†ï¼ŒTCPæŠ¥æ–‡é¦–éƒ¨å’Œæ•°æ®éƒ¨åˆ†ï¼Œåç§»é‡è®°å½•çš„æ˜¯æŠ¥æ–‡æ®µå¼€å§‹å’Œæ•°æ®å¼€å§‹çš„é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯æŠ¥æ–‡é¦–éƒ¨çš„é•¿åº¦ï¼›  </p></blockquote><p>ä¸€ä¸ªæ•°æ®åç§»é‡ = 4 byteï¼Œç”±äº4ä½äºŒè¿›åˆ¶æ•°èƒ½è¡¨ç¤ºçš„æœ€å¤§åè¿›åˆ¶æ•°å­—æ˜¯ 15ï¼Œå› æ­¤æ•°æ®åç§»çš„æœ€å¤§å€¼æ˜¯ 60 byteï¼Œè¿™ä¹Ÿä¾§é¢é™åˆ¶äº†TCPé¦–éƒ¨çš„æœ€å¤§é•¿åº¦ã€‚  </p><h3 id="ä¿ç•™Reserved"><a href="#ä¿ç•™Reserved" class="headerlink" title="ä¿ç•™Reserved"></a>ä¿ç•™Reserved</h3><p>å  0.75 ä¸ªå­—èŠ‚ (6 ä½)ã€‚ ä¿ç•™ä¸ºä»Šåä½¿ç”¨ï¼Œä½†ç›®å‰åº”ç½®ä¸º 0ã€‚</p><h3 id="æ ‡å¿—ä½-TCP-Flags"><a href="#æ ‡å¿—ä½-TCP-Flags" class="headerlink" title="æ ‡å¿—ä½ TCP Flags"></a>æ ‡å¿—ä½ TCP Flags</h3><p><img src="https://oscimg.oschina.net/oscnet/up-869702a0e6199a93eb3be514c04e28274a7.png"><br>æ ‡å¿—ä½ï¼Œä¸€å…±æœ‰6ä¸ªï¼Œåˆ†åˆ«å 1ä½ï¼Œå…±6ä½ã€‚ æ¯ä¸€ä½çš„å€¼åªæœ‰ 0 å’Œ 1ï¼Œåˆ†åˆ«è¡¨è¾¾ä¸åŒæ„æ€ã€‚ å¦‚ä¸Šå›¾æ˜¯ä½¿ç”¨wireshardæŠ“åŒ…å±•ç¤ºæˆªå›¾ï¼›  </p><h4 id="ACK-Acknowlegemt-ï¼šç¡®è®¤åºå·æœ‰æ•ˆ"><a href="#ACK-Acknowlegemt-ï¼šç¡®è®¤åºå·æœ‰æ•ˆ" class="headerlink" title="ACK(Acknowlegemt)  ï¼šç¡®è®¤åºå·æœ‰æ•ˆ"></a>ACK(Acknowlegemt)  ï¼šç¡®è®¤åºå·æœ‰æ•ˆ</h4><blockquote><p>å½“ ACK = 1 çš„æ—¶å€™ï¼Œç¡®è®¤å·ï¼ˆAcknowledgemt Numberï¼‰æœ‰æ•ˆã€‚ ä¸€èˆ¬ç§°æºå¸¦ ACK æ ‡å¿—çš„ TCP æŠ¥æ–‡æ®µä¸ºã€Œç¡®è®¤æŠ¥æ–‡æ®µã€ã€‚ä¸º0è¡¨ç¤ºæ•°æ®æ®µä¸åŒ…å«ç¡®è®¤ä¿¡æ¯ï¼Œç¡®è®¤å·è¢«å¿½ç•¥ã€‚<br>TCP è§„å®šï¼Œåœ¨è¿æ¥å»ºç«‹åæ‰€æœ‰ä¼ é€çš„æŠ¥æ–‡æ®µéƒ½å¿…é¡»æŠŠ ACK è®¾ç½®ä¸º 1ã€‚  </p></blockquote><h4 id="RST-Reset-ï¼šé‡ç½®è¿æ¥"><a href="#RST-Reset-ï¼šé‡ç½®è¿æ¥" class="headerlink" title="RST(Reset)ï¼šé‡ç½®è¿æ¥"></a>RST(Reset)ï¼šé‡ç½®è¿æ¥</h4><blockquote><p>å½“ RST = 1 çš„æ—¶å€™ï¼Œè¡¨ç¤º TCP è¿æ¥ä¸­å‡ºç°ä¸¥é‡é”™è¯¯ï¼Œéœ€è¦é‡Šæ”¾å¹¶é‡æ–°å»ºç«‹è¿æ¥ã€‚ ä¸€èˆ¬ç§°æºå¸¦ RST æ ‡å¿—çš„ TCP æŠ¥æ–‡æ®µä¸ºã€Œå¤ä½æŠ¥æ–‡æ®µã€ã€‚ </p></blockquote><h4 id="SYN-SYNchronization-ï¼šå‘èµ·äº†ä¸€ä¸ªæ–°è¿æ¥"><a href="#SYN-SYNchronization-ï¼šå‘èµ·äº†ä¸€ä¸ªæ–°è¿æ¥" class="headerlink" title="SYN(SYNchronization)ï¼šå‘èµ·äº†ä¸€ä¸ªæ–°è¿æ¥"></a>SYN(SYNchronization)ï¼šå‘èµ·äº†ä¸€ä¸ªæ–°è¿æ¥</h4><blockquote><p>å½“ SYN = 1 çš„æ—¶å€™ï¼Œè¡¨æ˜è¿™æ˜¯ä¸€ä¸ªè¯·æ±‚è¿æ¥æŠ¥æ–‡æ®µã€‚ ä¸€èˆ¬ç§°æºå¸¦ SYN æ ‡å¿—çš„ TCP æŠ¥æ–‡æ®µä¸ºã€ŒåŒæ­¥æŠ¥æ–‡æ®µã€ã€‚ åœ¨ TCP ä¸‰æ¬¡æ¡æ‰‹ä¸­çš„ç¬¬ä¸€ä¸ªæŠ¥æ–‡å°±æ˜¯åŒæ­¥æŠ¥æ–‡æ®µï¼Œåœ¨è¿æ¥å»ºç«‹æ—¶ç”¨æ¥åŒæ­¥åºå·ã€‚<br>å¯¹æ–¹è‹¥åŒæ„å»ºç«‹è¿æ¥ï¼Œåˆ™åº”åœ¨å“åº”çš„æŠ¥æ–‡æ®µä¸­ä½¿ SYN = 1 å’Œ ACK = 1ã€‚</p></blockquote><h4 id="PSH-Push-æ¨é€"><a href="#PSH-Push-æ¨é€" class="headerlink" title="PSH (Push): æ¨é€"></a>PSH (Push): æ¨é€</h4><blockquote><p>å½“ PSH = 1 çš„æ—¶å€™ï¼Œè¡¨ç¤ºè¯¥æŠ¥æ–‡æ®µé«˜ä¼˜å…ˆçº§ï¼Œæ¥æ”¶æ–¹ TCP åº”è¯¥å°½å¿«æ¨é€ç»™æ¥æ”¶åº”ç”¨ç¨‹åºï¼Œè€Œä¸ç”¨ç­‰åˆ°æ•´ä¸ª TCP ç¼“å­˜éƒ½å¡«æ»¡äº†åå†äº¤ä»˜ã€‚  </p></blockquote><h4 id="FINï¼šé‡Šæ”¾ä¸€ä¸ªè¿æ¥"><a href="#FINï¼šé‡Šæ”¾ä¸€ä¸ªè¿æ¥" class="headerlink" title="FINï¼šé‡Šæ”¾ä¸€ä¸ªè¿æ¥"></a>FINï¼šé‡Šæ”¾ä¸€ä¸ªè¿æ¥</h4><blockquote><p>å½“ FIN = 1 æ—¶ï¼Œè¡¨ç¤ºæ­¤æŠ¥æ–‡æ®µçš„å‘é€æ–¹çš„æ•°æ®å·²ç»å‘é€å®Œæ¯•ï¼Œå¹¶è¦æ±‚é‡Šæ”¾ TCP è¿æ¥ã€‚<br>ä¸€èˆ¬ç§°æºå¸¦ FIN çš„æŠ¥æ–‡æ®µä¸ºã€Œç»“æŸæŠ¥æ–‡æ®µã€ã€‚<br>åœ¨ TCP å››æ¬¡æŒ¥æ‰‹é‡Šæ”¾è¿æ¥çš„æ—¶å€™ï¼Œå°±ä¼šç”¨åˆ°è¯¥æ ‡å¿—ã€‚</p></blockquote><h3 id="çª—å£å¤§å°-Window-Size"><a href="#çª—å£å¤§å°-Window-Size" class="headerlink" title="çª—å£å¤§å° Window Size"></a>çª—å£å¤§å° Window Size</h3><p>å 16ä½ã€‚<br>è¯¥å­—æ®µæ˜ç¡®æŒ‡å‡ºäº†ç°åœ¨å…è®¸å¯¹æ–¹å‘é€çš„æ•°æ®é‡ï¼Œå®ƒå‘Šè¯‰å¯¹æ–¹æœ¬ç«¯çš„ TCP æ¥æ”¶ç¼“å†²åŒºè¿˜èƒ½å®¹çº³å¤šå°‘å­—èŠ‚çš„æ•°æ®ï¼Œè¿™æ ·å¯¹æ–¹å°±å¯ä»¥æ§åˆ¶å‘é€æ•°æ®çš„é€Ÿåº¦ã€‚ çª—å£å¤§å°çš„å€¼æ˜¯æŒ‡ï¼Œä»æœ¬æŠ¥æ–‡æ®µé¦–éƒ¨ä¸­çš„ç¡®è®¤å·ç®—èµ·ï¼Œæ¥æ”¶æ–¹ç›®å‰å…è®¸å¯¹æ–¹å‘é€çš„æ•°æ®é‡ã€‚</p><blockquote><p>ä¾‹å¦‚ï¼Œå‡å¦‚ç¡®è®¤å·æ˜¯701ï¼Œçª—å£å­—æ®µæ˜¯ 1000ã€‚è¿™å°±è¡¨æ˜ï¼Œä» 701 å·ç®—èµ·ï¼Œå‘é€æ­¤æŠ¥æ–‡æ®µçš„ä¸€æ–¹è¿˜æœ‰æ¥æ”¶ 1000 ï¼ˆå­—èŠ‚åºå·æ˜¯ 701 ~ 1700ï¼‰ ä¸ªå­—èŠ‚çš„æ•°æ®çš„æ¥æ”¶ç¼“å­˜ç©ºé—´ã€‚  </p></blockquote><h3 id="æ ¡éªŒå’Œ-TCP-Checksum"><a href="#æ ¡éªŒå’Œ-TCP-Checksum" class="headerlink" title="æ ¡éªŒå’Œ TCP Checksum"></a>æ ¡éªŒå’Œ TCP Checksum</h3><p>å 16ä½ã€‚ ç”±å‘é€ç«¯å¡«å……ï¼Œæ¥æ”¶ç«¯å¯¹TCPæŠ¥æ–‡æ®µæ‰§è¡Œã€CRCç®—æ³•ã€‘ï¼Œä»¥æ£€éªŒTCPæŠ¥æ–‡æ®µåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¦æŸåï¼Œå¦‚æœæŸåè¿™ä¸¢å¼ƒã€‚</p><p>æ£€éªŒèŒƒå›´åŒ…æ‹¬é¦–éƒ¨å’Œæ•°æ®ä¸¤éƒ¨åˆ†ï¼Œè¿™ä¹Ÿæ˜¯ TCP å¯é ä¼ è¾“çš„ä¸€ä¸ªé‡è¦ä¿éšœã€‚</p><h3 id="ç´§æ€¥æŒ‡é’ˆ-Urgent-Pointer"><a href="#ç´§æ€¥æŒ‡é’ˆ-Urgent-Pointer" class="headerlink" title="ç´§æ€¥æŒ‡é’ˆ Urgent Pointer"></a>ç´§æ€¥æŒ‡é’ˆ Urgent Pointer</h3><p>å  2 ä¸ªå­—èŠ‚ã€‚ ä»…åœ¨ URG = 1 æ—¶æ‰æœ‰æ„ä¹‰ï¼Œå®ƒæŒ‡å‡ºæœ¬æŠ¥æ–‡æ®µä¸­çš„ç´§æ€¥æ•°æ®çš„å­—èŠ‚æ•°ã€‚ å½“ URG = 1 æ—¶ï¼Œå‘é€æ–¹ TCP å°±æŠŠç´§æ€¥æ•°æ®æ’å…¥åˆ°æœ¬æŠ¥æ–‡æ®µæ•°æ®çš„æœ€å‰é¢ï¼Œè€Œåœ¨ç´§æ€¥æ•°æ®åé¢çš„æ•°æ®ä»æ˜¯æ™®é€šæ•°æ®ã€‚</p><p>å› æ­¤ï¼Œç´§æ€¥æŒ‡é’ˆæŒ‡å‡ºäº†ç´§æ€¥æ•°æ®çš„æœ«å°¾åœ¨æŠ¥æ–‡æ®µä¸­çš„ä½ç½®ã€‚</p><h3 id="é€‰é¡¹"><a href="#é€‰é¡¹" class="headerlink" title="é€‰é¡¹"></a>é€‰é¡¹</h3><image src="https://oscimg.oschina.net/oscnet/up-e071765090a2bbf6a9944907b288c70cd4a.png" width="400"><ul><li>æ¯ä¸ªé€‰é¡¹å¼€å§‹æ˜¯1å­—èŠ‚kindå­—æ®µï¼Œè¯´æ˜é€‰é¡¹çš„ç±»å‹</li><li>kindä¸º0å’Œ1çš„é€‰é¡¹ï¼Œåªå ä¸€ä¸ªå­—èŠ‚</li><li>å…¶ä»–kindåæœ‰ä¸€å­—èŠ‚lenï¼Œè¡¨ç¤ºè¯¥é€‰é¡¹æ€»é•¿åº¦ï¼ˆåŒ…æ‹¬kindå’Œlenï¼‰</li><li>kindä¸º11ï¼Œ12ï¼Œ13è¡¨ç¤ºtcpäº‹åŠ¡</li></ul><p><strong>ä¸‹é¢æ˜¯å¸¸ç”¨é€‰é¡¹ï¼š</strong><br><image src="https://oscimg.oschina.net/oscnet/up-1043e2bd27321e5ae0bc13be398e989be3e.png" width=800 height=300></p><h3 id="MTUï¼ˆæœ€å¤§ä¼ è¾“å•å…ƒï¼‰"><a href="#MTUï¼ˆæœ€å¤§ä¼ è¾“å•å…ƒï¼‰" class="headerlink" title="MTUï¼ˆæœ€å¤§ä¼ è¾“å•å…ƒï¼‰"></a>MTUï¼ˆæœ€å¤§ä¼ è¾“å•å…ƒï¼‰</h3><p>MTUï¼ˆæœ€å¤§ä¼ è¾“å•å…ƒï¼‰æ˜¯ã€é“¾è·¯å±‚ã€‘ä¸­çš„ç½‘ç»œå¯¹æ•°æ®å¸§çš„ä¸€ä¸ªé™åˆ¶ï¼Œä»¥ä»¥å¤ªç½‘ä¸ºä¾‹ï¼ŒMTU ä¸º 1500 ä¸ªå­—èŠ‚ã€‚ä¸€ä¸ªIP æ•°æ®æŠ¥åœ¨ä»¥å¤ªç½‘ä¸­ä¼ è¾“ï¼Œå¦‚æœå®ƒçš„é•¿åº¦å¤§äºè¯¥ MTU å€¼ï¼Œå°±è¦è¿›è¡Œåˆ†ç‰‡ä¼ è¾“ï¼Œä½¿å¾—æ¯ç‰‡æ•°æ®æŠ¥çš„é•¿åº¦å°äºMTUã€‚åˆ†ç‰‡ä¼ è¾“çš„ IP æ•°æ®æŠ¥ä¸ä¸€å®šæŒ‰åºåˆ°è¾¾ï¼Œä½† IP é¦–éƒ¨ä¸­çš„ä¿¡æ¯èƒ½è®©è¿™äº›æ•°æ®æŠ¥ç‰‡æŒ‰åºç»„è£…ã€‚IP æ•°æ®æŠ¥çš„åˆ†ç‰‡ä¸é‡ç»„æ˜¯åœ¨ç½‘ç»œå±‚è¿›å®Œæˆçš„ã€‚</p><h3 id="MSS-ï¼ˆæœ€å¤§åˆ†æ®µå¤§å°ï¼‰"><a href="#MSS-ï¼ˆæœ€å¤§åˆ†æ®µå¤§å°ï¼‰" class="headerlink" title="MSS ï¼ˆæœ€å¤§åˆ†æ®µå¤§å°ï¼‰"></a>MSS ï¼ˆæœ€å¤§åˆ†æ®µå¤§å°ï¼‰</h3><p>MSS æ˜¯ TCP é‡Œçš„ä¸€ä¸ªæ¦‚å¿µï¼ˆé¦–éƒ¨çš„é€‰é¡¹å­—æ®µä¸­ï¼‰ã€‚MSS æ˜¯ TCP æ•°æ®åŒ…æ¯æ¬¡èƒ½å¤Ÿä¼ è¾“çš„æœ€å¤§æ•°æ®åˆ†æ®µï¼ŒTCP æŠ¥æ–‡æ®µçš„é•¿åº¦å¤§äº MSS æ—¶ï¼Œè¦è¿›è¡Œåˆ†æ®µä¼ è¾“ã€‚TCP åè®®åœ¨å»ºç«‹è¿æ¥çš„æ—¶å€™é€šå¸¸è¦åå•†åŒæ–¹çš„ MSS å€¼ï¼Œæ¯ä¸€æ–¹éƒ½æœ‰ç”¨äºé€šå‘Šå®ƒæœŸæœ›æ¥æ”¶çš„ MSS é€‰é¡¹ï¼ˆMSS é€‰é¡¹åªå‡ºç°åœ¨ SYN æŠ¥æ–‡æ®µä¸­ï¼Œå³ TCP ä¸‰æ¬¡æ¡æ‰‹çš„å‰ä¸¤æ¬¡ï¼‰ã€‚MSS çš„å€¼ä¸€èˆ¬ä¸º MTU å€¼å‡å»ä¸¤ä¸ªé¦–éƒ¨å¤§å°ï¼ˆéœ€è¦å‡å» IP æ•°æ®åŒ…åŒ…å¤´çš„å¤§å° 20Bytes å’Œ TCP æ•°æ®æ®µçš„åŒ…å¤´ 20Bytesï¼‰æ‰€ä»¥å¦‚æœç”¨é“¾è·¯å±‚ä»¥å¤ªç½‘ï¼ŒMSS çš„å€¼å¾€å¾€ä¸º 1460ã€‚è€Œ Internet ä¸Šæ ‡å‡†çš„ MTU ä¸º 576ï¼Œé‚£ä¹ˆå¦‚æœä¸è®¾ç½®ï¼Œåˆ™MSSçš„é»˜è®¤å€¼å°±ä¸º 536 ä¸ªå­—èŠ‚ã€‚TCPæŠ¥æ–‡æ®µçš„åˆ†æ®µä¸é‡ç»„æ˜¯åœ¨è¿è¾“å±‚å®Œæˆçš„ã€‚</p><h2 id="seqå’Œackçš„è®¡ç®—é€»è¾‘"><a href="#seqå’Œackçš„è®¡ç®—é€»è¾‘" class="headerlink" title="seqå’Œackçš„è®¡ç®—é€»è¾‘"></a>seqå’Œackçš„è®¡ç®—é€»è¾‘</h2><image src="https://oscimg.oschina.net/oscnet/up-710a22f4e6b6c961662879fe2ac6000cca9.png" width=900 height=500> <h2 id="CRCæ ¡éªŒ"><a href="#CRCæ ¡éªŒ" class="headerlink" title="CRCæ ¡éªŒ"></a>CRCæ ¡éªŒ</h2><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a href="https://www.jianshu.com/p/15754b4e9458">TCPåè®®ä¸­çš„seq/ackåºå·æ˜¯å¦‚ä½•å˜åŒ–çš„ï¼Ÿ</a><br><a href="https://www.jianshu.com/p/ef892323e68f">TCPåè®®è¯¦è§£</a><br><a href="https://blog.csdn.net/baidu_17611285/article/details/80171239">TCPåè®®è¯¦è§£ï¼ˆä¸€ï¼‰ï¼šTCPå¤´éƒ¨ç»“æ„</a><br><a href="https://blog.csdn.net/zuochao_2013/article/details/80561793">TCPå’ŒUDPæŠ¥æ–‡å¤´æ ¼å¼</a><br><a href="https://juejin.cn/post/6844903685563105293">TCPåè®®è¯¦è§£</a><br><a href="https://juejin.cn/post/6844904131342123022">åƒé€TCPåè®®</a>  </p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;å¸¦ç€é—®é¢˜å­¦ä¹ &quot;&gt;&lt;a href=&quot;#å¸¦ç€é—®é¢˜å­¦ä¹ &quot; class=&quot;headerlink&quot; title=&quot;å¸¦ç€é—®é¢˜å­¦ä¹ &quot;&gt;&lt;/a&gt;å¸¦ç€é—®é¢˜å­¦ä¹ &lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;å¦‚ä½•æ ¡éªŒæŠ¥æ–‡æ®µæ˜¯å¦æŸåï¼Ÿ å¦‚ä½•CRCæ ¡éªŒ&lt;/li&gt;
&lt;li&gt;seqå’Œackæ˜¯å¦‚ä½•è®¡ç®—çš„ï¼Ÿ &lt;/l</summary>
      
    
    
    
    <category term="Computer Network" scheme="http://example.com/categories/Computer-Network/"/>
    
    <category term="TCP" scheme="http://example.com/categories/Computer-Network/TCP/"/>
    
    
    <category term="TCP" scheme="http://example.com/tags/TCP/"/>
    
  </entry>
  
  <entry>
    <title>TCPåè®®</title>
    <link href="http://example.com/wiki/TCP%E5%8D%8F%E8%AE%AE/"/>
    <id>http://example.com/wiki/TCP%E5%8D%8F%E8%AE%AE/</id>
    <published>2021-07-04T08:30:55.000Z</published>
    <updated>2021-07-04T08:47:45.892Z</updated>
    
    <content type="html"><![CDATA[<h2 id="TCPåè®®å­¦ä¹ ç¬”è®°ğŸ“’"><a href="#TCPåè®®å­¦ä¹ ç¬”è®°ğŸ“’" class="headerlink" title="TCPåè®®å­¦ä¹ ç¬”è®°ğŸ“’"></a>TCPåè®®å­¦ä¹ ç¬”è®°ğŸ“’</h2><blockquote><p>w ä¸‹é¢æ˜¯æœ¬äººåœ¨å­¦ä¹ TCPåè®®çš„è¿‡ç¨‹ä¸­ï¼Œè®°å½•çš„ç¬”è®°ï¼ŒæŒ‰ç…§å­¦ä¹ çš„è¿‡ç¨‹ä»å‰åˆ°åæ•´ç†åœ¨è¿™é‡Œï¼<br>å¯èƒ½ä¼šæœ‰å¾ˆå¤šçš„çŸ¥è¯†æ²¡æœ‰ç½—åˆ—ï¼Œåªæ˜¯è®°å½•çš„å¤§æ¦‚æ¡†æ¶ï¼Œå¦‚æœæœ‰é—®é¢˜æˆ–é”™è¯¯ï¼Œæ¬¢è¿æŒ‡æ­£ï¼</p></blockquote><blockquote><p><a href="doc:RGuKLdsI">1ã€TCPæŠ¥æ–‡å¤´éƒ¨</a><br><a href="doc:OMRc4svF">2ã€TCPä¸‰æ¬¡æ¡æ‰‹</a><br><a href="doc:MpizaHTg">3ã€TCPæœ€å¤§æŠ¥æ–‡æ®µï¼ˆMSSï¼‰</a><br><a href="doc:ELxUb4mv">4ã€TCPè¶…æ—¶ä¸é‡ä¼ </a><br><a href="doc:wqRVLcNo">5ã€RTOé‡ä¼ è®¡æ—¶å™¨çš„è®¡ç®—</a><br><a href="doc:IhqiYamL">6ã€æ»‘åŠ¨çª—å£</a><br><a href="doc:HoE3w3UG">7ã€æå‡ç½‘ç»œæ•ˆç‡</a><br><a href="doc:N7riiaCk">8ã€TCPæ‹¥å¡æ§åˆ¶ä¹‹æ…¢å¯åŠ¨</a><br><a href="doc:GQoRKrER">9ã€TCPæ‹¥å¡æ§åˆ¶ä¹‹æ‹¥å¡é¿å…</a><br><a href="doc:y4aESoPN">10ã€å¿«é€Ÿé‡ä¼ ä¸å¿«é€Ÿæ¢å¤</a><br><a href="doc:g1Onj7OR">11ã€å››æ¬¡æŒ¥æ‰‹</a></p></blockquote><h2 id="å­¦ä¹ èµ„æ–™"><a href="#å­¦ä¹ èµ„æ–™" class="headerlink" title="å­¦ä¹ èµ„æ–™"></a>å­¦ä¹ èµ„æ–™</h2><blockquote><p>i æ•–ä¸™Githubæ•´ç†çš„ç¬”è®° </p></blockquote><p>æœ‰å¤§æ¦‚10ç¯‡å·¦å³çš„æ–‡ç« ï¼Œéƒ½æ˜¯é«˜è´¨é‡çš„ï¼ŒåŸåœ°å€è¯·ç‚¹å‡»ç€ğŸ‘‰ <a href="https://github.com/AobingJava/JavaFamily">ã€Githubã€‘</a></p><blockquote><p>i æå®¢æ—¶é—´ã€ŠWebåè®®è¯¦è§£ä¸æŠ“åŒ…å®æˆ˜ã€‹â€“ é™¶è¾‰è€å¸ˆ</p></blockquote><p>è¿™é—¨è¯¾ç¨‹ä¸“é—¨è®²è§£ç½‘ç»œåè®®çš„ï¼ŒåŒ…æ‹¬Http/Https,TLSåè®®ï¼ŒTCPåè®®ï¼ŒIPåè®®ç­‰ï¼›</p><blockquote><p>i ã€Šè®¡ç®—æœºç½‘ç»œ è‡ªé¡¶å‘ä¸‹æ–¹æ³•ã€‹ç¬¬7ç‰ˆ</p></blockquote><p>å¾ˆå¤šåæ ¡è®¡ç®—æœºç½‘ç»œè¯¾ç¨‹åœ¨ä½¿ç”¨çš„æ•™æï¼Œéå¸¸æƒå¨ï¼</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;TCPåè®®å­¦ä¹ ç¬”è®°ğŸ“’&quot;&gt;&lt;a href=&quot;#TCPåè®®å­¦ä¹ ç¬”è®°ğŸ“’&quot; class=&quot;headerlink&quot; title=&quot;TCPåè®®å­¦ä¹ ç¬”è®°ğŸ“’&quot;&gt;&lt;/a&gt;TCPåè®®å­¦ä¹ ç¬”è®°ğŸ“’&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;w ä¸‹é¢æ˜¯æœ¬äººåœ¨å­¦ä¹ TCPåè®®çš„è¿‡ç¨‹ä¸­ï¼Œè®°</summary>
      
    
    
    
    <category term="Computer Network" scheme="http://example.com/categories/Computer-Network/"/>
    
    <category term="TCP" scheme="http://example.com/categories/Computer-Network/TCP/"/>
    
    
    <category term="TCP" scheme="http://example.com/tags/TCP/"/>
    
  </entry>
  
  <entry>
    <title>Welcome to GeekIBLi</title>
    <link href="http://example.com/wiki/index/"/>
    <id>http://example.com/wiki/index/</id>
    <published>2021-07-04T07:44:33.000Z</published>
    <updated>2021-07-04T08:22:05.574Z</updated>
    
    <content type="html"><![CDATA[<p>I am geekibli;  </p><p>I come from HBU.  I like code.   ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;I am geekibli;  &lt;/p&gt;
&lt;p&gt;I come from HBU.  I like code.   ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„&lt;/p&gt;
</summary>
      
    
    
    
    <category term="Overview" scheme="http://example.com/categories/Overview/"/>
    
    
  </entry>
  
</feed>
