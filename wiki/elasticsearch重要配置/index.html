<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <meta name="description" content="geolei blog">
  <meta name="keyword" content="hexo-theme">
  
    <link rel="shortcut icon" href="/css/images/logo.png">
  
  <title>
    
      elasticsearché‡è¦é…ç½® | GeekIBLi
    
  </title>
  <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.css" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/tomorrow.min.css" rel="stylesheet">
  
<link rel="stylesheet" href="/css/style.css">

  
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/geopattern/1.2.3/js/geopattern.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.js"></script>
  
  
  
  
    <!-- MathJax support START -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <!-- MathJax support END -->
  


  
  
    
<script src="/js/local-search.js"></script>


<meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="GeekIBLi" type="application/atom+xml">
</head>
<div class="wechat-share">
  <img src="/css/images/logo.png" />
</div>
  <body>
    <header class="header fixed-header">
  <div class="header-container">
    <a class="home-link" href="/">
      <div class="logo"></div>
      <span>GeekIBLi</span>
    </a>
    <ul class="right-list">
      
        <li class="list-item">
          
            <a href="/" class="item-link">Home</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/tags/" class="item-link">Tags</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/archives/" class="item-link">Archives</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/about/" class="item-link">About</a>
          
        </li>
      
      
        <li class="menu-item menu-item-search right-list">
    <a role="button" class="popup-trigger">
        <i class="fa fa-search fa-fw"></i>
    </a>
</li>
      
    </ul>
    <div class="menu">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </div>
    <div class="menu-mask">
      <ul class="menu-list">
        
          <li class="menu-item">
            
              <a href="/" class="menu-link">Home</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/tags/" class="menu-link">Tags</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/archives/" class="menu-link">Archives</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/about/" class="menu-link">About</a>
            
          </li>
        
      </ul>
    </div>
    
      <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
            <span class="search-icon">
                <i class="fa fa-search"></i>
            </span>
            <div class="search-input-container">
                <input autocomplete="off" autocapitalize="off"
                    placeholder="Please enter your keyword(s) to search." spellcheck="false"
                    type="search" class="search-input">
            </div>
            <span class="popup-btn-close">
                <i class="fa fa-times-circle"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>
    
  </div>
</header>

    <div id="article-banner">
  <h2>elasticsearché‡è¦é…ç½®</h2>
  <p class="post-date">2021-07-05</p>
  <div class="arrow-down">
    <a href="javascript:;"></a>
  </div>
</div>
<main class="app-body flex-box">
  <!-- Article START -->
  <article class="post-article">
    <section class="markdown-content"><p>è™½ç„¶Elasticsearchä»…éœ€è¦å¾ˆå°‘çš„é…ç½®ï¼Œä½†æœ‰è®¸å¤šè®¾ç½®éœ€è¦æ‰‹åŠ¨é…ç½®ï¼Œå¹¶ä¸”åœ¨è¿›å…¥ç”Ÿäº§ä¹‹å‰ç»å¯¹å¿…é¡»è¿›è¡Œé…ç½®ã€‚</p>
<p><code>path.data</code> å’Œ <code>path.logs</code><br><code>cluster.name</code><br><code>node.name</code><br><code>bootstrap.memory_lock</code><br><code>network.host</code><br><code>discovery.zen.ping.unicast.hosts</code><br><code>discovery.zen.minimum_master_nodes</code><br><code>path.data</code> å’Œ <code>path.logs</code><br>å¦‚æœä½¿ç”¨.zipæˆ–.tar.gzå½’æ¡£ï¼Œåˆ™æ•°æ®å’Œæ—¥å¿—ç›®å½•æ˜¯$ES_HOMEçš„å­æ–‡ä»¶å¤¹ã€‚ å¦‚æœè¿™äº›é‡è¦çš„æ–‡ä»¶å¤¹ä¿ç•™åœ¨å…¶é»˜è®¤ä½ç½®ï¼Œåˆ™å­˜åœ¨å°†Elasticsearchå‡çº§åˆ°æ–°ç‰ˆæœ¬æ—¶è¢«åˆ é™¤çš„é«˜é£é™©ã€‚  </p>
<p>åœ¨ç”Ÿäº§ä½¿ç”¨ä¸­ï¼Œè‚¯å®šå¾—æ›´æ”¹æ•°æ®å’Œæ—¥å¿—æ–‡ä»¶å¤¹çš„ä½ç½®ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">path:</span></span><br><span class="line">  <span class="attr">logs:</span> <span class="string">/var/log/elasticsearch</span></span><br><span class="line">  <span class="attr">data:</span> <span class="string">/var/data/elasticsearch</span></span><br></pre></td></tr></table></figure>
<p>RPMå’ŒDebianå‘è¡Œç‰ˆå·²ç»ä½¿ç”¨æ•°æ®å’Œæ—¥å¿—çš„è‡ªå®šä¹‰è·¯å¾„ã€‚  </p>
<p><code>path.data</code> è®¾ç½®å¯ä»¥è®¾ç½®ä¸ºå¤šä¸ªè·¯å¾„ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‰€æœ‰è·¯å¾„å°†ç”¨äºå­˜å‚¨æ•°æ®ï¼ˆå±äºå•ä¸ªåˆ†ç‰‡çš„æ–‡ä»¶å°†å…¨éƒ¨å­˜å‚¨åœ¨åŒä¸€æ•°æ®è·¯å¾„ä¸Šï¼‰ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">path:</span></span><br><span class="line">  <span class="attr">data:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">/mnt/elasticsearch_1</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">/mnt/elasticsearch_2</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">/mnt/elasticsearch_3</span></span><br></pre></td></tr></table></figure>
<h2 id="cluster-name"><a href="#cluster-name" class="headerlink" title="cluster.name"></a>cluster.name</h2><p>èŠ‚ç‚¹åªèƒ½åœ¨ç¾¤é›†ä¸ç¾¤é›†ä¸­çš„æ‰€æœ‰å…¶ä»–èŠ‚ç‚¹å…±äº«å…¶cluster.nameæ—¶æ‰èƒ½åŠ å…¥ç¾¤é›†ã€‚ é»˜è®¤åç§°ä¸ºelasticsearchï¼Œä½†æ‚¨åº”å°†å…¶æ›´æ”¹ä¸ºæè¿°é›†ç¾¤ç”¨é€”çš„é€‚å½“åç§°ã€‚<br><code>cluster.name: logging-prod</code><br>ç¡®ä¿ä¸è¦åœ¨ä¸åŒçš„ç¯å¢ƒä¸­é‡å¤ä½¿ç”¨ç›¸åŒçš„é›†ç¾¤åç§°ï¼Œå¦åˆ™å¯èƒ½ä¼šå¯¼è‡´åŠ å…¥é”™è¯¯é›†ç¾¤çš„èŠ‚ç‚¹ã€‚  </p>
<h2 id="node-name"><a href="#node-name" class="headerlink" title="node.name"></a>node.name</h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒElasticsearchå°†ä½¿ç”¨éšæœºç”Ÿæˆçš„uuidçš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä½œä¸ºèŠ‚ç‚¹idã€‚ è¯·æ³¨æ„ï¼ŒèŠ‚ç‚¹IDæ˜¯æŒä¹…åŒ–çš„ï¼Œå¹¶ä¸”åœ¨èŠ‚ç‚¹é‡æ–°å¯åŠ¨æ—¶ä¸ä¼šæ›´æ”¹ï¼Œå› æ­¤é»˜è®¤èŠ‚ç‚¹åç§°ä¹Ÿä¸ä¼šæ›´æ”¹ã€‚<br>é…ç½®ä¸€ä¸ªæ›´æœ‰æ„ä¹‰çš„åç§°æ˜¯å€¼å¾—çš„ï¼Œè¿™æ˜¯é‡å¯èŠ‚ç‚¹åä¹Ÿèƒ½ä¸€ç›´ä¿æŒçš„ä¼˜åŠ¿ï¼š<br><code>node.name: prod-data-2</code><br>node.nameä¹Ÿå¯ä»¥è®¾ç½®ä¸ºæœåŠ¡å™¨çš„HOSTNAMEï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š  </p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">node.name:</span> <span class="string">$&#123;HOSTNAME&#125;</span></span><br><span class="line"><span class="string">bootstrap.memory_lock</span></span><br></pre></td></tr></table></figure>
<p>æ²¡æœ‰JVMè¢«äº¤æ¢åˆ°ç£ç›˜ä¸Šè¿™äº‹å¯¹äºèŠ‚ç‚¹çš„å¥åº·æ¥è¯´æ˜¯è‡³å…³é‡è¦çš„ã€‚ä¸€ç§å®ç°æ–¹æ³•æ˜¯å°†bootstrap.memory_lockè®¾ç½®ä¸ºtrueã€‚<br>è¦ä½¿æ­¤è®¾ç½®ç”Ÿæ•ˆï¼Œéœ€è¦é¦–å…ˆé…ç½®å…¶ä»–ç³»ç»Ÿè®¾ç½®ã€‚ æœ‰å…³å¦‚ä½•æ­£ç¡®è®¾ç½®å†…å­˜é”å®šçš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…å¯ç”¨<a target="_blank" rel="noopener" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/setup-configuration-memory.html#mlockall">bootstrap.memory_lock</a>ã€‚  </p>
<h2 id="network-host"><a href="#network-host" class="headerlink" title="network.host"></a>network.host</h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒElasticsearchä»…ä»…ç»‘å®šåœ¨æœ¬åœ°å›è·¯åœ°å€â€”â€”å¦‚ï¼š127.0.0.1ä¸[::1]ã€‚è¿™åœ¨ä¸€å°æœåŠ¡å™¨ä¸Šè·‘ä¸€ä¸ªå¼€å‘èŠ‚ç‚¹æ˜¯è¶³å¤Ÿçš„ã€‚<br>æç¤º</p>
<p>äº‹å®ä¸Šï¼Œå¤šä¸ªèŠ‚ç‚¹å¯ä»¥åœ¨å•ä¸ªèŠ‚ç‚¹ä¸Šç›¸åŒçš„$ES_HOMEä½ç½®ä¸€åŒè¿è¡Œã€‚è¿™å¯ä»¥ç”¨äºæµ‹è¯•Elasticsearchå½¢æˆé›†ç¾¤çš„èƒ½åŠ›,ä½†è¿™ç§é…ç½®æ–¹å¼ä¸æ¨èç”¨äºç”Ÿäº§ç¯å¢ƒã€‚</p>
<p>ä¸ºäº†å°†å…¶å®ƒæœåŠ¡å™¨ä¸Šçš„èŠ‚ç‚¹å½¢æˆä¸€ä¸ªå¯ä»¥ç›¸äº’é€šè®¯çš„é›†ç¾¤ï¼Œä½ çš„èŠ‚ç‚¹å°†ä¸èƒ½ç»‘å®šåœ¨ä¸€ä¸ªå›è·¯åœ°å€ä¸Šã€‚ è¿™é‡Œæœ‰æ›´å¤šçš„ç½‘è·¯é…ç½®ï¼Œé€šå¸¸ä½ åªéœ€è¦é…ç½®network.hostï¼š<br><code>network.host: 192.168.1.10</code><br>network.hostä¹Ÿå¯ä»¥é…ç½®æˆä¸€äº›èƒ½è¯†åˆ«çš„ç‰¹æ®Šçš„å€¼ï¼Œè­¬å¦‚ï¼š_local_ã€_siteã€_global_ï¼Œå®ƒä»¬å¯ä»¥ç»“åˆæŒ‡å®š:ip4ä¸ip6æ¥ä½¿ç”¨ã€‚æ›´å¤šç›¸ä¿¡ä¿¡æ¯è¯·å‚è§ï¼š<a target="_blank" rel="noopener" href="https://aqlu.gitbooks.io/elasticsearch-reference/content/Modules/Network_Settings.html">ç½‘è·¯é…ç½®</a></p>
<p>é‡è¦ ğŸ‘‡</p>
<p>ä¸€æ—¦ä½ è‡ªå®šä¹‰äº†network.hostçš„é…ç½®ï¼ŒElasticsearchå°†å‡è®¾ä½ å·²ç»ä»å¼€å‘æ¨¡å¼è½¬åˆ°äº†ç”Ÿäº§æ¨¡å¼ï¼Œå¹¶å°†å‡çº§ç³»ç»Ÿæ£€æµ‹çš„è­¦å‘Šä¿¡æ¯ä¸ºå¼‚å¸¸ä¿¡æ¯ã€‚æ›´å¤šä¿¡æ¯è¯·å‚è§ï¼šå¼€å‘æ¨¡å¼vsç”Ÿäº§æ¨¡å¼</p>
<h2 id="discovery-zen-ping-unicast-hostsï¼ˆå•æ’­å‘ç°ï¼‰"><a href="#discovery-zen-ping-unicast-hostsï¼ˆå•æ’­å‘ç°ï¼‰" class="headerlink" title="discovery.zen.ping.unicast.hostsï¼ˆå•æ’­å‘ç°ï¼‰"></a>discovery.zen.ping.unicast.hostsï¼ˆå•æ’­å‘ç°ï¼‰</h2><p>å¼€ç®±å³ç”¨ï¼Œæ— éœ€ä»»ä½•ç½‘ç»œé…ç½®ï¼ŒElasticsearchå°†ç»‘å®šåˆ°å¯ç”¨çš„å›è·¯åœ°å€ï¼Œå¹¶æ‰«æ9300å¹´åˆ°9305çš„ç«¯å£å»è¿æ¥åŒä¸€æœºå™¨ä¸Šçš„å…¶ä»–èŠ‚ç‚¹,è¯•å›¾è¿æ¥åˆ°ç›¸åŒçš„æœåŠ¡å™¨ä¸Šè¿è¡Œçš„å…¶ä»–èŠ‚ç‚¹ã€‚å®ƒæä¾›äº†ä¸éœ€è¦ä»»ä½•é…ç½®å°±èƒ½è‡ªåŠ¨ç»„å»ºé›†ç¾¤çš„ä½“éªŒã€‚<br>å½“ä¸å…¶å®ƒæœºå™¨ä¸Šçš„èŠ‚ç‚¹è¦å½¢æˆä¸€ä¸ªé›†ç¾¤æ—¶ï¼Œä½ éœ€è¦æä¾›ä¸€ä¸ªåœ¨çº¿ä¸”å¯è®¿é—®çš„èŠ‚ç‚¹åˆ—è¡¨ã€‚åƒå¦‚ä¸‹æ¥é…ç½®ï¼š  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">discovery.zen.ping.unicast.hosts:</span><br><span class="line">   - 192.168.1.10:9300</span><br><span class="line">   - 192.168.1.11 #â‘ </span><br><span class="line">   - seeds.mydomain.com #â‘¡</span><br></pre></td></tr></table></figure>
<p>â‘  æœªæŒ‡å®šç«¯å£æ—¶ï¼Œå°†ä½¿ç”¨é»˜è®¤çš„<code>transport.profiles.default.port</code>å€¼ï¼Œå¦‚æœæ­¤å€¼ä¹Ÿä¸ºè®¾ç½®åˆ™ä½¿ç”¨<code>transport.tcp.port</code></p>
<p>â‘¡ ä¸»æœºåå°†è¢«å°è¯•è§£ææˆèƒ½è§£æçš„å¤šä¸ªIP</p>
<h2 id="discovery-zen-minimum-master-nodes"><a href="#discovery-zen-minimum-master-nodes" class="headerlink" title="discovery.zen.minimum_master_nodes"></a>discovery.zen.minimum_master_nodes</h2><p>ä¸ºé˜²æ­¢æ•°æ®ä¸¢å¤±ï¼Œé…ç½®discovery-zen-minimum_master_nodeså°†éå¸¸é‡è¦ï¼Œä»–è§„å®šäº†å¿…é¡»è‡³å°‘è¦æœ‰å¤šå°‘ä¸ªmasterèŠ‚ç‚¹æ‰èƒ½å½¢æˆä¸€ä¸ªé›†ç¾¤ã€‚<br>æ²¡æœ‰æ­¤è®¾ç½®æ—¶ï¼Œä¸€ä¸ªé›†ç¾¤åœ¨å‘ç”Ÿç½‘ç»œé—®é¢˜æ˜¯å¯èƒ½ä¼šåˆ†è£‚æˆå¤šä¸ªé›†ç¾¤â€”â€”è„‘è£‚â€”â€”è¿™å°†å¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚æ›´å¤šè¯¦ç»†ä¿¡æ¯è¯·å‚è§ï¼šé€šè¿‡minimum_master_nodesé¿å…è„‘è£‚<br>ä¸ºé¿å…è„‘è£‚ï¼Œä½ éœ€è¦æ ¹æ®masterèŠ‚ç‚¹æ•°æ¥è®¾ç½®æ³•å®šäººæ•°ï¼š<br><code>(master_eligible_nodes / 2) + 1</code><br>æ¢å¥è¯è¯´ï¼Œå¦‚æœä½ æœ‰ä¸‰ä¸ªmasterèŠ‚ç‚¹ï¼Œæœ€å°çš„ä¸»èŠ‚ç‚¹æ•°å› è¢«è®¾ç½®ä¸º(3/2)+1æˆ–è€…æ˜¯2<br><code>discovery.zen.minimum_master_nodes: 2</code></p>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><blockquote>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/setup-configuration-memory.html#mlockall">elastic å®˜æ–¹æ–‡æ¡£</a></li>
<li><a target="_blank" rel="noopener" href="https://www.codingdict.com/document">codingdict.com</a></li>
</ul>
</blockquote>
</section>
    <!-- Tags START -->
    
      <div class="tags">
        <span>Tags:</span>
        
  <a href="/tags#elasticsearch" >
    <span class="tag-code">elasticsearch</span>
  </a>

      </div>
    
    <!-- Tags END -->
    <!-- NAV START -->
    
  <div class="nav-container">
    <!-- reverse left and right to put prev and next in a more logic postition -->
    
      <a class="nav-left" href="/wiki/elasticsearch%E6%93%8D%E4%BD%9C%E7%B4%A2%E5%BC%95/">
        <span class="nav-arrow">â† </span>
        
          elasticsearchæ“ä½œç´¢å¼•
        
      </a>
    
    
      <a class="nav-right" href="/wiki/%E5%A4%9A%E7%B4%A2%E5%BC%95%E5%A4%9A%E7%B1%BB%E5%9E%8B%E6%90%9C%E7%B4%A2/">
        
          å¤šç´¢å¼•å¤šç±»å‹æœç´¢
        
        <span class="nav-arrow"> â†’</span>
      </a>
    
  </div>

    <!-- NAV END -->
    <!-- æ‰“èµ START -->
    
    <!-- æ‰“èµ END -->
    <!-- äºŒç»´ç  START -->
    
    <!-- äºŒç»´ç  END -->
    
      <!-- Utterances START -->
      <div id="utterances"></div>
      <script src="https://utteranc.es/client.js"
        repo=""
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async></script>    
      <!-- Utterances END -->
    
  </article>
  <!-- Article END -->
  <!-- Catalog START -->
  
    <aside class="catalog-container">
  <div class="toc-main">
    <strong class="toc-title">Catalog</strong>
    
      <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#cluster-name"><span class="toc-nav-text">cluster.name</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#node-name"><span class="toc-nav-text">node.name</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#network-host"><span class="toc-nav-text">network.host</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#discovery-zen-ping-unicast-hosts%EF%BC%88%E5%8D%95%E6%92%AD%E5%8F%91%E7%8E%B0%EF%BC%89"><span class="toc-nav-text">discovery.zen.ping.unicast.hostsï¼ˆå•æ’­å‘ç°ï¼‰</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#discovery-zen-minimum-master-nodes"><span class="toc-nav-text">discovery.zen.minimum_master_nodes</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-nav-text">å‚è€ƒèµ„æ–™</span></a></li></ol>
    
  </div>
</aside>
  
  <!-- Catalog END -->
</main>

<script>
  (function () {
    var url = 'http://example.com/wiki/elasticsearché‡è¦é…ç½®/';
    var banner = ''
    if (banner !== '' && banner !== 'undefined' && banner !== 'null') {
      $('#article-banner').css({
        'background-image': 'url(' + banner + ')'
      })
    } else {
      $('#article-banner').geopattern(url)
    }
    $('.header').removeClass('fixed-header')

    // error image
    $(".markdown-content img").on('error', function() {
      $(this).attr('src', '/css/images/error_icon.png')
      $(this).css({
        'cursor': 'default'
      })
    })

    // zoom image
    $(".markdown-content img").on('click', function() {
      var src = $(this).attr('src')
      if (src !== '/css/images/error_icon.png') {
        var imageW = $(this).width()
        var imageH = $(this).height()

        var zoom = ($(window).width() * 0.95 / imageW).toFixed(2)
        zoom = zoom < 1 ? 1 : zoom
        zoom = zoom > 2 ? 2 : zoom
        var transY = (($(window).height() - imageH) / 2).toFixed(2)

        $('body').append('<div class="image-view-wrap"><div class="image-view-inner"><img src="'+ src +'" /></div></div>')
        $('.image-view-wrap').addClass('wrap-active')
        $('.image-view-wrap img').css({
          'width': `${imageW}`,
          'transform': `translate3d(0, ${transY}px, 0) scale3d(${zoom}, ${zoom}, 1)`
        })
        $('html').css('overflow', 'hidden')

        $('.image-view-wrap').on('click', function() {
          $(this).remove()
          $('html').attr('style', '')
        })
      }
    })
  })();
</script>







    <div class="scroll-top">
  <span class="arrow-icon"></span>
</div>
    <footer class="app-footer">
  <p class="copyright">
    &copy; 2021 | Proudly powered by <a href="https://hexo.io" target="_blank">Hexo</a>
    <br>
    Theme by <a target="_blank" rel="noopener" href="https://github.com/yanm1ng">yanm1ng</a>
  </p>
</footer>

<script>
  function async(u, c) {
    var d = document, t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
    s.parentNode.insertBefore(o, s);
  }
</script>
<script>
  async("//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js", function(){
    FastClick.attach(document.body);
  })
</script>

<script>
  var hasLine = 'true';
  async("//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js", function(){
    $('figure pre').each(function(i, block) {
      var figure = $(this).parents('figure');
      if (hasLine === 'false') {
        figure.find('.gutter').hide();
      }
      hljs.configure({useBR: true});
      var lang = figure.attr('class').split(' ')[1] || 'code';
      var codeHtml = $(this).html();
      var codeTag = document.createElement('code');
      codeTag.className = lang;
      codeTag.innerHTML = codeHtml;
      $(this).attr('class', '').empty().html(codeTag);
      figure.attr('data-lang', lang.toUpperCase());
      hljs.highlightBlock(block);
    });
  })
</script>
<!-- Baidu Tongji -->


<script src="/js/script.js"></script>


  </body>
</html>