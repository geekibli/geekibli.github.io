<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <meta name="description" content="geolei blog">
  <meta name="keyword" content="hexo-theme">
  
    <link rel="shortcut icon" href="/css/images/logo.png">
  
  <title>
    
      æ·±å…¥å­¦ä¹ jvmï¼ˆå›¾çµ-è¯¸è‘›ï¼‰ | GeekIBLi
    
  </title>
  <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.css" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/tomorrow.min.css" rel="stylesheet">
  
<link rel="stylesheet" href="/css/style.css">

  
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/geopattern/1.2.3/js/geopattern.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.js"></script>
  
  
  
  
    <!-- MathJax support START -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <!-- MathJax support END -->
  


  
  
    
<script src="/js/local-search.js"></script>


<meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="GeekIBLi" type="application/atom+xml">
</head>
<div class="wechat-share">
  <img src="/css/images/logo.png" />
</div>
  <body>
    <header class="header fixed-header">
  <div class="header-container">
    <a class="home-link" href="/">
      <div class="logo"></div>
      <span>GeekIBLi</span>
    </a>
    <ul class="right-list">
      
        <li class="list-item">
          
            <a href="/" class="item-link">Home</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/tags/" class="item-link">Tags</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/archives/" class="item-link">Archives</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/about/" class="item-link">About</a>
          
        </li>
      
      
        <li class="menu-item menu-item-search right-list">
    <a role="button" class="popup-trigger">
        <i class="fa fa-search fa-fw"></i>
    </a>
</li>
      
    </ul>
    <div class="menu">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </div>
    <div class="menu-mask">
      <ul class="menu-list">
        
          <li class="menu-item">
            
              <a href="/" class="menu-link">Home</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/tags/" class="menu-link">Tags</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/archives/" class="menu-link">Archives</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/about/" class="menu-link">About</a>
            
          </li>
        
      </ul>
    </div>
    
      <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
            <span class="search-icon">
                <i class="fa fa-search"></i>
            </span>
            <div class="search-input-container">
                <input autocomplete="off" autocapitalize="off"
                    placeholder="Please enter your keyword(s) to search." spellcheck="false"
                    type="search" class="search-input">
            </div>
            <span class="popup-btn-close">
                <i class="fa fa-times-circle"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>
    
  </div>
</header>

    <div id="article-banner">
  <h2>æ·±å…¥å­¦ä¹ jvmï¼ˆå›¾çµ-è¯¸è‘›ï¼‰</h2>
  <p class="post-date">2022-01-13</p>
  <div class="arrow-down">
    <a href="javascript:;"></a>
  </div>
</div>
<main class="app-body flex-box">
  <!-- Article START -->
  <article class="post-article">
    <section class="markdown-content"><h1 id="1-ä»JDKæºç å‰–æç±»åŠ è½½æœºåˆ¶"><a href="#1-ä»JDKæºç å‰–æç±»åŠ è½½æœºåˆ¶" class="headerlink" title="1. ä»JDKæºç å‰–æç±»åŠ è½½æœºåˆ¶"></a>1. ä»JDKæºç å‰–æç±»åŠ è½½æœºåˆ¶</h1><h2 id="1-1-ä¸ºä»€ä¹ˆéœ€è¦ç±»åŠ è½½ï¼Ÿ"><a href="#1-1-ä¸ºä»€ä¹ˆéœ€è¦ç±»åŠ è½½ï¼Ÿ" class="headerlink" title="1.1 ä¸ºä»€ä¹ˆéœ€è¦ç±»åŠ è½½ï¼Ÿ"></a>1.1 ä¸ºä»€ä¹ˆéœ€è¦ç±»åŠ è½½ï¼Ÿ</h2><p>æˆ‘ä»¬ç¼–å†™çš„ç¨‹åºä»£ç éƒ½æ˜¯å­˜æ”¾åœ¨ç£ç›˜ä¸Šé¢çš„ï¼Œåœ¨ç¨‹åºè¿è¡Œæ—¶ï¼Œéœ€è¦æŠŠæˆ‘ä»¬çš„classæ–‡ä»¶åŠ è½½åˆ°å†…å­˜ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆéœ€è¦ç±»åŠ è½½ã€‚</p>
<h2 id="1-2-javaä»£ç åˆ°åº•æ˜¯æ€ä¹ˆè¿è¡Œçš„å‘¢"><a href="#1-2-javaä»£ç åˆ°åº•æ˜¯æ€ä¹ˆè¿è¡Œçš„å‘¢" class="headerlink" title="1.2 javaä»£ç åˆ°åº•æ˜¯æ€ä¹ˆè¿è¡Œçš„å‘¢"></a>1.2 javaä»£ç åˆ°åº•æ˜¯æ€ä¹ˆè¿è¡Œçš„å‘¢</h2><p>ä¸‹é¢æ˜¯ä¸€ä¸ªæ™®é€šçš„ç±»ï¼Œæˆ‘ä»¬å¹³æ—¶éƒ½ä¼šå®šä¹‰çš„ï¼Œé‚£ä¹ˆä»–ä»¬æ˜¯æ€ä¹ˆåŠ è½½çš„å‘¢ï¼Ÿ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Math</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> initData = <span class="number">666</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> User user = <span class="keyword">new</span> User();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compute</span><span class="params">()</span> </span>&#123; <span class="comment">//ä¸€ä¸ªæ–¹æ³•å¯¹åº”ä¸€å—æ ˆå¸§å†…å­˜åŒºåŸŸ</span></span><br><span class="line">        <span class="keyword">int</span> a = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> b = <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">int</span> c = (a + b) * <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">return</span> c;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Math math = <span class="keyword">new</span> Math();</span><br><span class="line">        math.compute();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸‹é¢çœ‹ä¸€ä¸‹è¿™ä¸ªç±»çš„mainæ–¹æ³•æ˜¯å¦‚ä½•è¿è¡Œçš„å§ ğŸ‘‡</p>
<img src="https://oscimg.oschina.net/oscnet/up-10964428d2deadcb19af7dea03f8b40fe4a.png" style="zoom:50%;" />

<ul>
<li>javaç¨‹åºä¼šè°ƒç”¨åº•å±‚çš„jvmç±»åº“æ–‡ä»¶ä¸­çš„å‡½æ•°æ¥åˆ›å»ºjavaè™šæ‹Ÿæœºï¼ˆC++ä¸­å®ç°ï¼‰</li>
<li>jvmå¯åŠ¨ä¹‹ååˆ›å»ºä¸€ä¸ªå¼•å¯¼ç±»åŠ è½½å®ä¾‹ï¼ˆä¹Ÿå°±æ˜¯æˆ‘ä»¬è¯´çš„ç±»åŠ è½½å™¨ä¸­çš„BootstartClassLoaderï¼‰</li>
<li>C++è°ƒç”¨javaä»£ç åˆ›å»ºjvmå¯åŠ¨å™¨ï¼Œ<code>sun.misc.Launcher</code>è¯¥ç±»æ¥åˆ›å»ºå…¶ä»–çš„ç±»åŠ è½½å™¨ï¼ˆExtClassLoader, AppClassLoaderï¼‰</li>
<li>ç±»åŠ è½½å™¨éƒ½åˆ›å»ºå®Œæˆä¹‹åï¼Œè¿™äº›ç±»åŠ è½½å™¨å°±å¯ä»¥åˆ°æŒ‡å®šè·¯å¾„ä¸‹é¢å»åŠ è½½ç±»ä¿¡æ¯äº†ï¼Œè‡³äºåŠ è½½åˆ°å“ªé‡Œï¼ˆæ–¹æ³•åŒºï¼‰åé¢å†è¯´</li>
<li>å½“ç±»åŠ è½½éƒ½å®Œæˆä¹‹åï¼ˆå½“ç„¶è¿™é‡Œè¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„ç»†èŠ‚ï¼‰ï¼Œè°ƒç”¨å¯åŠ¨ç±»çš„mainæ–¹æ³•æ‰§è¡Œjavaç¨‹åº</li>
</ul>
<h2 id="1-3-ç±»åŠ è½½è¿‡ç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#1-3-ç±»åŠ è½½è¿‡ç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="1.3 ç±»åŠ è½½è¿‡ç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ"></a>1.3 ç±»åŠ è½½è¿‡ç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>åŠ è½½ &gt;&gt; éªŒè¯ &gt;&gt; å‡†å¤‡ &gt;&gt; è§£æ &gt;&gt; åˆå§‹åŒ– &gt;&gt; ä½¿ç”¨ &gt;&gt; å¸è½½</p>
<h3 id="1-3-1-ç±»åŠ è½½çš„æµç¨‹å›¾"><a href="#1-3-1-ç±»åŠ è½½çš„æµç¨‹å›¾" class="headerlink" title="1.3.1 ç±»åŠ è½½çš„æµç¨‹å›¾"></a>1.3.1 ç±»åŠ è½½çš„æµç¨‹å›¾</h3><img src="https://oscimg.oschina.net/oscnet/up-e1d5215968dd20b4c65191197b08b8470f9.png" style="zoom:50%;" />

<h3 id="1-3-2-åŠ è½½"><a href="#1-3-2-åŠ è½½" class="headerlink" title="1.3.2 åŠ è½½"></a>1.3.2 åŠ è½½</h3><p>åŠ è½½:åœ¨ç¡¬ç›˜ä¸ŠæŸ¥æ‰¾å¹¶é€šè¿‡IOè¯»å…¥å­—èŠ‚ç æ–‡ä»¶ï¼Œä½¿ç”¨åˆ°ç±»æ—¶æ‰ä¼šåŠ è½½ï¼Œä¾‹å¦‚è°ƒç”¨ç±»çš„ main()æ–¹æ³•ï¼Œnewå¯¹è±¡ç­‰ç­‰ï¼Œåœ¨åŠ è½½é˜¶æ®µä¼šåœ¨å†…å­˜ä¸­ç”Ÿæˆä¸€ä¸ªä»£è¡¨è¿™ä¸ªç±»çš„ java.lang.Classå¯¹è±¡ï¼Œä½œä¸ºæ–¹æ³•åŒºè¿™ä¸ªç±»çš„å„ç§æ•°æ®çš„è®¿é—®å…¥å£ã€‚</p>
<h4 id="1-3-2-1-å¦‚ä½•éªŒè¯ç±»åœ¨ç”¨åˆ°çš„æ—¶å€™æ‰ä¼šåŠ è½½"><a href="#1-3-2-1-å¦‚ä½•éªŒè¯ç±»åœ¨ç”¨åˆ°çš„æ—¶å€™æ‰ä¼šåŠ è½½" class="headerlink" title="1.3.2.1 å¦‚ä½•éªŒè¯ç±»åœ¨ç”¨åˆ°çš„æ—¶å€™æ‰ä¼šåŠ è½½"></a>1.3.2.1 å¦‚ä½•éªŒè¯ç±»åœ¨ç”¨åˆ°çš„æ—¶å€™æ‰ä¼šåŠ è½½</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDynamicLoad</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;*************load TestDynamicLoad************&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> A();</span><br><span class="line">        System.out.println(<span class="string">&quot;*************load test************&quot;</span>);</span><br><span class="line">         B b = <span class="keyword">null</span>; <span class="comment">//Bä¸ä¼šåŠ è½½ï¼Œé™¤éè¿™é‡Œæ‰§è¡Œ new B()</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">        <span class="keyword">static</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;*************load A************&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">A</span> <span class="params">()</span></span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;*************initial A************&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">B</span> </span>&#123;</span><br><span class="line">        <span class="keyword">static</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;*************load B************&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">B</span> <span class="params">()</span></span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;*************initial B************&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">*************load TestDynamicLoad************</span><br><span class="line">*************load A************</span><br><span class="line">*************initial A************</span><br><span class="line">*************load test************</span><br></pre></td></tr></table></figure>

<h3 id="1-3-3-éªŒè¯"><a href="#1-3-3-éªŒè¯" class="headerlink" title="1.3.3 éªŒè¯"></a>1.3.3 éªŒè¯</h3><p>éªŒè¯:æ ¡éªŒå­—èŠ‚ç æ–‡ä»¶çš„æ­£ç¡®æ€§</p>
<h4 id="1-3-3-1-éªŒè¯çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#1-3-3-1-éªŒè¯çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="1.3.3.1 éªŒè¯çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ"></a>1.3.3.1 éªŒè¯çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ</h4><ul>
<li>æ ¡éªŒå­—èŠ‚ç æ ¼å¼ç­‰ä¿¡æ¯æ˜¯å¦æ­£ç¡®ï¼Œæ˜¯å¦ç¬¦åˆå­—èŠ‚ç è§„èŒƒ</li>
<li>ä¿æŠ¤jvm</li>
</ul>
<h3 id="1-3-4-å‡†å¤‡"><a href="#1-3-4-å‡†å¤‡" class="headerlink" title="1.3.4 å‡†å¤‡"></a>1.3.4 å‡†å¤‡</h3><p>ç»™ç±»çš„é™æ€å˜é‡åˆ†é…å†…å­˜ï¼Œå¹¶èµ‹äºˆé»˜è®¤å€¼ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">finalä¿®é¥°çš„æ˜¯é™æ€å˜é‡ï¼Œç›´æ¥èµ‹å€¼ï¼Œè€Œstaticä¿®é¥°çš„å˜é‡ï¼Œåˆ™åœ¨å‡†å¤‡é˜¶æ®µèµ‹äºˆé»˜è®¤å€¼ã€‚</span><br></pre></td></tr></table></figure>

<h3 id="1-3-5-è§£æ"><a href="#1-3-5-è§£æ" class="headerlink" title="1.3.5 è§£æ"></a>1.3.5 è§£æ</h3><p>å°†ç¬¦å·å¼•ç”¨æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨ï¼Œè¯¥é˜¶æ®µä¼šæŠŠä¸€äº›é™æ€æ–¹æ³•(ç¬¦å·å¼•ç”¨ï¼Œæ¯”å¦‚main()æ–¹æ³•)æ›¿æ¢ä¸ºæŒ‡å‘æ•°æ®æ‰€å­˜å†…å­˜çš„æŒ‡é’ˆæˆ–å¥æŸ„ç­‰(ç›´æ¥å¼•ç”¨)ï¼Œè¿™æ˜¯æ‰€è°“çš„é™æ€é“¾æ¥è¿‡ ç¨‹(ç±»åŠ è½½æœŸé—´å®Œæˆ)ï¼ŒåŠ¨æ€é“¾æ¥æ˜¯åœ¨ç¨‹åºè¿è¡ŒæœŸé—´å®Œæˆçš„å°†ç¬¦å·å¼•ç”¨æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨ã€‚</p>
<h4 id="1-3-5-1-ä»€ä¹ˆæ˜¯é™æ€é“¾æ¥ï½œåŠ¨æ€é“¾æ¥ï¼Ÿ"><a href="#1-3-5-1-ä»€ä¹ˆæ˜¯é™æ€é“¾æ¥ï½œåŠ¨æ€é“¾æ¥ï¼Ÿ" class="headerlink" title="1.3.5.1 ä»€ä¹ˆæ˜¯é™æ€é“¾æ¥ï½œåŠ¨æ€é“¾æ¥ï¼Ÿ"></a>1.3.5.1 ä»€ä¹ˆæ˜¯é™æ€é“¾æ¥ï½œåŠ¨æ€é“¾æ¥ï¼Ÿ</h4><p>åƒç±»ä¿¡æ¯æ˜¯ç¡®å®šçš„ï¼Œè¿™ç§å±äºé™æ€ç¬¦å·ã€‚</p>
<p>æ–¹æ³•å¯èƒ½ä¼šè®¾è®¡åˆ°å¤šæ€ï¼Œä¸ç¡®å®šï¼Œåªèƒ½åŠ¨æ€è¿è¡Œæ—¶ç¡®å®šï¼Œè¿è¡Œæ—¶æ‰èƒ½ç¡®å®šå†…å­˜ä¸­çš„ä½ç½®ã€‚</p>
<h3 id="1-3-6-åˆå§‹åŒ–"><a href="#1-3-6-åˆå§‹åŒ–" class="headerlink" title="1.3.6 åˆå§‹åŒ–"></a>1.3.6 åˆå§‹åŒ–</h3><p>å¯¹ç±»çš„é™æ€å˜é‡åˆå§‹åŒ–ä¸ºæŒ‡å®šçš„å€¼ï¼Œæ‰§è¡Œé™æ€ä»£ç å—ï¼Œæ„é€ å‡½æ•°ã€‚</p>
<h3 id="1-3-6-1-åˆå§‹åŒ–é¡ºåº"><a href="#1-3-6-1-åˆå§‹åŒ–é¡ºåº" class="headerlink" title="1.3.6.1 åˆå§‹åŒ–é¡ºåº"></a>1.3.6.1 åˆå§‹åŒ–é¡ºåº</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SuperClass</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;superclass static ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SuperClass</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;superclass constructor ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ChildClass</span> <span class="keyword">extends</span> <span class="title">SuperClass</span></span>&#123;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;childclass static ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ChildClass</span> <span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;childclass constructor&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> ChildClass();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">superclass <span class="keyword">static</span> ...</span><br><span class="line">childclass <span class="keyword">static</span> ...</span><br><span class="line">superclass constructor ...</span><br><span class="line">childclass constructor</span><br></pre></td></tr></table></figure>

<p>æ€»ç»“ï¼š</p>
<ul>
<li>é™æ€åˆå§‹åŒ–å—ä¼˜å…ˆåŠ è½½</li>
<li>æ„é€ å™¨å‡½æ•°å†åŠ è½½</li>
<li>çˆ¶ç±»åŠ è½½ä¼˜å…ˆå­ç±»</li>
</ul>
<h2 id="1-4-ç±»åŠ è½½å™¨"><a href="#1-4-ç±»åŠ è½½å™¨" class="headerlink" title="1.4 ç±»åŠ è½½å™¨"></a>1.4 ç±»åŠ è½½å™¨</h2><h3 id="1-4-1-ç±»åŠ è½½å™¨ç§ç±»"><a href="#1-4-1-ç±»åŠ è½½å™¨ç§ç±»" class="headerlink" title="1.4.1 ç±»åŠ è½½å™¨ç§ç±»"></a>1.4.1 ç±»åŠ è½½å™¨ç§ç±»</h3><ul>
<li><p>å¼•å¯¼ç±»åŠ è½½å™¨ï¼š bootstarpClassLoader (C++ä¸­å®ç°) </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è´Ÿè´£åŠ è½½æ”¯æ’‘JVMè¿è¡Œçš„ä½äºJREçš„libç›®å½•ä¸‹çš„æ ¸å¿ƒç±»åº“ï¼Œæ¯”å¦‚ rt.jarã€charsets.jarç­‰</span><br></pre></td></tr></table></figure></li>
<li><p>æ‰©å±•ç±»åŠ è½½å™¨ï¼š static class ExtClassLoader extends URLClassLoader</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è´Ÿè´£åŠ è½½æ”¯æ’‘JVMè¿è¡Œçš„ä½äºJREçš„libç›®å½•ä¸‹çš„extæ‰©å±•ç›®å½•ä¸­çš„JAR ç±»åŒ…</span><br></pre></td></tr></table></figure></li>
<li><p>åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨ï¼š static class AppClassLoader extends URLClassLoader</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è´Ÿè´£åŠ è½½ClassPathè·¯å¾„ä¸‹çš„ç±»åŒ…ï¼Œä¸»è¦å°±æ˜¯åŠ è½½ä½ è‡ªå·±å†™çš„é‚£ äº›ç±»</span><br></pre></td></tr></table></figure></li>
<li><p>è‡ªå®šä¹‰ç±»åŠ è½½å™¨ </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è´Ÿè´£åŠ è½½ç”¨æˆ·è‡ªå®šä¹‰è·¯å¾„ä¸‹çš„ç±»åŒ…</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="1-4-1-1-å¦‚ä½•éªŒè¯åŠ è½½çš„path"><a href="#1-4-1-1-å¦‚ä½•éªŒè¯åŠ è½½çš„path" class="headerlink" title="1.4.1.1 å¦‚ä½•éªŒè¯åŠ è½½çš„path"></a>1.4.1.1 å¦‚ä½•éªŒè¯åŠ è½½çš„path</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(String.class.getClassLoader());</span><br><span class="line">System.out.println(com.sun.crypto.provider.DESKeyFactory.class.getClassLoader().getClass().getName());</span><br><span class="line">System.out.println(User.class.getClassLoader().getClass().getName());</span><br></pre></td></tr></table></figure>

<p><strong>è¾“å‡ºç»“æœ</strong>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">null</span></span><br><span class="line">sun.misc.Launcher$ExtClassLoader</span><br><span class="line">sun.misc.Launcher$AppClassLoader</span><br></pre></td></tr></table></figure>

<p><code>String.class.getClassLoader()</code> ä¸ºä»€ä¹ˆæ˜¯nullå‘¢ï¼Ÿ</p>
<p>å› ä¸ºStringæ˜¯jdkåŸç”Ÿçš„ç±»ï¼Œåœ¨åŠ è½½å¿…é¡»éœ€è¦å¼•å¯¼ç±»åŠ è½½å™¨æ¥åŠ è½½ï¼Œè€Œå¼•å¯¼ç±»åŠ è½½å™¨æ˜¯åœ¨C++ä¸­å®šä¹‰çš„ï¼Œæ‰€ä»¥javaä»£ç ä¸­è‚¯å®šæ‹¿ä¸åˆ°ã€‚</p>
<p>å¦‚ä½•è¯æ˜å‘¢ï¼Ÿ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ExtClassLoader</span><span class="params">(File[] var1)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">            <span class="keyword">super</span>(getExtURLs(var1), (ClassLoader)<span class="keyword">null</span>, Launcher.factory);</span><br><span class="line">            SharedSecrets.getJavaNetAccess().getURLClassPath(<span class="keyword">this</span>).initLookupCache(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬çŸ¥é“ExtClassLoaderçš„çˆ¶åŠ è½½å™¨æ˜¯BootstarpClassLoaderï¼Œè¿™é‡Œåœ¨åˆå§‹åŒ–ExtClassLoaderçš„æ—¶å€™ï¼Œè®¾ç½®çˆ¶åŠ è½½å™¨çš„æ—¶å€™ä¼ çš„å€¼æ˜¯nullã€‚</p>
<h3 id="1-4-2-ç±»åŠ è½½å™¨ä¹‹é—´çš„å…³ç³»"><a href="#1-4-2-ç±»åŠ è½½å™¨ä¹‹é—´çš„å…³ç³»" class="headerlink" title="1.4.2 ç±»åŠ è½½å™¨ä¹‹é—´çš„å…³ç³»"></a>1.4.2 ç±»åŠ è½½å™¨ä¹‹é—´çš„å…³ç³»</h3><ul>
<li>ExtClassLoader æ˜¯ AppClassLoader çš„çˆ¶åŠ è½½å™¨ï¼Œè€Œä¸æ˜¯çˆ¶ç±»ï¼</li>
<li>è‡ªå®šä¹‰ç±»åŠ è½½å™¨çš„çˆ¶åŠ è½½å™¨æ˜¯ AppClassLoader</li>
</ul>
<h3 id="1-4-3-ç±»åŠ è½½å™¨ä»€ä¹ˆæ—¶å€™åˆ›å»ºçš„"><a href="#1-4-3-ç±»åŠ è½½å™¨ä»€ä¹ˆæ—¶å€™åˆ›å»ºçš„" class="headerlink" title="1.4.3 ç±»åŠ è½½å™¨ä»€ä¹ˆæ—¶å€™åˆ›å»ºçš„"></a>1.4.3 ç±»åŠ è½½å™¨ä»€ä¹ˆæ—¶å€™åˆ›å»ºçš„</h3><p>ä¸Šé¢å·²ç»æåˆ°ï¼Œåœ¨C++ç¨‹åºåˆ›å»ºäº†å¼•å¯¼ç±»åŠ è½½å™¨ä¹‹åï¼Œæˆ–åˆ›å»ºjavaçš„Launcherç±»ï¼Œåœ¨æ„é€ è¿™ä¸ªç±»çš„æ—¶å€™ï¼Œåˆ›å»ºçš„ExtClassLoaderå’ŒAppClassLoaderã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Launcher</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Launcher.ExtClassLoader var1;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            var1 = Launcher.ExtClassLoader.getExtClassLoader();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException var10) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> InternalError(<span class="string">&quot;Could not create extension class loader&quot;</span>, var10);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">this</span>.loader = Launcher.AppClassLoader.getAppClassLoader(var1);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException var9) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> InternalError(<span class="string">&quot;Could not create application class loader&quot;</span>, var9);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Launcheræ˜¯å•ä¾‹çš„ã€‚</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Launcher</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> URLStreamHandlerFactory factory = <span class="keyword">new</span> Launcher.Factory();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Launcher launcher = <span class="keyword">new</span> Launcher();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String bootClassPath = System.getProperty(<span class="string">&quot;sun.boot.class.path&quot;</span>);</span><br><span class="line">    <span class="keyword">private</span> ClassLoader loader;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> URLStreamHandler fileHandler;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Launcher <span class="title">getLauncher</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> launcher;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="1-5-åŒäº²å§”æ´¾æœºåˆ¶"><a href="#1-5-åŒäº²å§”æ´¾æœºåˆ¶" class="headerlink" title="1.5 åŒäº²å§”æ´¾æœºåˆ¶"></a>1.5 åŒäº²å§”æ´¾æœºåˆ¶</h2><img src="https://oscimg.oschina.net/oscnet/up-3f17f266b143eaf2705ce60de4d09324e1f.png" style="zoom:50%;" />

<h3 id="1-5-1-ä»€ä¹ˆæ˜¯åŒäº²å§”æ´¾ï¼Ÿ"><a href="#1-5-1-ä»€ä¹ˆæ˜¯åŒäº²å§”æ´¾ï¼Ÿ" class="headerlink" title="1.5.1 ä»€ä¹ˆæ˜¯åŒäº²å§”æ´¾ï¼Ÿ"></a>1.5.1 ä»€ä¹ˆæ˜¯åŒäº²å§”æ´¾ï¼Ÿ</h3><p>è¿™é‡Œç±»åŠ è½½å…¶å®å°±æœ‰ä¸€ä¸ªåŒäº²å§”æ´¾æœºåˆ¶ï¼ŒåŠ è½½æŸä¸ªç±»æ—¶ä¼šå…ˆåˆ¤æ–­æ˜¯å¦å·²ç»åŠ è½½è¿‡ï¼Œå¦‚æœå·²ç»åŠ è½½è¿‡ï¼Œç›´æ¥è¿”å›ï¼Œå¦‚æœæ²¡åŠ è½½è¿‡ï¼Œå…ˆå§”æ‰˜çˆ¶åŠ è½½å™¨å¯»æ‰¾ç›®æ ‡ç±»ï¼Œçˆ¶åŠ è½½å™¨æ‰¾ä¸åˆ°å†å§”æ‰˜ä¸Šå±‚çˆ¶åŠ è½½å™¨åŠ è½½ï¼Œå¦‚æœæ‰€æœ‰çˆ¶åŠ è½½å™¨åœ¨è‡ªå·±çš„åŠ è½½ç±»è·¯å¾„ä¸‹éƒ½æ‰¾ä¸åˆ°ç›®æ ‡ç±»ï¼Œåˆ™åœ¨è‡ªå·±çš„ ç±»åŠ è½½è·¯å¾„ä¸­æŸ¥æ‰¾å¹¶è½½å…¥ç›®æ ‡ç±»ã€‚ </p>
<p>æ¯”å¦‚æˆ‘ä»¬çš„Mathç±»ï¼Œæœ€å…ˆä¼šæ‰¾åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨åŠ è½½ï¼Œåº”ç”¨ç¨‹åºç±»åŠ è½½å™¨ä¼šå…ˆå§”æ‰˜æ‰©å±•ç±»åŠ è½½å™¨åŠ è½½ï¼Œæ‰©å±•ç±»åŠ è½½å™¨å†å§”æ‰˜å¼•å¯¼ç±»åŠ è½½å™¨ï¼Œé¡¶å±‚å¼•å¯¼ç±»åŠ è½½å™¨åœ¨è‡ªå·±çš„ç±»åŠ è½½è·¯å¾„é‡Œæ‰¾äº†åŠå¤©æ²¡æ‰¾åˆ°Mathç±»ï¼Œåˆ™å‘ä¸‹é€€å›åŠ è½½Mathç±»çš„è¯·æ±‚ï¼Œæ‰©å±•ç±»åŠ è½½å™¨æ”¶åˆ°å›å¤å°±è‡ªå·±åŠ è½½ï¼Œåœ¨è‡ªå·±çš„ç±»åŠ è½½è·¯å¾„é‡Œæ‰¾äº†åŠå¤©ä¹Ÿæ²¡æ‰¾åˆ°Mathç±»ï¼Œåˆå‘ä¸‹é€€å›Mathç±»çš„åŠ è½½è¯·æ±‚ç»™åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨ï¼Œ åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨äºæ˜¯åœ¨è‡ªå·±çš„ç±»åŠ è½½è·¯å¾„é‡Œæ‰¾Mathç±»ï¼Œç»“æœæ‰¾åˆ°äº†å°±è‡ªå·±åŠ è½½äº†ã€‚ </p>
<p><strong>åŒäº²å§”æ´¾æœºåˆ¶è¯´ç®€å•ç‚¹å°±æ˜¯ï¼Œå…ˆæ‰¾çˆ¶äº²åŠ è½½ï¼Œä¸è¡Œå†ç”±å„¿å­è‡ªå·±åŠ è½½ã€‚</strong></p>
<p>æˆ‘ä»¬æ¥çœ‹ä¸‹åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨AppClassLoaderåŠ è½½ç±»çš„åŒäº²å§”æ´¾æœºåˆ¶æºç ï¼ŒAppClassLoader çš„loadClassæ–¹æ³•æœ€ç»ˆä¼šè°ƒç”¨å…¶çˆ¶ç±»ClassLoaderçš„loadClassæ–¹æ³•ï¼Œè¯¥æ–¹æ³•çš„å¤§ä½“é€»è¾‘å¦‚ä¸‹:</p>
<ul>
<li>é¦–å…ˆï¼Œæ£€æŸ¥ä¸€ä¸‹æŒ‡å®šåç§°çš„ç±»æ˜¯å¦å·²ç»åŠ è½½è¿‡ï¼Œå¦‚æœåŠ è½½è¿‡äº†ï¼Œå°±ä¸éœ€è¦å†åŠ è½½ï¼Œç›´æ¥ è¿”å›ã€‚</li>
<li>å¦‚æœæ­¤ç±»æ²¡æœ‰åŠ è½½è¿‡ï¼Œé‚£ä¹ˆï¼Œå†åˆ¤æ–­ä¸€ä¸‹æ˜¯å¦æœ‰çˆ¶åŠ è½½å™¨;å¦‚æœæœ‰çˆ¶åŠ è½½å™¨ï¼Œåˆ™ç”±çˆ¶åŠ  è½½å™¨åŠ è½½(å³è°ƒç”¨parent.loadClass(name, false);).æˆ–è€…æ˜¯è°ƒç”¨bootstrapç±»åŠ è½½å™¨æ¥åŠ è½½ã€‚</li>
<li>å¦‚æœçˆ¶åŠ è½½å™¨åŠbootstrapç±»åŠ è½½å™¨éƒ½æ²¡æœ‰æ‰¾åˆ°æŒ‡å®šçš„ç±»ï¼Œé‚£ä¹ˆè°ƒç”¨å½“å‰ç±»åŠ è½½å™¨çš„ findClassæ–¹æ³•æ¥å®Œæˆç±»åŠ è½½ã€‚</li>
</ul>
<p>æºç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> Class&lt;?&gt; loadClass(String name, <span class="keyword">boolean</span> resolve)</span><br><span class="line">        <span class="keyword">throws</span> ClassNotFoundException</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (getClassLoadingLock(name)) &#123;</span><br><span class="line">            <span class="comment">// First, check if the class has already been loaded</span></span><br><span class="line">            Class&lt;?&gt; c = findLoadedClass(name); </span><br><span class="line">          	<span class="comment">// å¦‚æœå·²ç»åŠ è½½äº†ï¼Œç›´æ¥è¿”å›</span></span><br><span class="line">            <span class="keyword">if</span> (c == <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">long</span> t0 = System.nanoTime();</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                  	<span class="comment">// å¦‚æœçˆ¶åŠ è½½å™¨ä¸æ˜¯nullï¼Œç”±ä¸Šå±‚åŠ è½½å™¨è´Ÿè´£åŠ è½½</span></span><br><span class="line">                    <span class="keyword">if</span> (parent != <span class="keyword">null</span>) &#123;</span><br><span class="line">                        c = parent.loadClass(name, <span class="keyword">false</span>);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        c = findBootstrapClassOrNull(name);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">                    <span class="comment">// ClassNotFoundException thrown if class not found</span></span><br><span class="line">                    <span class="comment">// from the non-null parent class loader</span></span><br><span class="line">                &#125;</span><br><span class="line">								<span class="comment">// å¦‚æœæ²¡æœ‰åŠ è½½è¿‡ï¼Œåˆ™å»å½“å‰åŠ è½½å™¨çš„æ‰§è¡Œè·¯å¾„ä¸‹å¯»æ‰¾</span></span><br><span class="line">                <span class="keyword">if</span> (c == <span class="keyword">null</span>) &#123;</span><br><span class="line">                    <span class="comment">// If still not found, then invoke findClass in order</span></span><br><span class="line">                    <span class="comment">// to find the class.</span></span><br><span class="line">                    <span class="keyword">long</span> t1 = System.nanoTime();</span><br><span class="line">                    c = findClass(name);</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// this is the defining class loader; record the stats</span></span><br><span class="line">                    sun.misc.PerfCounter.getParentDelegationTime().addTime(t1 - t0);</span><br><span class="line">                    sun.misc.PerfCounter.getFindClassTime().addElapsedTimeFrom(t1);</span><br><span class="line">                    sun.misc.PerfCounter.getFindClasses().increment();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (resolve) &#123;</span><br><span class="line">                resolveClass(c);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> c;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-5-2-ä¸ºä»€ä¹ˆéœ€è¦åŒäº²å§”æ´¾ï¼Ÿ"><a href="#1-5-2-ä¸ºä»€ä¹ˆéœ€è¦åŒäº²å§”æ´¾ï¼Ÿ" class="headerlink" title="1.5.2 ä¸ºä»€ä¹ˆéœ€è¦åŒäº²å§”æ´¾ï¼Ÿ"></a>1.5.2 ä¸ºä»€ä¹ˆéœ€è¦åŒäº²å§”æ´¾ï¼Ÿ</h3><ul>
<li>æ²™ç®±å®‰å…¨æœºåˆ¶:è‡ªå·±å†™çš„java.lang.String.classç±»ä¸ä¼šè¢«åŠ è½½ï¼Œè¿™æ ·ä¾¿å¯ä»¥é˜²æ­¢æ ¸å¿ƒ</li>
<li>APIåº“è¢«éšæ„ç¯¡æ”¹ é¿å…ç±»çš„é‡å¤åŠ è½½:å½“çˆ¶äº²å·²ç»åŠ è½½äº†è¯¥ç±»æ—¶ï¼Œå°±æ²¡æœ‰å¿…è¦å­ClassLoaderå†åŠ è½½ä¸€æ¬¡ï¼Œä¿è¯è¢«åŠ è½½ç±»çš„å”¯ä¸€æ€§</li>
</ul>
<h4 id="1-5-2-1-è‡ªå®šä¹‰çš„-java-lang-Stringèƒ½å¦è¢«åŠ è½½"><a href="#1-5-2-1-è‡ªå®šä¹‰çš„-java-lang-Stringèƒ½å¦è¢«åŠ è½½" class="headerlink" title="1.5.2.1 è‡ªå®šä¹‰çš„ java.lang.Stringèƒ½å¦è¢«åŠ è½½"></a>1.5.2.1 è‡ªå®šä¹‰çš„ java.lang.Stringèƒ½å¦è¢«åŠ è½½</h4><p>è‚¯å®šæ˜¯ä¸èƒ½åŠ è½½çš„ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> java.lang;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">String</span></span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123; </span><br><span class="line">	System.out.println(<span class="string">&quot;**************My String Class**************&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">é”™è¯¯: åœ¨ç±» java.lang.String ä¸­æ‰¾ä¸åˆ° main æ–¹æ³•, è¯·å°† main æ–¹æ³•å®šä¹‰ä¸º: <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></span><br><span class="line"><span class="function">å¦åˆ™ JavaFX åº”ç”¨ç¨‹åºç±»å¿…é¡»æ‰©å±•javafx.application.Application</span></span><br></pre></td></tr></table></figure>

<p>ä¸ºä»€ä¹ˆæç¤ºçš„æ˜¯æ‰¾ä¸åˆ°mainæ–¹æ³•è¿™ä¸ªé”™è¯¯å‘¢ï¼Ÿ</p>
<p>å› ä¸ºç±»åŠ è½½åŠ è½½çš„Stringç±»æ ¹æœ¬å°±ä¸æ˜¯æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„è¿™ä¸ªç±»ï¼Œè€Œæ˜¯JDKçš„Stringï¼ŒJDKä¸­Stringçš„ç±»ä¸­æœ‰æ²¡æœ‰mainæ–¹æ³•ã€‚</p>
<h4 id="1-5-2-2-ä¸ºä»€ä¹ˆåŠ è½½å…ˆæ˜¯åœ¨appåŠ è½½å™¨è€Œä¸æ˜¯bootstrapåŠ è½½å™¨ï¼Ÿ"><a href="#1-5-2-2-ä¸ºä»€ä¹ˆåŠ è½½å…ˆæ˜¯åœ¨appåŠ è½½å™¨è€Œä¸æ˜¯bootstrapåŠ è½½å™¨ï¼Ÿ" class="headerlink" title="1.5.2.2 ä¸ºä»€ä¹ˆåŠ è½½å…ˆæ˜¯åœ¨appåŠ è½½å™¨è€Œä¸æ˜¯bootstrapåŠ è½½å™¨ï¼Ÿ"></a>1.5.2.2 ä¸ºä»€ä¹ˆåŠ è½½å…ˆæ˜¯åœ¨appåŠ è½½å™¨è€Œä¸æ˜¯bootstrapåŠ è½½å™¨ï¼Ÿ</h4><p>å› ä¸ºå¤§éƒ¨åˆ†ä»£ç éƒ½æ˜¯éœ€è¦appåŠ è½½å™¨æ¥åŠ è½½ã€‚</p>
<h3 id="1-5-3-å¦‚ä½•è‡ªå®šä¹‰ç±»åŠ è½½å™¨"><a href="#1-5-3-å¦‚ä½•è‡ªå®šä¹‰ç±»åŠ è½½å™¨" class="headerlink" title="1.5.3 å¦‚ä½•è‡ªå®šä¹‰ç±»åŠ è½½å™¨"></a>1.5.3 å¦‚ä½•è‡ªå®šä¹‰ç±»åŠ è½½å™¨</h3><p>è‡ªå®šä¹‰ç±»åŠ è½½å™¨åªéœ€è¦ç»§æ‰¿ java.lang.ClassLoader ç±»ï¼Œè¯¥ç±»æœ‰ä¸¤ä¸ªæ ¸å¿ƒæ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯ loadClass(String, boolean)ï¼Œå®ç°äº†åŒäº²å§”æ´¾æœºåˆ¶ï¼Œè¿˜æœ‰ä¸€ä¸ªæ–¹æ³•æ˜¯findClassï¼Œé»˜è®¤å®ç°æ˜¯ç©ºæ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬è‡ªå®šä¹‰ç±»åŠ è½½å™¨ä¸»è¦æ˜¯é‡å†™ æ–¹æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyClassLoader</span> <span class="keyword">extends</span> <span class="title">ClassLoader</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String classPath;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyClassLoader</span><span class="params">(String classPath)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.classPath = classPath;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">byte</span>[] loadByte(String name) <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        name = name.replaceAll(<span class="string">&quot;\\.&quot;</span>, <span class="string">&quot;/&quot;</span>);</span><br><span class="line">        FileInputStream fis = <span class="keyword">new</span> FileInputStream(classPath + <span class="string">&quot;/&quot;</span> + name</span><br><span class="line">                + <span class="string">&quot;.class&quot;</span>);</span><br><span class="line">        <span class="keyword">int</span> len = fis.available();</span><br><span class="line">        <span class="keyword">byte</span>[] data = <span class="keyword">new</span> <span class="keyword">byte</span>[len];</span><br><span class="line">        fis.read(data);</span><br><span class="line">        fis.close();</span><br><span class="line">        <span class="keyword">return</span> data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt; findClass(String name) <span class="keyword">throws</span> ClassNotFoundException &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">byte</span>[] data = loadByte(name);</span><br><span class="line">            <span class="keyword">return</span> defineClass(name, data, <span class="number">0</span>, data.length);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ClassNotFoundException();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//åˆå§‹åŒ–è‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼Œä¼šå…ˆåˆå§‹åŒ–çˆ¶ç±»ClassLoaderï¼Œå…¶ä¸­ä¼šæŠŠè‡ªå®šä¹‰ç±»åŠ è½½å™¨çš„çˆ¶åŠ è½½å™¨è®¾ç½®ä¸ºåº”ç”¨ç¨‹åºç±»åŠ è½½å™¨AppClassLoader</span></span><br><span class="line">        MyClassLoader classLoader = <span class="keyword">new</span> MyClassLoader(<span class="string">&quot;/export/data&quot;</span>);</span><br><span class="line">        <span class="comment">//export/data/com/ibli/jvm å‡ çº§ç›®å½•ï¼Œå°†Userç±»çš„å¤åˆ¶ç±»User.classä¸¢å…¥è¯¥ç›®å½•</span></span><br><span class="line">        Class clazz = classLoader.loadClass(<span class="string">&quot;com.ibli.jvm.User&quot;</span>);</span><br><span class="line">        Object obj = clazz.newInstance();</span><br><span class="line">        Method method = clazz.getDeclaredMethod(<span class="string">&quot;sout&quot;</span>, <span class="keyword">null</span>);</span><br><span class="line">        method.invoke(obj, <span class="keyword">null</span>);</span><br><span class="line">        System.out.println(clazz.getClassLoader().getClass().getName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å®šä¹‰ä¸€ä¸ªUserç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sout</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;user sout ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">user sout ...</span><br><span class="line">com.ibli.jvm.MyClassLoader</span><br></pre></td></tr></table></figure>

<p>æˆ‘ç°åœ¨è¦åŠ è½½ <code>com.ibli.jvm.User</code>ç±»ï¼Œåœ¨ <code>/export/data/com/ibli/jvm</code>ä¸‹æœ‰ä¸€ä¸ª<code>User.class</code>ã€‚</p>
<p>æˆ‘å®šä¹‰çš„åŠ è½½å™¨å»åŠ è½½çš„æ—¶å€™ï¼Œä¸Šå±‚çš„åŠ è½½å™¨ä»¬çš„å„è‡ªè·¯å¾„ä¸‹éƒ½æ²¡æœ‰è¿™ä¸ªç±»ï¼Œæ‰€ä»¥æœ€ç»ˆè‚¯å®šæ˜¯ç”±æˆ‘è‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨æ¥åŠ è½½ã€‚</p>
<h3 id="1-5-4-å¦‚ä½•æ‰“ç ´åŒäº²å§”æ´¾"><a href="#1-5-4-å¦‚ä½•æ‰“ç ´åŒäº²å§”æ´¾" class="headerlink" title="1.5.4 å¦‚ä½•æ‰“ç ´åŒäº²å§”æ´¾"></a>1.5.4 å¦‚ä½•æ‰“ç ´åŒäº²å§”æ´¾</h3><h4 id="1-5-4-1-ä»€ä¹ˆæ˜¯æ‰“ç ´åŒäº²å§”æ´¾"><a href="#1-5-4-1-ä»€ä¹ˆæ˜¯æ‰“ç ´åŒäº²å§”æ´¾" class="headerlink" title="1.5.4.1 ä»€ä¹ˆæ˜¯æ‰“ç ´åŒäº²å§”æ´¾"></a>1.5.4.1 ä»€ä¹ˆæ˜¯æ‰“ç ´åŒäº²å§”æ´¾</h4><p>ç±»é€šè¿‡å­åŠ è½½å™¨åŠ è½½ ä¸ç”¨çˆ¶åŠ è½½å™¨åŠ è½½ã€‚</p>
<h4 id="1-5-4-2-å¦‚ä½•æ‰“ç ´"><a href="#1-5-4-2-å¦‚ä½•æ‰“ç ´" class="headerlink" title="1.5.4.2 å¦‚ä½•æ‰“ç ´"></a>1.5.4.2 å¦‚ä½•æ‰“ç ´</h4><p>é‡å†™loadClassæ–¹æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> Class&lt;?&gt; loadClass(String name, <span class="keyword">boolean</span> resolve)</span><br><span class="line">            <span class="keyword">throws</span> ClassNotFoundException &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (getClassLoadingLock(name)) &#123;</span><br><span class="line">            <span class="comment">// First, check if the class has already been loaded</span></span><br><span class="line">            Class&lt;?&gt; c = findLoadedClass(name);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (c == <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="comment">// If still not found, then invoke findClass in order</span></span><br><span class="line">                <span class="comment">// to find the class.</span></span><br><span class="line">                <span class="keyword">long</span> t1 = System.nanoTime();</span><br><span class="line"></span><br><span class="line">                c = findClass(name);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// this is the defining class loader; record the stats</span></span><br><span class="line">                sun.misc.PerfCounter.getFindClassTime().addElapsedTimeFrom(t1);</span><br><span class="line">                sun.misc.PerfCounter.getFindClasses().increment();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (resolve) &#123;</span><br><span class="line">                resolveClass(c);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> c;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>é‚£æˆ‘ä»¬å°±é‡å†™ä¸€ä¸‹loadClassæ–¹æ³•ï¼Œé‚£ä½¿ç”¨çˆ¶åŠ è½½å™¨çš„é€»è¾‘åˆ é™¤æ‰å°±å¯ä»¥äº†ã€‚</p>
<p>ä½†æ˜¯ä¼šä¿ä¸€ä¸ªé”™è¯¯ï¼Œæ‰¾ä¸åˆ°Objectç±»æ–‡ä»¶</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">java.io.FileNotFoundException: /export/data/java/lang/Object.class (No such file or directory)</span><br><span class="line">	at java.io.FileInputStream.open0(Native Method)</span><br><span class="line">	at java.io.FileInputStream.open(FileInputStream.java:<span class="number">195</span>)</span><br></pre></td></tr></table></figure>

<p>ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ å› ä¸ºåœ¨javaä¸­æ‰€æœ‰çš„ç±»éƒ½æœ‰ä¸€ä¸ªå…¬å…±çš„åŸºç±» Objectï¼ŒåŠ è½½çš„æ—¶å€™ï¼Œå¦‚æœæœ‰çˆ¶ç±»ï¼Œè‚¯å®šä¼˜å…ˆåŠ è½½çˆ¶ç±»ã€‚</p>
<p>å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬å°è¯•ä¸€ä¸‹åœ¨ <code>/export/data/java/lang/</code>è·¯å¾„ä¸‹æ·»åŠ ä¸€ä¸‹è¿™ä¸ªç±»ï¼Œå†æ¬¡å°è¯•ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">java.lang.SecurityException: Prohibited package name: java.lang</span><br><span class="line">	at java.lang.ClassLoader.preDefineClass(ClassLoader.java:662)</span><br><span class="line">	at java.lang.ClassLoader.defineClass(ClassLoader.java:761)</span><br><span class="line">	at java.lang.ClassLoader.defineClass(ClassLoader.java:642)</span><br><span class="line">	at com.ibli.jvm.MyClassLoader.findClass(MyClassLoader.java:32)</span><br><span class="line">	at com.ibli.jvm.MyClassLoader.loadClass(MyClassLoader.java:59)</span><br></pre></td></tr></table></figure>

<p>ä¾ç„¶æ˜¯ä¸å¯ä»¥çš„ï¼Œè¿™é‡ŒæŠ¥é”™ä¿¡æ¯æç¤ºçš„æ˜¯ <code>Prohibited package name: java.lang</code>ã€‚</p>
<p>è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>è¿™é‡Œå†ä¸€æ¬¡å°è¯äº†ä¸Šé¢æˆ‘ä»¬æåˆ°çš„ï¼ŒJDKè‡ªå·±å®šä¹‰çš„ç±»æ–‡ä»¶ç»å¯¹ä¸å…è®¸è‡ªå®šä¹‰åŠ è½½çš„ï¼Œè¿™ä¸ªæˆ‘ä»¬è‡ªå·±çš„Objectæ˜¯ä¸å¯èƒ½è¢«åŠ è½½çš„ã€‚</p>
<p>å¦‚ä½•è§£å†³ä¸Šé¢çš„é—®é¢˜å‘¢ï¼Ÿ</p>
<p>è¿™é‡Œéœ€è¦å¯¹Objectç‰¹æ®Šå¤„ç†ä¸€ä¸‹ï¼ŒObjectå°±æ˜¯ç”¨AppClassLoaderæ¥åŠ è½½å°±è¡Œäº†ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!name.startsWith(<span class="string">&quot;com.ibli.jvm&quot;</span>)) &#123;</span><br><span class="line">      c = Launcher.getLauncher().getClassLoader().loadClass(name);</span><br><span class="line">      <span class="comment">// æˆ–è€… c = this.getParent().loadClass(name);</span></span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">       c = findClass(name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœæ˜¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">user sout ...</span><br><span class="line">com.ibli.jvm.MyClassLoader</span><br></pre></td></tr></table></figure>

<h3 id="1-5-5-Tomcatæ‰“ç ´åŒäº²å§”æ´¾ï¼Ÿ"><a href="#1-5-5-Tomcatæ‰“ç ´åŒäº²å§”æ´¾ï¼Ÿ" class="headerlink" title="1.5.5 Tomcatæ‰“ç ´åŒäº²å§”æ´¾ï¼Ÿ"></a>1.5.5 Tomcatæ‰“ç ´åŒäº²å§”æ´¾ï¼Ÿ</h3><h4 id="1-5-5-1-Tomcat-å¦‚æœä½¿ç”¨é»˜è®¤çš„åŒäº²å§”æ´¾ç±»åŠ è½½æœºåˆ¶è¡Œä¸è¡Œ"><a href="#1-5-5-1-Tomcat-å¦‚æœä½¿ç”¨é»˜è®¤çš„åŒäº²å§”æ´¾ç±»åŠ è½½æœºåˆ¶è¡Œä¸è¡Œ" class="headerlink" title="1.5.5.1 Tomcat å¦‚æœä½¿ç”¨é»˜è®¤çš„åŒäº²å§”æ´¾ç±»åŠ è½½æœºåˆ¶è¡Œä¸è¡Œ?"></a>1.5.5.1 Tomcat å¦‚æœä½¿ç”¨é»˜è®¤çš„åŒäº²å§”æ´¾ç±»åŠ è½½æœºåˆ¶è¡Œä¸è¡Œ?</h4><p>æˆ‘ä»¬æ€è€ƒä¸€ä¸‹: Tomcatæ˜¯ä¸ªwebå®¹å™¨ï¼Œ é‚£ä¹ˆå®ƒè¦è§£å†³ä»€ä¹ˆé—®é¢˜:</p>
<ul>
<li>ä¸€ä¸ªwebå®¹å™¨å¯èƒ½éœ€è¦éƒ¨ç½²ä¸¤ä¸ªåº”ç”¨ç¨‹åºï¼Œä¸åŒçš„åº”ç”¨ç¨‹åºå¯èƒ½ä¼šä¾èµ–åŒä¸€ä¸ªç¬¬ä¸‰æ–¹ç±»åº“çš„ä¸åŒç‰ˆæœ¬ï¼Œä¸èƒ½è¦æ±‚åŒä¸€ä¸ªç±»åº“åœ¨åŒä¸€ä¸ªæœåŠ¡å™¨åªæœ‰ä¸€ä»½ï¼Œå› æ­¤è¦ä¿è¯æ¯ä¸ªåº”ç”¨ç¨‹åºçš„ç±»åº“éƒ½æ˜¯ ç‹¬ç«‹çš„ï¼Œä¿è¯ç›¸äº’éš”ç¦»ã€‚</li>
<li>éƒ¨ç½²åœ¨åŒä¸€ä¸ªwebå®¹å™¨ä¸­<strong>ç›¸åŒçš„ç±»åº“ç›¸åŒçš„ç‰ˆæœ¬</strong>å¯ä»¥å…±äº«ã€‚å¦åˆ™ï¼Œå¦‚æœæœåŠ¡å™¨æœ‰10ä¸ªåº”ç”¨ç¨‹ åºï¼Œé‚£ä¹ˆè¦æœ‰10ä»½ç›¸åŒçš„ç±»åº“åŠ è½½è¿›è™šæ‹Ÿæœºã€‚</li>
<li> webå®¹å™¨ä¹Ÿæœ‰è‡ªå·±ä¾èµ–çš„ç±»åº“ï¼Œä¸èƒ½ä¸åº”ç”¨ç¨‹åºçš„ç±»åº“æ··æ·†ã€‚åŸºäºå®‰å…¨è€ƒè™‘ï¼Œåº”è¯¥è®©å®¹å™¨çš„ç±»åº“å’Œç¨‹åºçš„ç±»åº“éš”ç¦»å¼€æ¥ã€‚</li>
<li>webå®¹å™¨è¦æ”¯æŒjspçš„ä¿®æ”¹ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œjsp æ–‡ä»¶æœ€ç»ˆä¹Ÿæ˜¯è¦ç¼–è¯‘æˆclassæ–‡ä»¶æ‰èƒ½åœ¨è™šæ‹Ÿæœºä¸­ è¿è¡Œï¼Œä½†ç¨‹åºè¿è¡Œåä¿®æ”¹jspå·²ç»æ˜¯å¸ç©ºè§æƒ¯çš„äº‹æƒ…ï¼Œ webå®¹å™¨éœ€è¦æ”¯æŒ jsp ä¿®æ”¹åä¸ç”¨é‡å¯ã€‚</li>
</ul>
<h4 id="1-5-5-2-Tomcatä¸ºä»€ä¹ˆä¸ä½¿ç”¨é»˜è®¤çš„åŒäº²å§”æ´¾"><a href="#1-5-5-2-Tomcatä¸ºä»€ä¹ˆä¸ä½¿ç”¨é»˜è®¤çš„åŒäº²å§”æ´¾" class="headerlink" title="1.5.5.2 Tomcatä¸ºä»€ä¹ˆä¸ä½¿ç”¨é»˜è®¤çš„åŒäº²å§”æ´¾"></a>1.5.5.2 Tomcatä¸ºä»€ä¹ˆä¸ä½¿ç”¨é»˜è®¤çš„åŒäº²å§”æ´¾</h4><p>å¦‚æœtomcatä½¿ç”¨é»˜è®¤çš„åŒäº²å§”æ´¾ä¼šæœ‰å“ªäº›é—®é¢˜ï¼š</p>
<p>ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œ**<font color=green>å¦‚æœä½¿ç”¨é»˜è®¤çš„ç±»åŠ è½½å™¨æœºåˆ¶ï¼Œé‚£ä¹ˆæ˜¯æ— æ³•åŠ è½½ä¸¤ä¸ªç›¸åŒç±»åº“çš„ä¸åŒç‰ˆæœ¬çš„ï¼Œé»˜è®¤çš„ç±»åŠ å™¨æ˜¯ä¸ç®¡ä½ æ˜¯ä»€ä¹ˆç‰ˆæœ¬çš„ï¼Œåªåœ¨ä¹ä½ çš„å…¨é™å®šç±»åï¼Œå¹¶ä¸”åªæœ‰ä¸€ä»½</font>**ã€‚ </p>
<p>ç¬¬äºŒä¸ªé—®é¢˜ï¼Œé»˜è®¤çš„ç±»åŠ è½½å™¨æ˜¯èƒ½å¤Ÿå®ç°çš„ï¼Œå› ä¸ºä»–çš„èŒè´£å°±æ˜¯ä¿è¯å”¯ä¸€æ€§ã€‚ </p>
<p>ç¬¬ä¸‰ä¸ªé—®é¢˜å’Œç¬¬ä¸€ä¸ªé—®é¢˜ä¸€æ ·ã€‚ </p>
<p>æˆ‘ä»¬å†çœ‹ç¬¬å››ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æƒ³æˆ‘ä»¬è¦æ€ä¹ˆå®ç°jspæ–‡ä»¶çš„çƒ­åŠ è½½ï¼Œjsp æ–‡ä»¶å…¶å®ä¹Ÿå°±æ˜¯classæ–‡ä»¶ï¼Œé‚£ä¹ˆå¦‚æœä¿®æ”¹äº†ï¼Œä½†ç±»åè¿˜æ˜¯ä¸€æ ·ï¼Œç±»åŠ è½½å™¨ä¼šç›´æ¥å–æ–¹æ³•åŒºä¸­å·²ç»å­˜åœ¨çš„ï¼Œä¿®æ”¹åçš„jspæ˜¯ä¸ä¼šé‡æ–°åŠ è½½çš„ã€‚é‚£ä¹ˆæ€ä¹ˆåŠå‘¢? æˆ‘ä»¬å¯ä»¥ç›´æ¥å¸è½½æ‰è¿™jspæ–‡ä»¶çš„ç±»åŠ è½½å™¨ï¼Œæ‰€ä»¥ä½ åº”è¯¥æƒ³åˆ°äº†ï¼Œæ¯ä¸ªjspæ–‡ä»¶å¯¹åº”ä¸€ä¸ªå”¯ä¸€çš„ç±»åŠ è½½å™¨ï¼Œå½“ä¸€ä¸ªjspæ–‡ä»¶ä¿®æ”¹äº†ï¼Œå°±ç›´æ¥å¸è½½è¿™ä¸ªjspç±»åŠ è½½å™¨ã€‚é‡æ–°åˆ›å»ºç±»åŠ è½½å™¨ï¼Œé‡æ–°åŠ è½½jspæ–‡ä»¶ã€‚</p>
<h4 id="1-5-5-3-tomcatç±»åŠ è½½æµç¨‹"><a href="#1-5-5-3-tomcatç±»åŠ è½½æµç¨‹" class="headerlink" title="1.5.5.3 tomcatç±»åŠ è½½æµç¨‹"></a>1.5.5.3 tomcatç±»åŠ è½½æµç¨‹</h4><p><img src="https://oscimg.oschina.net/oscnet/up-73a62d636202f492f8da71a9246c6d6639e.png"></p>
<p>Tomcatçš„å‡ ä¸ªä¸»è¦ç±»åŠ è½½å™¨:</p>
<ul>
<li><p>commonLoader: Tomcatæœ€åŸºæœ¬çš„ç±»åŠ è½½å™¨ï¼ŒåŠ è½½è·¯å¾„ä¸­çš„classå¯ä»¥è¢«Tomcatå®¹å™¨æœ¬èº«ä»¥åŠå„ä¸ªWebappè®¿é—®; </p>
</li>
<li><p>catalinaLoader: Tomcatå®¹å™¨ç§æœ‰çš„ç±»åŠ è½½å™¨ï¼ŒåŠ è½½è·¯å¾„ä¸­çš„classå¯¹äºWebappä¸å¯è§; </p>
</li>
<li><p>sharedLoader: å„ä¸ªWebappå…±äº«çš„ç±»åŠ è½½å™¨ï¼ŒåŠ è½½è·¯å¾„ä¸­çš„classå¯¹äºæ‰€æœ‰Webappå¯è§ï¼Œä½†æ˜¯å¯¹äºTomcatå®¹å™¨ä¸å¯è§; </p>
</li>
<li><p>WebappClassLoader:å„ä¸ªWebappç§æœ‰çš„ç±»åŠ è½½å™¨ï¼ŒåŠ è½½è·¯å¾„ä¸­çš„classåªå¯¹å½“å‰Webappå¯è§ï¼Œæ¯”å¦‚åŠ è½½waråŒ…é‡Œç›¸å…³çš„ç±»ï¼Œæ¯ä¸ªwaråŒ…åº”ç”¨éƒ½æœ‰è‡ªå·±çš„WebappClassLoaderï¼Œå®ç°ç›¸äº’éš”ç¦»ï¼Œæ¯”å¦‚ä¸åŒwaråŒ…åº”ç”¨å¼•å…¥äº†ä¸åŒçš„springç‰ˆæœ¬ï¼Œ è¿™æ ·å®ç°å°±èƒ½åŠ è½½å„è‡ªçš„springç‰ˆæœ¬;</p>
</li>
</ul>
<p>ä»å›¾ä¸­çš„å§”æ´¾å…³ç³»ä¸­å¯ä»¥çœ‹å‡º: </p>
<ul>
<li>CommonClassLoaderèƒ½åŠ è½½çš„ç±»éƒ½å¯ä»¥è¢«CatalinaClassLoaderå’ŒSharedClassLoaderä½¿ç”¨ï¼Œ ä»è€Œå®ç°äº†å…¬æœ‰ç±»åº“çš„å…±ç”¨</li>
<li>CatalinaClassLoaderå’ŒSharedClassLoaderè‡ªå·±èƒ½åŠ è½½çš„ç±»åˆ™ä¸å¯¹æ–¹ç›¸äº’éš”ç¦»ã€‚</li>
<li> WebAppClassLoaderå¯ä»¥ä½¿ç”¨SharedClassLoaderåŠ è½½åˆ°çš„ç±»ï¼Œä½†å„ä¸ªWebAppClassLoader å®ä¾‹ä¹‹é—´ç›¸äº’éš”ç¦»ã€‚ </li>
<li>è€ŒJasperLoaderçš„åŠ è½½èŒƒå›´ä»…ä»…æ˜¯è¿™ä¸ªJSPæ–‡ä»¶æ‰€ç¼–è¯‘å‡ºæ¥çš„é‚£ä¸€ä¸ª.Classæ–‡ä»¶ï¼Œå®ƒå‡ºç°çš„ç›®çš„å°±æ˜¯ä¸ºäº†è¢«ä¸¢å¼ƒ: <strong><font color=red>å½“Webå®¹å™¨æ£€æµ‹åˆ°JSPæ–‡ä»¶è¢«ä¿®æ”¹æ—¶ï¼Œä¼šæ›¿æ¢æ‰ç›®å‰çš„JasperLoaderçš„å®ä¾‹ï¼Œ å¹¶é€šè¿‡å†å»ºç«‹ä¸€ä¸ªæ–°çš„Jspç±»åŠ è½½å™¨æ¥å®ç°JSPæ–‡ä»¶çš„çƒ­åŠ è½½åŠŸèƒ½ã€‚</font></strong></li>
</ul>
<p>tomcat è¿™ç§ç±»åŠ è½½æœºåˆ¶è¿èƒŒäº†java æ¨èçš„åŒäº²å§”æ´¾æ¨¡å‹äº†å—? ç­”æ¡ˆæ˜¯:è¿èƒŒäº†ã€‚</p>
<p><strong><font color=blue> å¾ˆæ˜¾ç„¶ï¼Œtomcat ä¸ºäº†å®ç°éš”ç¦»æ€§ï¼Œæ¯ä¸ª webappClassLoaderåŠ è½½è‡ªå·±çš„ç›®å½•ä¸‹çš„classæ–‡ä»¶ï¼Œä¸ä¼šä¼ é€’ç»™çˆ¶ç±»åŠ è½½å™¨ï¼Œæ‰“ç ´äº†åŒäº²å§”æ´¾æœºåˆ¶ã€‚</font></strong></p>
<p>å¦‚ä½•å®ç°Tomcatçš„åŠ è½½webappçš„æ•ˆæœå‘¢ï¼›</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//åˆå§‹åŒ–è‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼Œä¼šå…ˆåˆå§‹åŒ–çˆ¶ç±»ClassLoaderï¼Œå…¶ä¸­ä¼šæŠŠè‡ªå®šä¹‰ç±»åŠ è½½å™¨çš„çˆ¶åŠ è½½å™¨è®¾ç½®ä¸ºåº”ç”¨ç¨‹åºç±»åŠ è½½å™¨AppClassLoader</span></span><br><span class="line">        MyClassLoader classLoader = <span class="keyword">new</span> MyClassLoader(<span class="string">&quot;/export/data/&quot;</span>);</span><br><span class="line">        Class clazz = classLoader.loadClass(<span class="string">&quot;com.ibli.jvm.User&quot;</span>);</span><br><span class="line">        Object obj = clazz.newInstance();</span><br><span class="line">        Method method = clazz.getDeclaredMethod(<span class="string">&quot;sout&quot;</span>, <span class="keyword">null</span>);</span><br><span class="line">        method.invoke(obj, <span class="keyword">null</span>);</span><br><span class="line">        System.out.println(clazz.getClassLoader().getClass().getName());</span><br><span class="line"></span><br><span class="line">        MyClassLoader classLoader1 = <span class="keyword">new</span> MyClassLoader(<span class="string">&quot;/export/data1/&quot;</span>);</span><br><span class="line">        Class clazz1 = classLoader.loadClass(<span class="string">&quot;com.ibli.jvm.User&quot;</span>);</span><br><span class="line">        Object obj1 = clazz.newInstance();</span><br><span class="line">        Method method1 = clazz.getDeclaredMethod(<span class="string">&quot;sout&quot;</span>, <span class="keyword">null</span>);</span><br><span class="line">        method.invoke(obj, <span class="keyword">null</span>);</span><br><span class="line">        System.out.println(clazz.getClassLoader().getClass().getName());</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼š</p>
<ul>
<li>ä¸¤ä¸ªUserç±»çš„æ–‡ä»¶åç›¸åŒï¼Œä½†æ˜¯ç¼–è¯‘çš„æ—¶å€™é‡Œé¢çš„soutæ–¹æ³•è¾“å‡ºçš„å†…å®¹æ˜¯ä¸åŒçš„ï¼Œæ–¹ä¾¿åŒºåˆ†</li>
<li>æ„å»ºäº†ä¸¤ä¸ªåŠ è½½å™¨</li>
</ul>
<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">user sout ...</span><br><span class="line">com.ibli.jvm.MyClassLoader</span><br><span class="line"></span><br><span class="line">user1 sout ...</span><br><span class="line">com.ibli.jvm.MyClassLoader</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œä¸¤ä¸ªåŠ è½½å™¨å…¶å®ä¸æ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œæ³¨æ„å‘¦ï¼</p>
<p>æ³¨æ„:<strong>åŒä¸€ä¸ªJVMå†…ï¼Œä¸¤ä¸ªç›¸åŒåŒ…åå’Œç±»åçš„ç±»å¯¹è±¡å¯ä»¥å…±å­˜ï¼Œå› ä¸ºä»–ä»¬çš„ç±»åŠ è½½å™¨å¯ä»¥ä¸ä¸€æ ·ï¼Œæ‰€ä»¥çœ‹ä¸¤ä¸ªç±»å¯¹è±¡æ˜¯å¦æ˜¯åŒä¸€ä¸ªï¼Œé™¤äº†çœ‹ç±»çš„åŒ…åå’Œç±»åæ˜¯å¦éƒ½ç›¸åŒä¹‹å¤–ï¼Œè¿˜éœ€è¦ä»–ä»¬çš„ç±» åŠ è½½å™¨ä¹Ÿæ˜¯åŒä¸€ä¸ªæ‰èƒ½è®¤ä¸ºä»–ä»¬æ˜¯åŒä¸€ä¸ª</strong>ã€‚</p>
<h1 id="2-JVMæ•´ä½“ç»“æ„çš„æ·±åº¦å‰–æ"><a href="#2-JVMæ•´ä½“ç»“æ„çš„æ·±åº¦å‰–æ" class="headerlink" title="2. JVMæ•´ä½“ç»“æ„çš„æ·±åº¦å‰–æ"></a>2. JVMæ•´ä½“ç»“æ„çš„æ·±åº¦å‰–æ</h1><h2 id="2-1-JVMæ•´ä½“ç»“æ„å›¾"><a href="#2-1-JVMæ•´ä½“ç»“æ„å›¾" class="headerlink" title="2.1 JVMæ•´ä½“ç»“æ„å›¾"></a>2.1 JVMæ•´ä½“ç»“æ„å›¾</h2><p><img src="https://oscimg.oschina.net/oscnet/up-1cba664a7c4e0078f707899a9ee33412c3b.png"></p>
<p>JVMçš„æ•´ä½“ç»“æ„å¦‚ä¸Šé¢æ‰€ç¤ºï¼Œä¸»è¦åˆ†æˆ3å¤§éƒ¨åˆ†ï¼š</p>
<ul>
<li>ç±»åŠ è½½å­ç³»ç»Ÿ</li>
<li>è¿è¡Œæ—¶æ•°æ®åŒº</li>
<li>å­—èŠ‚ç æ‰§è¡Œå¼•æ“</li>
</ul>
<p>æˆ‘ä»¬ç¼–å†™çš„ç¨‹åºï¼Œé€šè¿‡ç±»åŠ è½½å­ç³»ç»ŸåŠ è½½åˆ°è¿è¡Œæ—¶æ•°æ®åŒºï¼Œä¹Ÿå°±æ˜¯å†…å­˜ä¸­ï¼Œç„¶åé€šè¿‡å­—èŠ‚ç æ‰§è¡Œå¼•æ“æ¥æ‰§è¡Œï¼Œè¿™æ˜¯ä¸€ä¸ªç®€å•çš„å¤§ä½“æè¿°ã€‚å…¶ä¸­ï¼Œæœ€ä¸ºé‡è¦çš„ä¹Ÿå°±æ˜¯è¿è¡Œæ—¶æ•°æ®åŒºè¿™ä¸€éƒ¨åˆ†ï¼Œä¸œè¥¿éå¸¸é‡è¦ï¼Œä¹Ÿéå¸¸å¤šï¼Œå’Œæˆ‘ä»¬å¹³æ—¶çš„ä¼˜åŒ–ä¹Ÿæ¯æ¯ç›¸å…³ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå…·ä½“çš„å®ä¾‹æ¥å±•å¼€åˆ†åˆ«å­¦ä¹ ä¸€ä¸‹è¿è¡Œæ—¶æ•°æ®åŒºçš„æ¯ä¸ªéƒ¨åˆ†</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Math</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> initData = <span class="number">666</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> User1 user1 = <span class="keyword">new</span> User1();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compute</span><span class="params">()</span> </span>&#123; <span class="comment">//ä¸€ä¸ªæ–¹æ³•å¯¹åº”ä¸€å—æ ˆå¸§å†…å­˜åŒºåŸŸ</span></span><br><span class="line">        <span class="keyword">int</span> a = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> b = <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">int</span> c = (a + b) * <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">return</span> c;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Math math = <span class="keyword">new</span> Math();</span><br><span class="line">        math.compute();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="2-2-è™šæ‹Ÿæœºæ ˆ"><a href="#2-2-è™šæ‹Ÿæœºæ ˆ" class="headerlink" title="2.2 è™šæ‹Ÿæœºæ ˆ"></a>2.2 è™šæ‹Ÿæœºæ ˆ</h2><p>é¦–å…ˆæ˜¯è™šæ‹Ÿæœºæ ˆä¹Ÿå«åšçº¿ç¨‹æ ˆï¼Œå…¶å®å°±æ˜¯ä¹‹å‰æˆ‘ä»¬ç»å¸¸è¯´çš„ï¼Œåˆ›å»ºjavaçº¿ç¨‹çš„æ—¶å€™ï¼Œä¼šä¸ºæ¯ä¸ªçº¿ç¨‹åœ¨å†…å­˜ä¸­å­˜æ”¾ä¸€ä¸ªå•ç‹¬çš„ç©ºé—´æ¥å­˜å‚¨çº¿ç¨‹ç§æœ‰çš„æ•°æ®ï¼Œå…¶å®å°±æ˜¯çº¿ç¨‹æ ˆã€‚</p>
<p>Javaè™šæ‹Ÿæœºæ ˆï¼ˆJava Virtual Machine Stackï¼‰<strong>æ˜¯çº¿ç¨‹ç§æœ‰çš„</strong>ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸çº¿ç¨‹ç›¸åŒã€‚è™šæ‹Ÿæœºæ ˆæè¿°çš„æ˜¯Javaæ–¹æ³•æ‰§è¡Œçš„çº¿ç¨‹å†…å­˜æ¨¡å‹ï¼šæ¯ä¸ªæ–¹æ³•è¢«æ‰§è¡Œçš„æ—¶å€™ï¼ŒJavaè™šæ‹Ÿæœºéƒ½ä¼šåŒæ­¥åˆ›å»ºä¸€ä¸ªæ ˆå¸§ï¼ˆStack Frameï¼‰ç”¨äºå­˜å‚¨å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€è¿æ¥ã€æ–¹æ³•å‡ºå£ç­‰ä¿¡æ¯ã€‚æ¯ä¸€ä¸ªæ–¹æ³•è¢«è°ƒç”¨ç›´è‡³æ‰§è¡Œå®Œæ¯•çš„è¿‡ç¨‹ï¼Œå°±å¯¹åº”ç€ä¸€ä¸ªæ ˆå¸§åœ¨è™šæ‹Ÿæœºæ ˆä¸­ä»å…¥æ ˆåˆ°å‡ºæ ˆçš„è¿‡ç¨‹ã€‚</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-8bae23ae1d35aef8a88ea582d816340ed96.png"></p>
<h3 id="2-2-1-å±€éƒ¨å˜é‡è¡¨"><a href="#2-2-1-å±€éƒ¨å˜é‡è¡¨" class="headerlink" title="2.2.1 å±€éƒ¨å˜é‡è¡¨"></a>2.2.1 å±€éƒ¨å˜é‡è¡¨</h3><p>å±€éƒ¨å˜é‡è¡¨å­˜æ”¾äº†ç¼–è¯‘æœŸå¯çŸ¥çš„å„ç§Javaè™šæ‹ŸæœºåŸºæœ¬æ•°æ®ç±»å‹ï¼ˆbooleanã€byteã€charã€shortã€intã€floatã€longã€doubleï¼‰ã€å¯¹è±¡å¼•ç”¨ï¼ˆreferenceç±»å‹ï¼Œå®ƒå¹¶ä¸ç­‰åŒäºå¯¹è±¡æœ¬èº«ï¼Œå¯èƒ½æ˜¯ä¸€ä¸ªæŒ‡å‘å¯¹è±¡èµ·å§‹åœ°å€çš„å¼•ç”¨æŒ‡é’ˆï¼Œä¹Ÿå¯èƒ½æ˜¯æŒ‡å‘ä¸€ä¸ªä»£è¡¨å¯¹è±¡çš„å¥æŸ„æˆ–è€…å…¶ä»–ä¸æ­¤å¯¹è±¡ç›¸å…³çš„ä½ç½®ï¼‰å’ŒreturnAddressç±»å‹ï¼ˆæŒ‡å‘äº†ä¸€æ¡å­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ï¼‰ã€‚</p>
<blockquote>
<p>å¯¹äºå¼•ç”¨ç±»å‹çš„å¯¹è±¡ï¼Œé€šå¸¸çš„è¯´æ³•æ˜¯ï¼Œå¯¹è±¡çš„å®ä¾‹æ•°æ®å­˜æ”¾åœ¨å †ä¸­ï¼Œè€Œçº¿ç¨‹æ ˆä¸­å­˜æ”¾çš„æ˜¯è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯æ ˆä¸­å­˜æ”¾çš„æ˜¯è¿™ä¸ªå¯¹è±¡åœ¨å †å†…å­˜ä¸­å®é™…çš„å†…å­˜åœ°å€ã€‚</p>
<p>è¿™ç§è¯´æ³•å¹¶éååˆ†å‡†ç¡®ï¼Œå®é™…çœŸæ˜¯çš„æ˜¯ï¼Œæ ˆä¸­å­˜å‚¨çš„æ˜¯è¿™ä¸ªå¯¹è±¡åœ¨C++ä¸­å¯¹åº”å¯¹è±¡çš„åœ°å€ï¼Œç„¶åé‚£ä¸ªC++å¯¹è±¡æ‰æ˜¯çœŸå®æŒ‡å‘å¯¹ä¸­çš„åœ°å€ã€‚</p>
</blockquote>
<h4 id="2-2-1-1-å±€éƒ¨å˜é‡è¡¨çš„æ•°æ®æ€ä¹ˆå­˜å‚¨çš„ï¼Ÿ"><a href="#2-2-1-1-å±€éƒ¨å˜é‡è¡¨çš„æ•°æ®æ€ä¹ˆå­˜å‚¨çš„ï¼Ÿ" class="headerlink" title="2.2.1.1 å±€éƒ¨å˜é‡è¡¨çš„æ•°æ®æ€ä¹ˆå­˜å‚¨çš„ï¼Ÿ"></a>2.2.1.1 å±€éƒ¨å˜é‡è¡¨çš„æ•°æ®æ€ä¹ˆå­˜å‚¨çš„ï¼Ÿ</h4><p>è¿™äº›æ•°æ®ç±»å‹åœ¨å±€éƒ¨å˜é‡è¡¨ä¸­çš„å­˜å‚¨ç©ºé—´ä»¥ <strong><font color=red>å±€éƒ¨å˜é‡æ§½ï¼ˆSlotï¼‰</font></strong> æ¥è¡¨ç¤ºï¼Œå…¶ä¸­64ä½é•¿åº¦çš„longå’Œdoubleç±»å‹çš„æ•°æ®ä¼šå ç”¨ä¸¤ä¸ªå˜é‡æ§½ï¼Œå…¶ä½™çš„æ•°æ®ç±»å‹åªå ç”¨ä¸€ä¸ªã€‚å±€éƒ¨å˜é‡è¡¨æ‰€éœ€çš„å†…å­˜ç©ºé—´åœ¨ç¼–è¯‘æœŸé—´å®Œæˆåˆ†é…ï¼Œå½“è¿›å…¥ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•éœ€è¦åœ¨æ ˆå¸§ä¸­åˆ†é…å¤šå¤§çš„å±€éƒ¨å˜é‡ç©ºé—´æ˜¯å®Œå…¨ç¡®å®šçš„ï¼Œåœ¨æ–¹æ³•è¿è¡ŒæœŸé—´ä¸ä¼šæ”¹å˜å±€éƒ¨å˜é‡è¡¨çš„å¤§å°ã€‚</p>
<h4 id="2-2-1-2-Slotæ§½çš„ç‰¹ç‚¹"><a href="#2-2-1-2-Slotæ§½çš„ç‰¹ç‚¹" class="headerlink" title="2.2.1.2 Slotæ§½çš„ç‰¹ç‚¹"></a>2.2.1.2 Slotæ§½çš„ç‰¹ç‚¹</h4><ul>
<li><p>å½“ä¸€ä¸ªå®ä¾‹æ–¹æ³•è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œå®ƒçš„æ–¹æ³•å‚æ•°å’Œæ–¹æ³•ä½“å†…éƒ¨å®šä¹‰çš„å±€éƒ¨å˜é‡å°†ä¼šæŒ‰ç…§å£°æ˜é¡ºåºè¢«å¤åˆ¶åˆ°å±€éƒ¨å˜é‡è¡¨ä¸­çš„æ¯ä¸€ä¸ªslotä¸Š</p>
</li>
<li><p>å¦‚æœéœ€è¦è®¿é—®å±€éƒ¨å˜é‡è¡¨ä¸­ä¸€ä¸ª64bitçš„å±€éƒ¨å˜é‡å€¼æ—¶ï¼Œåªéœ€è¦ä½¿ç”¨å‰ä¸€ä¸ªç´¢å¼•å³å¯ã€‚ï¼ˆæ¯”å¦‚ï¼šè®¿é—®longæˆ–è€…doubleç±»å‹å˜é‡ï¼‰</p>
</li>
<li><p>å¦‚æœå½“å‰å¸§æ˜¯ç”±æ„é€ æ–¹æ³•æˆ–è€…å®ä¾‹æ–¹æ³•åˆ›å»ºçš„ï¼ˆæ„æ€æ˜¯å½“å‰å¸§æ‰€å¯¹åº”çš„æ–¹æ³•æ˜¯æ„é€ å™¨æ–¹æ³•æˆ–è€…æ˜¯æ™®é€šçš„å®ä¾‹æ–¹æ³•ï¼‰ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡å¼•ç”¨thiså°†ä¼šå­˜æ”¾åœ¨indexä¸º0çš„slotå¤„,å…¶ä½™çš„å‚æ•°æŒ‰ç…§å‚æ•°è¡¨é¡ºåºæ’åˆ—ã€‚**(éé™æ€æ–¹æ³•çš„å±€éƒ¨å˜é‡è¡¨index=0çš„ä½ç½®å­˜æ”¾thisæŒ‡é’ˆ)**</p>
</li>
<li><p>é™æ€æ–¹æ³•ä¸­ä¸èƒ½å¼•ç”¨thisï¼Œæ˜¯å› ä¸ºé™æ€æ–¹æ³•æ‰€å¯¹åº”çš„æ ˆå¸§å½“ä¸­çš„å±€éƒ¨å˜é‡è¡¨ä¸­ä¸å­˜åœ¨this</p>
</li>
</ul>
<h4 id="2-2-1-3-Slotæ§½çš„é‡å¤åˆ©ç”¨"><a href="#2-2-1-3-Slotæ§½çš„é‡å¤åˆ©ç”¨" class="headerlink" title="2.2.1.3 Slotæ§½çš„é‡å¤åˆ©ç”¨"></a>2.2.1.3 Slotæ§½çš„é‡å¤åˆ©ç”¨</h4><p>æ ˆå¸§ä¸­çš„å±€éƒ¨å˜é‡è¡¨ä¸­çš„æ§½ä½æ˜¯å¯ä»¥é‡å¤åˆ©ç”¨çš„ï¼Œå¦‚æœä¸€ä¸ªå±€éƒ¨å˜é‡è¿‡äº†å…¶ä½œç”¨åŸŸï¼Œé‚£ä¹ˆåœ¨å…¶ä½œç”¨åŸŸä¹‹åç”³æ˜çš„æ–°çš„å±€éƒ¨å˜é‡å°±å¾ˆæœ‰å¯èƒ½ä¼šå¤ç”¨è¿‡æœŸå±€éƒ¨å˜é‡çš„æ§½ä½ï¼Œä»è€Œè¾¾åˆ°èŠ‚çœèµ„æºçš„ç›®çš„ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> a = <span class="number">0</span>;</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> b = <span class="number">0</span>;</span><br><span class="line">            b = a+<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å˜é‡cä½¿ç”¨ä¹‹å‰ä»¥åŠç»é”€æ¯çš„å˜é‡bå æ®çš„slotä½ç½®</span></span><br><span class="line">        <span class="keyword">int</span> c = a+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ä»¥ä¸Šæƒ…å†µä¸‹ä½¿ç”¨slotçš„æ•°é‡ä¸º3ä¸ª,thiså 0å·ã€aå•ç‹¬å 1ä¸ªæ§½å·ã€cé‡å¤ä½¿ç”¨äº†bçš„æ§½å·ã€‚</p>
<h3 id="2-2-2-æ“ä½œæ•°æ ˆ"><a href="#2-2-2-æ“ä½œæ•°æ ˆ" class="headerlink" title="2.2.2 æ“ä½œæ•°æ ˆ"></a>2.2.2 æ“ä½œæ•°æ ˆ</h3><h4 id="2-2-2-1-ä»€ä¹ˆæ˜¯æ“ä½œæ•°æ ˆ"><a href="#2-2-2-1-ä»€ä¹ˆæ˜¯æ“ä½œæ•°æ ˆ" class="headerlink" title="2.2.2.1 ä»€ä¹ˆæ˜¯æ“ä½œæ•°æ ˆ"></a>2.2.2.1 ä»€ä¹ˆæ˜¯æ“ä½œæ•°æ ˆ</h4><p>ç›¸å¯¹äºæˆå‘˜å˜é‡ï¼ˆæˆ–å±æ€§ï¼‰ï¼Œå¦‚æœæ˜¯åŸºæœ¬æ•°æ®å˜é‡ï¼Œåˆ™åœ¨æ ˆä¸­åˆ›å»ºï¼Œéšæ ˆé”€æ¯è€Œé”€æ¯ã€‚å¯¹è±¡ä¸€èˆ¬åœ¨å †ä¸­åˆ›å»ºï¼Œæ ˆä¸­å¯¹è±¡å¥æŸ„ä¸ºå †ä¸­å¯¹è±¡çš„å¼•ç”¨ã€‚</p>
<blockquote>
<p> <strong>é€ƒé€¸åˆ†æå¯åœ¨æ ˆä¸­åˆ›å»ºå¯¹è±¡</strong> é€ƒé€¸åˆ†æå¤§æ¦‚å€¼çš„æ˜¯å¯¹è±¡æ°¸è¿œåªä½œç”¨äºå½“å‰æ–¹æ³•ï¼ˆæ ˆæ¡¢ï¼‰çš„æ—¶å€™ï¼Œå¯¹è±¡çš„åˆ›å»ºä¼šé€‰æ‹©ç›´æ¥åœ¨æ ˆä¸Šï¼Œè€Œä¸ä¼šåœ¨å †ä¸Šåˆ›å»ºã€‚</p>
</blockquote>
<p>æ˜¯ä¸€ä¸ªå…ˆè¿›åå‡ºçš„æ ˆç»“æ„,åªè¦çš„ä½œç”¨æ˜¯åœ¨ç¨‹åºè¿è¡ŒæœŸé—´å­˜å‚¨è®¡ç®—æ‰€éœ€è¦çš„å€¼æˆ–è€…ä¸´æ—¶ç»“æœ</p>
<p>åœ¨æ–¹æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ ¹æ®å­—èŠ‚ç æŒ‡ä»¤ï¼Œå¾€æ ˆä¸­å†™å…¥æ•°æ®æˆ–æå–æ•°æ®ï¼Œå³å…¥æ ˆï¼ˆpushï¼‰æˆ–å‡ºæ ˆï¼ˆpopï¼‰,æŸäº›å­—èŠ‚ç æŒ‡ä»¤å°†å€¼å‹å…¥æ“ä½œæ•°æ ˆï¼Œå…¶ä½™çš„å­—èŠ‚ç æŒ‡ä»¤å°†æ“ä½œæ•°å–å‡ºæ ˆï¼Œä½¿ç”¨ä»–ä»¬åå†æŠŠç»“æœå‹å…¥æ ˆã€‚ï¼ˆå¦‚å­—èŠ‚ç æŒ‡ä»¤bipushæ“ä½œï¼‰æ¯”å¦‚ï¼šæ‰§è¡Œå¤åˆ¶ã€äº¤æ¢ã€æ±‚å’Œç­‰æ“ä½œã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">iconst_5 å°†<span class="keyword">int</span>ç±»å‹å¸¸é‡<span class="number">5</span>å‹å…¥æ ˆ</span><br><span class="line">lconst_0 å°†<span class="keyword">long</span>ç±»å‹å¸¸é‡<span class="number">0</span>å‹å…¥æ ˆ</span><br><span class="line">lconst_1 å°†<span class="keyword">long</span>ç±»å‹å¸¸é‡<span class="number">1</span>å‹å…¥æ ˆ</span><br><span class="line">fconst_0 å°†<span class="keyword">float</span>ç±»å‹å¸¸é‡<span class="number">0</span>å‹å…¥æ ˆ</span><br><span class="line">fconst_1 å°†<span class="keyword">float</span>ç±»å‹å¸¸é‡<span class="number">1</span>å‹å…¥æ ˆ</span><br><span class="line">dconst_0 å°†<span class="keyword">double</span>ç±»å‹å¸¸é‡<span class="number">0</span>å‹å…¥æ ˆ</span><br><span class="line">dconst_1 å°†<span class="keyword">double</span>ç±»å‹å¸¸é‡<span class="number">1</span>å‹å…¥æ ˆ</span><br><span class="line">bipush å°†ä¸€ä¸ª<span class="number">8</span>ä½å¸¦ç¬¦å·æ•´æ•°å‹å…¥æ ˆ</span><br><span class="line">sipush å°†<span class="number">16</span>ä½å¸¦ç¬¦å·æ•´æ•°å‹å…¥æ ˆ</span><br><span class="line">ldc æŠŠå¸¸é‡æ± ä¸­çš„é¡¹å‹å…¥æ ˆ</span><br><span class="line">ldc_w æŠŠå¸¸é‡æ± ä¸­çš„é¡¹å‹å…¥æ ˆ(ä½¿ç”¨å®½ç´¢å¼•)</span><br><span class="line">ldc2_w æŠŠå¸¸é‡æ± ä¸­<span class="keyword">long</span>ç±»å‹æˆ–è€…<span class="keyword">double</span>ç±»å‹çš„é¡¹å‹å…¥æ ˆ(ä½¿ç”¨å®½ç´¢å¼•) ä»æ ˆä¸­çš„å±€éƒ¨å˜é‡ä¸­è£…è½½å€¼çš„æŒ‡ä»¤</span><br><span class="line">iload ä»å±€éƒ¨å˜é‡ä¸­è£…è½½<span class="keyword">int</span>ç±»å‹å€¼</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢æ˜¯ä¸€äº›å±€éƒ¨å˜é‡çš„æ“ä½œæŒ‡ä»¤ã€‚</p>
<p>æ¯”å¦‚ä¸Šé¢Mathçš„æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compute</span><span class="params">()</span> </span>&#123; <span class="comment">//ä¸€ä¸ªæ–¹æ³•å¯¹åº”ä¸€å—æ ˆå¸§å†…å­˜åŒºåŸŸ</span></span><br><span class="line">        <span class="keyword">int</span> a = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> b = <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">int</span> c = (a + b) * <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">return</span> c;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç»è¿‡åæ±‡ç¼–ä¹‹åå¯ä»¥çœ‹åˆ°è¿™ä¸ªjavaä»£ç å¯¹åº”çš„jvmæŒ‡ä»¤ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compute</span><span class="params">()</span></span>;</span><br><span class="line">    Code:</span><br><span class="line">       <span class="number">0</span>: iconst_1</span><br><span class="line">       <span class="number">1</span>: istore_1</span><br><span class="line">       <span class="number">2</span>: iconst_2</span><br><span class="line">       <span class="number">3</span>: istore_2</span><br><span class="line">       <span class="number">4</span>: iload_1</span><br><span class="line">       <span class="number">5</span>: iload_2</span><br><span class="line">       <span class="number">6</span>: iadd</span><br><span class="line">       <span class="number">7</span>: bipush        <span class="number">10</span></span><br><span class="line">       <span class="number">9</span>: imul</span><br><span class="line">      <span class="number">10</span>: istore_3</span><br><span class="line">      <span class="number">11</span>: iload_3</span><br><span class="line">      <span class="number">12</span>: ireturn</span><br></pre></td></tr></table></figure>



<h4 id="2-2-2-2-æ“ä½œæ•°æ ˆæœ‰ä»€ä¹ˆç‰¹ç‚¹"><a href="#2-2-2-2-æ“ä½œæ•°æ ˆæœ‰ä»€ä¹ˆç‰¹ç‚¹" class="headerlink" title="2.2.2.2 æ“ä½œæ•°æ ˆæœ‰ä»€ä¹ˆç‰¹ç‚¹"></a>2.2.2.2 æ“ä½œæ•°æ ˆæœ‰ä»€ä¹ˆç‰¹ç‚¹</h4><ul>
<li><p>æ“ä½œæ•°æ ˆï¼Œ<strong>ä¸»è¦ç”¨äºä¿å­˜è®¡ç®—è¿‡ç¨‹çš„ä¸­é—´ç»“æœï¼ŒåŒæ—¶ä½œä¸ºè®¡ç®—è¿‡ç¨‹ä¸­å˜é‡ä¸´æ—¶çš„å­˜å‚¨ç©ºé—´</strong>ã€‚</p>
</li>
<li><p>æ“ä½œæ•°æ ˆå°±æ˜¯jvmæ‰§è¡Œå¼•æ“çš„ä¸€ä¸ªå·¥ä½œåŒºï¼Œå½“ä¸€ä¸ªæ–¹æ³•å¼€å§‹æ‰§è¡Œçš„æ—¶å€™ï¼Œä¸€ä¸ªæ–°çš„æ ˆå¸§ä¹Ÿä¼šéšä¹‹è¢«åˆ›å»ºå‡ºæ¥ï¼Œè¿™ä¸ªæ–¹æ³•çš„æ“ä½œæ•°æ ˆæ˜¯ç©ºçš„</p>
</li>
<li><p>æ¯ä¸€ä¸ªæ“ä½œæ•°æ ˆéƒ½ä¼šæ‹¥æœ‰ä¸€ä¸ªæ˜ç¡®çš„æ ˆæ·±åº¦ç”¨äºå­˜å‚¨æ•°å€¼ï¼Œå…¶æ‰€éœ€çš„<strong>æœ€å¤§æ·±åº¦åœ¨ç¼–è¯‘æœŸå°±å®šä¹‰å¥½äº†</strong>ï¼Œä¿å­˜åœ¨æ–¹æ³•çš„codeå±æ€§ä¸­ï¼Œä¸ºmax_stackçš„å€¼ã€‚</p>
</li>
<li><p>æ ˆä¸­çš„ä»»ä½•ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯å¯ä»¥ä»»æ„çš„javaæ•°æ®ç±»å‹.32bitçš„ç±»å‹å ç”¨ä¸€ä¸ªæ ˆå•ä½æ·±åº¦,64bitçš„ç±»å‹å ç”¨ä¸¤ä¸ªæ ˆæ·±åº¦å•ä½</p>
</li>
<li><p>æ“ä½œæ•°æ ˆå¹¶éé‡‡ç”¨è®¿é—®ç´¢å¼•çš„æ–¹å¼æ¥è¿›è¡Œæ•°æ®è®¿é—®çš„ï¼Œè€Œæ˜¯åªèƒ½é€šè¿‡æ ‡å‡†çš„å…¥æ ˆpushå’Œå‡ºæ ˆpopæ“ä½œæ¥å®Œæˆä¸€æ¬¡æ•°æ®è®¿é—®</p>
</li>
<li><p>å¦‚æœè¢«è°ƒç”¨çš„æ–¹æ³•å¸¦æœ‰è¿”å›å€¼çš„è¯ï¼Œå…¶è¿”å›å€¼å°†ä¼šè¢«å‹å…¥å½“å‰æ ˆå¸§çš„æ“ä½œæ•°æ ˆä¸­ï¼Œå¹¶æ›´æ–°PCå¯„å­˜å™¨ä¸­ä¸‹ä¸€æ¡éœ€è¦æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤ã€‚</p>
</li>
<li><p>æ“ä½œæ•°æ ˆä¸­çš„å…ƒç´ çš„æ•°æ®ç±»å‹å¿…é¡»ä¸å­—èŠ‚ç æŒ‡ä»¤çš„åºåˆ—ä¸¥æ ¼åŒ¹é…ï¼Œè¿™ç”±ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æœŸé—´è¿›è¡ŒéªŒè¯ï¼ŒåŒæ—¶åœ¨ç±»åŠ è½½è¿‡ç¨‹ä¸­çš„ç±»éªŒè¯é˜¶æ®µçš„æ•°æ®æµåˆ†æé˜¶æ®µè¦å†æ¬¡éªŒè¯ã€‚</p>
</li>
</ul>
<h3 id="2-2-3-åŠ¨æ€é“¾æ¥"><a href="#2-2-3-åŠ¨æ€é“¾æ¥" class="headerlink" title="2.2.3 åŠ¨æ€é“¾æ¥"></a>2.2.3 åŠ¨æ€é“¾æ¥</h3><p>ä¸Šé¢è®²ç±»åŠ è½½çš„æ—¶å€™åº”è¯¥æåˆ°è¿‡ï¼Œåœ¨è§£æé˜¶æ®µ ï¼Œä¼šæŠŠç¬¦å·å¼•ç”¨è®¾ç½®æˆç›´æ¥å¼•ç”¨ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Math math = <span class="keyword">new</span> Math();</span><br><span class="line">        math.compute();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ¯”å¦‚mainæ–¹æ³•ï¼Œå°±æ˜¯é™æ€ç¬¦å· ï¼Œè€Œ <code>math.compute();</code>åˆ™åªèƒ½åœ¨è¿è¡Œæ—¶åŠ¨æ€è·å–ã€‚</p>
<blockquote>
<p>è¿™éƒ¨åˆ†æ¶‰åŠåˆ°äº†javaç‰¹æ€§ä¸­çš„ <strong>å¤šæ€</strong></p>
</blockquote>
<h4 id="2-2-3-1-ä»€ä¹ˆæ˜¯é™æ€é“¾æ¥ï½œåŠ¨æ€é“¾æ¥"><a href="#2-2-3-1-ä»€ä¹ˆæ˜¯é™æ€é“¾æ¥ï½œåŠ¨æ€é“¾æ¥" class="headerlink" title="2.2.3.1 ä»€ä¹ˆæ˜¯é™æ€é“¾æ¥ï½œåŠ¨æ€é“¾æ¥"></a>2.2.3.1 ä»€ä¹ˆæ˜¯é™æ€é“¾æ¥ï½œåŠ¨æ€é“¾æ¥</h4><ul>
<li><strong>é™æ€é“¾æ¥</strong></li>
</ul>
<p>å½“ä¸€ä¸ª å­—èŠ‚ç æ–‡ä»¶è¢«è£…è½½è¿›JVMå†…éƒ¨æ—¶ï¼Œå¦‚æœè¢«è°ƒç”¨çš„ç›®æ ‡æ–¹æ³•åœ¨ç¼–è¯‘æœŸå¯çŸ¥ï¼Œä¸”è¿è¡ŒæœŸä¿æŒä¸å˜æ—¶ã€‚è¿™ç§æƒ…å†µä¸‹å°†è°ƒç”¨æ–¹æ³•çš„ç¬¦å·å¼•ç”¨è½¬æ¢ä¸ºç›´æ¥å¼•ç”¨çš„è¿‡ç¨‹ç§°ä¹‹ä¸ºé™æ€é“¾æ¥ã€‚</p>
<ul>
<li><strong>åŠ¨æ€é“¾æ¥</strong></li>
</ul>
<p>å¦‚æœè¢«è°ƒç”¨çš„æ–¹æ³•åœ¨ç¼–è¯‘æœŸæ— æ³•è¢«ç¡®å®šä¸‹æ¥ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªèƒ½å¤Ÿåœ¨ç¨‹åºè¿è¡ŒæœŸå°†è°ƒç”¨æ–¹æ³•çš„ç¬¦å·å¼•ç”¨è½¬æ¢ä¸ºç›´æ¥å¼•ç”¨ï¼Œç”±äºè¿™ç§å¼•ç”¨è½¬æ¢è¿‡ç¨‹å…·å¤‡åŠ¨æ€æ€§ï¼Œå› æ­¤ä¹Ÿå°±è¢«ç§°ä¹‹ä¸ºåŠ¨æ€é“¾æ¥ã€‚</p>
<h4 id="2-2-3-2-ä»€ä¹ˆæ˜¯ç»‘å®šï¼Ÿ"><a href="#2-2-3-2-ä»€ä¹ˆæ˜¯ç»‘å®šï¼Ÿ" class="headerlink" title="2.2.3.2 ä»€ä¹ˆæ˜¯ç»‘å®šï¼Ÿ"></a>2.2.3.2 ä»€ä¹ˆæ˜¯ç»‘å®šï¼Ÿ</h4><p>å¯¹åº”çš„æ–¹æ³•çš„ç»‘å®šæœºåˆ¶ä¸ºï¼š<strong>æ—©èµ·ç»‘å®š</strong>ï¼ˆEarly Bindingï¼‰å’Œ<strong>æ™šæœŸç»‘å®š</strong>ï¼ˆLate Bingdingï¼‰ã€‚ç»‘å®šæ˜¯ä¸€ä¸ªå­—æ®µã€æ–¹æ³•æˆ–è€…ç±»åœ¨ç¬¦å·å¼•ç”¨è¢«æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨çš„è¿‡ç¨‹ï¼Œè¿™ä»…ä»…å‘ç”Ÿä¸€æ¬¡ã€‚</p>
<ul>
<li><strong>æ—©æœŸç»‘å®š</strong></li>
</ul>
<p>æ—©æœŸç»‘å®šå°±æ˜¯æŒ‡è¢«è°ƒç”¨çš„ç›®æ ‡æ–¹æ³•å¦‚æœåœ¨ç¼–è¯‘æœŸå¯çŸ¥ï¼Œä¸”è¿è¡ŒæœŸä¿æŒä¸å˜æ—¶ï¼Œå³å¯å°†è¿™ä¸ªæ–¹æ³•ä¸æ‰€å±çš„ç±»å‹è¿›è¡Œç»‘å®šï¼Œè¿™æ ·ä¸€æ¥ï¼Œç”±äºæ˜ç¡®äº†è¢«è°ƒç”¨çš„ç›®æ ‡æ–¹æ³•ç©¶ç«Ÿæ˜¯å“ªä¸€ä¸ªï¼Œå› æ­¤ä¹Ÿå°±å¯ä»¥ä½¿ç”¨é™æ€é“¾æ¥çš„æ–¹å¼å°†ç¬¦å·å¼•ç”¨è½¬æ¢ä¸ºç›´æ¥å¼•ç”¨ã€‚</p>
<ul>
<li><strong>æ™šæœŸç»‘å®š</strong></li>
</ul>
<p>å¦‚æœè¢«è°ƒç”¨çš„æ–¹æ³•åœ¨ç¼–è¯‘æœŸæ— æ³•è¢«ç¡®å®šä¸‹æ¥ï¼Œåªèƒ½å¤Ÿåœ¨ç¨‹åºè¿è¡ŒæœŸæ ¹æ®å®é™…çš„ç±»å‹ç»‘å®šç›¸å…³çš„æ–¹æ³•ï¼Œè¿™ç§ç»‘å®šæ–¹å¼ä¹Ÿå°±è¢«ç§°ä¹‹ä¸ºæ™šæœŸç»‘å®šã€‚</p>
<h4 id="2-2-3-3-æ–¹æ³•è°ƒç”¨æ˜¯æ€ä¹ˆå®ç°çš„"><a href="#2-2-3-3-æ–¹æ³•è°ƒç”¨æ˜¯æ€ä¹ˆå®ç°çš„" class="headerlink" title="2.2.3.3 æ–¹æ³•è°ƒç”¨æ˜¯æ€ä¹ˆå®ç°çš„"></a>2.2.3.3 æ–¹æ³•è°ƒç”¨æ˜¯æ€ä¹ˆå®ç°çš„</h4><ul>
<li><p>æ™®é€šè°ƒç”¨æŒ‡ä»¤ï¼š</p>
<ul>
<li><p>1.<code>invokestatic</code>ï¼šè°ƒç”¨é™æ€æ–¹æ³•ï¼Œè§£æé˜¶æ®µç¡®å®šå”¯ä¸€æ–¹æ³•ç‰ˆæœ¬ï¼›</p>
</li>
<li><p>2.<code>invokespecial</code>:è°ƒç”¨æ–¹æ³•ã€ç§æœ‰åŠçˆ¶ç±»æ–¹æ³•ï¼Œè§£æé˜¶æ®µç¡®å®šå”¯ä¸€æ–¹æ³•ç‰ˆæœ¬ï¼›</p>
</li>
<li><p>3.<code>invokevirtual</code>è°ƒç”¨æ‰€æœ‰è™šæ–¹æ³•ï¼›</p>
</li>
<li><p>4.<code>invokeinterface</code>ï¼šè°ƒç”¨æ¥å£æ–¹æ³•ï¼›</p>
</li>
</ul>
</li>
<li><p>åŠ¨æ€è°ƒç”¨æŒ‡ä»¤ï¼ˆJava7æ–°å¢ï¼‰ï¼š</p>
<ul>
<li>5.<code>invokedynamic</code>ï¼šåŠ¨æ€è§£æå‡ºéœ€è¦è°ƒç”¨çš„æ–¹æ³•ï¼Œç„¶åæ‰§è¡Œ</li>
</ul>
</li>
</ul>
<p>å‰å››æ¡æŒ‡ä»¤å›ºåŒ–åœ¨è™šæ‹Ÿæœºå†…éƒ¨ï¼Œæ–¹æ³•çš„è°ƒç”¨æ‰§è¡Œä¸å¯äººä¸ºå¹²é¢„ï¼Œè€Œ<code>invokedynamic</code>æŒ‡ä»¤åˆ™æ”¯æŒç”±ç”¨æˆ·ç¡®å®šæ–¹æ³•ç‰ˆæœ¬ã€‚</p>
<p>å…¶ä¸­invokestaticæŒ‡ä»¤å’ŒinvokespecialæŒ‡ä»¤è°ƒç”¨çš„æ–¹æ³•ç§°ä¸ºéè™šæ–¹æ³•ï¼›</p>
<p>å…¶ä¸­invokevirtualï¼ˆfinalä¿®é¥°çš„é™¤å¤–ï¼ŒJVMä¼šæŠŠfinalæ–¹æ³•è°ƒç”¨ä¹Ÿå½’ä¸ºinvokevirtualæŒ‡ä»¤ï¼Œä½†è¦æ³¨æ„finalæ–¹æ³•è°ƒç”¨ä¸æ˜¯è™šæ–¹æ³•ï¼‰ã€invokeinterfaceæŒ‡ä»¤è°ƒç”¨çš„æ–¹æ³•ç§°ç§°ä¸ºè™šæ–¹æ³•ã€‚</p>
<p>å¦‚ä½•éªŒè¯ä¸Šé¢æ‰€è¯´çš„å‘¢ï¼Ÿ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è§£æè°ƒç”¨ä¸­éè™šæ–¹æ³•ã€è™šæ–¹æ³•çš„æµ‹è¯•</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Father</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Father</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Fatheré»˜è®¤æ„é€ å™¨&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">showStatic</span><span class="params">(String s)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Father show static&quot;</span>+s);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">showFinal</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Father show final&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showCommon</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Father show common&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Son</span> <span class="keyword">extends</span> <span class="title">Father</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Son</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Son</span><span class="params">(<span class="keyword">int</span> age)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Son son = <span class="keyword">new</span> Son();</span><br><span class="line">        son.show();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¸æ˜¯é‡å†™çš„çˆ¶ç±»æ–¹æ³•ï¼Œå› ä¸ºé™æ€æ–¹æ³•ä¸èƒ½è¢«é‡å†™</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">showStatic</span><span class="params">(String s)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Son show static&quot;</span>+s);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">showPrivate</span><span class="params">(String s)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Son show private&quot;</span>+s);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//invokestatic</span></span><br><span class="line">        showStatic(<span class="string">&quot; å¤§å¤´å„¿å­&quot;</span>);</span><br><span class="line">        <span class="comment">//invokestatic</span></span><br><span class="line">        <span class="keyword">super</span>.showStatic(<span class="string">&quot; å¤§å¤´å„¿å­&quot;</span>);</span><br><span class="line">        <span class="comment">//invokespecial</span></span><br><span class="line">        showPrivate(<span class="string">&quot; hello!&quot;</span>);</span><br><span class="line">        <span class="comment">//invokespecial</span></span><br><span class="line">        <span class="keyword">super</span>.showCommon();</span><br><span class="line">        <span class="comment">//invokevirtual å› ä¸ºæ­¤æ–¹æ³•å£°æ˜æœ‰final ä¸èƒ½è¢«å­ç±»é‡å†™ï¼Œæ‰€ä»¥ä¹Ÿè®¤ä¸ºè¯¥æ–¹æ³•æ˜¯éè™šæ–¹æ³•</span></span><br><span class="line">        showFinal();</span><br><span class="line">        <span class="comment">//è™šæ–¹æ³•å¦‚ä¸‹</span></span><br><span class="line">        <span class="comment">//invokevirtual</span></span><br><span class="line">        showCommon();<span class="comment">//æ²¡æœ‰æ˜¾å¼åŠ superï¼Œè¢«è®¤ä¸ºæ˜¯è™šæ–¹æ³•ï¼Œå› ä¸ºå­ç±»å¯èƒ½é‡å†™showCommon</span></span><br><span class="line">        info();</span><br><span class="line"></span><br><span class="line">        MethodInterface in = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">//invokeinterface  ä¸ç¡®å®šæ¥å£å®ç°ç±»æ˜¯å“ªä¸€ä¸ª éœ€è¦é‡å†™</span></span><br><span class="line">        in.methodA();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">info</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">MethodInterface</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">methodA</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ç„¶ååæ±‡ç¼–Son.class ï¼Œ å¾—åˆ°å¦‚ä¸‹å­—èŠ‚ç æŒ‡ä»¤æ–‡ä»¶ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">Compiled from <span class="string">&quot;Son.java&quot;</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">com</span>.<span class="title">ibli</span>.<span class="title">jvm</span>.<span class="title">Son</span> <span class="keyword">extends</span> <span class="title">com</span>.<span class="title">ibli</span>.<span class="title">jvm</span>.<span class="title">Father</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> com.ibli.jvm.Son();</span><br><span class="line">    Code:</span><br><span class="line">       <span class="number">0</span>: aload_0</span><br><span class="line">       <span class="number">1</span>: invokespecial #<span class="number">1</span>                  <span class="comment">// Method com/ibli/jvm/Father.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">       <span class="number">4</span>: <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> com.ibli.jvm.Son(<span class="keyword">int</span>);</span><br><span class="line">    Code:</span><br><span class="line">       <span class="number">0</span>: aload_0</span><br><span class="line">       <span class="number">1</span>: invokespecial #<span class="number">2</span>                  <span class="comment">// Method &quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">       <span class="number">4</span>: <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(java.lang.String[])</span></span>;</span><br><span class="line">    Code:</span><br><span class="line">       <span class="number">0</span>: <span class="keyword">new</span>           #<span class="number">3</span>                  <span class="comment">// class com/ibli/jvm/Son</span></span><br><span class="line">       <span class="number">3</span>: dup</span><br><span class="line">       <span class="number">4</span>: invokespecial #<span class="number">2</span>                  <span class="comment">// Method &quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">       <span class="number">7</span>: astore_1</span><br><span class="line">       <span class="number">8</span>: aload_1</span><br><span class="line">       <span class="number">9</span>: invokevirtual #<span class="number">4</span>                  <span class="comment">// Method show:()V</span></span><br><span class="line">      <span class="number">12</span>: <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">showStatic</span><span class="params">(java.lang.String)</span></span>;</span><br><span class="line">    Code:</span><br><span class="line">       <span class="number">0</span>: getstatic     #<span class="number">5</span>                  <span class="comment">// Field java/lang/System.out:Ljava/io/PrintStream;</span></span><br><span class="line">       <span class="number">3</span>: <span class="keyword">new</span>           #<span class="number">6</span>                  <span class="comment">// class java/lang/StringBuilder</span></span><br><span class="line">       <span class="number">6</span>: dup</span><br><span class="line">       <span class="number">7</span>: invokespecial #<span class="number">7</span>                  <span class="comment">// Method java/lang/StringBuilder.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">      <span class="number">10</span>: ldc           #<span class="number">8</span>                  <span class="comment">// String Son show static</span></span><br><span class="line">      <span class="number">12</span>: invokevirtual #<span class="number">9</span>                  <span class="comment">// Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;</span></span><br><span class="line">      <span class="number">15</span>: aload_0</span><br><span class="line">      <span class="number">16</span>: invokevirtual #<span class="number">9</span>                  <span class="comment">// Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;</span></span><br><span class="line">      <span class="number">19</span>: invokevirtual #<span class="number">10</span>                 <span class="comment">// Method java/lang/StringBuilder.toString:()Ljava/lang/String;</span></span><br><span class="line">      <span class="number">22</span>: invokevirtual #<span class="number">11</span>                 <span class="comment">// Method java/io/PrintStream.println:(Ljava/lang/String;)V</span></span><br><span class="line">      <span class="number">25</span>: <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>;</span><br><span class="line">    Code:</span><br><span class="line">       <span class="number">0</span>: ldc           #<span class="number">13</span>                 <span class="comment">// String  å¤§å¤´å„¿å­</span></span><br><span class="line">       <span class="number">2</span>: invokestatic  #<span class="number">14</span>                 <span class="comment">// Method showStatic:(Ljava/lang/String;)V</span></span><br><span class="line">       <span class="number">5</span>: ldc           #<span class="number">13</span>                 <span class="comment">// String  å¤§å¤´å„¿å­</span></span><br><span class="line">       <span class="number">7</span>: invokestatic  #<span class="number">15</span>                 <span class="comment">// Method com/ibli/jvm/Father.showStatic:(Ljava/lang/String;)V</span></span><br><span class="line">      <span class="number">10</span>: aload_0</span><br><span class="line">      <span class="number">11</span>: ldc           #<span class="number">16</span>                 <span class="comment">// String  hello!</span></span><br><span class="line">      <span class="number">13</span>: invokespecial #<span class="number">17</span>                 <span class="comment">// Method showPrivate:(Ljava/lang/String;)V</span></span><br><span class="line">      <span class="number">16</span>: aload_0</span><br><span class="line">      <span class="number">17</span>: invokespecial #<span class="number">18</span>                 <span class="comment">// Method com/ibli/jvm/Father.showCommon:()V</span></span><br><span class="line">      <span class="number">20</span>: aload_0</span><br><span class="line">      <span class="number">21</span>: invokevirtual #<span class="number">19</span>                 <span class="comment">// Method showFinal:()V</span></span><br><span class="line">      <span class="number">24</span>: aload_0</span><br><span class="line">      <span class="number">25</span>: invokevirtual #<span class="number">20</span>                 <span class="comment">// Method showCommon:()V</span></span><br><span class="line">      <span class="number">28</span>: aload_0</span><br><span class="line">      <span class="number">29</span>: invokevirtual #<span class="number">21</span>                 <span class="comment">// Method info:()V</span></span><br><span class="line">      <span class="number">32</span>: aconst_null</span><br><span class="line">      <span class="number">33</span>: astore_1</span><br><span class="line">      <span class="number">34</span>: aload_1</span><br><span class="line">      <span class="number">35</span>: invokeinterface #<span class="number">22</span>,  <span class="number">1</span>           <span class="comment">// InterfaceMethod com/ibli/jvm/MethodInterface.methodA:()V</span></span><br><span class="line">      <span class="number">40</span>: <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">info</span><span class="params">()</span></span>;</span><br><span class="line">    Code:</span><br><span class="line">       <span class="number">0</span>: <span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="2-2-4-æ–¹æ³•å‡ºå£"><a href="#2-2-4-æ–¹æ³•å‡ºå£" class="headerlink" title="2.2.4 æ–¹æ³•å‡ºå£"></a>2.2.4 æ–¹æ³•å‡ºå£</h3><p>1.è°ƒç”¨è€…ï¼ˆæ–¹æ³•çš„è°ƒç”¨è€…å¯èƒ½ä¹Ÿæ˜¯ä¸€ä¸ªæ–¹æ³•ï¼‰çš„pcè®¡æ•°å™¨çš„å€¼ä½œä¸ºè¿”å›åœ°å€ï¼Œå³è°ƒç”¨è¯¥æ–¹æ³•çš„æŒ‡ä»¤çš„ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€ã€‚è€Œé€šè¿‡å¼‚å¸¸é€€å‡ºæ—¶ï¼Œè¿”å›åœ°å€æ˜¯è¦é€šè¿‡å¼‚å¸¸è¡¨æ¥ç¡®å®šï¼Œæ ˆå¸§ä¸­ä¸€èˆ¬ä¸ä¼šä¿å­˜è¿™éƒ¨åˆ†ä¿¡æ¯ã€‚</p>
<p>2.åœ¨æ–¹æ³•æ‰§è¡Œçš„è¿‡ç¨‹ä¸­é‡åˆ°äº†å¼‚å¸¸ï¼ˆExceptionï¼‰ï¼Œå¹¶ä¸”è¿™ä¸ªå¼‚å¸¸æ²¡æœ‰åœ¨æ–¹æ³•å†…è¿›è¡Œå¤„ç†ï¼Œä¹Ÿå°±æ˜¯åªè¦åœ¨æœ¬æ–¹æ³•çš„å¼‚å¸¸è¡¨ä¸­æ²¡æœ‰æœç´ åˆ°åŒ¹é…çš„å¼‚å¸¸å¤„ç†å™¨ï¼Œå°±ä¼šå¯¼è‡´æ–¹æ³•é€€å‡ºï¼Œç®€ç§°å¼‚å¸¸å®Œæˆå‡ºå£æ–¹æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­æŠ›å‡ºå¼‚å¸¸æ—¶çš„å¼‚å¸¸å¤„ç†ï¼Œå­˜å‚¨åœ¨ä¸€ä¸ªå¼‚å¸¸å¤„ç†è¡¨ï¼Œæ–¹ä¾¿åœ¨å‘ç”Ÿå¼‚å¸¸çš„æ—¶å€™æ‰¾åˆ°å¤„ç†å¼‚å¸¸çš„ä»£ç ã€‚</p>
<h2 id="2-2-ç¨‹åºè®¡æ•°å™¨"><a href="#2-2-ç¨‹åºè®¡æ•°å™¨" class="headerlink" title="2.2 ç¨‹åºè®¡æ•°å™¨"></a>2.2 ç¨‹åºè®¡æ•°å™¨</h2><p>ç¨‹åºè®¡æ•°å™¨ä¹‹å‰ä¹Ÿè¢«ç§°ä¸ºPCå¯„å­˜å™¨ã€‚</p>
<p>ç¨‹åºè®¡æ•°å™¨ï¼ˆProgram Counter Registerï¼‰æ˜¯ä¸€å—è¾ƒå°çš„å†…å­˜ç©ºé—´ï¼Œå®ƒå¯ä»¥çœ‹ä½œæ˜¯å½“å‰çº¿ç¨‹æ‰€æ‰§è¡Œçš„å­—èŠ‚ç çš„è¡Œå·æŒ‡ç¤ºå™¨ã€‚åœ¨Javaè™šæ‹Ÿæœºçš„æ¦‚å¿µæ¨¡å‹é‡Œ ï¼Œå­—èŠ‚ç è§£é‡Šå™¨å·¥ä½œæ—¶å°±æ˜¯é€šè¿‡æ”¹å˜è¿™ä¸ªè®¡æ•°å™¨çš„å€¼æ¥é€‰å–ä¸‹ä¸€æ¡éœ€è¦æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤ï¼Œå®ƒæ˜¯ç¨‹åºæ§åˆ¶æµçš„æŒ‡ç¤ºå™¨ï¼Œåˆ†æ”¯ã€å¾ªç¯ã€è·³è½¬ã€å¼‚å¸¸å¤„ç†ã€çº¿ç¨‹æ¢å¤ç­‰åŸºç¡€åŠŸèƒ½éƒ½éœ€è¦ä¾èµ–è¿™ä¸ªè®¡æ•°å™¨æ¥å®Œæˆã€‚</p>
<p>ç”±äºJavaè™šæ‹Ÿæœºçš„å¤šçº¿ç¨‹æ˜¯é€šè¿‡çº¿ç¨‹è½®æµåˆ‡æ¢ã€åˆ†é…å¤„ç†å™¨æ‰§è¡Œæ—¶é—´çš„æ–¹å¼æ¥å®ç°çš„ï¼Œåœ¨ä»»ä½•ä¸€ä¸ªç¡®å®šçš„æ—¶åˆ»ï¼Œä¸€ä¸ªå¤„ç†å™¨ï¼ˆå¯¹äºå¤šæ ¸å¤„ç†å™¨æ¥è¯´æ˜¯ä¸€ä¸ªå†…æ ¸ï¼‰éƒ½åªä¼šæ‰§è¡Œä¸€æ¡çº¿ç¨‹ä¸­çš„æŒ‡ä»¤ã€‚å› æ­¤ï¼Œä¸ºäº†çº¿ç¨‹åˆ‡æ¢åèƒ½æ¢å¤åˆ°æ­£ç¡®çš„æ‰§è¡Œä½ç½®ï¼Œæ¯æ¡çº¿ç¨‹éƒ½éœ€è¦æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ç¨‹åºè®¡æ•°å™¨ï¼Œå„æ¡çº¿ç¨‹ä¹‹é—´è®¡æ•°å™¨äº’ä¸å½±å“ï¼Œç‹¬ç«‹å­˜å‚¨ï¼Œæˆ‘ä»¬ç§°è¿™ç±»å†…å­˜åŒºåŸŸä¸ºâ€œçº¿ç¨‹ç§æœ‰â€çš„å†…å­˜ã€‚</p>
<p>å¦‚æœçº¿ç¨‹æ­£åœ¨æ‰§è¡Œçš„æ˜¯ä¸€ä¸ªJavaæ–¹æ³•ï¼Œè¿™ä¸ªè®¡æ•°å™¨è®°å½•çš„æ˜¯æ­£åœ¨æ‰§è¡Œçš„è™šæ‹Ÿæœºå­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ï¼›å¦‚æœæ­£åœ¨æ‰§è¡Œçš„æ˜¯æœ¬åœ°ï¼ˆNativeï¼‰æ–¹æ³•ï¼Œ<strong>è¿™ä¸ªè®¡æ•°å™¨å€¼åˆ™åº”ä¸ºç©º</strong>ï¼ˆUndefinedï¼‰ã€‚</p>
<p><strong><font color=red>æ­¤å†…å­˜åŒºåŸŸæ˜¯å”¯ä¸€ä¸€ä¸ªåœ¨ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹ä¸­æ²¡æœ‰è§„å®šä»»ä½•OutOfMemoryErroræƒ…å†µçš„åŒºåŸŸã€‚</font></strong></p>
<h2 id="2-3-æœ¬åœ°æ–¹æ³•æ ˆ"><a href="#2-3-æœ¬åœ°æ–¹æ³•æ ˆ" class="headerlink" title="2.3 æœ¬åœ°æ–¹æ³•æ ˆ"></a>2.3 æœ¬åœ°æ–¹æ³•æ ˆ</h2><p>æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Method Stacksï¼‰ä¸è™šæ‹Ÿæœºæ ˆæ‰€å‘æŒ¥çš„ä½œç”¨æ˜¯éå¸¸ç›¸ä¼¼çš„ï¼Œå…¶åŒºåˆ«åªæ˜¯è™šæ‹Ÿæœºæ ˆä¸ºè™šæ‹Ÿæœºæ‰§è¡ŒJavaæ–¹æ³•ï¼ˆä¹Ÿå°±æ˜¯å­—èŠ‚ç ï¼‰æœåŠ¡ï¼Œè€Œæœ¬åœ°æ–¹æ³•æ ˆåˆ™æ˜¯ä¸ºè™šæ‹Ÿæœºä½¿ç”¨åˆ°çš„æœ¬åœ°ï¼ˆNativeï¼‰æ–¹æ³•æœåŠ¡ã€‚</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-8bae23ae1d35aef8a88ea582d816340ed96.png"></p>
<p><strong>æœ¬åœ°æ–¹æ³•æ ˆä¹Ÿæ˜¯çº¿ç¨‹ç§æœ‰çš„ã€‚</strong></p>
<h2 id="2-4-æ–¹æ³•åŒº"><a href="#2-4-æ–¹æ³•åŒº" class="headerlink" title="2.4 æ–¹æ³•åŒº"></a>2.4 æ–¹æ³•åŒº</h2><h3 id="2-4-1-ä»€ä¹ˆæ˜¯æ–¹æ³•åŒº"><a href="#2-4-1-ä»€ä¹ˆæ˜¯æ–¹æ³•åŒº" class="headerlink" title="2.4.1 ä»€ä¹ˆæ˜¯æ–¹æ³•åŒº"></a>2.4.1 ä»€ä¹ˆæ˜¯æ–¹æ³•åŒº</h3><p>æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰ä¸Javaå †ä¸€æ ·ï¼Œæ˜¯å„ä¸ªçº¿ç¨‹å…±äº«çš„å†…å­˜åŒºåŸŸï¼Œå®ƒç”¨äºå­˜å‚¨å·²è¢«è™šæ‹ŸæœºåŠ è½½çš„ç±»å‹ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ç¼“å­˜ç­‰æ•°æ®ã€‚è™½ç„¶ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹ä¸­æŠŠæ–¹æ³•åŒºæè¿°ä¸ºå †çš„ä¸€ä¸ªé€»è¾‘éƒ¨åˆ†ï¼Œä½†æ˜¯å®ƒå´æœ‰ä¸€ä¸ªåˆ«åå«ä½œâ€œéå †â€ï¼ˆNon-Heapï¼‰ï¼Œç›®çš„æ˜¯ä¸Javaå †åŒºåˆ†å¼€æ¥ã€‚</p>
<h3 id="2-4-2-æ–¹æ³•åŒºçš„å‚æ•°é…ç½®"><a href="#2-4-2-æ–¹æ³•åŒºçš„å‚æ•°é…ç½®" class="headerlink" title="2.4.2 æ–¹æ³•åŒºçš„å‚æ•°é…ç½®"></a>2.4.2 æ–¹æ³•åŒºçš„å‚æ•°é…ç½®</h3><p>å…³äºå…ƒç©ºé—´çš„JVMå‚æ•°æœ‰ä¸¤ä¸ªï¼š-XX:MetaspaceSize=Nå’Œ -XX:MaxMetaspaceSize=N<br>-XXï¼šMaxMetaspaceSizeï¼š è®¾ç½®å…ƒç©ºé—´æœ€å¤§å€¼ï¼Œ é»˜è®¤æ˜¯-1ï¼Œ å³ä¸é™åˆ¶ï¼Œ æˆ–è€…è¯´åªå—é™äºæœ¬åœ°å†…å­˜å¤§å°ã€‚<br>-XXï¼šMetaspaceSizeï¼š æŒ‡å®šå…ƒç©ºé—´è§¦å‘Fullgcçš„åˆå§‹é˜ˆå€¼(å…ƒç©ºé—´æ— å›ºå®šåˆå§‹å¤§å°)ï¼Œ ä»¥å­—èŠ‚ä¸ºå•ä½ï¼Œé»˜è®¤æ˜¯21Må·¦å³ï¼Œè¾¾åˆ°è¯¥å€¼å°±ä¼šè§¦å‘full gcè¿›è¡Œç±»å‹å¸è½½ï¼Œ åŒæ—¶æ”¶é›†å™¨ä¼šå¯¹è¯¥å€¼è¿›è¡Œè°ƒæ•´ï¼š å¦‚æœé‡Šæ”¾äº†å¤§é‡çš„ç©ºé—´ï¼Œ å°±é€‚å½“é™ä½è¯¥å€¼ï¼› å¦‚æœé‡Šæ”¾äº†å¾ˆå°‘çš„ç©ºé—´ï¼Œ é‚£ä¹ˆåœ¨ä¸è¶…è¿‡-XXï¼šMaxMetaspaceSizeï¼ˆå¦‚æœè®¾ç½®äº†çš„è¯ï¼‰ çš„æƒ…å†µä¸‹ï¼Œ é€‚å½“æé«˜è¯¥å€¼ã€‚</p>
<blockquote>
<p>è¿™ä¸ªè·Ÿæ—©æœŸjdkç‰ˆæœ¬çš„-XX:PermSizeå‚æ•°æ„æ€ä¸ä¸€æ ·ï¼Œ-XX:PermSizeä»£è¡¨æ°¸ä¹…ä»£çš„åˆå§‹å®¹é‡ã€‚</p>
</blockquote>
<p>ç”±äºè°ƒæ•´å…ƒç©ºé—´çš„å¤§å°éœ€è¦Full GCï¼Œè¿™æ˜¯éå¸¸æ˜‚è´µçš„æ“ä½œï¼Œå¦‚æœåº”ç”¨åœ¨å¯åŠ¨çš„æ—¶å€™å‘ç”Ÿå¤§é‡Full GCï¼Œé€šå¸¸éƒ½æ˜¯ç”±äºæ°¸ä¹…ä»£æˆ–å…ƒç©ºé—´å‘ç”Ÿäº†å¤§å°è°ƒæ•´ï¼ŒåŸºäºè¿™ç§æƒ…å†µï¼Œä¸€èˆ¬å»ºè®®åœ¨JVMå‚æ•°ä¸­å°†MetaspaceSizeå’ŒMaxMetaspaceSizeè®¾ç½®æˆä¸€æ ·çš„å€¼ï¼Œå¹¶è®¾ç½®å¾—æ¯”åˆå§‹å€¼è¦å¤§ï¼Œå¯¹äº8Gç‰©ç†å†…å­˜çš„æœºå™¨æ¥è¯´ï¼Œä¸€èˆ¬æˆ‘ä¼šå°†è¿™ä¸¤ä¸ªå€¼éƒ½è®¾ç½®ä¸º256Mã€‚</p>
<p><strong>Full GCä¼šåŒæ—¶æ”¶é›†æ–¹æ³•åŒºå’Œå †</strong></p>
<h2 id="2-5-å †"><a href="#2-5-å †" class="headerlink" title="2.5 å †"></a>2.5 å †</h2><h3 id="2-5-1-å †çš„åˆ†åŒºç»“æ„"><a href="#2-5-1-å †çš„åˆ†åŒºç»“æ„" class="headerlink" title="2.5.1 å †çš„åˆ†åŒºç»“æ„"></a>2.5.1 å †çš„åˆ†åŒºç»“æ„</h3><p><img src="https://oscimg.oschina.net/oscnet/up-b0c839ade955bb783a355f34bf004bdab86.png"></p>
<p>Javaå †ï¼ˆJava Heapï¼‰æ˜¯è™šæ‹Ÿæœºæ‰€ç®¡ç†çš„å†…å­˜ä¸­æœ€å¤§çš„ä¸€å—ã€‚Javaå †æ˜¯è¢«æ‰€æœ‰çº¿ç¨‹å…±äº«çš„ä¸€å—å†…å­˜åŒºåŸŸï¼Œåœ¨è™šæ‹Ÿæœºå¯åŠ¨æ—¶åˆ›å»ºã€‚æ­¤å†…å­˜åŒºåŸŸçš„å”¯ä¸€ç›®çš„å°±æ˜¯å­˜æ”¾å¯¹è±¡å®ä¾‹ï¼ŒJavaä¸–ç•Œé‡Œâ€œå‡ ä¹â€æ‰€æœ‰çš„å¯¹è±¡å®ä¾‹éƒ½åœ¨è¿™é‡Œåˆ†é…å†…å­˜ã€‚</p>
<p>Javaå †æ˜¯åƒåœ¾æ”¶é›†å™¨ç®¡ç†çš„å†…å­˜åŒºåŸŸï¼Œå› æ­¤ä¸€äº›èµ„æ–™ä¸­å®ƒä¹Ÿè¢«ç§°ä½œâ€œGCå †</p>
<blockquote>
<p>å¦‚æœä»åˆ†é…å†…å­˜çš„è§’åº¦çœ‹ï¼Œæ‰€æœ‰çº¿ç¨‹å…±äº«çš„Javaå †ä¸­å¯ä»¥åˆ’åˆ†å‡ºå¤šä¸ªçº¿ç¨‹ç§æœ‰çš„åˆ†é…ç¼“å†²åŒºï¼ˆThread Local Allocation Bufferï¼ŒTLABï¼‰ï¼Œä»¥æå‡å¯¹è±¡åˆ†é…æ—¶çš„æ•ˆç‡ã€‚</p>
</blockquote>
<h3 id="2-5-2-ä¸ºä»€ä¹ˆedenå’Œserviceçš„é…æ¯”æ˜¯8-1"><a href="#2-5-2-ä¸ºä»€ä¹ˆedenå’Œserviceçš„é…æ¯”æ˜¯8-1" class="headerlink" title="2.5.2 ä¸ºä»€ä¹ˆedenå’Œserviceçš„é…æ¯”æ˜¯8:1"></a>2.5.2 ä¸ºä»€ä¹ˆedenå’Œserviceçš„é…æ¯”æ˜¯8:1</h3><p> è¿™ä¸ªå’Œåƒåœ¾å›æ”¶æœºåˆ¶æœ‰å…³ï¼Œä¸»è¦è€ƒè™‘åˆ°å¤§éƒ¨åˆ†å¯¹è±¡éƒ½æ˜¯â€œæœç”Ÿæš®æ­»â€ï¼Œæ¯æ¬¡åƒåœ¾å›æ”¶çš„æ—¶å€™ï¼Œéƒ½å›æ”¶ eden + 1ä¸ªserviceåŒºçš„å¯¹è±¡ï¼Œè€Œå‰©ä½™çš„å¯¹è±¡ç§»åŠ¨åˆ°å¦ä¸€ä¸ªserviceåŒºã€‚</p>
<p>ä¹Ÿæœ‰ä¸€äº›å¯¹è±¡å› ä¸ºæŸäº›åŸå› ï¼Œæ¯”å¦‚åˆ†ä»£å¹´é¾„è¾¾åˆ°15ï¼Œä¼šè¢«ç§»åŠ¨åˆ°è€å¹´ä»£ã€‚</p>
<p>è¿™ä¸ª8:1èƒ½å¤Ÿæ›´å¤§é™åº¦çš„åˆ©ç”¨å †çš„èµ„æºã€‚</p>
<h3 id="2-5-3-ä»€ä¹ˆæ˜¯åƒåœ¾å›æ”¶"><a href="#2-5-3-ä»€ä¹ˆæ˜¯åƒåœ¾å›æ”¶" class="headerlink" title="2.5.3 ä»€ä¹ˆæ˜¯åƒåœ¾å›æ”¶"></a>2.5.3 ä»€ä¹ˆæ˜¯åƒåœ¾å›æ”¶</h3><p>è¿™ä¸ªä¸‹é¢ä¼šæœ‰ä¸“é—¨çš„åƒåœ¾å›æ”¶ç« èŠ‚å±•å¼€ã€‚ä¸»è¦æ˜¯æ¸…ç†å†…å­˜ä¸­æ²¡ç”¨çš„å¯¹è±¡ï¼Œæ˜¯é‡Šæ”¾å†…å­˜ã€‚è‡³äºåˆ¤æ–­å“ªäº›å¯¹è±¡æ˜¯â€œåƒåœ¾â€ï¼Œæœ‰å¼•ç”¨è®¡æ•°æ³•å’Œå¯è¾¾æ€§åˆ†æç­‰ã€‚</p>
<p>ä¸åŒåˆ†åŒºçš„å¯¹è±¡ï¼Œæ ¹æ®å®ƒçš„ç‰¹æ€§ä¹Ÿæœ‰ä¸åŒçš„åƒåœ¾å›æ”¶ç®—æ³•å’Œåƒåœ¾æ”¶é›†å™¨ã€‚</p>
<p>è¿™é‡Œæˆ‘ä»¬åªéœ€è¦å †æ˜¯åƒåœ¾å›æ”¶çš„ä¸»è¦åŒºåŸŸï¼Œå½“ç„¶æ–¹æ³•åŒºä¹Ÿä¼šè¿›è¡Œåƒåœ¾å›æ”¶ã€‚</p>
<h3 id="2-5-4-å¤§åé¼é¼çš„STW"><a href="#2-5-4-å¤§åé¼é¼çš„STW" class="headerlink" title="2.5.4 å¤§åé¼é¼çš„STW"></a>2.5.4 å¤§åé¼é¼çš„STW</h3><h4 id="2-5-4-1-ä»€ä¹ˆæ˜¯stwï¼Ÿ"><a href="#2-5-4-1-ä»€ä¹ˆæ˜¯stwï¼Ÿ" class="headerlink" title="2.5.4.1 ä»€ä¹ˆæ˜¯stwï¼Ÿ"></a>2.5.4.1 ä»€ä¹ˆæ˜¯stwï¼Ÿ</h4><p>Stop the world çš„ç®€ç§°ã€‚å°±æ˜¯åœ¨åƒåœ¾æ”¶é›†å™¨è¿›è¡ŒFull GCçš„æ—¶å€™ï¼Œéœ€è¦æš‚åœç”¨æˆ·çº¿ç¨‹ï¼Œå¯¹äºç”¨æˆ·æ¥è¯´ï¼Œå¥½åƒæœåŠ¡åœæ­¢äº†ä¸€æ ·ã€‚</p>
<p>å½“ç„¶è¿™ä¸ªæ—¶é—´æ˜¯å¾ˆçŸ­æš‚çš„ã€‚æˆ‘ä»¬è¿›è¡Œè°ƒä¼˜çš„æ—¶å€™ï¼Œä¸»è¦çš„ç›®æ ‡å°±æ˜¯ä¸ºäº†å°½é‡ç¼©çŸ­STWçš„æ—¶é—´é—´éš”å’Œå‡å°‘Young GCçš„æ¬¡æ•°ã€‚</p>
<h4 id="2-5-4-2-ä¸ºä»€ä¹ˆä¼šæœ‰stwï¼Ÿ"><a href="#2-5-4-2-ä¸ºä»€ä¹ˆä¼šæœ‰stwï¼Ÿ" class="headerlink" title="2.5.4.2 ä¸ºä»€ä¹ˆä¼šæœ‰stwï¼Ÿ"></a>2.5.4.2 ä¸ºä»€ä¹ˆä¼šæœ‰stwï¼Ÿ</h4><p>å› ä¸ºGCçš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœè¿˜æœ‰ç”¨æˆ·çº¿ç¨‹å·¥ä½œçš„è¯ï¼ŒåŠ¿å¿…ä¼šäº§ç”Ÿæ–°çš„å¯¹è±¡ï¼Œç”šè‡³æ–°çš„åƒåœ¾ã€‚è¿™æ ·ä¼šå¯¹åƒåœ¾å›æ”¶è¿‡ç¨‹é€ æˆå¹²æ‰°ï¼Œæ— æ³•åˆ¤æ–­å“ªäº›æ˜¯æ–°ç”Ÿæˆçš„åƒåœ¾å¯¹è±¡ã€‚</p>
<p><strong><font color=red>é™æ€çš„å¯¹è±¡æ˜¯å¦‚ä½•å­˜å‚¨çš„ï¼Ÿ å¼•ç”¨æ˜¯å­˜å‚¨åœ¨æ–¹æ³•åŒºçš„  å¯¹è±¡å®é™…æ˜¯å­˜å‚¨åœ¨å †çš„</font></strong></p>
<h2 id="2-6-ç›´æ¥å†…å­˜"><a href="#2-6-ç›´æ¥å†…å­˜" class="headerlink" title="2.6 ç›´æ¥å†…å­˜"></a>2.6 ç›´æ¥å†…å­˜</h2><p>ç›´æ¥å†…å­˜ï¼ˆDirect Memoryï¼‰å¹¶ä¸æ˜¯è™šæ‹Ÿæœºè¿è¡Œæ—¶æ•°æ®åŒºçš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿä¸æ˜¯ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹ä¸­å®šä¹‰çš„å†…å­˜åŒºåŸŸã€‚<strong>ä½†æ˜¯è¿™éƒ¨åˆ†å†…å­˜ä¹Ÿè¢«é¢‘ç¹åœ°ä½¿ç”¨ï¼Œè€Œä¸”ä¹Ÿå¯èƒ½å¯¼è‡´OutOfMemoryErrorå¼‚å¸¸å‡ºç°</strong>ã€‚</p>
<p>åœ¨JDK 1.4ä¸­æ–°åŠ å…¥äº†NIOï¼ˆNew Input/Outputï¼‰ç±»ï¼Œå¼•å…¥äº†ä¸€ç§åŸºäºé€šé“ï¼ˆChannelï¼‰ä¸ç¼“å†²åŒºï¼ˆBufferï¼‰çš„I/Oæ–¹å¼ï¼Œå®ƒå¯ä»¥ä½¿ç”¨Nativeå‡½æ•°åº“ç›´æ¥åˆ†é…å †å¤–å†…å­˜ï¼Œç„¶åé€šè¿‡ä¸€ä¸ªå­˜å‚¨åœ¨Javaå †é‡Œé¢çš„DirectByteBufferå¯¹è±¡ä½œä¸ºè¿™å—å†…å­˜çš„å¼•ç”¨è¿›è¡Œæ“ä½œã€‚è¿™æ ·èƒ½åœ¨ä¸€äº›åœºæ™¯ä¸­æ˜¾è‘—æé«˜æ€§èƒ½ï¼Œå› ä¸ºé¿å…äº†åœ¨Javaå †å’ŒNativeå †ä¸­æ¥å›å¤åˆ¶æ•°æ®ã€‚</p>
<p>æ˜¾ç„¶ï¼Œæœ¬æœºç›´æ¥å†…å­˜çš„åˆ†é…ä¸ä¼šå—åˆ°Javaå †å¤§å°çš„é™åˆ¶ï¼Œä½†æ˜¯ï¼Œæ—¢ç„¶æ˜¯å†…å­˜ï¼Œåˆ™è‚¯å®šè¿˜æ˜¯ä¼šå—åˆ°æœ¬æœºæ€»å†…å­˜ï¼ˆåŒ…æ‹¬ç‰©ç†å†…å­˜ã€SWAPåˆ†åŒºæˆ–è€…åˆ†é¡µæ–‡ä»¶ï¼‰å¤§å°ä»¥åŠå¤„ç†å™¨å¯»å€ç©ºé—´çš„é™åˆ¶ï¼Œä¸€èˆ¬æœåŠ¡å™¨ç®¡ç†å‘˜é…ç½®è™šæ‹Ÿæœºå‚æ•°æ—¶ï¼Œä¼šæ ¹æ®å®é™…å†…å­˜å»è®¾ç½®-Xmxç­‰å‚æ•°ä¿¡æ¯ï¼Œä½†ç»å¸¸å¿½ç•¥æ‰ç›´æ¥å†…å­˜ï¼Œä½¿å¾—å„ä¸ªå†…å­˜åŒºåŸŸæ€»å’Œå¤§äºç‰©ç†å†…å­˜é™åˆ¶ï¼ˆåŒ…æ‹¬ç‰©ç†çš„å’Œæ“ä½œç³»ç»Ÿçº§çš„é™åˆ¶ï¼‰ï¼Œä»è€Œå¯¼è‡´åŠ¨æ€æ‰©å±•æ—¶å‡ºç°OutOfMemoryErrorå¼‚å¸¸ã€‚</p>
<h2 id="2-7-è¿è¡Œæ—¶é”™è¯¯"><a href="#2-7-è¿è¡Œæ—¶é”™è¯¯" class="headerlink" title="2.7 è¿è¡Œæ—¶é”™è¯¯"></a>2.7 è¿è¡Œæ—¶é”™è¯¯</h2><h3 id="2-7-1-OOM"><a href="#2-7-1-OOM" class="headerlink" title="2.7.1 OOM"></a>2.7.1 OOM</h3><h4 id="2-7-1-1-ä»€ä¹ˆæ˜¯OOM"><a href="#2-7-1-1-ä»€ä¹ˆæ˜¯OOM" class="headerlink" title="2.7.1.1 ä»€ä¹ˆæ˜¯OOM"></a>2.7.1.1 ä»€ä¹ˆæ˜¯OOM</h4><p>OOMï¼Œå…¨ç§°â€œOut Of Memoryâ€ï¼Œç¿»è¯‘æˆä¸­æ–‡å°±æ˜¯â€œå†…å­˜ç”¨å®Œäº†â€ï¼Œæ¥æºäºjava.lang.OutOfMemoryErrorã€‚çœ‹ä¸‹å…³äºçš„å®˜æ–¹è¯´æ˜ï¼š Thrown when the Java Virtual Machine cannot allocate an object because it is out of memory, and no more memory could be made available by the garbage collector. æ„æ€å°±æ˜¯è¯´ï¼Œå½“JVMå› ä¸ºæ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜æ¥ä¸ºå¯¹è±¡åˆ†é…ç©ºé—´å¹¶ä¸”åƒåœ¾å›æ”¶å™¨ä¹Ÿå·²ç»æ²¡æœ‰ç©ºé—´å¯å›æ”¶æ—¶ï¼Œå°±ä¼šæŠ›å‡ºè¿™ä¸ª<strong>error</strong>ï¼ˆæ³¨ï¼šéexceptionï¼Œå› ä¸ºè¿™ä¸ªé—®é¢˜å·²ç»ä¸¥é‡åˆ°ä¸è¶³ä»¥è¢«åº”ç”¨å¤„ç†ï¼‰ã€‚</p>
<h4 id="2-7-1-2-å“ªäº›åœ°æ–¹ä¼šå‘ç”ŸOOM"><a href="#2-7-1-2-å“ªäº›åœ°æ–¹ä¼šå‘ç”ŸOOM" class="headerlink" title="2.7.1.2 å“ªäº›åœ°æ–¹ä¼šå‘ç”ŸOOM"></a>2.7.1.2 å“ªäº›åœ°æ–¹ä¼šå‘ç”ŸOOM</h4><p>æŒ‰ç…§JVMè§„èŒƒï¼ŒJAVAè™šæ‹Ÿæœºåœ¨è¿è¡Œæ—¶ä¼šç®¡ç†ä»¥ä¸‹çš„å†…å­˜åŒºåŸŸï¼š</p>
<ul>
<li>JAVAè™šæ‹Ÿæœºæ ˆï¼šJavaæ–¹æ³•æ‰§è¡Œçš„å†…å­˜æ¨¡å‹ï¼Œæ¯ä¸ªJavaæ–¹æ³•çš„æ‰§è¡Œå¯¹åº”ç€ä¸€ä¸ªæ ˆå¸§çš„è¿›æ ˆå’Œå‡ºæ ˆçš„æ“ä½œã€‚</li>
<li>æœ¬åœ°æ–¹æ³•æ ˆï¼šç±»ä¼¼â€œ JAVAè™šæ‹Ÿæœºæ ˆ â€ï¼Œä½†æ˜¯ä¸ºnativeæ–¹æ³•çš„è¿è¡Œæä¾›å†…å­˜ç¯å¢ƒã€‚</li>
<li>JAVAå †ï¼šå¯¹è±¡å†…å­˜åˆ†é…çš„åœ°æ–¹ï¼Œå†…å­˜åƒåœ¾å›æ”¶çš„ä¸»è¦åŒºåŸŸï¼Œæ‰€æœ‰çº¿ç¨‹å…±äº«ã€‚å¯åˆ†ä¸ºæ–°ç”Ÿä»£ï¼Œè€ç”Ÿä»£ã€‚</li>
<li>æ–¹æ³•åŒºï¼šç”¨äºå­˜å‚¨å·²ç»è¢«JVMåŠ è½½çš„ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ç­‰æ•°æ®ã€‚Hotspotä¸­çš„â€œæ°¸ä¹…ä»£â€ã€‚</li>
<li>è¿è¡Œæ—¶å¸¸é‡æ± ï¼šæ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ï¼Œå­˜å‚¨å¸¸é‡ä¿¡æ¯ï¼Œå¦‚å„ç§å­—é¢é‡ã€ç¬¦å·å¼•ç”¨ç­‰ã€‚</li>
<li>ç›´æ¥å†…å­˜ï¼šå¹¶ä¸æ˜¯JVMè¿è¡Œæ—¶æ•°æ®åŒºçš„ä¸€éƒ¨åˆ†ï¼Œ å¯ç›´æ¥è®¿é—®çš„å†…å­˜ï¼Œ æ¯”å¦‚NIOä¼šç”¨åˆ°è¿™éƒ¨åˆ†ã€‚</li>
</ul>
<p>ç¨‹åºè®¡æ•°å™¨ï¼šå½“å‰çº¿ç¨‹æ‰§è¡Œçš„å­—èŠ‚ç çš„è¡Œå·æŒ‡ç¤ºå™¨ï¼Œçº¿ç¨‹ç§æœ‰ï¼ŒæŒ‰ç…§JVMè§„èŒƒï¼Œé™¤äº†ç¨‹åºè®¡æ•°å™¨ä¸ä¼šæŠ›å‡ºOOMå¤–ï¼Œå…¶ä»–å„ä¸ªå†…å­˜åŒºåŸŸéƒ½å¯èƒ½ä¼šæŠ›å‡ºOOMã€‚</p>
<h4 id="2-7-1-3-ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‘ç”ŸOOM"><a href="#2-7-1-3-ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‘ç”ŸOOM" class="headerlink" title="2.7.1.3 ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‘ç”ŸOOM"></a>2.7.1.3 ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‘ç”ŸOOM</h4><p><strong>å†…å­˜æ³„éœ²</strong>ï¼šç”³è¯·ä½¿ç”¨å®Œçš„å†…å­˜æ²¡æœ‰é‡Šæ”¾ï¼Œå¯¼è‡´è™šæ‹Ÿæœºä¸èƒ½å†æ¬¡ä½¿ç”¨è¯¥å†…å­˜ï¼Œæ­¤æ—¶è¿™æ®µå†…å­˜å°±æ³„éœ²äº†ï¼Œå› ä¸ºç”³è¯·è€…ä¸ç”¨äº†ï¼Œè€Œåˆä¸èƒ½è¢«è™šæ‹Ÿæœºåˆ†é…ç»™åˆ«äººç”¨ã€‚</p>
<p><strong>å†…å­˜æº¢å‡º</strong>ï¼šç”³è¯·çš„å†…å­˜è¶…å‡ºäº†JVMèƒ½æä¾›çš„å†…å­˜å¤§å°ï¼Œæ­¤æ—¶ç§°ä¹‹ä¸ºæº¢å‡ºã€‚</p>
<p><strong>è¶…å¤§å¯¹è±¡</strong>ï¼šé€šå¸¸æ˜¯ä¸€ä¸ªå¤§çš„æ•°ç»„</p>
<h4 id="2-7-1-4-è§£å†³åŠæ³•"><a href="#2-7-1-4-è§£å†³åŠæ³•" class="headerlink" title="2.7.1.4 è§£å†³åŠæ³•"></a>2.7.1.4 è§£å†³åŠæ³•</h4><ul>
<li>å¦‚æœæ˜¯è¶…å¤§å¯¹è±¡ï¼Œå¯ä»¥æ£€æŸ¥å…¶åˆç†æ€§ï¼Œæ¯”å¦‚æ˜¯å¦ä¸€æ¬¡æ€§æŸ¥è¯¢äº†æ•°æ®åº“å…¨éƒ¨ç»“æœï¼Œè€Œæ²¡æœ‰åšç»“æœæ•°é™åˆ¶</li>
<li>å¦‚æœæ˜¯ä¸šåŠ¡å³°å€¼å‹åŠ›ï¼Œå¯ä»¥è€ƒè™‘æ·»åŠ æœºå™¨èµ„æºï¼Œæˆ–è€…åšé™æµé™çº§ã€‚</li>
<li>å¦‚æœæ˜¯å†…å­˜æ³„æ¼ï¼Œéœ€è¦æ‰¾åˆ°æŒæœ‰çš„å¯¹è±¡ï¼Œä¿®æ”¹ä»£ç è®¾è®¡ï¼Œæ¯”å¦‚å…³é—­æ²¡æœ‰é‡Šæ”¾çš„è¿æ¥ã€‚</li>
<li>æ ¹æ®ä¸šåŠ¡åˆç†é…ç½®å †å†…å­˜å‚æ•°</li>
</ul>
<h3 id="2-7-2-StackOverFlow"><a href="#2-7-2-StackOverFlow" class="headerlink" title="2.7.2 StackOverFlow"></a>2.7.2 StackOverFlow</h3><h4 id="2-7-2-1-ä»€ä¹ˆæ˜¯StackOverFlow"><a href="#2-7-2-1-ä»€ä¹ˆæ˜¯StackOverFlow" class="headerlink" title="2.7.2.1 ä»€ä¹ˆæ˜¯StackOverFlow"></a>2.7.2.1 ä»€ä¹ˆæ˜¯StackOverFlow</h4><p>StackOverflowError æ˜¯ä¸€ä¸ªjavaä¸­å¸¸å‡ºç°çš„é”™è¯¯ï¼šåœ¨jvmè¿è¡Œæ—¶çš„æ•°æ®åŒºåŸŸä¸­æœ‰ä¸€ä¸ªjavaè™šæ‹Ÿæœºæ ˆï¼Œå½“æ‰§è¡Œjavaæ–¹æ³•æ—¶ä¼šè¿›è¡Œå‹æ ˆå¼¹æ ˆçš„æ“ä½œã€‚åœ¨æ ˆä¸­ä¼šä¿å­˜å±€éƒ¨å˜é‡ï¼Œæ“ä½œæ•°æ ˆï¼Œæ–¹æ³•å‡ºå£ç­‰ç­‰ã€‚jvmè§„å®šäº†æ ˆçš„æœ€å¤§æ·±åº¦ï¼Œå½“æ‰§è¡Œæ—¶æ ˆçš„æ·±åº¦å¤§äºäº†è§„å®šçš„æ·±åº¦ï¼Œå°±ä¼šæŠ›å‡ºStackOverflowErroré”™è¯¯ã€‚</p>
<h4 id="2-7-2-2-å“ªäº›åœ°æ–¹ä¼šå‘ç”ŸStackOverFlow"><a href="#2-7-2-2-å“ªäº›åœ°æ–¹ä¼šå‘ç”ŸStackOverFlow" class="headerlink" title="2.7.2.2 å“ªäº›åœ°æ–¹ä¼šå‘ç”ŸStackOverFlow"></a>2.7.2.2 å“ªäº›åœ°æ–¹ä¼šå‘ç”ŸStackOverFlow</h4><ul>
<li>è™šæ‹Ÿæœºæ ˆ/çº¿ç¨‹æ ˆ</li>
<li>æœ¬åœ°æ–¹æ³•æ ˆ</li>
</ul>
<h4 id="2-7-2-3-ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‘ç”ŸStackOverFlow"><a href="#2-7-2-3-ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‘ç”ŸStackOverFlow" class="headerlink" title="2.7.2.3 ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‘ç”ŸStackOverFlow"></a>2.7.2.3 ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‘ç”ŸStackOverFlow</h4><ul>
<li>æ— é™é€’å½’å¾ªç¯è°ƒç”¨ï¼ˆæœ€å¸¸è§ï¼‰ã€‚</li>
<li>æ‰§è¡Œäº†å¤§é‡æ–¹æ³•ï¼Œå¯¼è‡´çº¿ç¨‹æ ˆç©ºé—´è€—å°½ã€‚</li>
<li>æ–¹æ³•å†…å£°æ˜äº†æµ·é‡çš„å±€éƒ¨å˜é‡ã€‚</li>
<li>native ä»£ç æœ‰æ ˆä¸Šåˆ†é…çš„é€»è¾‘ï¼Œå¹¶ä¸”è¦æ±‚çš„å†…å­˜è¿˜ä¸å°ï¼Œæ¯”å¦‚ java.net.SocketInputStream.read0 ä¼šåœ¨æ ˆä¸Šè¦æ±‚åˆ†é…ä¸€ä¸ª 64KB çš„ç¼“å­˜ï¼ˆ64ä½ Linuxï¼‰ã€‚</li>
</ul>
<h4 id="2-7-2-4-è§£å†³åŠæ³•"><a href="#2-7-2-4-è§£å†³åŠæ³•" class="headerlink" title="2.7.2.4 è§£å†³åŠæ³•"></a>2.7.2.4 è§£å†³åŠæ³•</h4><p>å¸¸è§çš„è§£å†³æ–¹æ³•åŒ…æ‹¬ä»¥ä¸‹å‡ ç§ï¼š</p>
<ul>
<li>ä¿®å¤å¼•å‘æ— é™é€’å½’è°ƒç”¨çš„å¼‚å¸¸ä»£ç ï¼Œ é€šè¿‡ç¨‹åºæŠ›å‡ºçš„å¼‚å¸¸å †æ ˆï¼Œæ‰¾å‡ºä¸æ–­é‡å¤çš„ä»£ç è¡Œï¼ŒæŒ‰å›¾ç´¢éª¥ï¼Œä¿®å¤æ— é™é€’å½’ Bugã€‚</li>
<li>æ’æŸ¥æ˜¯å¦å­˜åœ¨ç±»ä¹‹é—´çš„å¾ªç¯ä¾èµ–ã€‚</li>
<li>æ’æŸ¥æ˜¯å¦å­˜åœ¨åœ¨ä¸€ä¸ªç±»ä¸­å¯¹å½“å‰ç±»è¿›è¡Œå®ä¾‹åŒ–ï¼Œå¹¶ä½œä¸ºè¯¥ç±»çš„å®ä¾‹å˜é‡ã€‚</li>
<li>é€šè¿‡ JVM å¯åŠ¨å‚æ•° -Xss å¢åŠ çº¿ç¨‹æ ˆå†…å­˜ç©ºé—´ï¼Œ æŸäº›æ­£å¸¸ä½¿ç”¨åœºæ™¯éœ€è¦æ‰§è¡Œå¤§é‡æ–¹æ³•æˆ–åŒ…å«å¤§é‡å±€éƒ¨å˜é‡ï¼Œè¿™æ—¶å¯ä»¥é€‚å½“åœ°æé«˜çº¿ç¨‹æ ˆç©ºé—´é™åˆ¶ï¼Œä¾‹å¦‚é€šè¿‡é…ç½® -Xss2m å°†çº¿ç¨‹æ ˆç©ºé—´è°ƒæ•´ä¸º 2 mbã€‚</li>
</ul>
<p>æ–¹æ³•åŒºæ˜¯å†…å­˜è¿ç»­çš„å—ï¼Ÿ</p>
<h1 id="3-Javaå†…å­˜åˆ†é…æœºåˆ¶"><a href="#3-Javaå†…å­˜åˆ†é…æœºåˆ¶" class="headerlink" title="3.Javaå†…å­˜åˆ†é…æœºåˆ¶"></a>3.Javaå†…å­˜åˆ†é…æœºåˆ¶</h1><p>ä»€ä¹ˆæ˜¯é€ƒé€¸åˆ†æ é»˜è®¤å¼€å¯</p>
<p>ä»€ä¹ˆæ˜¯æ ‡é‡æ›¿æ¢</p>
<p>å¯¹è±¡çš„å±æ€§æ‹†æ•£ æ ˆæ¡¢åªå­˜å‡ºå±æ€§ </p>
<p>å¯¹è±¡åˆ›å»ºåˆ†é…çš„å†…å­˜æ˜¯è¿ç»­çš„å—</p>
<p>ä¸Šé¢çš„ä¸¤ä¸ªä¾‹å­ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</p>
<p>å¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£ï¼Ÿä»€ä¹ˆæ˜¯å¤§å¯¹è±¡ï¼Ÿ</p>
<p>edenéƒ½æ”¾ä¸ä¸‹ ï¼Ÿæœ‰ä¸ªå‚æ•°å»æ§åˆ¶</p>
<p>ä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡ï¼Ÿ</p>
<p>æœ‰ä¸¤ç§åƒåœ¾æ”¶é›†å™¨æ”¯æŒæ”¶é›†å¤§å¯¹è±¡ series parNew</p>
<p>é•¿æœŸå­˜æ´»çš„å¯¹è±¡è¿›å…¥è€å¹´ä»£ï¼Ÿ</p>
<p>å¯¹è±¡åŠ¨æ€å¹´é¾„åˆ¤æ–­</p>
<p>å¦‚ä½•è®¾ç½®jvmå‚æ•°</p>
<p>å‚è€ƒå› ç´ ï¼šç³»ç»Ÿç¡¬ä»¶å‚æ•°  è¿˜è¦è€ƒè™‘å‹åŠ›å‚æ•° å¹¶å‘é‡</p>
<p>å¹´é¾„åŠ¨æ€åˆ¤æ–­æœºåˆ¶</p>
<p>ç©ºé—´æ‹…ä¿æœºåˆ¶</p>
<p>å¦‚ä½•åˆ¤æ–­å¯¹è±¡æ˜¯å¦æ˜¯åƒåœ¾ </p>
<p>å¼•ç”¨è®¡æ•°ç®—æ³• ä»¥åŠ å››ç§å¼•ç”¨</p>
<p><a target="_blank" rel="noopener" href="https://www.processon.com/view/5fb5d9e4e0b34d0d2241b8ac?fromnew=1">jvmç»“æ„</a></p>
<p><a target="_blank" rel="noopener" href="https://www.processon.com/view/5f781d8763768906e65d5b4d?fromnew=1">JVM æ·±å…¥ç†è§£Javaè™šæ‹Ÿæœº</a></p>
<p><strong><a target="_blank" rel="noopener" href="https://juejin.cn/post/6935362175322030088">JVM (ä¸‰)è¿è¡Œæ—¶æ•°æ®åŒº</a></strong></p>
</section>
    <!-- Tags START -->
    
      <div class="tags">
        <span>Tags:</span>
        
  <a href="/tags#JVM" >
    <span class="tag-code">JVM</span>
  </a>

      </div>
    
    <!-- Tags END -->
    <!-- NAV START -->
    
  <div class="nav-container">
    <!-- reverse left and right to put prev and next in a more logic postition -->
    
      <a class="nav-left" href="/wiki/%E5%B9%B6%E5%8F%91%E4%B8%AD%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98/">
        <span class="nav-arrow">â† </span>
        
          æ·±å…¥å­¦ä¹ å¹¶å‘ç¼–ç¨‹ï¼ˆå›¾çµ-æ¨è¿‡ï¼‰
        
      </a>
    
    
  </div>

    <!-- NAV END -->
    <!-- æ‰“èµ START -->
    
    <!-- æ‰“èµ END -->
    <!-- äºŒç»´ç  START -->
    
    <!-- äºŒç»´ç  END -->
    
      <!-- Utterances START -->
      <div id="utterances"></div>
      <script src="https://utteranc.es/client.js"
        repo=""
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async></script>    
      <!-- Utterances END -->
    
  </article>
  <!-- Article END -->
  <!-- Catalog START -->
  
    <aside class="catalog-container">
  <div class="toc-main">
    <strong class="toc-title">Catalog</strong>
    
      <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#1-%E4%BB%8EJDK%E6%BA%90%E7%A0%81%E5%89%96%E6%9E%90%E7%B1%BB%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6"><span class="toc-nav-text">1. ä»JDKæºç å‰–æç±»åŠ è½½æœºåˆ¶</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#1-1-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E7%B1%BB%E5%8A%A0%E8%BD%BD%EF%BC%9F"><span class="toc-nav-text">1.1 ä¸ºä»€ä¹ˆéœ€è¦ç±»åŠ è½½ï¼Ÿ</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#1-2-java%E4%BB%A3%E7%A0%81%E5%88%B0%E5%BA%95%E6%98%AF%E6%80%8E%E4%B9%88%E8%BF%90%E8%A1%8C%E7%9A%84%E5%91%A2"><span class="toc-nav-text">1.2 javaä»£ç åˆ°åº•æ˜¯æ€ä¹ˆè¿è¡Œçš„å‘¢</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#1-3-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E8%BF%87%E7%A8%8B%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-nav-text">1.3 ç±»åŠ è½½è¿‡ç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-3-1-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E7%9A%84%E6%B5%81%E7%A8%8B%E5%9B%BE"><span class="toc-nav-text">1.3.1 ç±»åŠ è½½çš„æµç¨‹å›¾</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-3-2-%E5%8A%A0%E8%BD%BD"><span class="toc-nav-text">1.3.2 åŠ è½½</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1-3-2-1-%E5%A6%82%E4%BD%95%E9%AA%8C%E8%AF%81%E7%B1%BB%E5%9C%A8%E7%94%A8%E5%88%B0%E7%9A%84%E6%97%B6%E5%80%99%E6%89%8D%E4%BC%9A%E5%8A%A0%E8%BD%BD"><span class="toc-nav-text">1.3.2.1 å¦‚ä½•éªŒè¯ç±»åœ¨ç”¨åˆ°çš„æ—¶å€™æ‰ä¼šåŠ è½½</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-3-3-%E9%AA%8C%E8%AF%81"><span class="toc-nav-text">1.3.3 éªŒè¯</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1-3-3-1-%E9%AA%8C%E8%AF%81%E7%9A%84%E7%9B%AE%E7%9A%84%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-nav-text">1.3.3.1 éªŒè¯çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-3-4-%E5%87%86%E5%A4%87"><span class="toc-nav-text">1.3.4 å‡†å¤‡</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-3-5-%E8%A7%A3%E6%9E%90"><span class="toc-nav-text">1.3.5 è§£æ</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1-3-5-1-%E4%BB%80%E4%B9%88%E6%98%AF%E9%9D%99%E6%80%81%E9%93%BE%E6%8E%A5%EF%BD%9C%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5%EF%BC%9F"><span class="toc-nav-text">1.3.5.1 ä»€ä¹ˆæ˜¯é™æ€é“¾æ¥ï½œåŠ¨æ€é“¾æ¥ï¼Ÿ</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-3-6-%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-nav-text">1.3.6 åˆå§‹åŒ–</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-3-6-1-%E5%88%9D%E5%A7%8B%E5%8C%96%E9%A1%BA%E5%BA%8F"><span class="toc-nav-text">1.3.6.1 åˆå§‹åŒ–é¡ºåº</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#1-4-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8"><span class="toc-nav-text">1.4 ç±»åŠ è½½å™¨</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-4-1-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E7%A7%8D%E7%B1%BB"><span class="toc-nav-text">1.4.1 ç±»åŠ è½½å™¨ç§ç±»</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1-4-1-1-%E5%A6%82%E4%BD%95%E9%AA%8C%E8%AF%81%E5%8A%A0%E8%BD%BD%E7%9A%84path"><span class="toc-nav-text">1.4.1.1 å¦‚ä½•éªŒè¯åŠ è½½çš„path</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-4-2-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-nav-text">1.4.2 ç±»åŠ è½½å™¨ä¹‹é—´çš„å…³ç³»</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-4-3-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E5%88%9B%E5%BB%BA%E7%9A%84"><span class="toc-nav-text">1.4.3 ç±»åŠ è½½å™¨ä»€ä¹ˆæ—¶å€™åˆ›å»ºçš„</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#1-5-%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE%E6%9C%BA%E5%88%B6"><span class="toc-nav-text">1.5 åŒäº²å§”æ´¾æœºåˆ¶</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-5-1-%E4%BB%80%E4%B9%88%E6%98%AF%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE%EF%BC%9F"><span class="toc-nav-text">1.5.1 ä»€ä¹ˆæ˜¯åŒäº²å§”æ´¾ï¼Ÿ</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-5-2-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE%EF%BC%9F"><span class="toc-nav-text">1.5.2 ä¸ºä»€ä¹ˆéœ€è¦åŒäº²å§”æ´¾ï¼Ÿ</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1-5-2-1-%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9A%84-java-lang-String%E8%83%BD%E5%90%A6%E8%A2%AB%E5%8A%A0%E8%BD%BD"><span class="toc-nav-text">1.5.2.1 è‡ªå®šä¹‰çš„ java.lang.Stringèƒ½å¦è¢«åŠ è½½</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1-5-2-2-%E4%B8%BA%E4%BB%80%E4%B9%88%E5%8A%A0%E8%BD%BD%E5%85%88%E6%98%AF%E5%9C%A8app%E5%8A%A0%E8%BD%BD%E5%99%A8%E8%80%8C%E4%B8%8D%E6%98%AFbootstrap%E5%8A%A0%E8%BD%BD%E5%99%A8%EF%BC%9F"><span class="toc-nav-text">1.5.2.2 ä¸ºä»€ä¹ˆåŠ è½½å…ˆæ˜¯åœ¨appåŠ è½½å™¨è€Œä¸æ˜¯bootstrapåŠ è½½å™¨ï¼Ÿ</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-5-3-%E5%A6%82%E4%BD%95%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8"><span class="toc-nav-text">1.5.3 å¦‚ä½•è‡ªå®šä¹‰ç±»åŠ è½½å™¨</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-5-4-%E5%A6%82%E4%BD%95%E6%89%93%E7%A0%B4%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE"><span class="toc-nav-text">1.5.4 å¦‚ä½•æ‰“ç ´åŒäº²å§”æ´¾</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1-5-4-1-%E4%BB%80%E4%B9%88%E6%98%AF%E6%89%93%E7%A0%B4%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE"><span class="toc-nav-text">1.5.4.1 ä»€ä¹ˆæ˜¯æ‰“ç ´åŒäº²å§”æ´¾</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1-5-4-2-%E5%A6%82%E4%BD%95%E6%89%93%E7%A0%B4"><span class="toc-nav-text">1.5.4.2 å¦‚ä½•æ‰“ç ´</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-5-5-Tomcat%E6%89%93%E7%A0%B4%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE%EF%BC%9F"><span class="toc-nav-text">1.5.5 Tomcatæ‰“ç ´åŒäº²å§”æ´¾ï¼Ÿ</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1-5-5-1-Tomcat-%E5%A6%82%E6%9E%9C%E4%BD%BF%E7%94%A8%E9%BB%98%E8%AE%A4%E7%9A%84%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE%E7%B1%BB%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6%E8%A1%8C%E4%B8%8D%E8%A1%8C"><span class="toc-nav-text">1.5.5.1 Tomcat å¦‚æœä½¿ç”¨é»˜è®¤çš„åŒäº²å§”æ´¾ç±»åŠ è½½æœºåˆ¶è¡Œä¸è¡Œ?</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1-5-5-2-Tomcat%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E4%BD%BF%E7%94%A8%E9%BB%98%E8%AE%A4%E7%9A%84%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE"><span class="toc-nav-text">1.5.5.2 Tomcatä¸ºä»€ä¹ˆä¸ä½¿ç”¨é»˜è®¤çš„åŒäº²å§”æ´¾</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1-5-5-3-tomcat%E7%B1%BB%E5%8A%A0%E8%BD%BD%E6%B5%81%E7%A8%8B"><span class="toc-nav-text">1.5.5.3 tomcatç±»åŠ è½½æµç¨‹</span></a></li></ol></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#2-JVM%E6%95%B4%E4%BD%93%E7%BB%93%E6%9E%84%E7%9A%84%E6%B7%B1%E5%BA%A6%E5%89%96%E6%9E%90"><span class="toc-nav-text">2. JVMæ•´ä½“ç»“æ„çš„æ·±åº¦å‰–æ</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#2-1-JVM%E6%95%B4%E4%BD%93%E7%BB%93%E6%9E%84%E5%9B%BE"><span class="toc-nav-text">2.1 JVMæ•´ä½“ç»“æ„å›¾</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#2-2-%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%A0%88"><span class="toc-nav-text">2.2 è™šæ‹Ÿæœºæ ˆ</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#2-2-1-%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E8%A1%A8"><span class="toc-nav-text">2.2.1 å±€éƒ¨å˜é‡è¡¨</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#2-2-1-1-%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E8%A1%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E6%80%8E%E4%B9%88%E5%AD%98%E5%82%A8%E7%9A%84%EF%BC%9F"><span class="toc-nav-text">2.2.1.1 å±€éƒ¨å˜é‡è¡¨çš„æ•°æ®æ€ä¹ˆå­˜å‚¨çš„ï¼Ÿ</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#2-2-1-2-Slot%E6%A7%BD%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-nav-text">2.2.1.2 Slotæ§½çš„ç‰¹ç‚¹</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#2-2-1-3-Slot%E6%A7%BD%E7%9A%84%E9%87%8D%E5%A4%8D%E5%88%A9%E7%94%A8"><span class="toc-nav-text">2.2.1.3 Slotæ§½çš„é‡å¤åˆ©ç”¨</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#2-2-2-%E6%93%8D%E4%BD%9C%E6%95%B0%E6%A0%88"><span class="toc-nav-text">2.2.2 æ“ä½œæ•°æ ˆ</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#2-2-2-1-%E4%BB%80%E4%B9%88%E6%98%AF%E6%93%8D%E4%BD%9C%E6%95%B0%E6%A0%88"><span class="toc-nav-text">2.2.2.1 ä»€ä¹ˆæ˜¯æ“ä½œæ•°æ ˆ</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#2-2-2-2-%E6%93%8D%E4%BD%9C%E6%95%B0%E6%A0%88%E6%9C%89%E4%BB%80%E4%B9%88%E7%89%B9%E7%82%B9"><span class="toc-nav-text">2.2.2.2 æ“ä½œæ•°æ ˆæœ‰ä»€ä¹ˆç‰¹ç‚¹</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#2-2-3-%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5"><span class="toc-nav-text">2.2.3 åŠ¨æ€é“¾æ¥</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#2-2-3-1-%E4%BB%80%E4%B9%88%E6%98%AF%E9%9D%99%E6%80%81%E9%93%BE%E6%8E%A5%EF%BD%9C%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5"><span class="toc-nav-text">2.2.3.1 ä»€ä¹ˆæ˜¯é™æ€é“¾æ¥ï½œåŠ¨æ€é“¾æ¥</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#2-2-3-2-%E4%BB%80%E4%B9%88%E6%98%AF%E7%BB%91%E5%AE%9A%EF%BC%9F"><span class="toc-nav-text">2.2.3.2 ä»€ä¹ˆæ˜¯ç»‘å®šï¼Ÿ</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#2-2-3-3-%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8%E6%98%AF%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0%E7%9A%84"><span class="toc-nav-text">2.2.3.3 æ–¹æ³•è°ƒç”¨æ˜¯æ€ä¹ˆå®ç°çš„</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#2-2-4-%E6%96%B9%E6%B3%95%E5%87%BA%E5%8F%A3"><span class="toc-nav-text">2.2.4 æ–¹æ³•å‡ºå£</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#2-2-%E7%A8%8B%E5%BA%8F%E8%AE%A1%E6%95%B0%E5%99%A8"><span class="toc-nav-text">2.2 ç¨‹åºè®¡æ•°å™¨</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#2-3-%E6%9C%AC%E5%9C%B0%E6%96%B9%E6%B3%95%E6%A0%88"><span class="toc-nav-text">2.3 æœ¬åœ°æ–¹æ³•æ ˆ</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#2-4-%E6%96%B9%E6%B3%95%E5%8C%BA"><span class="toc-nav-text">2.4 æ–¹æ³•åŒº</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#2-4-1-%E4%BB%80%E4%B9%88%E6%98%AF%E6%96%B9%E6%B3%95%E5%8C%BA"><span class="toc-nav-text">2.4.1 ä»€ä¹ˆæ˜¯æ–¹æ³•åŒº</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#2-4-2-%E6%96%B9%E6%B3%95%E5%8C%BA%E7%9A%84%E5%8F%82%E6%95%B0%E9%85%8D%E7%BD%AE"><span class="toc-nav-text">2.4.2 æ–¹æ³•åŒºçš„å‚æ•°é…ç½®</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#2-5-%E5%A0%86"><span class="toc-nav-text">2.5 å †</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#2-5-1-%E5%A0%86%E7%9A%84%E5%88%86%E5%8C%BA%E7%BB%93%E6%9E%84"><span class="toc-nav-text">2.5.1 å †çš„åˆ†åŒºç»“æ„</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#2-5-2-%E4%B8%BA%E4%BB%80%E4%B9%88eden%E5%92%8Cservice%E7%9A%84%E9%85%8D%E6%AF%94%E6%98%AF8-1"><span class="toc-nav-text">2.5.2 ä¸ºä»€ä¹ˆedenå’Œserviceçš„é…æ¯”æ˜¯8:1</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#2-5-3-%E4%BB%80%E4%B9%88%E6%98%AF%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6"><span class="toc-nav-text">2.5.3 ä»€ä¹ˆæ˜¯åƒåœ¾å›æ”¶</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#2-5-4-%E5%A4%A7%E5%90%8D%E9%BC%8E%E9%BC%8E%E7%9A%84STW"><span class="toc-nav-text">2.5.4 å¤§åé¼é¼çš„STW</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#2-5-4-1-%E4%BB%80%E4%B9%88%E6%98%AFstw%EF%BC%9F"><span class="toc-nav-text">2.5.4.1 ä»€ä¹ˆæ˜¯stwï¼Ÿ</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#2-5-4-2-%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BC%9A%E6%9C%89stw%EF%BC%9F"><span class="toc-nav-text">2.5.4.2 ä¸ºä»€ä¹ˆä¼šæœ‰stwï¼Ÿ</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#2-6-%E7%9B%B4%E6%8E%A5%E5%86%85%E5%AD%98"><span class="toc-nav-text">2.6 ç›´æ¥å†…å­˜</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#2-7-%E8%BF%90%E8%A1%8C%E6%97%B6%E9%94%99%E8%AF%AF"><span class="toc-nav-text">2.7 è¿è¡Œæ—¶é”™è¯¯</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#2-7-1-OOM"><span class="toc-nav-text">2.7.1 OOM</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#2-7-1-1-%E4%BB%80%E4%B9%88%E6%98%AFOOM"><span class="toc-nav-text">2.7.1.1 ä»€ä¹ˆæ˜¯OOM</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#2-7-1-2-%E5%93%AA%E4%BA%9B%E5%9C%B0%E6%96%B9%E4%BC%9A%E5%8F%91%E7%94%9FOOM"><span class="toc-nav-text">2.7.1.2 å“ªäº›åœ°æ–¹ä¼šå‘ç”ŸOOM</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#2-7-1-3-%E4%BB%80%E4%B9%88%E6%83%85%E5%86%B5%E4%B8%8B%E4%BC%9A%E5%8F%91%E7%94%9FOOM"><span class="toc-nav-text">2.7.1.3 ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‘ç”ŸOOM</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#2-7-1-4-%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95"><span class="toc-nav-text">2.7.1.4 è§£å†³åŠæ³•</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#2-7-2-StackOverFlow"><span class="toc-nav-text">2.7.2 StackOverFlow</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#2-7-2-1-%E4%BB%80%E4%B9%88%E6%98%AFStackOverFlow"><span class="toc-nav-text">2.7.2.1 ä»€ä¹ˆæ˜¯StackOverFlow</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#2-7-2-2-%E5%93%AA%E4%BA%9B%E5%9C%B0%E6%96%B9%E4%BC%9A%E5%8F%91%E7%94%9FStackOverFlow"><span class="toc-nav-text">2.7.2.2 å“ªäº›åœ°æ–¹ä¼šå‘ç”ŸStackOverFlow</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#2-7-2-3-%E4%BB%80%E4%B9%88%E6%83%85%E5%86%B5%E4%B8%8B%E4%BC%9A%E5%8F%91%E7%94%9FStackOverFlow"><span class="toc-nav-text">2.7.2.3 ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‘ç”ŸStackOverFlow</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#2-7-2-4-%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95"><span class="toc-nav-text">2.7.2.4 è§£å†³åŠæ³•</span></a></li></ol></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#3-Java%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E6%9C%BA%E5%88%B6"><span class="toc-nav-text">3.Javaå†…å­˜åˆ†é…æœºåˆ¶</span></a></li></ol>
    
  </div>
</aside>
  
  <!-- Catalog END -->
</main>

<script>
  (function () {
    var url = 'http://example.com/wiki/æ·±å…¥å­¦ä¹ jvmï¼ˆå›¾çµ-è¯¸è‘›ï¼‰/';
    var banner = ''
    if (banner !== '' && banner !== 'undefined' && banner !== 'null') {
      $('#article-banner').css({
        'background-image': 'url(' + banner + ')'
      })
    } else {
      $('#article-banner').geopattern(url)
    }
    $('.header').removeClass('fixed-header')

    // error image
    $(".markdown-content img").on('error', function() {
      $(this).attr('src', '/css/images/error_icon.png')
      $(this).css({
        'cursor': 'default'
      })
    })

    // zoom image
    $(".markdown-content img").on('click', function() {
      var src = $(this).attr('src')
      if (src !== '/css/images/error_icon.png') {
        var imageW = $(this).width()
        var imageH = $(this).height()

        var zoom = ($(window).width() * 0.95 / imageW).toFixed(2)
        zoom = zoom < 1 ? 1 : zoom
        zoom = zoom > 2 ? 2 : zoom
        var transY = (($(window).height() - imageH) / 2).toFixed(2)

        $('body').append('<div class="image-view-wrap"><div class="image-view-inner"><img src="'+ src +'" /></div></div>')
        $('.image-view-wrap').addClass('wrap-active')
        $('.image-view-wrap img').css({
          'width': `${imageW}`,
          'transform': `translate3d(0, ${transY}px, 0) scale3d(${zoom}, ${zoom}, 1)`
        })
        $('html').css('overflow', 'hidden')

        $('.image-view-wrap').on('click', function() {
          $(this).remove()
          $('html').attr('style', '')
        })
      }
    })
  })();
</script>







    <div class="scroll-top">
  <span class="arrow-icon"></span>
</div>
    <footer class="app-footer">
  <p class="copyright">
    &copy; 2022 | Proudly powered by <a href="https://hexo.io" target="_blank">Hexo</a>
    <br>
    Theme by <a target="_blank" rel="noopener" href="https://github.com/yanm1ng">yanm1ng</a>
  </p>
</footer>

<script>
  function async(u, c) {
    var d = document, t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
    s.parentNode.insertBefore(o, s);
  }
</script>
<script>
  async("//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js", function(){
    FastClick.attach(document.body);
  })
</script>

<script>
  var hasLine = 'true';
  async("//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js", function(){
    $('figure pre').each(function(i, block) {
      var figure = $(this).parents('figure');
      if (hasLine === 'false') {
        figure.find('.gutter').hide();
      }
      hljs.configure({useBR: true});
      var lang = figure.attr('class').split(' ')[1] || 'code';
      var codeHtml = $(this).html();
      var codeTag = document.createElement('code');
      codeTag.className = lang;
      codeTag.innerHTML = codeHtml;
      $(this).attr('class', '').empty().html(codeTag);
      figure.attr('data-lang', lang.toUpperCase());
      hljs.highlightBlock(block);
    });
  })
</script>
<!-- Baidu Tongji -->


<script src="/js/script.js"></script>


  </body>
</html>